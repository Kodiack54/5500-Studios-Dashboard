{"version":3,"sources":["../../../../src/app/servers/portals/components/PortalsTable.tsx","../../../../src/app/servers/portals/components/PortalActions.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useState } from 'react';\r\nimport PortalActions from './PortalActions';\r\n\r\ninterface Portal {\r\n  id: string;\r\n  name: string;\r\n  company_id: string;\r\n  company_name?: string;\r\n  platform: string;\r\n  status: string;\r\n  tradelines?: string[];\r\n  users_count?: number;\r\n  created_at?: string;\r\n}\r\n\r\ninterface PortalsTableProps {\r\n  portals: Portal[];\r\n  health: Record<string, any>;\r\n}\r\n\r\nexport default function PortalsTable({ portals, health }: PortalsTableProps) {\r\n  const [filter, setFilter] = useState<'all' | 'active' | 'inactive'>('all');\r\n  const [search, setSearch] = useState('');\r\n\r\n  const filteredPortals = portals.filter((p) => {\r\n    if (filter !== 'all' && p.status !== filter) return false;\r\n    if (search && !p.name.toLowerCase().includes(search.toLowerCase()) &&\r\n        !p.company_name?.toLowerCase().includes(search.toLowerCase())) {\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      {/* Filters */}\r\n      <div className=\"flex items-center gap-4 mb-6\">\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={() => setFilter('all')}\r\n            className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${\r\n              filter === 'all'\r\n                ? 'bg-blue-500 text-white'\r\n                : 'bg-gray-800 text-gray-400 hover:text-white border border-gray-700'\r\n            }`}\r\n          >\r\n            All\r\n          </button>\r\n          <button\r\n            onClick={() => setFilter('active')}\r\n            className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${\r\n              filter === 'active'\r\n                ? 'bg-green-500 text-white'\r\n                : 'bg-gray-800 text-gray-400 hover:text-white border border-gray-700'\r\n            }`}\r\n          >\r\n            Active\r\n          </button>\r\n          <button\r\n            onClick={() => setFilter('inactive')}\r\n            className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${\r\n              filter === 'inactive'\r\n                ? 'bg-gray-500 text-white'\r\n                : 'bg-gray-800 text-gray-400 hover:text-white border border-gray-700'\r\n            }`}\r\n          >\r\n            Inactive\r\n          </button>\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search portals...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          className=\"flex-1 max-w-xs bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-sm text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none\"\r\n        />\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden\">\r\n        <table className=\"w-full\">\r\n          <thead>\r\n            <tr className=\"bg-black/30 border-b border-gray-700\">\r\n              <th className=\"px-4 py-3 text-left text-xs uppercase text-gray-500 font-medium\">Portal</th>\r\n              <th className=\"px-4 py-3 text-left text-xs uppercase text-gray-500 font-medium\">Company</th>\r\n              <th className=\"px-4 py-3 text-left text-xs uppercase text-gray-500 font-medium\">Platform</th>\r\n              <th className=\"px-4 py-3 text-left text-xs uppercase text-gray-500 font-medium\">Tradelines</th>\r\n              <th className=\"px-4 py-3 text-left text-xs uppercase text-gray-500 font-medium\">Users</th>\r\n              <th className=\"px-4 py-3 text-left text-xs uppercase text-gray-500 font-medium\">Status</th>\r\n              <th className=\"px-4 py-3 text-right text-xs uppercase text-gray-500 font-medium\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredPortals.map((portal) => {\r\n              const portalHealth = health[portal.id] || {};\r\n\r\n              return (\r\n                <tr key={portal.id} className=\"border-b border-gray-700 hover:bg-blue-500/5\">\r\n                  <td className=\"px-4 py-3\">\r\n                    <Link\r\n                      href={`/servers/portals/${portal.id}`}\r\n                      className=\"font-medium text-white hover:text-blue-400 transition-colors\"\r\n                    >\r\n                      {portal.name}\r\n                    </Link>\r\n                    <div className=\"text-xs text-gray-500\">{portal.id}</div>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-gray-400\">\r\n                    {portal.company_name || portal.company_id}\r\n                  </td>\r\n                  <td className=\"px-4 py-3\">\r\n                    <span className=\"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded\">\r\n                      {portal.platform}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-3\">\r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                      {portal.tradelines?.slice(0, 3).map((t) => (\r\n                        <span key={t} className=\"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded\">\r\n                          {t}\r\n                        </span>\r\n                      ))}\r\n                      {(portal.tradelines?.length || 0) > 3 && (\r\n                        <span className=\"text-xs text-gray-500\">\r\n                          +{(portal.tradelines?.length || 0) - 3}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-gray-400\">\r\n                    {portal.users_count || 0}\r\n                  </td>\r\n                  <td className=\"px-4 py-3\">\r\n                    <span className={`text-xs font-semibold px-2 py-1 rounded ${\r\n                      portal.status === 'active'\r\n                        ? 'bg-green-500/20 text-green-400'\r\n                        : 'bg-gray-700 text-gray-400'\r\n                    }`}>\r\n                      {portal.status}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-right\">\r\n                    <PortalActions portal={portal} />\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n\r\n        {filteredPortals.length === 0 && (\r\n          <div className=\"text-center py-12 text-gray-500\">\r\n            No portals found\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useState } from 'react';\r\n\r\ninterface PortalActionsProps {\r\n  portal: {\r\n    id: string;\r\n    name: string;\r\n    status: string;\r\n  };\r\n}\r\n\r\nexport default function PortalActions({ portal }: PortalActionsProps) {\r\n  const [loading, setLoading] = useState<string | null>(null);\r\n\r\n  const handleAction = async (action: string) => {\r\n    setLoading(action);\r\n\r\n    try {\r\n      const res = await fetch(`/api/portals/${action}/${portal.id}`, { method: 'POST' });\r\n      const result = await res.json();\r\n\r\n      if (result.success) {\r\n        window.location.reload();\r\n      } else {\r\n        alert(result.error || 'Action failed');\r\n      }\r\n    } catch (e) {\r\n      alert((e as Error).message);\r\n    } finally {\r\n      setLoading(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex justify-end gap-2\">\r\n      <Link\r\n        href={`/servers/portals/${portal.id}`}\r\n        className=\"px-3 py-1 text-xs font-semibold rounded bg-blue-500/15 text-blue-400 border border-blue-500/30 hover:bg-blue-500 hover:text-white transition-colors\"\r\n      >\r\n        View\r\n      </Link>\r\n      <button\r\n        onClick={() => handleAction('deploy')}\r\n        disabled={loading !== null}\r\n        className=\"px-3 py-1 text-xs font-semibold rounded bg-green-500/15 text-green-400 border border-green-500/30 hover:bg-green-500 hover:text-white transition-colors disabled:opacity-50\"\r\n      >\r\n        {loading === 'deploy' ? '...' : 'Deploy'}\r\n      </button>\r\n      <Link\r\n        href={`/servers/portals/credentials?portal=${portal.id}`}\r\n        className=\"px-3 py-1 text-xs font-semibold rounded bg-purple-500/15 text-purple-400 border border-purple-500/30 hover:bg-purple-500 hover:text-white transition-colors\"\r\n      >\r\n        Creds\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCUe,SAAS,EAAc,QAAE,CAAM,CAAsB,EAClE,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAEhD,EAAe,MAAO,IAC1B,EAAW,GAEX,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAC,aAAa,EAAE,EAAO,CAAC,EAAE,EAAO,EAAE,CAAA,CAAE,CAAE,CAAE,OAAQ,MAAO,GAC1E,EAAS,MAAM,EAAI,IAAI,GAEzB,EAAO,OAAO,CAChB,CADkB,MACX,QAAQ,CAAC,MAAM,GAEtB,MAAM,EAAO,KAAK,EAAI,gBAE1B,CAAE,MAAO,EAAG,CACV,MAAO,EAAY,OAAO,CAC5B,QAAU,CACR,EAAW,KACb,CACF,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAM,CAAC,iBAAiB,EAAE,EAAO,EAAE,CAAA,CAAE,CACrC,UAAU,+JACX,SAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAa,UAC5B,SAAsB,OAAZ,EACV,UAAU,uLAEG,WAAZ,EAAuB,MAAQ,WAElC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAM,CAAC,oCAAoC,EAAE,EAAO,EAAE,CAAA,CAAE,CACxD,UAAU,uKACX,YAKP,CDnCe,SAAS,EAAa,SAAE,CAAO,QAAE,CAAM,CAAqB,EACzE,GAAM,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgC,OAC9D,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAE/B,EAAkB,EAAQ,MAAM,CAAC,AAAC,IAClC,AAAW,WAAS,EAAE,MAAM,GAAK,CAAA,GAAQ,EACzC,IAAU,CADsC,AACrC,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,EAAO,WAAW,MAC3D,CAAC,EAAE,YAAY,EAAE,cAAc,SAAS,EAAO,WAAW,GAAA,GAAK,AAMrE,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAEC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAU,OACzB,UAAW,CAAC,6DAA6D,EAC5D,QAAX,EACI,yBACA,oEAAA,CACJ,UACH,QAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAU,UACzB,UAAW,CAAC,6DAA6D,EAC5D,WAAX,EACI,0BACA,oEAAA,CACJ,UACH,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAU,YACzB,UAAW,CAAC,6DAA6D,EAC5D,aAAX,EACI,yBACA,oEAAA,CACJ,UACH,gBAIH,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,oBACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAU,EAAE,MAAM,CAAC,KAAK,EACzC,UAAU,gKAKd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,mBACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,iDACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2EAAkE,WAChF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2EAAkE,YAChF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2EAAkE,aAChF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2EAAkE,eAChF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2EAAkE,UAChF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2EAAkE,WAChF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4EAAmE,iBAGrF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,EAAgB,GAAG,CAAC,AAAC,IACC,CAAM,CAAC,EAAO,EAAE,CAAC,CAGpC,CAAA,EAAA,AAHwC,CAAC,CAGzC,IAAA,EAAC,KAAA,CAAmB,UAAU,yDAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,sBACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAM,CAAC,iBAAiB,EAAE,EAAO,EAAE,CAAA,CAAE,CACrC,UAAU,wEAET,EAAO,IAAI,GAEd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,EAAO,EAAE,MAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCACX,EAAO,YAAY,EAAI,EAAO,UAAU,GAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+DACb,EAAO,QAAQ,KAGpB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,EAAO,UAAU,EAAE,MAAM,EAAG,GAAG,IAAI,AAAC,GACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAa,UAAU,oEACrB,GADQ,IAIZ,CAAC,EAAO,UAAU,EAAE,SAAU,CAAC,CAAI,GAClC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,kCAAwB,IACpC,CAAC,EAAO,UAAU,EAAE,SAAU,CAAC,CAAI,UAK7C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCACX,EAAO,WAAW,EAAI,IAEzB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,wCAAwC,EACtC,WAAlB,EAAO,MAAM,CACT,iCACA,4BAAA,CACJ,UACC,EAAO,MAAM,KAGlB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAc,OAAQ,QA7ClB,EAAO,EAAE,SAqDE,IAA3B,EAAgB,MAAM,EACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CAAkC,0BAO3D"}