{"version":3,"sources":["../../../../src/app/servers/tradelines/components/TradelinesClient.tsx","../../../../src/app/servers/tradelines/components/ServerListItem.tsx","../../../../src/app/servers/tradelines/components/ServerDetailPanel.tsx","../../../../src/app/servers/tradelines/components/ServerStatsPanel.tsx","../../../../src/app/servers/tradelines/components/LiveFeedPanel.tsx","../../../../src/app/servers/tradelines/components/TerminalPanel.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport { PageTitleContext, PageActionsContext } from '@/app/layout';\r\nimport ServerListItem from './ServerListItem';\r\nimport ServerDetailPanel from './ServerDetailPanel';\r\nimport ServerStatsPanel from './ServerStatsPanel';\r\nimport LiveFeedPanel from './LiveFeedPanel';\r\nimport TerminalPanel from './TerminalPanel';\r\n\r\ninterface Process {\r\n  name: string;\r\n  pm_id: number;\r\n  status: string;\r\n  memory: number;\r\n  cpu: number;\r\n}\r\n\r\ninterface Tradeline {\r\n  name: string;\r\n  displayName: string;\r\n  ports?: {\r\n    main: number;\r\n    worker1?: number;\r\n    worker2?: number;\r\n    worker3?: number;\r\n    worker4?: number;\r\n  };\r\n}\r\n\r\ninterface TradelineHealth {\n  status?: string;\n  online?: number;\n  total?: number;\n  port?: number;\n  slotId?: string;\n  processes?: Process[];\n}\r\n\r\ninterface TradelineAnalytics {\r\n  name: string;\r\n  storageBytes: number;\r\n  storage: string;\r\n  documents: number;\r\n  opportunities: number;\r\n}\r\n\r\ninterface AnalyticsData {\r\n  tradelines?: TradelineAnalytics[];\r\n}\r\n\r\ninterface TradelinesClientProps {\r\n  tradelines: Tradeline[];\r\n  healthAll: {\r\n    tradelines?: Record<string, TradelineHealth>;\r\n  };\r\n  analytics: AnalyticsData | null;\r\n  initialError: string | null;\r\n}\r\n\r\ntype WorkerType = 'main' | 'w1' | 'w2' | 'w3' | 'w4';\r\n\r\n// Worker tab definitions - suffix is computed dynamically from slotId\nconst WORKER_TAB_DEFS: { id: WorkerType; label: string; offset: number }[] = [\n  { id: 'main', label: 'Engine', offset: 0 },\n  { id: 'w1', label: 'Discovery', offset: 1 },\n  { id: 'w2', label: 'Scope', offset: 2 },\n  { id: 'w3', label: 'Research', offset: 3 },\n  { id: 'w4', label: 'Assistant', offset: 4 },\n];\n\n// Get worker tabs with dynamic suffix based on selected tradeline's slotId\nfunction getWorkerTabs(slotId: string | undefined): { id: WorkerType; label: string; suffix: string }[] {\n  const slot = slotId || '00';\n  return WORKER_TAB_DEFS.map(tab => ({\n    id: tab.id,\n    label: tab.label,\n    suffix: tab.offset === 0 ? slot : `${tab.offset}${slot}`,\n  }));\n}\r\n\r\nexport default function TradelinesClient({ tradelines, healthAll, analytics, initialError }: TradelinesClientProps) {\r\n  const [error, setError] = useState<string | null>(initialError);\r\n  const [selectedTradeline, setSelectedTradeline] = useState<Tradeline | null>(\r\n    tradelines.length > 0 ? tradelines[0] : null\r\n  );\r\n  const [activeTab, setActiveTab] = useState<'feed' | 'terminal'>('feed');\r\n  const [activeWorker, setActiveWorker] = useState<WorkerType>('main');\r\n\r\n  const setPageTitle = useContext(PageTitleContext);\r\n  const setPageActions = useContext(PageActionsContext);\r\n\r\n  // Set page title\r\n  useEffect(() => {\r\n    setPageTitle({\r\n      title: 'Tradeline Servers',\r\n      description: '7101 - NextBid Engine Patcher - Manage all 20 tradeline servers',\r\n    });\r\n\r\n    // No bulk actions in header anymore - moved to sidebar\r\n    setPageActions(null);\r\n\r\n    return () => setPageActions(null);\r\n  }, [setPageTitle, setPageActions]);\r\n\r\n  // Get health for selected tradeline\r\n  const getHealth = (name: string): TradelineHealth => {\r\n    return healthAll.tradelines?.[name] || { status: 'stopped', online: 0, total: 4, processes: [] };\r\n  };\r\n\r\n  // Get analytics for a tradeline (storage, docs, ops)\r\n  const getAnalytics = (name: string): TradelineAnalytics | null => {\r\n    return analytics?.tradelines?.find(t => t.name === name) || null;\r\n  };\r\n\r\n  const selectedHealth = selectedTradeline ? getHealth(selectedTradeline.name) : null;\r\n  const selectedPort = selectedTradeline?.ports?.main || 0;\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col -mt-4 overflow-hidden\">\r\n      {/* Error Alert */}\r\n      {error && (\r\n        <div className=\"flex-shrink-0 bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mx-4 mb-4\">\r\n          <strong>Error:</strong> {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Top Row: Server List (3/4) + Stats Panel (1/4) */}\r\n      <div className=\"flex-shrink-0 flex gap-4 mx-4\">\r\n        {/* Server List - 3/4 width, fixed height */}\r\n        <div className=\"w-3/4 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden h-[280px] flex flex-col\">\r\n          <div className=\"flex-shrink-0 bg-black/30 px-4 py-2 border-b border-gray-700 flex items-center justify-between\">\r\n            <h3 className=\"text-xs uppercase text-gray-500 font-medium tracking-wide\">\r\n              Tradeline Servers ({tradelines.length})\r\n            </h3>\r\n            <div className=\"flex items-center gap-4 text-xs text-gray-500\">\r\n              <span className=\"flex items-center gap-1.5\">\r\n                <div className=\"w-2 h-2 rounded-full bg-green-500\" />\r\n                {tradelines.filter(t => getHealth(t.name).status === 'healthy').length} Healthy\r\n              </span>\r\n              <span className=\"flex items-center gap-1.5\">\r\n                <div className=\"w-2 h-2 rounded-full bg-yellow-500\" />\r\n                {tradelines.filter(t => getHealth(t.name).status === 'partial').length} Partial\r\n              </span>\r\n              <span className=\"flex items-center gap-1.5\">\r\n                <div className=\"w-2 h-2 rounded-full bg-red-500\" />\r\n                {tradelines.filter(t => getHealth(t.name).status === 'stopped' || !getHealth(t.name).status).length} Stopped\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex-1 overflow-y-auto divide-y divide-gray-700/50\">\r\n            {tradelines.map((t) => {\r\n              const health = getHealth(t.name);\r\n              const tradelineAnalytics = getAnalytics(t.name);\r\n              return (\r\n                <ServerListItem\r\n                  key={t.name}\r\n                  name={t.name}\r\n                  displayName={t.displayName}\r\n                  port={t.ports?.main || 0}\r\n                  status={health.status || 'stopped'}\r\n                  online={health.online || 0}\r\n                  total={health.total || 4}\r\n                  processes={health.processes || []}\r\n                  storageBytes={tradelineAnalytics?.storageBytes || 0}\r\n                  isSelected={selectedTradeline?.name === t.name}\r\n                  onClick={() => setSelectedTradeline(t)}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats Panel - 1/4 width, fixed height to match server list */}\r\n        <div className=\"w-1/4 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden h-[280px]\">\r\n          {selectedTradeline ? (\r\n            <ServerDetailPanel\r\n              tradeline={selectedTradeline.name}\r\n              displayName={selectedTradeline.displayName}\r\n              port={selectedPort}\r\n            />\r\n          ) : (\r\n            <div className=\"h-full flex items-center justify-center text-gray-500 text-sm p-4\">\r\n              Select a server\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Bottom Row: Empty Stats Box + Feed/Terminal */}\r\n      {selectedTradeline && (\r\n        <div className=\"flex-1 min-h-0 mt-4 mx-4 flex gap-4 overflow-hidden\">\r\n          {/* Left: Per-Server Stats Panel */}\r\n          <div className=\"w-80 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden\">\r\n            <ServerStatsPanel tradeline={selectedTradeline.name} />\r\n          </div>\r\n\r\n          {/* Right: Feed + Terminal Tabs */}\r\n          <div className=\"flex-1 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col\">\r\n            {/* Tabs: Live Feed + Worker Tabs | Terminal (right) */}\r\n            <div className=\"flex-shrink-0 flex items-center border-b border-gray-700 bg-black/30\">\r\n              <button\r\n                onClick={() => setActiveTab('feed')}\r\n                className={`px-4 py-2 text-sm font-medium transition-colors ${\r\n                  activeTab === 'feed'\r\n                    ? 'text-white border-b-2 border-blue-500 bg-gray-800/50'\r\n                    : 'text-gray-400 hover:text-white'\r\n                }`}\r\n              >\r\n                Live Feed\r\n              </button>\r\n\r\n              {/* Divider */}\r\n              <div className=\"w-px h-6 bg-gray-700 mx-1\" />\r\n\r\n              {/* Worker tabs - only show when feed is active */}\r\n              {activeTab === 'feed' && getWorkerTabs(selectedHealth?.slotId).map((tab) => (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveWorker(tab.id)}\r\n                  className={`px-3 py-2 text-xs font-medium transition-colors ${\r\n                    activeWorker === tab.id\r\n                      ? 'text-blue-400 bg-blue-500/10'\r\n                      : 'text-gray-500 hover:text-gray-300'\r\n                  }`}\r\n                >\r\n                  {tab.label}\r\n                  <span className=\"ml-1 text-gray-600 text-[10px]\">{tab.suffix}</span>\r\n                </button>\r\n              ))}\r\n\r\n              {/* Spacer */}\r\n              <div className=\"flex-1\" />\r\n\r\n              {/* Terminal on the right */}\r\n              <button\r\n                onClick={() => setActiveTab('terminal')}\r\n                className={`px-4 py-2 text-sm font-medium transition-colors ${\r\n                  activeTab === 'terminal'\r\n                    ? 'text-white border-b-2 border-blue-500 bg-gray-800/50'\r\n                    : 'text-gray-400 hover:text-white'\r\n                }`}\r\n              >\r\n                Terminal\r\n              </button>\r\n            </div>\r\n\r\n            {/* Tab Content */}\r\n            <div className=\"flex-1 min-h-0 overflow-hidden\">\r\n              {activeTab === 'feed' ? (\r\n                <LiveFeedPanel tradeline={selectedTradeline.name} activeWorker={activeWorker} />\r\n              ) : (\r\n                <TerminalPanel tradeline={selectedTradeline.name} port={selectedPort} />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Empty State */}\r\n      {!selectedTradeline && (\r\n        <div className=\"flex-1 flex items-center justify-center text-gray-500\">\r\n          Select a server from the list above to view details\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\ninterface Process {\r\n  name: string;\r\n  pm_id: number;\r\n  status: string;\r\n  memory: number;\r\n  cpu: number;\r\n}\r\n\r\ninterface ServerListItemProps {\r\n  name: string;\r\n  displayName: string;\r\n  port: number;\r\n  status: string;\r\n  online: number;\r\n  total: number;\r\n  processes: Process[];\r\n  storageBytes?: number;\r\n  isSelected: boolean;\r\n  onClick: () => void;\r\n}\r\n\r\n// Worker config matching the main table\r\nconst WORKERS = [\r\n  { name: 'SOW', offset: 100 },\r\n  { name: 'Docs', offset: 200 },\r\n  { name: 'Proposal', offset: 300 },\r\n];\r\n\r\n// Storage limit per tradeline (8 GB)\r\nconst STORAGE_LIMIT_BYTES = 8 * 1024 * 1024 * 1024;\r\n\r\nexport default function ServerListItem({\r\n  name,\r\n  displayName,\r\n  port,\r\n  status,\r\n  online,\r\n  total,\r\n  processes,\r\n  storageBytes = 0,\r\n  isSelected,\r\n  onClick,\r\n}: ServerListItemProps) {\r\n  // Check if main is online\r\n  const mainProcess = processes.find(p => p.name.includes('-main'));\r\n  const mainOnline = mainProcess?.status === 'online';\r\n\r\n  // Get worker statuses\r\n  const workerStatuses = WORKERS.map((w, i) => {\r\n    const workerProcess = processes.find(p =>\r\n      p.name.includes(`-w${i + 2}`) || p.name.includes(w.name.toLowerCase())\r\n    );\r\n    return {\r\n      ...w,\r\n      port: port + w.offset,\r\n      online: workerProcess?.status === 'online',\r\n      cpu: workerProcess?.cpu || 0,\r\n      memory: workerProcess?.memory || 0,\r\n    };\r\n  });\r\n\r\n  // Calculate aggregate metrics\r\n  const totalCpu = processes.reduce((sum, p) => sum + (p.cpu || 0), 0);\r\n  const totalMemory = processes.reduce((sum, p) => sum + (p.memory || 0), 0);\r\n  const avgCpu = processes.length > 0 ? totalCpu / processes.length : 0;\r\n  const memoryMB = totalMemory / (1024 * 1024); // Convert to MB\r\n\r\n  // Status colors\r\n  const statusColors: Record<string, string> = {\r\n    healthy: 'border-green-500 bg-green-500/10',\r\n    partial: 'border-yellow-500 bg-yellow-500/10',\r\n    stopped: 'border-red-500 bg-red-500/10',\r\n    degraded: 'border-orange-500 bg-orange-500/10',\r\n  };\r\n\r\n  const selectedClass = isSelected\r\n    ? 'ring-2 ring-blue-500 bg-blue-500/20'\r\n    : 'hover:bg-gray-700/50';\r\n\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className={`flex items-center gap-4 px-4 py-3 cursor-pointer border-l-4 transition-all ${statusColors[status] || statusColors.stopped} ${selectedClass}`}\r\n    >\r\n      {/* Port & Name */}\r\n      <div className=\"w-32 flex-shrink-0\">\r\n        <div className=\"font-mono text-sm text-white font-bold\">{port}</div>\r\n        <div className=\"text-xs text-gray-400 truncate\">{displayName}</div>\r\n      </div>\r\n\r\n      {/* Status Dots (Main + 3 Workers) */}\r\n      <div className=\"flex items-center gap-1.5 flex-shrink-0\">\r\n        <div\r\n          className={`w-3 h-3 rounded-full ${mainOnline ? 'bg-green-500' : 'bg-red-500'}`}\r\n          title={`Main: ${mainOnline ? 'Online' : 'Offline'}`}\r\n        />\r\n        {workerStatuses.map((w) => (\r\n          <div\r\n            key={w.name}\r\n            className={`w-3 h-3 rounded-full ${w.online ? 'bg-green-500' : 'bg-red-500'}`}\r\n            title={`${w.name}: ${w.online ? 'Online' : 'Offline'}`}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Resource Bars */}\r\n      <div className=\"flex items-center gap-3 flex-1\">\r\n        {/* CPU */}\r\n        <div className=\"flex items-center gap-1.5 flex-1 max-w-20\">\r\n          <span className=\"text-[10px] text-gray-500 w-7\">CPU</span>\r\n          <div className=\"flex-1 h-2 bg-gray-700 rounded overflow-hidden\">\r\n            <div\r\n              className={`h-full transition-all ${avgCpu > 80 ? 'bg-red-500' : avgCpu > 50 ? 'bg-yellow-500' : 'bg-cyan-500'}`}\r\n              style={{ width: `${Math.min(avgCpu, 100)}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Memory */}\r\n        <div className=\"flex items-center gap-1.5 flex-1 max-w-20\">\r\n          <span className=\"text-[10px] text-gray-500 w-7\">MEM</span>\r\n          <div className=\"flex-1 h-2 bg-gray-700 rounded overflow-hidden\">\r\n            <div\r\n              className={`h-full transition-all ${memoryMB > 400 ? 'bg-red-500' : memoryMB > 200 ? 'bg-yellow-500' : 'bg-cyan-500'}`}\r\n              style={{ width: `${Math.min((memoryMB / 512) * 100, 100)}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Network (placeholder - would need real data) */}\r\n        <div className=\"flex items-center gap-1.5 flex-1 max-w-20\">\r\n          <span className=\"text-[10px] text-gray-500 w-7\">NET</span>\r\n          <div className=\"flex-1 h-2 bg-gray-700 rounded overflow-hidden\">\r\n            <div className=\"h-full bg-cyan-500\" style={{ width: '25%' }} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Disk - storage usage (8 GB limit per tradeline) */}\r\n        <div className=\"flex items-center gap-1.5 flex-1 max-w-20\">\r\n          <span className=\"text-[10px] text-gray-500 w-7\">DISK</span>\r\n          <div className=\"flex-1 h-2 bg-gray-700 rounded overflow-hidden\">\r\n            {(() => {\r\n              const diskPercent = (storageBytes / STORAGE_LIMIT_BYTES) * 100;\r\n              const diskColor = diskPercent > 90 ? 'bg-red-500' : diskPercent > 75 ? 'bg-yellow-500' : 'bg-cyan-500';\r\n              return <div className={`h-full ${diskColor}`} style={{ width: `${Math.min(diskPercent, 100)}%` }} />;\r\n            })()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Health Indicator */}\r\n      <div className=\"flex-shrink-0 w-10 text-center\">\r\n        {status === 'healthy' ? (\r\n          <span className=\"text-green-400 text-lg\">✓</span>\r\n        ) : status === 'partial' ? (\r\n          <span className=\"text-yellow-400 text-sm\">{online}/{total}</span>\r\n        ) : (\r\n          <span className=\"text-red-400 text-lg\">✗</span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Open Site Button - Redirects via API to pass JWT token */}\r\n      <a\r\n        href={`/api/engine-redirect?port=${port}`}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        onClick={(e) => e.stopPropagation()}\r\n        className={`flex-shrink-0 px-4 py-1.5 text-sm font-medium rounded transition-colors ${\r\n          mainOnline\r\n            ? 'bg-green-600 hover:bg-green-500 text-white'\r\n            : 'bg-gray-600 hover:bg-gray-500 text-gray-300'\r\n        }`}\r\n      >\r\n        Online\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface ServerDetailPanelProps {\r\n  tradeline: string;\r\n  displayName: string;\r\n  port: number;\r\n}\r\n\r\ninterface ServerStats {\r\n  status?: string;\r\n  uptime?: number;\r\n  memory?: number;\r\n  cpu?: number;\r\n  processes?: {\r\n    name: string;\r\n    status: string;\r\n    cpu: number;\r\n    memory: number;\r\n  }[];\r\n  opportunities_found?: number;\r\n  documents_scraped?: number;\r\n  last_run?: string;\r\n  next_run?: string;\r\n  errors_today?: number;\r\n  version?: string;\r\n}\r\n\r\nexport default function ServerDetailPanel({ tradeline, displayName, port }: ServerDetailPanelProps) {\r\n  const [stats, setStats] = useState<ServerStats | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Fetch on mount and when tradeline changes\r\n  useEffect(() => {\r\n    fetchStats(true);\r\n  }, [tradeline]);\r\n\r\n  // Auto-refresh every 10 seconds\r\n  useEffect(() => {\r\n    const interval = setInterval(fetchStats, 10000);\r\n    return () => clearInterval(interval);\r\n  }, [tradeline]);\r\n\r\n  const fetchStats = async (isInitial = false) => {\r\n    if (isInitial) setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const res = await fetch(`/api/tradelines/status/${tradeline}`);\r\n      const data = await res.json();\r\n\r\n      if (data.success !== false) {\r\n        // Aggregate stats from processes array\r\n        const processes = data.processes || [];\r\n        const onlineCount = processes.filter((p: any) => p.status === 'online').length;\r\n        const totalMemory = processes.reduce((sum: number, p: any) => sum + (p.memory || 0), 0);\r\n        const avgCpu = processes.length > 0\r\n          ? processes.reduce((sum: number, p: any) => sum + (p.cpu || 0), 0) / processes.length\r\n          : 0;\r\n\r\n        // Get uptime from main process (longest running)\r\n        const mainProcess = processes.find((p: any) => p.name?.includes('-main'));\r\n        const uptime = mainProcess?.uptime\r\n          ? Math.floor((Date.now() - mainProcess.uptime) / 1000)\r\n          : undefined;\r\n\r\n        // Determine overall status\r\n        let status = 'stopped';\r\n        if (onlineCount === processes.length && processes.length > 0) {\r\n          status = 'online';\r\n        } else if (onlineCount > 0) {\r\n          status = 'partial';\r\n        }\r\n\r\n        setStats({\r\n          status,\r\n          uptime,\r\n          memory: totalMemory,\r\n          cpu: avgCpu,\r\n          processes: processes.map((p: any) => ({\r\n            name: p.name,\r\n            status: p.status,\r\n            cpu: p.cpu || 0,\r\n            memory: p.memory || 0,\r\n          })),\r\n        });\r\n      } else {\r\n        setError(data.error || 'Failed to fetch status');\r\n      }\r\n    } catch (e) {\r\n      setError((e as Error).message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatUptime = (seconds?: number) => {\r\n    if (!seconds) return '-';\r\n    const hours = Math.floor(seconds / 3600);\r\n    const mins = Math.floor((seconds % 3600) / 60);\r\n    return `${hours}h ${mins}m`;\r\n  };\r\n\r\n  const formatMemory = (bytes?: number) => {\r\n    if (!bytes) return '-';\r\n    return `${Math.round(bytes / (1024 * 1024))} MB`;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-4 h-full flex flex-col\">\r\n        <div className=\"flex items-start justify-between h-14 flex-shrink-0\">\r\n          <div className=\"flex-1 min-w-0 pr-2\">\r\n            <h3 className=\"text-lg font-semibold text-white leading-tight line-clamp-2\">{displayName}</h3>\r\n            <p className=\"text-xs text-gray-500 truncate\">Port {port} | {tradeline}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex-1 flex items-center justify-center text-gray-500 text-sm\">\r\n          Loading stats...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-4 h-full flex flex-col\">\r\n        <div className=\"flex items-start justify-between h-14 flex-shrink-0 mb-4\">\r\n          <div className=\"flex-1 min-w-0 pr-2\">\r\n            <h3 className=\"text-lg font-semibold text-white leading-tight line-clamp-2\">{displayName}</h3>\r\n            <p className=\"text-xs text-gray-500 truncate\">Port {port} | {tradeline}</p>\r\n          </div>\r\n          <button\r\n            onClick={() => fetchStats(true)}\r\n            className=\"px-3 py-1 text-xs bg-gray-700 text-gray-400 rounded hover:bg-gray-600 hover:text-white transition-colors flex-shrink-0\"\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n        <div className=\"text-xs text-red-400 bg-red-500/10 px-3 py-2 rounded\">\r\n          {error}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 space-y-4 h-full flex flex-col\">\r\n      {/* Header - Fixed height for 2-line names */}\r\n      <div className=\"flex items-start justify-between h-14 flex-shrink-0\">\r\n        <div className=\"flex-1 min-w-0 pr-2\">\r\n          <h3 className=\"text-lg font-semibold text-white leading-tight line-clamp-2\">{displayName}</h3>\r\n          <p className=\"text-xs text-gray-500 truncate\">Port {port} | {tradeline}</p>\r\n        </div>\r\n        <button\r\n          onClick={() => fetchStats()}\r\n          className=\"px-3 py-1 text-xs bg-gray-700 text-gray-400 rounded hover:bg-gray-600 hover:text-white transition-colors flex-shrink-0\"\r\n        >\r\n          Refresh\r\n        </button>\r\n      </div>\r\n\r\n      {/* Stats Grid */}\r\n      <div className=\"grid grid-cols-2 gap-3\">\r\n        <StatCard\r\n          label=\"Status\"\r\n          value={stats?.status || '-'}\r\n          color={stats?.status === 'online' ? 'green' : stats?.status === 'stopped' ? 'red' : 'gray'}\r\n        />\r\n        <StatCard\r\n          label=\"Uptime\"\r\n          value={formatUptime(stats?.uptime)}\r\n          color=\"cyan\"\r\n        />\r\n        <StatCard\r\n          label=\"Memory\"\r\n          value={formatMemory(stats?.memory)}\r\n          color=\"blue\"\r\n        />\r\n        <StatCard\r\n          label=\"CPU\"\r\n          value={stats?.cpu !== undefined ? `${stats.cpu.toFixed(1)}%` : '-'}\r\n          color={stats?.cpu && stats.cpu > 80 ? 'red' : stats?.cpu && stats.cpu > 50 ? 'yellow' : 'green'}\r\n        />\r\n      </div>\r\n\r\n      {/* Process List */}\r\n      {stats?.processes && stats.processes.length > 0 && (\r\n        <div className=\"bg-gray-800/50 rounded-lg p-3\">\r\n          <h4 className=\"text-xs text-gray-500 uppercase tracking-wide mb-2\">Processes</h4>\r\n          <div className=\"space-y-1.5\">\r\n            {stats.processes.map((proc) => (\r\n              <div key={proc.name} className=\"flex items-center justify-between text-sm\">\r\n                <span className=\"text-gray-300 font-mono text-xs\">{proc.name}</span>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <span className=\"text-xs text-gray-500\">{proc.cpu.toFixed(1)}% CPU</span>\r\n                  <span className=\"text-xs text-gray-500\">{Math.round(proc.memory / (1024 * 1024))}MB</span>\r\n                  <div className={`w-2 h-2 rounded-full ${proc.status === 'online' ? 'bg-green-500' : 'bg-red-500'}`} />\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Additional Stats if available */}\r\n      {(stats?.opportunities_found !== undefined || stats?.documents_scraped !== undefined) && (\r\n        <div className=\"bg-gray-800/50 rounded-lg p-3 space-y-2\">\r\n          {stats.opportunities_found !== undefined && (\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"text-gray-500\">Opportunities</span>\r\n              <span className=\"text-white\">{stats.opportunities_found.toLocaleString()}</span>\r\n            </div>\r\n          )}\r\n          {stats.documents_scraped !== undefined && (\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"text-gray-500\">Documents</span>\r\n              <span className=\"text-white\">{stats.documents_scraped.toLocaleString()}</span>\r\n            </div>\r\n          )}\r\n          {stats.last_run && (\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"text-gray-500\">Last Run</span>\r\n              <span className=\"text-white\">{new Date(stats.last_run).toLocaleTimeString()}</span>\r\n            </div>\r\n          )}\r\n          {stats.version && (\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"text-gray-500\">Version</span>\r\n              <span className=\"text-white font-mono\">{stats.version}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction StatCard({ label, value, color }: { label: string; value: string; color: string }) {\r\n  const colorClasses: Record<string, string> = {\r\n    blue: 'border-blue-500/30 bg-blue-500/10',\r\n    green: 'border-green-500/30 bg-green-500/10',\r\n    red: 'border-red-500/30 bg-red-500/10',\r\n    yellow: 'border-yellow-500/30 bg-yellow-500/10',\r\n    cyan: 'border-cyan-500/30 bg-cyan-500/10',\r\n    gray: 'border-gray-500/30 bg-gray-500/10',\r\n  };\r\n\r\n  const textColors: Record<string, string> = {\r\n    blue: 'text-blue-400',\r\n    green: 'text-green-400',\r\n    red: 'text-red-400',\r\n    yellow: 'text-yellow-400',\r\n    cyan: 'text-cyan-400',\r\n    gray: 'text-gray-400',\r\n  };\r\n\r\n  return (\r\n    <div className={`border rounded-lg p-3 ${colorClasses[color]}`}>\r\n      <div className={`text-xl font-bold ${textColors[color]}`}>{value}</div>\r\n      <div className=\"text-xs text-gray-500 uppercase tracking-wide\">{label}</div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface ServerStatsPanelProps {\r\n  tradeline: string;\r\n}\r\n\r\ninterface TradelineStats {\r\n  today: {\r\n    opportunities: number;\r\n    documents: number;\r\n    aiCost: number;\r\n    bySource: Record<string, number>;\r\n    byStage: Record<string, number>;\r\n  };\r\n  totals: {\r\n    opportunities: number;\r\n    documents: number;\r\n  };\r\n  storage: {\r\n    used: number;\r\n    usedFormatted: string;\r\n    limit: number;\r\n    limitFormatted: string;\r\n    percent: number;\r\n  };\r\n}\r\n\r\nconst SOURCE_LABELS: Record<string, string> = {\r\n  'SAM.gov': 'Federal',\r\n  'Cal-e-Procure': 'State',\r\n  'PlanetBids': 'Local',\r\n  'PublicPurchase': 'Municipal',\r\n  'BidNet': 'Regional',\r\n};\r\n\r\nconst STAGE_LABELS: Record<string, string> = {\r\n  discovery: 'Stage 1',\r\n  scraping: 'Stage 2',\r\n  analysis: 'Stage 3',\r\n  storage: 'Stage 4',\r\n};\r\n\r\nexport default function ServerStatsPanel({ tradeline }: ServerStatsPanelProps) {\r\n  const [stats, setStats] = useState<TradelineStats | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchStats = async (isInitial = false) => {\r\n    if (isInitial) setLoading(true);\r\n    try {\r\n      const res = await fetch(`/api/tradelines/stats/${tradeline}`);\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        setStats(data);\r\n        setError(null);\r\n      } else {\r\n        setError(data.error || 'Failed to fetch stats');\r\n      }\r\n    } catch (e) {\r\n      setError((e as Error).message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchStats(true);\r\n  }, [tradeline]);\r\n\r\n  // Auto-refresh every 30 seconds\r\n  useEffect(() => {\r\n    const interval = setInterval(() => fetchStats(), 30000);\r\n    return () => clearInterval(interval);\r\n  }, [tradeline]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"h-full flex items-center justify-center text-gray-500 text-sm\">\r\n        Loading stats...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !stats) {\r\n    return (\r\n      <div className=\"p-4\">\r\n        <div className=\"text-xs text-gray-500 uppercase tracking-wide mb-2\">Today&apos;s Stats</div>\r\n        <div className=\"text-gray-600 text-sm\">No data available</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full overflow-y-auto\">\r\n      {/* Header */}\r\n      <div className=\"bg-black/30 px-4 py-2 border-b border-gray-700 sticky top-0\">\r\n        <h3 className=\"text-xs uppercase text-gray-500 font-medium tracking-wide\">Today&apos;s Stats</h3>\r\n      </div>\r\n\r\n      <div className=\"p-3 space-y-4\">\r\n        {/* Quick Numbers */}\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          <div className=\"bg-gray-700/30 rounded p-2\">\r\n            <div className=\"text-lg font-bold text-cyan-400\">{stats.today.opportunities}</div>\r\n            <div className=\"text-[10px] text-gray-500 uppercase\">Ops Today</div>\r\n          </div>\r\n          <div className=\"bg-gray-700/30 rounded p-2\">\r\n            <div className=\"text-lg font-bold text-blue-400\">{stats.today.documents}</div>\r\n            <div className=\"text-[10px] text-gray-500 uppercase\">Docs Today</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* AI Cost */}\r\n        <div className=\"bg-gray-700/30 rounded p-2\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <span className=\"text-[10px] text-gray-500 uppercase\">AI Cost Today</span>\r\n            <span className=\"text-sm font-mono text-green-400\">\r\n              ${stats.today.aiCost.toFixed(2)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* By Source */}\r\n        <div>\r\n          <div className=\"text-[10px] text-gray-500 uppercase mb-1.5\">By Source</div>\r\n          <div className=\"space-y-1\">\r\n            {Object.entries(stats.today.bySource).map(([source, count]) => (\r\n              <div key={source} className=\"flex items-center justify-between text-xs\">\r\n                <span className=\"text-gray-400\">{SOURCE_LABELS[source] || source}</span>\r\n                <span className=\"text-white font-mono\">{count}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* By Stage */}\r\n        <div>\r\n          <div className=\"text-[10px] text-gray-500 uppercase mb-1.5\">By Stage</div>\r\n          <div className=\"grid grid-cols-4 gap-1\">\r\n            {Object.entries(stats.today.byStage).map(([stage, count]) => (\r\n              <div key={stage} className=\"bg-gray-700/50 rounded p-1.5 text-center\">\r\n                <div className=\"text-sm font-bold text-white\">{count}</div>\r\n                <div className=\"text-[9px] text-gray-500\">{STAGE_LABELS[stage] || stage}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Storage */}\r\n        <div>\r\n          <div className=\"flex justify-between items-center mb-1\">\r\n            <span className=\"text-[10px] text-gray-500 uppercase\">Storage</span>\r\n            <span className=\"text-[10px] text-gray-400\">\r\n              {stats.storage.usedFormatted} / {stats.storage.limitFormatted}\r\n            </span>\r\n          </div>\r\n          <div className=\"h-2 bg-gray-700 rounded overflow-hidden\">\r\n            <div\r\n              className={`h-full transition-all ${\r\n                stats.storage.percent > 90 ? 'bg-red-500' :\r\n                stats.storage.percent > 75 ? 'bg-yellow-500' : 'bg-cyan-500'\r\n              }`}\r\n              style={{ width: `${Math.min(stats.storage.percent, 100)}%` }}\r\n            />\r\n          </div>\r\n          <div className=\"text-[10px] text-gray-500 mt-0.5 text-right\">\r\n            {stats.storage.percent}% used\r\n          </div>\r\n        </div>\r\n\r\n        {/* Totals */}\r\n        <div className=\"border-t border-gray-700 pt-3\">\r\n          <div className=\"text-[10px] text-gray-500 uppercase mb-1.5\">All Time</div>\r\n          <div className=\"flex justify-between text-xs\">\r\n            <span className=\"text-gray-400\">Total Ops</span>\r\n            <span className=\"text-white font-mono\">{stats.totals.opportunities.toLocaleString()}</span>\r\n          </div>\r\n          <div className=\"flex justify-between text-xs mt-1\">\r\n            <span className=\"text-gray-400\">Total Docs</span>\r\n            <span className=\"text-white font-mono\">{stats.totals.documents.toLocaleString()}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\n\nimport { useState, useEffect, useRef } from 'react';\n\ninterface LogEntry {\n  id: string;\n  timestamp: string;\n  level: 'info' | 'warn' | 'error' | 'debug';\n  message: string;\n  source?: string;\n}\n\n\ntype WorkerType = 'main' | 'w1' | 'w2' | 'w3' | 'w4';\n\ninterface LiveFeedPanelProps {\n  tradeline: string;\n  activeWorker: WorkerType;\n}\n\n\ninterface WorkerLogs {\n  main: LogEntry[];\n  w1: LogEntry[];\n  w2: LogEntry[];\n  w3: LogEntry[];\n  w4: LogEntry[];\n}\n\n\n\nexport default function LiveFeedPanel({ tradeline, activeWorker }: LiveFeedPanelProps) {\n  const [workerLogs, setWorkerLogs] = useState<WorkerLogs>({\n    main: [],\n    w1: [],\n    w2: [],\n    w3: [],\n    w4: [],\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [paused, setPaused] = useState(false);\n  \n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  // Fetch all 5 workers in one batch call\n  const fetchAllLogs = async () => {\n    try {\n      const res = await fetch(`/api/tradelines/logs/${tradeline}?lines=50&workers=all`);\n      const data = await res.json();\n\n      if (data.success && data.workers) {\n        const parsed: WorkerLogs = {\n          main: parseLogLines(data.workers.main?.logs || ''),\n          w1: parseLogLines(data.workers.w1?.logs || ''),\n          w2: parseLogLines(data.workers.w2?.logs || ''),\n          w3: parseLogLines(data.workers.w3?.logs || ''),\n          w4: parseLogLines(data.workers.w4?.logs || ''),\n        };\n        setWorkerLogs(parsed);\n        setError(null);\n      } else {\n        setError(data.error || 'Failed to fetch logs');\n      }\n    } catch (e) {\n      setError((e as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Parse PM2 log format with ANSI codes\n  const parseLogLines = (logText: string): LogEntry[] => {\n    if (!logText) return [];\n\n    // Strip ANSI color codes\n    const cleanText = logText.replace(/\\u001b\\[[0-9;]*m/g, '');\n\n    const lines = cleanText.split('\\n').filter(Boolean);\n    return lines.map((line, i) => {\n      // Parse format: [timestamp] [LEVEL] message | {json}\n      const match = line.match(/\\[([^\\]]+)\\]\\s*\\[(\\w+)\\]\\s*(.+)/);\n\n      if (match) {\n        const [, timestamp, level, rest] = match;\n        const [message, jsonPart] = rest.split(' | ');\n        let source = undefined;\n        if (jsonPart) {\n          try {\n            const meta = JSON.parse(jsonPart);\n            source = meta.module || meta.source;\n          } catch {\n            // ignore parse errors\n          }\n        }\n\n        return {\n          id: `${i}-${timestamp}`,\n          timestamp,\n          level: level.toLowerCase() as LogEntry['level'],\n          message: message.trim(),\n          source,\n        };\n      }\n\n      return {\n        id: `${i}-${Date.now()}`,\n        timestamp: new Date().toISOString(),\n        level: 'info' as const,\n        message: line,\n      };\n    });\n  };\n\n  // Initial fetch when tradeline changes\n  useEffect(() => {\n    setLoading(true);\n    setWorkerLogs({ main: [], w1: [], w2: [], w3: [], w4: [] });\n    fetchAllLogs();\n  }, [tradeline]);\n\n  // Auto-refresh every 5 seconds when not paused\n  useEffect(() => {\n    if (paused) return;\n\n    const interval = setInterval(fetchAllLogs, 5000);\n    return () => clearInterval(interval);\n  }, [tradeline, paused]);\n\n  // Auto-scroll to bottom when logs change for active worker\n  useEffect(() => {\n    if (!paused && scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [workerLogs, activeWorker, paused]);\n\n  const formatTime = (timestamp: string) => {\n    try {\n      const date = new Date(timestamp);\n      return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n    } catch {\n      return timestamp;\n    }\n  };\n\n  const levelBadges = {\n    info: 'bg-blue-500/20 text-blue-400',\n    warn: 'bg-yellow-500/20 text-yellow-400',\n    error: 'bg-red-500/20 text-red-400',\n    debug: 'bg-gray-500/20 text-gray-400',\n  };\n\n  // Get logs for the currently active worker\n  const currentLogs = workerLogs[activeWorker];\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-2 border-b border-gray-700 bg-gray-800/50\">\n        <div className=\"flex items-center gap-2\">\n          <div className={`w-2 h-2 rounded-full ${!error ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`} />\n          <span className=\"text-xs text-gray-400\">{!error ? 'Live (5s)' : 'Error'}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => setPaused(!paused)}\n            className={`px-2 py-1 text-xs rounded transition-colors ${\n              paused\n                ? 'bg-green-500/20 text-green-400 hover:bg-green-500/30'\n                : 'bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30'\n            }`}\n          >\n            {paused ? 'Resume' : 'Pause'}\n          </button>\n          <button\n            onClick={fetchAllLogs}\n            className=\"px-2 py-1 text-xs bg-gray-700 text-gray-400 rounded hover:bg-gray-600 hover:text-white transition-colors\"\n          >\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      {/* Logs */}\n      <div\n        ref={scrollRef}\n        className=\"flex-1 overflow-y-auto p-2 font-mono text-xs space-y-1 bg-gray-900/50\"\n      >\n        {loading ? (\n          <div className=\"text-gray-500 text-center py-8\">Loading logs...</div>\n        ) : error ? (\n          <div className=\"text-red-400 text-center py-8\">Error: {error}</div>\n        ) : currentLogs.length === 0 ? (\n          <div className=\"text-gray-500 text-center py-8\">No logs available</div>\n        ) : (\n          currentLogs.map((log) => (\n            <div key={log.id} className=\"flex items-start gap-2 py-0.5 hover:bg-gray-800/50 px-1 rounded\">\n              <span className=\"text-gray-600 flex-shrink-0\">{formatTime(log.timestamp)}</span>\n              <span className={`px-1.5 py-0.5 rounded text-[10px] uppercase flex-shrink-0 ${levelBadges[log.level] || levelBadges.info}`}>\n                {log.level}\n              </span>\n              {log.source && (\n                <span className=\"text-purple-400 flex-shrink-0\">[{log.source}]</span>\n              )}\n              <span className=\"text-gray-300\">{log.message}</span>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n","'use client';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\n\r\ninterface TerminalPanelProps {\r\n  tradeline: string;\r\n  port: number;\r\n}\r\n\r\ninterface CommandHistory {\r\n  command: string;\r\n  output: string;\r\n  timestamp: Date;\r\n  isError?: boolean;\r\n}\r\n\r\nexport default function TerminalPanel({ tradeline, port }: TerminalPanelProps) {\r\n  const [input, setInput] = useState('');\r\n  const [history, setHistory] = useState<CommandHistory[]>([]);\r\n  const [commandIndex, setCommandIndex] = useState(-1);\r\n  const [previousCommands, setPreviousCommands] = useState<string[]>([]);\r\n  const [isExecuting, setIsExecuting] = useState(false);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Welcome message\r\n  useEffect(() => {\r\n    setHistory([{\r\n      command: '',\r\n      output: `Connected to ${tradeline} (port ${port})\r\nType 'help' for available commands.\r\n─────────────────────────────────────`,\r\n      timestamp: new Date(),\r\n    }]);\r\n  }, [tradeline, port]);\r\n\r\n  // Auto-scroll\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n    }\r\n  }, [history]);\r\n\r\n  // Focus input on click\r\n  const handleContainerClick = () => {\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  const addOutput = (command: string, output: string, isError = false) => {\r\n    setHistory(prev => [...prev, {\r\n      command,\r\n      output,\r\n      timestamp: new Date(),\r\n      isError,\r\n    }]);\r\n  };\r\n\r\n  const executeCommand = async (cmd: string) => {\r\n    const trimmedCmd = cmd.trim().toLowerCase();\r\n    const originalCmd = cmd.trim();\r\n\r\n    if (!trimmedCmd) return;\r\n\r\n    // Add to command history\r\n    setPreviousCommands(prev => [...prev.filter(c => c !== trimmedCmd), trimmedCmd].slice(-50));\r\n    setCommandIndex(-1);\r\n\r\n    // Built-in commands that don't need API calls\r\n    if (trimmedCmd === 'help') {\r\n      addOutput(originalCmd, `Available commands:\r\n  status     - Get server status from API\r\n  logs       - Fetch recent logs\r\n  restart    - Restart server (requires --confirm)\r\n  stop       - Stop server (requires --confirm)\r\n  start      - Start server\r\n  clear      - Clear terminal\r\n  health     - Check server health\r\n\r\nRaw SSH commands (executed on engine server):\r\n  pm2 list              - List all PM2 processes\r\n  pm2 show <name>       - Show process details\r\n  pm2 restart <name>    - Restart specific process\r\n  pm2 logs <name>       - Stream process logs\r\n  tail -n 50 <file>     - Read last 50 lines of file\r\n  ls, pwd, uptime       - System commands`);\r\n      return;\r\n    }\r\n\r\n    if (trimmedCmd === 'clear') {\r\n      setHistory([]);\r\n      return;\r\n    }\r\n\r\n    // API commands\r\n    setIsExecuting(true);\r\n\r\n    try {\r\n      if (trimmedCmd === 'status') {\r\n        const res = await fetch(`/api/tradelines/status/${tradeline}`);\r\n        const data = await res.json();\r\n        if (data.success !== false) {\r\n          const procs = data.processes?.map((p: any) =>\r\n            `  ${p.name}: ${p.status} (CPU: ${p.cpu?.toFixed(1)}%, Mem: ${Math.round((p.memory || 0) / 1024 / 1024)}MB)`\r\n          ).join('\\n') || '';\r\n          addOutput(originalCmd, `Server Status: ${tradeline}\r\n────────────────────────\r\nStatus: ${data.status || 'unknown'}\r\nPort: ${port}\r\n${procs ? `Processes:\\n${procs}` : ''}`);\r\n        } else {\r\n          addOutput(originalCmd, data.error || 'Failed to get status', true);\r\n        }\r\n      }\r\n      else if (trimmedCmd === 'logs') {\r\n        const res = await fetch(`/api/tradelines/logs/${tradeline}?lines=20`);\r\n        const data = await res.json();\r\n        if (data.success && data.logs) {\r\n          addOutput(originalCmd, `Recent Logs:\\n────────────────────────\\n${data.logs}`);\r\n        } else {\r\n          addOutput(originalCmd, data.error || 'Failed to fetch logs', true);\r\n        }\r\n      }\r\n      else if (trimmedCmd === 'health') {\r\n        const res = await fetch(`/api/servers/health?projectId=tradelines&slotId=${tradeline}`);\r\n        const data = await res.json();\r\n        addOutput(originalCmd, `Health Check:\\n────────────────────────\\n${JSON.stringify(data, null, 2)}`);\r\n      }\r\n      else if (trimmedCmd === 'restart --confirm') {\r\n        const res = await fetch(`/api/tradelines/restart/${tradeline}`, { method: 'POST' });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          addOutput(originalCmd, `✓ Restart command sent to ${tradeline}`);\r\n        } else {\r\n          addOutput(originalCmd, data.error || 'Restart failed', true);\r\n        }\r\n      }\r\n      else if (trimmedCmd === 'restart') {\r\n        addOutput(originalCmd, `⚠️  This will restart ${tradeline}.\r\nType 'restart --confirm' to proceed.`);\r\n      }\r\n      else if (trimmedCmd === 'stop --confirm') {\r\n        const res = await fetch(`/api/tradelines/stop/${tradeline}`, { method: 'POST' });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          addOutput(originalCmd, `✓ Stop command sent to ${tradeline}`);\r\n        } else {\r\n          addOutput(originalCmd, data.error || 'Stop failed', true);\r\n        }\r\n      }\r\n      else if (trimmedCmd === 'stop') {\r\n        addOutput(originalCmd, `⚠️  This will stop ${tradeline}.\r\nType 'stop --confirm' to proceed.`);\r\n      }\r\n      else if (trimmedCmd === 'start') {\r\n        const res = await fetch(`/api/tradelines/start/${tradeline}`, { method: 'POST' });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          addOutput(originalCmd, `✓ Start command sent to ${tradeline}`);\r\n        } else {\r\n          addOutput(originalCmd, data.error || 'Start failed', true);\r\n        }\r\n      }\r\n      else {\r\n        // Try to execute as raw SSH command on the engine server\r\n        const execRes = await fetch(`/api/tradelines/exec/${tradeline}`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ command: originalCmd })\r\n        });\r\n        const execData = await execRes.json();\r\n\r\n        if (execData.success) {\r\n          const output = execData.stdout || execData.stderr || 'Command executed (no output)';\r\n          addOutput(originalCmd, output, !!execData.stderr && !execData.stdout);\r\n        } else {\r\n          addOutput(originalCmd, execData.error || 'Command failed', true);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      addOutput(originalCmd, `Error: ${(e as Error).message}`, true);\r\n    } finally {\r\n      setIsExecuting(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Enter' && !isExecuting) {\r\n      executeCommand(input);\r\n      setInput('');\r\n    } else if (e.key === 'ArrowUp') {\r\n      e.preventDefault();\r\n      if (previousCommands.length > 0) {\r\n        const newIndex = commandIndex < previousCommands.length - 1 ? commandIndex + 1 : commandIndex;\r\n        setCommandIndex(newIndex);\r\n        setInput(previousCommands[previousCommands.length - 1 - newIndex] || '');\r\n      }\r\n    } else if (e.key === 'ArrowDown') {\r\n      e.preventDefault();\r\n      if (commandIndex > 0) {\r\n        const newIndex = commandIndex - 1;\r\n        setCommandIndex(newIndex);\r\n        setInput(previousCommands[previousCommands.length - 1 - newIndex] || '');\r\n      } else {\r\n        setCommandIndex(-1);\r\n        setInput('');\r\n      }\r\n    } else if (e.key === 'Tab') {\r\n      e.preventDefault();\r\n      const commands = [\r\n        'status', 'logs', 'health', 'restart', 'stop', 'start', 'clear', 'help',\r\n        'pm2 list', 'pm2 status', 'pm2 show', 'pm2 restart', 'pm2 logs', 'pm2 stop',\r\n        'tail', 'ls', 'pwd', 'uptime', 'df -h', 'free -h'\r\n      ];\r\n      const matches = commands.filter(c => c.startsWith(input.toLowerCase()));\r\n      if (matches.length === 1) {\r\n        setInput(matches[0]);\r\n      } else if (matches.length > 1 && matches.length <= 5) {\r\n        // Show possible completions\r\n        addOutput(input, `Completions: ${matches.join(', ')}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"h-full flex flex-col bg-gray-900 font-mono text-sm cursor-text\"\r\n      onClick={handleContainerClick}\r\n    >\r\n      {/* Terminal Header */}\r\n      <div className=\"flex items-center justify-between px-3 py-2 bg-gray-800 border-b border-gray-700\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"flex gap-1.5\">\r\n            <div className=\"w-3 h-3 rounded-full bg-red-500\" />\r\n            <div className=\"w-3 h-3 rounded-full bg-yellow-500\" />\r\n            <div className=\"w-3 h-3 rounded-full bg-green-500\" />\r\n          </div>\r\n          <span className=\"text-xs text-gray-400 ml-2\">{tradeline}@nextbid:~</span>\r\n        </div>\r\n        <span className=\"text-xs text-gray-600\">port {port}</span>\r\n      </div>\r\n\r\n      {/* Terminal Output */}\r\n      <div\r\n        ref={scrollRef}\r\n        className=\"flex-1 overflow-y-auto p-3 space-y-2\"\r\n      >\r\n        {history.map((entry, i) => (\r\n          <div key={i}>\r\n            {entry.command && (\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-green-400\">$</span>\r\n                <span className=\"text-white\">{entry.command}</span>\r\n              </div>\r\n            )}\r\n            <pre className={`whitespace-pre-wrap text-xs leading-relaxed ${entry.isError ? 'text-red-400' : 'text-gray-400'}`}>\r\n              {entry.output}\r\n            </pre>\r\n          </div>\r\n        ))}\r\n\r\n        {/* Input Line */}\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"text-green-400\">$</span>\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            className=\"flex-1 bg-transparent text-white outline-none\"\r\n            placeholder=\"\"\r\n            autoFocus\r\n            disabled={isExecuting}\r\n          />\r\n          {isExecuting ? (\r\n            <span className=\"text-yellow-400 animate-pulse\">...</span>\r\n          ) : (\r\n            <span className=\"text-gray-600 animate-pulse\">|</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}