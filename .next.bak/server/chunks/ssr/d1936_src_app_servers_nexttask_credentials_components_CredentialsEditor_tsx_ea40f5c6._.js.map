{"version":3,"sources":["../../../../../../Studio/kodiack-dashboard-5500/src/app/servers/nexttask/credentials/components/CredentialsEditor.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\n\r\ninterface CredentialsEditorProps {\r\n  credentials: any;\r\n}\r\n\r\nconst credentialTypes = [\r\n  {\r\n    key: 'openai',\r\n    label: 'OpenAI',\r\n    fields: [\r\n      { key: 'api_key', label: 'API Key', type: 'password' as const },\r\n      { key: 'model', label: 'Model (e.g., gpt-4)', type: 'text' as const },\r\n    ],\r\n  },\r\n  {\r\n    key: 'discord',\r\n    label: 'Discord',\r\n    fields: [\r\n      { key: 'bot_token', label: 'Bot Token', type: 'password' as const },\r\n      { key: 'channel_id', label: 'Channel ID', type: 'text' as const },\r\n    ],\r\n  },\r\n  {\r\n    key: 'notifications',\r\n    label: 'Notifications',\r\n    fields: [\r\n      { key: 'webhook_url', label: 'Webhook URL', type: 'password' as const },\r\n    ],\r\n  },\r\n];\r\n\r\nexport default function CredentialsEditor({ credentials }: CredentialsEditorProps) {\r\n  const [activeTab, setActiveTab] = useState(credentialTypes[0].key);\r\n  const [formData, setFormData] = useState<Record<string, Record<string, string>>>(credentials || {});\r\n  const [saving, setSaving] = useState(false);\r\n  const [showPasswords, setShowPasswords] = useState(false);\r\n\r\n  const handleFieldChange = (typeKey: string, fieldKey: string, value: string) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [typeKey]: {\r\n        ...(prev[typeKey] || {}),\r\n        [fieldKey]: value,\r\n      },\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const res = await fetch('/api/nexttask/credentials', {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ credentials: formData }),\r\n      });\r\n      const result = await res.json();\r\n      if (result.success) {\r\n        alert('Credentials saved successfully');\r\n      } else {\r\n        alert(result.error || 'Failed to save');\r\n      }\r\n    } catch (e) {\r\n      alert((e as Error).message);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const activeType = credentialTypes.find((t) => t.key === activeTab);\r\n\r\n  return (\r\n    <div className=\"bg-gray-800 border border-gray-700 rounded-xl\">\r\n      {/* Tabs */}\r\n      <div className=\"flex border-b border-gray-700 px-6\">\r\n        {credentialTypes.map((type) => (\r\n          <button\r\n            key={type.key}\r\n            onClick={() => setActiveTab(type.key)}\r\n            className={`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${\r\n              activeTab === type.key\r\n                ? 'border-blue-500 text-blue-400'\r\n                : 'border-transparent text-gray-400 hover:text-white'\r\n            }`}\r\n          >\r\n            {type.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"p-6\">\r\n        {activeType && (\r\n          <div className=\"space-y-4\">\r\n            <label className=\"flex items-center gap-2 text-sm text-gray-400 mb-4\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={showPasswords}\r\n                onChange={(e) => setShowPasswords(e.target.checked)}\r\n                className=\"rounded bg-gray-700 border-gray-600\"\r\n              />\r\n              Show passwords\r\n            </label>\r\n\r\n            {activeType.fields.map((field) => (\r\n              <div key={field.key}>\r\n                <label className=\"block text-sm font-medium text-gray-400 mb-2\">\r\n                  {field.label}\r\n                </label>\r\n                <input\r\n                  type={field.type === 'password' && !showPasswords ? 'password' : 'text'}\r\n                  value={formData[activeTab]?.[field.key] || ''}\r\n                  onChange={(e) => handleFieldChange(activeTab, field.key, e.target.value)}\r\n                  className=\"w-full max-w-md bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none\"\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"flex justify-end px-6 py-4 border-t border-gray-700\">\r\n        <button\r\n          onClick={handleSave}\r\n          disabled={saving}\r\n          className=\"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-semibold hover:bg-blue-600 transition-colors disabled:opacity-50\"\r\n        >\r\n          {saving ? 'Saving...' : 'Save Changes'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}