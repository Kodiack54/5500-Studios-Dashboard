module.exports=[73218,a=>{"use strict";var b=a.i(18030),c=a.i(30072),d=a.i(30836),e=a.i(84852),f=a.i(77236),g=a.i(20912),h=a.i(27878);let i=(0,a.i(81338).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var j=a.i(92395),k=a.i(85489),l=a.i(49313),m=a.i(30587),n=a.i(13951);let o=[{id:"chad",name:"Chad",port:5401,role:"Capture",title:"Information Capture",model:"openai",dailyLimit:.5,color:"cyan"},{id:"jen",name:"Jen",port:5402,role:"Extract",title:"Data Quality",model:"claude",dailyLimit:.5,color:"purple"},{id:"susan",name:"Susan",port:5403,role:"Sort",title:"Information Analyst",model:"openai",dailyLimit:.5,color:"pink"},{id:"clair",name:"Clair",port:5404,role:"Document",title:"Documentation",model:"claude",dailyLimit:.5,color:"blue"},{id:"mike",name:"Mike",port:5405,role:"QA",title:"Quality Assurance",model:"openai",dailyLimit:.5,color:"green"},{id:"tiffany",name:"Tiffany",port:5406,role:"QA",title:"Quality Assurance",model:"openai",dailyLimit:.5,color:"yellow"},{id:"ryan",name:"Ryan",port:5407,role:"Roadmap",title:"Product Operations",model:"openai",dailyLimit:.5,color:"orange"}],p=[{id:"terminal",name:"Terminal",port:5400,role:"Claude Terminal"},{id:"dashboard",name:"Dashboard",port:5500,role:"Web UI"}];function q(){let[a,h]=(0,c.useState)({}),[i,j]=(0,c.useState)({}),[q,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(0),[y]=(0,c.useState)(3.5),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(null),H=(0,c.useCallback)(async()=>{A(!0),E(null);try{let[a,b,c]=await Promise.all([fetch("/ai-team/api/status",{cache:"no-store"}).catch(()=>null),fetch("/ai-team/api/usage",{cache:"no-store"}).catch(()=>null),fetch("/api/ai-sessions/buckets",{cache:"no-store"}).catch(()=>null)]);if(a?.ok){let b=await a.json();if(b.success&&b.workers){let a={};for(let c of b.workers)a[c.id]=c;h(a)}}else{let a={};[...o,...p].forEach(b=>{a[b.id]={id:b.id,status:"offline"}}),h(a)}if(b?.ok){let a=await b.json();if(a.success&&a.by_assistant){let b={},c=0;for(let d of a.by_assistant){let a=d.assistant_name?.toLowerCase();a&&(b[a]={id:a,requests:d.requests||0,tokens:d.total_tokens||0,cost:d.cost_usd||0},c+=d.cost_usd||0)}j(b),x(c)}}if(c?.ok){let a=await c.json();a.success&&a.stats&&v({sessions_today:a.stats.last_24h||0,extractions_today:a.stats.flagged||0,docs_published:a.stats.cleaned||0,flagged:a.stats.flagged||0,pending:a.stats.pending||0})}C(new Date)}catch(a){E(a instanceof Error?a.message:"Failed to fetch data")}finally{A(!1)}},[]);(0,c.useEffect)(()=>{H()},[]),(0,c.useEffect)(()=>{let a=setInterval(H,1e4);return()=>clearInterval(a)},[H]);let I=async(a,b)=>{G(`${a}-${b}`);try{(await fetch("/ai-team/api/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workerId:a,action:b})})).ok&&setTimeout(H,2e3)}catch(c){console.error(`Failed to ${b} ${a}:`,c)}finally{G(null)}},J=o.filter(b=>a[b.id]?.status==="online").length,K=o.length,L=w/y*100,M=L>80;return(0,b.jsxs)("div",{className:"h-full flex flex-col bg-gray-900 text-white overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-4 py-2 bg-gray-800 border-b border-gray-700 flex items-center justify-between shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-lg font-bold",children:"AI Team"}),(0,b.jsx)(u,{health:J===K?"healthy":J>0?"degraded":"down"}),(0,b.jsxs)("span",{className:"text-sm text-gray-400",children:[J,"/",K]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:`flex items-center gap-2 px-2 py-1 rounded ${M?"bg-red-900/50 text-red-400":"bg-gray-700 text-gray-300"}`,children:[(0,b.jsx)(k.DollarSign,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-sm font-mono",children:["$",w.toFixed(2)," / $",y.toFixed(2)]}),M&&(0,b.jsx)(n.Bell,{className:"w-4 h-4 animate-pulse"})]}),B&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:B.toLocaleTimeString()}),(0,b.jsx)("button",{onClick:H,disabled:z,className:"p-1.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 rounded transition-colors",children:(0,b.jsx)(d.RefreshCw,{className:`w-4 h-4 ${z?"animate-spin":""}`})})]})]}),D&&(0,b.jsx)("div",{className:"px-4 py-1 bg-red-900/50 border-b border-red-700 text-red-300 text-sm",children:D}),(0,b.jsx)("div",{className:"px-4 py-3 bg-gray-800/50 border-b border-gray-700 shrink-0",children:(0,b.jsxs)("div",{className:"grid grid-cols-6 gap-3",children:[(0,b.jsx)(r,{icon:l.Zap,label:"Sessions Today",value:q?.sessions_today||0,color:"cyan"}),(0,b.jsx)(r,{icon:l.Zap,label:"Extracted",value:q?.extractions_today||0,color:"purple"}),(0,b.jsx)(r,{icon:f.CheckCircle,label:"Published",value:q?.docs_published||0,color:"green"}),(0,b.jsx)(r,{icon:m.Clock,label:"Pending",value:q?.pending||0,color:"yellow"}),(0,b.jsx)(r,{icon:k.DollarSign,label:"AI Cost Today",value:`$${w.toFixed(2)}`,color:"orange",isString:!0}),(0,b.jsxs)("div",{className:"p-2 rounded-lg bg-gray-800/50 border border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(k.DollarSign,{className:`w-4 h-4 ${M?"text-red-400":"text-blue-400"}`}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"Budget Used"})]}),(0,b.jsxs)("div",{className:"text-lg font-bold text-white",children:[L.toFixed(0),"%"]}),(0,b.jsx)("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden mt-1",children:(0,b.jsx)("div",{className:`h-full ${L>90?"bg-red-500":L>70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(L,100)}%`}})})]})]})}),(0,b.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex-[2] overflow-auto p-2",children:[(0,b.jsx)("div",{className:"space-y-1",children:o.map(c=>(0,b.jsx)(s,{worker:c,status:a[c.id],usage:i[c.id],actionLoading:F,onControl:I},c.id))}),(0,b.jsxs)("div",{className:"mt-3 pt-2 border-t border-gray-700",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1 px-2",children:"Infrastructure"}),(0,b.jsx)("div",{className:"space-y-1",children:p.map(c=>(0,b.jsx)(t,{service:c,status:a[c.id]},c.id))})]})]}),(0,b.jsxs)("div",{className:"flex-1 border-l border-gray-700 bg-gray-800/30 p-3 overflow-auto",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"Budget Limits"}),(0,b.jsx)("div",{className:"space-y-2",children:o.map(a=>{let c=i[a.id],d=c?.cost||0,e=d/a.dailyLimit*100,f=e>100,g=e>80;return(0,b.jsxs)("div",{className:"text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-0.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-gray-300",children:a.name}),(0,b.jsx)("span",{className:`px-1 rounded text-[10px] ${"claude"===a.model?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"}`,children:"claude"===a.model?"Claude":"GPT"})]}),(0,b.jsxs)("span",{className:f?"text-red-400":g?"text-yellow-400":"text-gray-500",children:["$",d.toFixed(2)," / $",a.dailyLimit.toFixed(2)]})]}),(0,b.jsx)("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full ${f?"bg-red-500":g?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${Math.min(e,100)}%`}})})]},a.id)})}),(0,b.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-700",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"Model Costs"}),(0,b.jsxs)("div",{className:"space-y-1 text-xs text-gray-500",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-purple-400",children:"Claude Haiku"}),(0,b.jsx)("span",{children:"$0.25 / $1.25 /1M"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-green-400",children:"GPT-4o-mini"}),(0,b.jsx)("span",{children:"$0.15 / $0.60 /1M"})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-700",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"Alerts"}),(0,b.jsxs)("div",{className:"space-y-1",children:[o.filter(a=>{let b=i[a.id];return b&&b.cost/a.dailyLimit>.8}).map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded",children:[(0,b.jsx)(e.AlertTriangle,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:[a.name," near limit"]})]},a.id)),o.filter(b=>{let c=a[b.id];return c?.status==="offline"||c?.status==="error"}).map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-red-400 bg-red-900/20 px-2 py-1 rounded",children:[(0,b.jsx)(g.XCircle,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:[a.name," offline"]})]},a.id)),o.every(b=>a[b.id]?.status!=="offline")&&o.every(a=>!i[a.id]||i[a.id].cost/a.dailyLimit<=.8)&&(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"No alerts"})]})]})]})]})]})}function r({icon:a,label:c,value:d,color:e,isString:f=!1}){let g={cyan:"text-cyan-400",purple:"text-purple-400",green:"text-green-400",yellow:"text-yellow-400",orange:"text-orange-400",blue:"text-blue-400"};return(0,b.jsxs)("div",{className:"p-2 rounded-lg bg-gray-800/50 border border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(a,{className:`w-4 h-4 ${g[e]}`}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:c})]}),(0,b.jsx)("div",{className:`text-lg font-bold ${g[e]}`,children:f?d:d.toLocaleString()})]})}function s({worker:a,status:c,usage:d,actionLoading:e,onControl:f}){let g=c?.status||"offline",k=d?.cost||0,l=d?.requests||0,m=k/a.dailyLimit*100,n=m>100,o={online:{color:"bg-green-500",label:"ON"},offline:{color:"bg-gray-500",label:"OFF"},stuck:{color:"bg-yellow-500 animate-pulse",label:"STUCK"},error:{color:"bg-red-500 animate-pulse",label:"ERR"}}[g];return(0,b.jsxs)("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded bg-gray-800/50 border-l-2 ${{cyan:"border-l-cyan-500",purple:"border-l-purple-500",pink:"border-l-pink-500",blue:"border-l-blue-500",green:"border-l-green-500",yellow:"border-l-yellow-500",orange:"border-l-orange-500"}[a.color]}`,children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${o.color}`,title:o.label}),(0,b.jsx)("div",{className:"w-20",children:(0,b.jsx)("span",{className:"font-medium text-white",children:a.name})}),(0,b.jsx)("div",{className:"w-16 text-xs text-gray-500",children:a.role}),(0,b.jsx)("div",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${"claude"===a.model?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"}`,children:"claude"===a.model?"Claude":"GPT"}),(0,b.jsxs)("div",{className:"w-12 text-xs text-gray-600 font-mono",children:[":",a.port]}),(0,b.jsxs)("div",{className:"flex-1 flex items-center gap-3 text-xs",children:[(0,b.jsxs)("span",{className:"text-gray-500",children:[l," reqs"]}),(0,b.jsxs)("span",{className:n?"text-red-400 font-medium":"text-gray-400",children:["$",k.toFixed(3)]})]}),(0,b.jsx)("div",{className:"w-16 h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full ${n?"bg-red-500":m>80?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${Math.min(m,100)}%`}})}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{onClick:()=>f(a.id,"start"),disabled:e===`${a.id}-start`||"online"===g,className:"p-1 rounded hover:bg-green-600/30 disabled:opacity-30 transition-colors",title:"Start",children:(0,b.jsx)(h.Play,{className:"w-3 h-3 text-green-400"})}),(0,b.jsx)("button",{onClick:()=>f(a.id,"restart"),disabled:e===`${a.id}-restart`,className:"p-1 rounded hover:bg-orange-600/30 disabled:opacity-30 transition-colors",title:"Restart",children:(0,b.jsx)(i,{className:`w-3 h-3 text-orange-400 ${e===`${a.id}-restart`?"animate-spin":""}`})}),(0,b.jsx)("button",{onClick:()=>f(a.id,"stop"),disabled:e===`${a.id}-stop`||"offline"===g,className:"p-1 rounded hover:bg-red-600/30 disabled:opacity-30 transition-colors",title:"Stop",children:(0,b.jsx)(j.Square,{className:"w-3 h-3 text-red-400"})})]})]})}function t({service:a,status:c}){let d=c?.status||"offline";return(0,b.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 rounded bg-gray-800/30 text-sm",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${{online:"bg-green-500",offline:"bg-gray-500",stuck:"bg-yellow-500",error:"bg-red-500"}[d]}`}),(0,b.jsx)("span",{className:"text-gray-300",children:a.name}),(0,b.jsxs)("span",{className:"text-xs text-gray-600 font-mono",children:[":",a.port]}),(0,b.jsx)("span",{className:"flex-1 text-xs text-gray-500 text-right",children:a.role})]})}function u({health:a}){let c={healthy:{bg:"bg-green-600/20",text:"text-green-400",icon:f.CheckCircle},degraded:{bg:"bg-yellow-600/20",text:"text-yellow-400",icon:e.AlertTriangle},down:{bg:"bg-red-600/20",text:"text-red-400",icon:g.XCircle}}[a],d=c.icon;return(0,b.jsx)("div",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded ${c.bg}`,children:(0,b.jsx)(d,{className:`w-3 h-3 ${c.text}`})})}a.s(["default",()=>q],73218)}];

//# sourceMappingURL=Studio_kodiack-dashboard-5500_src_app_ai-team_page_tsx_b9512138._.js.map