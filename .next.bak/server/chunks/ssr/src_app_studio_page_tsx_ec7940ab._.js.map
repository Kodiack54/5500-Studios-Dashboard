{"version":3,"sources":["../../../../src/app/studio/components/DraggableSidebar.tsx","../../../../src/app/studio/browser/components/BrowserHeader.tsx","../../../../src/app/studio/browser/components/BrowserFrame.tsx","../../../../src/app/studio/browser/components/BrowserStatusBar.tsx","../../../../src/app/studio/browser/hooks/useBrowser.ts","../../../../src/app/studio/browser/hooks/useDevServer.ts","../../../../src/app/studio/browser/BrowserPage.tsx","../../../../src/app/studio/components/SidebarIcon.tsx","../../../../src/app/studio/terminal/ClaudeTerminal.tsx","../../../../src/app/studio/session-hub/hooks/usePipelineStatus.ts","../../../../src/app/studio/session-hub/SessionHubPage.tsx","../../../../src/app/studio/page.tsx","../../../../src/app/project-management/ProjectManagementPanel.tsx","../../../../src/app/studio/terminal/constants.ts","../../../../src/app/studio/terminal/useChadTranscription.ts","../../../../src/app/studio/terminal/chatMessageFilter.ts","../../../../src/app/studio/terminal/terminalInput.ts","../../../../node_modules/lucide-react/src/icons/monitor.ts","../../../../node_modules/lucide-react/src/icons/power-off.ts","../../../../node_modules/lucide-react/src/icons/plug.ts","../../../../node_modules/lucide-react/src/icons/power.ts","../../../../node_modules/lucide-react/src/icons/plug-zap.ts","../../../../src/app/studio/terminal/useSusanBriefing.ts","../../../../src/types/index.ts"],"sourcesContent":["'use client';\r\n\r\n/**\r\n * DraggableSidebar.tsx - Studio Tab Draggable Icon Sidebar\r\n * Location: kodiack-dashboard-5500/src/app/studio/components/\r\n *\r\n * Self-contained draggable sidebar for the Studio tab.\r\n * Users can reorder icons by dragging. Order is saved to localStorage.\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { SidebarIcon } from './SidebarIcon';\r\n\r\nexport interface SidebarItem {\r\n  id: string;\r\n  icon: string | React.ReactNode;\r\n  label: string;\r\n}\r\n\r\ninterface DraggableSidebarProps {\r\n  items: SidebarItem[];\r\n  activePanel: string | null;\r\n  onPanelChange: (panel: string | null) => void;\r\n  storageKey?: string;\r\n}\r\n\r\nconst STORAGE_KEY = 'studio-sidebar-order';\r\n\r\nexport function DraggableSidebar({\r\n  items,\r\n  activePanel,\r\n  onPanelChange,\r\n  storageKey = STORAGE_KEY,\r\n}: DraggableSidebarProps) {\r\n  const [orderedItems, setOrderedItems] = useState<SidebarItem[]>(items);\r\n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\r\n  const [dragOverIndex, setDragOverIndex] = useState<number | null>(null);\r\n\r\n  // Load saved order from localStorage\r\n  useEffect(() => {\r\n    try {\r\n      const saved = localStorage.getItem(storageKey);\r\n      if (saved) {\r\n        const savedOrder: string[] = JSON.parse(saved);\r\n        // Reorder items based on saved order\r\n        const reordered = savedOrder\r\n          .map(id => items.find(item => item.id === id))\r\n          .filter((item): item is SidebarItem => item !== undefined);\r\n\r\n        // Add any new items that weren't in saved order\r\n        const newItems = items.filter(item => !savedOrder.includes(item.id));\r\n        setOrderedItems([...reordered, ...newItems]);\r\n      } else {\r\n        setOrderedItems(items);\r\n      }\r\n    } catch {\r\n      setOrderedItems(items);\r\n    }\r\n  }, [items, storageKey]);\r\n\r\n  // Save order to localStorage\r\n  const saveOrder = useCallback((newOrder: SidebarItem[]) => {\r\n    try {\r\n      localStorage.setItem(storageKey, JSON.stringify(newOrder.map(i => i.id)));\r\n    } catch {\r\n      // Ignore storage errors\r\n    }\r\n  }, [storageKey]);\r\n\r\n  const handleDragStart = (e: React.DragEvent, index: number) => {\r\n    setDraggedIndex(index);\r\n    e.dataTransfer.effectAllowed = 'move';\r\n    e.dataTransfer.setData('text/plain', index.toString());\r\n\r\n    // Make the drag image slightly transparent\r\n    if (e.currentTarget instanceof HTMLElement) {\r\n      e.currentTarget.style.opacity = '0.5';\r\n    }\r\n  };\r\n\r\n  const handleDragEnd = (e: React.DragEvent) => {\r\n    if (e.currentTarget instanceof HTMLElement) {\r\n      e.currentTarget.style.opacity = '1';\r\n    }\r\n    setDraggedIndex(null);\r\n    setDragOverIndex(null);\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent, index: number) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'move';\r\n    setDragOverIndex(index);\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setDragOverIndex(null);\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent, dropIndex: number) => {\r\n    e.preventDefault();\r\n\r\n    if (draggedIndex === null || draggedIndex === dropIndex) {\r\n      setDragOverIndex(null);\r\n      return;\r\n    }\r\n\r\n    const newOrder = [...orderedItems];\r\n    const [draggedItem] = newOrder.splice(draggedIndex, 1);\r\n    newOrder.splice(dropIndex, 0, draggedItem);\r\n\r\n    setOrderedItems(newOrder);\r\n    saveOrder(newOrder);\r\n    setDragOverIndex(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-2\">\r\n      {orderedItems.map((item, index) => (\r\n        <div\r\n          key={item.id}\r\n          draggable\r\n          onDragStart={(e) => handleDragStart(e, index)}\r\n          onDragEnd={handleDragEnd}\r\n          onDragOver={(e) => handleDragOver(e, index)}\r\n          onDragLeave={handleDragLeave}\r\n          onDrop={(e) => handleDrop(e, index)}\r\n          className={`relative cursor-grab active:cursor-grabbing transition-transform ${\r\n            dragOverIndex === index && draggedIndex !== index\r\n              ? 'transform translate-y-1'\r\n              : ''\r\n          }`}\r\n        >\r\n          {/* Drop indicator line */}\r\n          {dragOverIndex === index && draggedIndex !== null && draggedIndex !== index && (\r\n            <div className=\"absolute -top-1 left-0 right-0 h-0.5 bg-blue-500 rounded\" />\r\n          )}\r\n\r\n          <SidebarIcon\r\n            icon={item.icon}\r\n            label={item.label}\r\n            active={activePanel === item.id}\r\n            onClick={() => onPanelChange(activePanel === item.id ? null : item.id)}\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { Play, Square, RefreshCw } from 'lucide-react';\r\nimport type { Project, Environment, DevServerStatus } from '@/types';\r\n\r\ninterface BrowserHeaderProps {\r\n  url: string;\r\n  setUrl: (url: string) => void;\r\n  isLoading: boolean;\r\n  serverStatus: DevServerStatus;\r\n  isServerLoading: boolean;\r\n  env: Environment;\r\n  project: Project | null;\r\n  onNavigate: () => void;\r\n  onRefresh: () => void;\r\n  onStartServer: () => void;\r\n  onStopServer: () => void;\r\n  onRestartServer: () => void;\r\n}\r\n\r\nexport function BrowserHeader({\r\n  url,\r\n  setUrl,\r\n  isLoading,\r\n  serverStatus,\r\n  isServerLoading,\r\n  env,\r\n  project,\r\n  onNavigate,\r\n  onRefresh,\r\n  onStartServer,\r\n  onStopServer,\r\n  onRestartServer,\r\n}: BrowserHeaderProps) {\r\n  const getStatusColor = () => {\r\n    switch (serverStatus) {\r\n      case 'running': return 'bg-green-500';\r\n      case 'starting': return 'bg-yellow-500 animate-pulse';\r\n      case 'error': return 'bg-red-500';\r\n      default: return 'bg-gray-500';\r\n    }\r\n  };\r\n\r\n  const getStatusBadgeClass = () => {\r\n    switch (serverStatus) {\r\n      case 'running': return 'bg-green-600/20 text-green-400 border-green-500/50';\r\n      case 'starting': return 'bg-yellow-600/20 text-yellow-400 border-yellow-500/50';\r\n      case 'error': return 'bg-red-600/20 text-red-400 border-red-500/50';\r\n      default: return 'bg-gray-600/20 text-gray-400 border-gray-500/50';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"px-3 py-2 border-b border-gray-700 bg-gray-800 flex items-center gap-2\">\r\n      {/* Server Controls */}\r\n      <div className=\"flex items-center gap-1 pr-2 border-r border-gray-700\">\r\n        {serverStatus === 'running' ? (\r\n          <>\r\n            <button\r\n              onClick={onStopServer}\r\n              disabled={isServerLoading}\r\n              className=\"p-1.5 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 rounded text-white\"\r\n              title=\"Stop Server\"\r\n            >\r\n              <Square className=\"w-4 h-4\" />\r\n            </button>\r\n            <button\r\n              onClick={onRestartServer}\r\n              disabled={isServerLoading}\r\n              className=\"p-1.5 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 rounded text-white\"\r\n              title=\"Restart Server\"\r\n            >\r\n              <RefreshCw className={`w-4 h-4 ${isServerLoading ? 'animate-spin' : ''}`} />\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <button\r\n            onClick={onStartServer}\r\n            disabled={isServerLoading || !project || env.id === 'prod'}\r\n            className=\"px-3 py-1.5 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 rounded text-white text-sm flex items-center gap-1\"\r\n            title={env.id === 'prod' ? 'Cannot start prod server from dev studio' : 'Start Dev Server'}\r\n          >\r\n            <Play className=\"w-4 h-4\" />\r\n            {isServerLoading ? 'Starting...' : 'Start'}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Status Indicator */}\r\n      <div className={`flex items-center gap-1.5 px-2 py-1 rounded border text-xs ${getStatusBadgeClass()}`}>\r\n        <span className={`w-2 h-2 rounded-full ${getStatusColor()}`}></span>\r\n        <span className=\"capitalize\">{serverStatus}</span>\r\n      </div>\r\n\r\n      {/* Refresh Button */}\r\n      <button\r\n        onClick={onRefresh}\r\n        disabled={serverStatus !== 'running'}\r\n        className=\"p-1.5 hover:bg-gray-700 disabled:opacity-50 rounded text-gray-400 hover:text-white\"\r\n        title=\"Refresh\"\r\n      >\r\n        ‚Üª\r\n      </button>\r\n\r\n      {/* URL Bar */}\r\n      <div className=\"flex-1 flex items-center bg-gray-900 rounded-lg border border-gray-700 px-3 py-1.5\">\r\n        <span className=\"text-green-400 mr-2\">üåê</span>\r\n        <input\r\n          type=\"text\"\r\n          value={url}\r\n          onChange={(e) => setUrl(e.target.value)}\r\n          onKeyDown={(e) => e.key === 'Enter' && onNavigate()}\r\n          placeholder=\"Enter URL...\"\r\n          className=\"flex-1 bg-transparent text-white text-sm outline-none\"\r\n        />\r\n        {isLoading && <span className=\"animate-spin text-blue-400\">‚óå</span>}\r\n      </div>\r\n\r\n      {/* Go Button */}\r\n      <button\r\n        onClick={onNavigate}\r\n        className=\"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg\"\r\n      >\r\n        Go\r\n      </button>\r\n\r\n      {/* Environment Indicator */}\r\n      <div className={`px-2 py-1 rounded text-xs font-medium ${\r\n        env.id === 'dev' ? 'bg-blue-600/20 text-blue-400' :\r\n        env.id === 'test' ? 'bg-yellow-600/20 text-yellow-400' :\r\n        'bg-green-600/20 text-green-400'\r\n      }`}>\r\n        {env.name}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { RefObject } from 'react';\r\nimport { Play } from 'lucide-react';\r\nimport type { Project, Environment, DevServerStatus } from '@/types';\r\n\r\ninterface BrowserFrameProps {\r\n  project: Project | null;\r\n  env: Environment;\r\n  serverStatus: DevServerStatus;\r\n  serverError: string | null;\r\n  currentUrl: string;\r\n  isServerLoading: boolean;\r\n  iframeRef: RefObject<HTMLIFrameElement | null>;\r\n  onStartServer: () => void;\r\n  onLoad: () => void;\r\n}\r\n\r\nexport function BrowserFrame({\r\n  project,\r\n  env,\r\n  serverStatus,\r\n  serverError,\r\n  currentUrl,\r\n  isServerLoading,\r\n  iframeRef,\r\n  onStartServer,\r\n  onLoad,\r\n}: BrowserFrameProps) {\r\n  // No project selected\r\n  if (!project) {\r\n    return (\r\n      <div className=\"flex-1 bg-gray-900 flex items-center justify-center text-gray-500\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-4xl mb-4\">üåê</div>\r\n          <p>Select a project to preview</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Server stopped\r\n  if (serverStatus === 'stopped') {\r\n    return (\r\n      <div className=\"flex-1 bg-gray-900 flex items-center justify-center text-gray-500\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-4xl mb-4\">‚è∏Ô∏è</div>\r\n          <p className=\"text-lg mb-2\">Server not running</p>\r\n          <p className=\"text-sm text-gray-600 mb-4\">\r\n            Click \"Start\" to run {project.name} on port {project[env.portKey]}\r\n          </p>\r\n          <button\r\n            onClick={onStartServer}\r\n            disabled={isServerLoading || env.id === 'prod'}\r\n            className=\"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 rounded-lg text-white flex items-center gap-2 mx-auto\"\r\n          >\r\n            <Play className=\"w-5 h-5\" />\r\n            {isServerLoading ? 'Starting...' : 'Start Dev Server'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Server starting\r\n  if (serverStatus === 'starting') {\r\n    return (\r\n      <div className=\"flex-1 bg-gray-900 flex items-center justify-center text-gray-500\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-4xl mb-4 animate-spin\">‚öôÔ∏è</div>\r\n          <p className=\"text-lg mb-2\">Starting server...</p>\r\n          <p className=\"text-sm text-gray-600\">\r\n            Running npm run dev on port {project[env.portKey]}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Server error\r\n  if (serverStatus === 'error') {\r\n    return (\r\n      <div className=\"flex-1 bg-gray-900 flex items-center justify-center text-gray-500\">\r\n        <div className=\"text-center max-w-md\">\r\n          <div className=\"text-4xl mb-4\">‚ùå</div>\r\n          <p className=\"text-lg mb-2 text-red-400\">Server Error</p>\r\n          <p className=\"text-sm text-gray-400 mb-4\">\r\n            {serverError || 'Unknown error occurred'}\r\n          </p>\r\n          <button\r\n            onClick={onStartServer}\r\n            disabled={isServerLoading}\r\n            className=\"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 rounded-lg text-white\"\r\n          >\r\n            Try Again\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Server running with URL\r\n  if (currentUrl) {\r\n    return (\r\n      <div className=\"flex-1 bg-white relative\">\r\n        <iframe\r\n          ref={iframeRef}\r\n          src={currentUrl}\r\n          className=\"w-full h-full border-0\"\r\n          onLoad={onLoad}\r\n          onError={onLoad}\r\n          sandbox=\"allow-same-origin allow-scripts allow-forms allow-popups\"\r\n          title=\"Browser Preview\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Server running but no URL\r\n  return (\r\n    <div className=\"flex-1 bg-gray-900 flex items-center justify-center text-gray-500\">\r\n      <div className=\"text-center\">\r\n        <div className=\"text-4xl mb-4\">üåê</div>\r\n        <p>Enter a URL and click Go</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport type { Project, Environment } from '@/types';\r\n\r\ninterface BrowserStatusBarProps {\r\n  currentUrl: string;\r\n  project: Project | null;\r\n  env: Environment;\r\n}\r\n\r\nexport function BrowserStatusBar({ currentUrl, project, env }: BrowserStatusBarProps) {\r\n  return (\r\n    <div className=\"px-3 py-1 border-t border-gray-700 bg-gray-800 flex items-center justify-between text-xs text-gray-500\">\r\n      <span>{currentUrl || 'No URL loaded'}</span>\r\n      <span>\r\n        {project ? `${project.droplet_name} ¬∑ localhost:${project[env.portKey]}` : 'No project selected'}\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback, RefObject } from 'react';\r\nimport type { Project, Environment } from '@/types';\r\n\r\ninterface UseBrowserProps {\r\n  project: Project | null;\r\n  env: Environment;\r\n  iframeRef: RefObject<HTMLIFrameElement | null>;\r\n}\r\n\r\nexport function useBrowser({ project, env, iframeRef }: UseBrowserProps) {\r\n  const [url, setUrl] = useState('');\r\n  const [currentUrl, setCurrentUrl] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // Build default URL based on project and environment (localhost for droplet access)\r\n  useEffect(() => {\r\n    if (project) {\r\n      const port = project[env.portKey];\r\n      const defaultUrl = `http://localhost:${port}`;\r\n      setUrl(defaultUrl);\r\n      // Don't auto-load URL - wait for server to be running\r\n      if (project.dev_server_status === 'running') {\r\n        setCurrentUrl(defaultUrl);\r\n      }\r\n    }\r\n  }, [project, env]);\r\n\r\n  const handleNavigate = useCallback(() => {\r\n    if (url.trim()) {\r\n      setIsLoading(true);\r\n      setCurrentUrl(url.trim().startsWith('http') ? url.trim() : `http://${url.trim()}`);\r\n    }\r\n  }, [url]);\r\n\r\n  const handleRefresh = useCallback(() => {\r\n    if (iframeRef.current && currentUrl) {\r\n      setIsLoading(true);\r\n      iframeRef.current.src = currentUrl;\r\n    }\r\n  }, [currentUrl, iframeRef]);\r\n\r\n  return {\r\n    url,\r\n    setUrl,\r\n    currentUrl,\r\n    setCurrentUrl,\r\n    isLoading,\r\n    setIsLoading,\r\n    handleNavigate,\r\n    handleRefresh,\r\n  };\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport type { Project, Environment, DevServerStatus } from '@/types';\r\n\r\ninterface UseDevServerProps {\r\n  project: Project | null;\r\n  env: Environment;\r\n  userId?: string;\r\n  setCurrentUrl: (url: string) => void;\r\n}\r\n\r\nexport function useDevServer({ project, env, userId, setCurrentUrl }: UseDevServerProps) {\r\n  const [serverStatus, setServerStatus] = useState<DevServerStatus>('stopped');\r\n  const [serverError, setServerError] = useState<string | null>(null);\r\n  const [isServerLoading, setIsServerLoading] = useState(false);\r\n\r\n  // Initialize status from project\r\n  useEffect(() => {\r\n    if (project) {\r\n      setServerStatus(project.dev_server_status || 'stopped');\r\n      setServerError(project.dev_server_error || null);\r\n    }\r\n  }, [project]);\r\n\r\n  // Poll for server status\r\n  const fetchServerStatus = useCallback(async () => {\r\n    if (!project?.id) return;\r\n\r\n    try {\r\n      const res = await fetch('/api/dev-server');\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        const projectStatus = data.projects.find((p: any) => p.id === project.id);\r\n        if (projectStatus) {\r\n          setServerStatus(projectStatus.dev_server_status || 'stopped');\r\n          setServerError(projectStatus.dev_server_error || null);\r\n\r\n          // Auto-load URL when server starts (localhost for droplet access)\r\n          if (projectStatus.dev_server_status === 'running') {\r\n            const port = project[env.portKey];\r\n            setCurrentUrl(`http://localhost:${port}`);\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch server status:', error);\r\n    }\r\n  }, [project, env, setCurrentUrl]);\r\n\r\n  // Poll every 5 seconds\r\n  useEffect(() => {\r\n    fetchServerStatus();\r\n    const interval = setInterval(fetchServerStatus, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [fetchServerStatus]);\r\n\r\n  const handleStartServer = useCallback(async () => {\r\n    if (!project?.id) return;\r\n\r\n    setIsServerLoading(true);\r\n    setServerError(null);\r\n\r\n    try {\r\n      const res = await fetch('/api/dev-server', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          action: 'start',\r\n          project_id: project.id,\r\n          user_id: userId,\r\n          environment: env.id\r\n        })\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        setServerStatus('running');\r\n        // Load URL after a short delay for server to be ready (localhost for droplet access)\r\n        setTimeout(() => {\r\n          const port = project[env.portKey];\r\n          setCurrentUrl(`http://localhost:${port}`);\r\n        }, 1000);\r\n      } else {\r\n        setServerError(data.error);\r\n        setServerStatus('error');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to start server:', error);\r\n      setServerError('Failed to start server');\r\n      setServerStatus('error');\r\n    } finally {\r\n      setIsServerLoading(false);\r\n    }\r\n  }, [project, env, userId, setCurrentUrl]);\r\n\r\n  const handleStopServer = useCallback(async () => {\r\n    if (!project?.id) return;\r\n\r\n    setIsServerLoading(true);\r\n\r\n    try {\r\n      const res = await fetch('/api/dev-server', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          action: 'stop',\r\n          project_id: project.id\r\n        })\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        setServerStatus('stopped');\r\n        setCurrentUrl('');\r\n      } else {\r\n        setServerError(data.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to stop server:', error);\r\n      setServerError('Failed to stop server');\r\n    } finally {\r\n      setIsServerLoading(false);\r\n    }\r\n  }, [project, setCurrentUrl]);\r\n\r\n  const handleRestartServer = useCallback(async () => {\r\n    if (!project?.id) return;\r\n\r\n    setIsServerLoading(true);\r\n\r\n    try {\r\n      const res = await fetch('/api/dev-server', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          action: 'restart',\r\n          project_id: project.id\r\n        })\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!data.success) {\r\n        setServerError(data.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to restart server:', error);\r\n      setServerError('Failed to restart server');\r\n    } finally {\r\n      setIsServerLoading(false);\r\n    }\r\n  }, [project]);\r\n\r\n  const clearError = useCallback(() => {\r\n    setServerError(null);\r\n  }, []);\r\n\r\n  return {\r\n    serverStatus,\r\n    serverError,\r\n    isServerLoading,\r\n    handleStartServer,\r\n    handleStopServer,\r\n    handleRestartServer,\r\n    clearError,\r\n  };\r\n}\r\n","'use client';\r\n\r\nimport { useRef } from 'react';\r\nimport type { Project, Environment } from '@/types';\r\nimport { BrowserHeader } from './components/BrowserHeader';\r\nimport { BrowserFrame } from './components/BrowserFrame';\r\nimport { BrowserStatusBar } from './components/BrowserStatusBar';\r\nimport { useBrowser } from './hooks/useBrowser';\r\nimport { useDevServer } from './hooks/useDevServer';\r\n\r\ninterface BrowserPageProps {\r\n  project: Project | null;\r\n  env: Environment;\r\n  userId?: string;\r\n}\r\n\r\nexport default function BrowserPage({ project, env, userId }: BrowserPageProps) {\r\n  const iframeRef = useRef<HTMLIFrameElement>(null);\r\n\r\n  const {\r\n    url,\r\n    setUrl,\r\n    currentUrl,\r\n    setCurrentUrl,\r\n    isLoading,\r\n    setIsLoading,\r\n    handleNavigate,\r\n    handleRefresh,\r\n  } = useBrowser({ project, env, iframeRef });\r\n\r\n  const {\r\n    serverStatus,\r\n    serverError,\r\n    isServerLoading,\r\n    handleStartServer,\r\n    handleStopServer,\r\n    handleRestartServer,\r\n    clearError,\r\n  } = useDevServer({ project, env, userId, setCurrentUrl });\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      <BrowserHeader\r\n        url={url}\r\n        setUrl={setUrl}\r\n        isLoading={isLoading}\r\n        serverStatus={serverStatus}\r\n        isServerLoading={isServerLoading}\r\n        env={env}\r\n        project={project}\r\n        onNavigate={handleNavigate}\r\n        onRefresh={handleRefresh}\r\n        onStartServer={handleStartServer}\r\n        onStopServer={handleStopServer}\r\n        onRestartServer={handleRestartServer}\r\n      />\r\n\r\n      {serverError && (\r\n        <div className=\"px-3 py-2 bg-red-900/50 border-b border-red-700 text-red-300 text-sm flex items-center justify-between\">\r\n          <span>Error: {serverError}</span>\r\n          <button onClick={clearError} className=\"text-red-400 hover:text-red-200\">\r\n            ‚úï\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <BrowserFrame\r\n        project={project}\r\n        env={env}\r\n        serverStatus={serverStatus}\r\n        serverError={serverError}\r\n        currentUrl={currentUrl}\r\n        isServerLoading={isServerLoading}\r\n        iframeRef={iframeRef}\r\n        onStartServer={handleStartServer}\r\n        onLoad={() => setIsLoading(false)}\r\n      />\r\n\r\n      <BrowserStatusBar\r\n        currentUrl={currentUrl}\r\n        project={project}\r\n        env={env}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\n/**\r\n * SidebarIcon.tsx - Studio Tab Icon Sidebar Button\r\n * Location: kodiack-dashboard-5500/src/app/studio/components/\r\n *\r\n * Self-contained component for the Studio icon sidebar.\r\n * Each icon represents a panel that can be activated.\r\n */\r\n\r\ninterface SidebarIconProps {\r\n  icon: string | React.ReactNode;\r\n  label: string;\r\n  active: boolean;\r\n  onClick: () => void;\r\n}\r\n\r\nexport function SidebarIcon({ icon, label, active, onClick }: SidebarIconProps) {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      title={label}\r\n      className={`w-10 h-10 rounded-lg flex items-center justify-center text-xl transition-colors ${\r\n        active ? 'bg-blue-600 text-white' : 'hover:bg-gray-700 text-gray-400'\r\n      }`}\r\n    >\r\n      {icon}\r\n    </button>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { Power, PowerOff, FolderOpen, Brain } from 'lucide-react';\r\nimport type { Terminal } from '@xterm/xterm';\r\nimport type { FitAddon } from '@xterm/addon-fit';\r\nimport '@xterm/xterm/css/xterm.css';\r\nimport { useUser } from '@/app/settings/UserContext';\r\n\r\nimport {\r\n  type ChatLogMessage,\r\n  type ConversationMessage,\r\n  type ClaudeTerminalProps,\r\n  DEV_DROPLET,\r\n  BRIEFING_FALLBACK_MS,\r\n  cleanAnsiCodes,\r\n  sendChunkedMessage,\r\n  sendMultipleEnters,\r\n  sendEnter,\r\n  useSusanBriefing,\r\n  buildContextPrompt,\r\n  useChadTranscription,\r\n} from './index';\r\n\r\nexport type { ChatLogMessage, ConversationMessage };\r\n\r\nexport function ClaudeTerminal({\r\n  projectPath = '/var/www/Studio',\r\n  wsUrl,\r\n  port = 5410,\r\n  onMessage,\r\n  sendRef,\r\n  connectRef,\r\n  onConversationMessage,\r\n  onConnectionChange,\r\n}: ClaudeTerminalProps) {\r\n  const { user } = useUser();\r\n  const wsRef = useRef<WebSocket | null>(null);\r\n  const terminalRef = useRef<HTMLDivElement>(null);\r\n  const xtermRef = useRef<Terminal | null>(null);\r\n  const fitAddonRef = useRef<FitAddon | null>(null);\r\n  const contextSentRef = useRef(false);\r\n\r\n  const [connected, setConnected] = useState(false);\r\n  const [connecting, setConnecting] = useState(false);\r\n  const [briefingSent, setBriefingSent] = useState(false);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const inputRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  const {\r\n    memoryStatus,\r\n    susanContext,\r\n    susanContextRef,\r\n    fetchSusanContext,\r\n    reset: resetSusan,\r\n  } = useSusanBriefing(projectPath);\r\n\r\n  // Chad port is terminal port + 1 (e.g., 5410 ‚Üí 5411)\r\n  const chadPort = port + 1;\r\n  const {\r\n    connectToChad,\r\n    sendToChad,\r\n    disconnect: disconnectChad,\r\n  } = useChadTranscription(projectPath, user?.id, user?.name, chadPort);\r\n\r\n  const briefingSentToClaudeRef = useRef<boolean>(false);\r\n  const claudeCodeLoadedRef = useRef<boolean>(false);\r\n\r\n  const sendMessage = useCallback((message: string) => {\r\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\r\n      sendChunkedMessage(wsRef.current, message);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (sendRef) {\r\n      sendRef.current = connected ? sendMessage : null;\r\n    }\r\n  }, [sendRef, sendMessage, connected]);\r\n\r\n  useEffect(() => {\r\n    onConnectionChange?.(connected);\r\n  }, [connected, onConnectionChange]);\r\n\r\n  // Initialize xterm.js\r\n  useEffect(() => {\r\n    if (!terminalRef.current || xtermRef.current) return;\r\n\r\n    const initTerminal = async () => {\r\n      const { Terminal } = await import('@xterm/xterm');\r\n      const { FitAddon } = await import('@xterm/addon-fit');\r\n\r\n      const term = new Terminal({\r\n        theme: {\r\n          background: '#0d1117',\r\n          foreground: '#e6edf3',\r\n          cursor: '#58a6ff',\r\n          cursorAccent: '#0d1117',\r\n          black: '#0d1117',\r\n          red: '#ff7b72',\r\n          green: '#3fb950',\r\n          yellow: '#d29922',\r\n          blue: '#58a6ff',\r\n          magenta: '#bc8cff',\r\n          cyan: '#39c5cf',\r\n          white: '#e6edf3',\r\n          brightBlack: '#484f58',\r\n          brightRed: '#ffa198',\r\n          brightGreen: '#56d364',\r\n          brightYellow: '#e3b341',\r\n          brightBlue: '#79c0ff',\r\n          brightMagenta: '#d2a8ff',\r\n          brightCyan: '#56d4dd',\r\n          brightWhite: '#ffffff',\r\n        },\r\n        fontFamily: 'JetBrains Mono, Menlo, Monaco, Consolas, monospace',\r\n        fontSize: 13,\r\n        lineHeight: 1.2,\r\n        cursorBlink: true,\r\n        cursorStyle: 'block',\r\n        scrollback: 5000,\r\n        convertEol: true,\r\n      });\r\n\r\n      const fitAddon = new FitAddon();\r\n      term.loadAddon(fitAddon);\r\n\r\n      if (terminalRef.current) {\r\n        term.open(terminalRef.current);\r\n        fitAddon.fit();\r\n\r\n        term.writeln('\\x1b[36m‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\x1b[0m');\r\n        term.writeln(`\\x1b[36m   ü§ñ AI Team Member Terminal (${port})       \\x1b[0m`);\r\n        term.writeln('\\x1b[36m‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\x1b[0m');\r\n        term.writeln('');\r\n        term.writeln('\\x1b[33mClick \"Connect\" to start the AI team member\\x1b[0m');\r\n        term.writeln('');\r\n\r\n        xtermRef.current = term;\r\n        fitAddonRef.current = fitAddon;\r\n      }\r\n    };\r\n\r\n    initTerminal();\r\n\r\n    const handleResize = () => {\r\n      if (fitAddonRef.current) {\r\n        setTimeout(() => fitAddonRef.current?.fit(), 100);\r\n      }\r\n    };\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    const resizeObserver = new ResizeObserver(handleResize);\r\n    if (terminalRef.current) {\r\n      resizeObserver.observe(terminalRef.current);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      resizeObserver.disconnect();\r\n      if (xtermRef.current) {\r\n        xtermRef.current.dispose();\r\n        xtermRef.current = null;\r\n      }\r\n      fitAddonRef.current = null;\r\n    };\r\n  }, [port]);\r\n\r\n  const connect = useCallback(async () => {\r\n    if (wsRef.current?.readyState === WebSocket.OPEN) return;\r\n\r\n    setConnecting(true);\r\n    contextSentRef.current = false;\r\n\r\n    const contextPromise = fetchSusanContext();\r\n\r\n    const serverUrl = wsUrl || `ws://${DEV_DROPLET}:${port}?path=${encodeURIComponent(projectPath)}`;\r\n    console.log('[ClaudeTerminal] Connecting via WebSocket to:', serverUrl);\r\n\r\n    const ws = new WebSocket(serverUrl);\r\n\r\n    ws.onopen = async () => {\r\n      console.log('[ClaudeTerminal] WebSocket connected');\r\n      setConnected(true);\r\n      setConnecting(false);\r\n\r\n      connectToChad();\r\n\r\n      if (xtermRef.current) {\r\n        xtermRef.current.writeln('\\x1b[32m[Connected]\\x1b[0m');\r\n        xtermRef.current.writeln('');\r\n        xtermRef.current.writeln('\\x1b[36m‚òï Hold please... your AI team member will be right with you.\\x1b[0m');\r\n        xtermRef.current.writeln('\\x1b[90m   Starting Claude Code...\\x1b[0m');\r\n\r\n        const context = await contextPromise;\r\n        if (context) {\r\n          xtermRef.current.writeln('\\x1b[35m   üìö Susan is loading memory...\\x1b[0m');\r\n        }\r\n        xtermRef.current.writeln('');\r\n      }\r\n\r\n      if (fitAddonRef.current && xtermRef.current) {\r\n        ws.send(JSON.stringify({ type: 'resize', cols: xtermRef.current.cols, rows: xtermRef.current.rows }));\r\n      }\r\n\r\n      // Start Claude Code: type \"claude\", wait, press Enter, wait for load, then send briefing\r\n      setTimeout(() => {\r\n        if (ws.readyState === WebSocket.OPEN) {\r\n          // Step 1: Type \"claude\" (without Enter)\r\n          ws.send(JSON.stringify({ type: 'input', data: 'claude' }));\r\n\r\n          // Step 2: After 500ms, press Enter to execute\r\n          setTimeout(() => {\r\n            if (ws.readyState === WebSocket.OPEN) {\r\n              ws.send(JSON.stringify({ type: 'input', data: '\\r' }));\r\n\r\n              // Step 3: Wait for Claude to fully load, then send Susan briefing\r\n              setTimeout(() => {\r\n                const ctx = susanContextRef.current;\r\n                if (!contextSentRef.current && ws.readyState === WebSocket.OPEN) {\r\n                  contextSentRef.current = true;\r\n                  briefingSentToClaudeRef.current = true;\r\n\r\n                  if (ctx?.greeting) {\r\n                    console.log('[ClaudeTerminal] Sending Susan briefing to Claude');\r\n                    if (xtermRef.current) {\r\n                      xtermRef.current.writeln('\\x1b[35m\\nüìö Sending memory briefing to Claude...\\x1b[0m');\r\n                    }\r\n                    const contextMessage = buildContextPrompt(ctx);\r\n                    sendChunkedMessage(ws, contextMessage, () => {\r\n                      sendMultipleEnters(ws, () => {\r\n                        // Briefing fully sent, unlock chat box\r\n                        setBriefingSent(true);\r\n                        if (xtermRef.current) {\r\n                          xtermRef.current.writeln('\\x1b[32m\\n‚úÖ Ready - chat box unlocked\\x1b[0m');\r\n                        }\r\n                      });\r\n                    });\r\n                  } else {\r\n                    console.log('[ClaudeTerminal] No Susan context available, sending /start command');\r\n                    sendChunkedMessage(ws, '/start', () => {\r\n                      sendMultipleEnters(ws, () => {\r\n                        // Briefing fully sent, unlock chat box\r\n                        setBriefingSent(true);\r\n                        if (xtermRef.current) {\r\n                          xtermRef.current.writeln('\\x1b[32m\\n‚úÖ Ready - chat box unlocked\\x1b[0m');\r\n                        }\r\n                      });\r\n                    });\r\n                  }\r\n                }\r\n              }, BRIEFING_FALLBACK_MS);\r\n            }\r\n          }, 500);\r\n        }\r\n      }, 2000);\r\n\r\n      setTimeout(() => inputRef.current?.focus(), 100);\r\n    };\r\n\r\n    ws.onmessage = (event) => {\r\n      try {\r\n        const msg = JSON.parse(event.data);\r\n        if (msg.type === 'output' && xtermRef.current) {\r\n          xtermRef.current.write(msg.data);\r\n          xtermRef.current.scrollToBottom();\r\n\r\n          sendToChad(msg.data);\r\n\r\n          const cleanData = cleanAnsiCodes(msg.data);\r\n\r\n          // Detect when Claude Code TUI has loaded\r\n          if (!claudeCodeLoadedRef.current) {\r\n            const hasClaudeUI = cleanData.includes('Claude Code') ||\r\n                               cleanData.includes('Opus') ||\r\n                               cleanData.includes('What would you like') ||\r\n                               cleanData.includes('How can I help') ||\r\n                               cleanData.includes('‚ùØ');\r\n            if (hasClaudeUI) {\r\n              claudeCodeLoadedRef.current = true;\r\n              console.log('[ClaudeTerminal] Claude Code TUI detected');\r\n            }\r\n          }\r\n\r\n          // Note: Susan briefing is now sent via timer (10s after connect)\r\n          // Detection removed for reliability\r\n        } else if (msg.type === 'exit') {\r\n          if (xtermRef.current) {\r\n            xtermRef.current.writeln(`\\x1b[33m[Process exited: ${msg.code}]\\x1b[0m`);\r\n          }\r\n          setConnected(false);\r\n        }\r\n      } catch (e) {\r\n        console.error('[ClaudeTerminal] Message parse error:', e);\r\n      }\r\n    };\r\n\r\n    ws.onerror = (error) => {\r\n      console.error('[ClaudeTerminal] WebSocket error:', error);\r\n      if (xtermRef.current) {\r\n        xtermRef.current.writeln('\\x1b[31m[Connection error]\\x1b[0m');\r\n      }\r\n      setConnecting(false);\r\n    };\r\n\r\n    ws.onclose = () => {\r\n      console.log('[ClaudeTerminal] WebSocket closed');\r\n      setConnected(false);\r\n      setConnecting(false);\r\n      setBriefingSent(false);\r\n      if (xtermRef.current) {\r\n        xtermRef.current.writeln('\\x1b[33m[Disconnected]\\x1b[0m');\r\n      }\r\n    };\r\n\r\n    wsRef.current = ws;\r\n  }, [projectPath, wsUrl, port, fetchSusanContext, susanContextRef, connectToChad, sendToChad]);\r\n\r\n  const disconnect = useCallback(() => {\r\n    wsRef.current?.close();\r\n    wsRef.current = null;\r\n    disconnectChad();\r\n    setConnected(false);\r\n    setBriefingSent(false);\r\n    resetSusan();\r\n    briefingSentToClaudeRef.current = false;\r\n    claudeCodeLoadedRef.current = false;\r\n  }, [disconnectChad, resetSusan]);\r\n\r\n  useEffect(() => {\r\n    if (connectRef) {\r\n      connectRef.current = connect;\r\n    }\r\n  }, [connectRef, connect]);\r\n\r\n  // Auto-connect when terminal is mounted (Studio page only renders us when session is connected)\r\n  useEffect(() => {\r\n    if (!connected && !connecting && wsRef.current === null) {\r\n      // Small delay to let xterm initialize first\r\n      const timer = setTimeout(() => {\r\n        connect();\r\n      }, 500);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, []);\r\n\r\n  const sendInput = useCallback(() => {\r\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\r\n      if (inputValue.trim()) {\r\n        sendChunkedMessage(wsRef.current, inputValue);\r\n      } else {\r\n        sendEnter(wsRef.current);\r\n      }\r\n      setInputValue('');\r\n    }\r\n  }, [inputValue]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-gray-900\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between px-3 py-2 bg-gray-800 border-b border-gray-700\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"text-base\">ü§ñ</span>\r\n          <span className=\"text-sm font-medium text-white\">AI Worker</span>\r\n          <span className=\"text-xs text-orange-400/60\">[:{port}]</span>\r\n          <span className={`px-1.5 py-0.5 text-xs rounded ${\r\n            connected ? 'bg-green-600/20 text-green-400' :\r\n            connecting ? 'bg-yellow-600/20 text-yellow-400' :\r\n            'bg-gray-700 text-gray-400'\r\n          }`}>\r\n            {connected ? 'Connected' : connecting ? 'Connecting...' : 'Disconnected'}\r\n          </span>\r\n          {connected && (\r\n            <span className={`flex items-center gap-1 px-1.5 py-0.5 text-xs rounded ${\r\n              memoryStatus === 'loaded' ? 'bg-purple-600/20 text-purple-400' :\r\n              memoryStatus === 'loading' ? 'bg-yellow-600/20 text-yellow-400' :\r\n              'bg-gray-700 text-gray-500'\r\n            }`}>\r\n              <Brain className=\"w-3 h-3\" />\r\n              {memoryStatus === 'loaded' ? 'Memory' : memoryStatus === 'loading' ? 'Loading...' : 'No Memory'}\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-1\">\r\n          {connected ? (\r\n            <button\r\n              onClick={disconnect}\r\n              className=\"flex items-center gap-1 px-2 py-1 text-xs bg-red-600/20 text-red-400 hover:bg-red-600/30 rounded\"\r\n            >\r\n              <PowerOff className=\"w-3 h-3\" />\r\n              Disconnect\r\n            </button>\r\n          ) : (\r\n            <button\r\n              onClick={connect}\r\n              disabled={connecting}\r\n              className=\"flex items-center gap-1 px-2 py-1 text-xs bg-green-600/20 text-green-400 hover:bg-green-600/30 rounded disabled:opacity-50\"\r\n            >\r\n              <Power className=\"w-3 h-3\" />\r\n              {connecting ? 'Connecting...' : 'Connect'}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Project path */}\r\n      <div className=\"flex items-center gap-2 px-3 py-1 bg-gray-800/50 border-b border-gray-700 text-xs text-gray-500\">\r\n        <FolderOpen className=\"w-3 h-3\" />\r\n        <span className=\"truncate\">{projectPath}</span>\r\n      </div>\r\n\r\n      {/* Terminal output */}\r\n      <div\r\n        ref={terminalRef}\r\n        className=\"flex-1 min-h-0 overflow-x-auto overflow-y-auto\"\r\n        style={{ padding: '8px' }}\r\n      />\r\n\r\n      {/* Chat Input Box - Orange themed, locked until briefing sent */}\r\n      <div className=\"shrink-0 border-t-2 border-orange-600\">\r\n        <div className=\"px-2 py-1 bg-orange-600/20 flex items-center gap-2\">\r\n          <span className=\"text-orange-400 text-xs font-medium\">Chat with Claude</span>\r\n          {!connected && <span className=\"text-orange-400/50 text-xs\">(connecting...)</span>}\r\n          {connected && !briefingSent && <span className=\"text-yellow-400/70 text-xs\">(loading Claude & briefing...)</span>}\r\n          {connected && briefingSent && <span className=\"text-green-400/70 text-xs\">(ready)</span>}\r\n        </div>\r\n        <div className=\"px-2 py-2 bg-gray-800\">\r\n          <textarea\r\n            ref={inputRef}\r\n            value={inputValue}\r\n            onChange={(e) => setInputValue(e.target.value)}\r\n            onKeyDown={(e) => {\r\n              if (e.key === 'Enter' && !e.shiftKey) {\r\n                e.preventDefault();\r\n                if (connected && briefingSent) sendInput();\r\n              }\r\n            }}\r\n            placeholder={\r\n              !connected ? \"Connecting to Claude...\" :\r\n              !briefingSent ? \"Please wait - loading Claude and sending briefing...\" :\r\n              \"Type a message and press Enter... (Shift+Enter for new line)\"\r\n            }\r\n            rows={4}\r\n            disabled={!connected || !briefingSent}\r\n            className=\"w-full bg-gray-900 border-2 border-orange-600 rounded px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClaudeTerminal;\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport type {\r\n  ChadStatus,\r\n  JenStatus,\r\n  SusanStatus,\r\n  BucketCounts,\r\n  Session,\r\n  PipelineHealth,\r\n} from '../types';\r\n\r\n// ALL data comes from DATABASE - no HTTP calls to workers\r\n// Workers write TO database, dashboard reads FROM database\r\n\r\nconst defaultChadStatus: ChadStatus = {\r\n  isRunning: false,\r\n  queue: 0,\r\n  processed: 0,\r\n  lastActivity: null,\r\n  error: null,\r\n  sessionsCapured: 0,\r\n  lastDumpTime: null,\r\n  dumpIntervalMin: 10,\r\n};\r\n\r\nconst defaultJenStatus: JenStatus = {\r\n  isRunning: false,\r\n  queue: 0,\r\n  processed: 0,\r\n  lastActivity: null,\r\n  error: null,\r\n  itemsFlagged: 0,\r\n  currentlyProcessing: null,\r\n};\r\n\r\nconst defaultSusanStatus: SusanStatus = {\r\n  isRunning: false,\r\n  queue: 0,\r\n  processed: 0,\r\n  lastActivity: null,\r\n  error: null,\r\n  itemsCategorized: 0,\r\n  currentlyFiling: null,\r\n};\r\n\r\nconst defaultBuckets: BucketCounts = {};\r\n\r\ninterface UsePipelineStatusOptions {\r\n  chadPort?: number;\r\n  isGlobal?: boolean;\r\n}\r\n\r\n// Pipeline: active ‚Üí captured ‚Üí flagged ‚Üí pending ‚Üí cleaned ‚Üí archived\r\ninterface DatabaseStats {\r\n  total_sessions: number;\r\n  active: number;\r\n  captured: number;\r\n  flagged: number;\r\n  pending: number;\r\n  cleaned: number;\r\n  archived: number;\r\n  last_24h: number;\r\n  last_2_days: number;\r\n  last_session: string | null;\r\n}\r\n\r\nexport function usePipelineStatus(options: UsePipelineStatusOptions = {}) {\r\n  const { chadPort, isGlobal } = options;\r\n\r\n  // Derive workspace from chadPort\r\n  // chadPort 5411 ‚Üí dev1, 5421 ‚Üí dev2, 5431 ‚Üí dev3\r\n  // isGlobal or no chadPort ‚Üí no filter (all data)\r\n  const getWorkspace = (): string | null => {\r\n    if (isGlobal || !chadPort) return null;\r\n    if (chadPort >= 5410 && chadPort < 5420) return 'dev1';\r\n    if (chadPort >= 5420 && chadPort < 5430) return 'dev2';\r\n    if (chadPort >= 5430 && chadPort < 5440) return 'dev3';\r\n    return null;\r\n  };\r\n  const workspace = getWorkspace();\r\n\r\n  const [chadStatus, setChadStatus] = useState<ChadStatus>(defaultChadStatus);\r\n  const [jenStatus, setJenStatus] = useState<JenStatus>(defaultJenStatus);\r\n  const [susanStatus, setSusanStatus] = useState<SusanStatus>(defaultSusanStatus);\r\n  const [buckets, setBuckets] = useState<BucketCounts>(defaultBuckets);\r\n  const [previousBuckets, setPreviousBuckets] = useState<BucketCounts>(defaultBuckets);\r\n  const [sessions, setSessions] = useState<Session[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [health, setHealth] = useState<PipelineHealth>({\r\n    chad: 'idle',\r\n    jen: 'idle',\r\n    susan: 'idle',\r\n    overall: 'healthy',\r\n  });\r\n\r\n  const bucketHistoryRef = useRef<BucketCounts[]>([]);\r\n\r\n  // Calculate total pending items\r\n  const totalPending = Object.values(buckets).reduce((sum, count) => sum + count, 0);\r\n\r\n  // Fetch ALL data from database and derive worker status\r\n  const fetchFromDatabase = useCallback(async () => {\r\n    try {\r\n      // Build query params for workspace filtering\r\n      const workspaceParam = workspace ? `?workspace=${workspace}` : '';\r\n      const sessionsParam = workspace ? `?workspace=${workspace}&limit=50` : '?limit=50';\r\n\r\n      // Fetch buckets (status counts) and sessions in parallel\r\n      const [bucketsRes, sessionsRes] = await Promise.all([\r\n        fetch(`/api/ai-sessions/buckets${workspaceParam}`, { cache: 'no-store' }),\r\n        fetch(`/api/ai-sessions${sessionsParam}`, { cache: 'no-store' }),\r\n      ]);\r\n\r\n      if (!bucketsRes.ok || !sessionsRes.ok) {\r\n        throw new Error('Database fetch failed');\r\n      }\r\n\r\n      const bucketsData = await bucketsRes.json();\r\n      const sessionsData = await sessionsRes.json();\r\n\r\n      if (bucketsData.success && bucketsData.buckets) {\r\n        const newBuckets: BucketCounts = bucketsData.buckets;\r\n        const stats: DatabaseStats = bucketsData.stats || {};\r\n\r\n        // Store previous for delta calculation\r\n        setPreviousBuckets(buckets);\r\n        setBuckets(newBuckets);\r\n\r\n        // Track history (keep last 10)\r\n        bucketHistoryRef.current = [...bucketHistoryRef.current.slice(-9), newBuckets];\r\n\r\n        // Derive Chad status from database\r\n        // Chad captures sessions - look at total captured + active\r\n        const chadCaptured = (stats.captured || 0) + (stats.active || 0);\r\n        const lastSession = stats.last_session;\r\n        const hasRecentActivity = lastSession &&\r\n          (Date.now() - new Date(lastSession).getTime()) < 30 * 60 * 1000; // 30 min\r\n\r\n        setChadStatus({\r\n          isRunning: hasRecentActivity || false,\r\n          queue: stats.active || 0,\r\n          processed: stats.total_sessions || 0,\r\n          lastActivity: lastSession,\r\n          error: null,\r\n          sessionsCapured: chadCaptured,\r\n          lastDumpTime: lastSession,\r\n          dumpIntervalMin: 10,\r\n        });\r\n\r\n        // Derive Jen status from database\r\n        // Jen scrubs captured sessions -> queue is captured, processed moves to flagged\r\n        const jenQueue = stats.captured || 0;\r\n        const jenProcessed = stats.flagged || 0;\r\n\r\n        setJenStatus({\r\n          isRunning: jenQueue > 0,\r\n          queue: jenQueue,\r\n          processed: jenProcessed,\r\n          lastActivity: lastSession,\r\n          error: null,\r\n          itemsFlagged: stats.flagged || 0,\r\n          currentlyProcessing: jenQueue > 0 ? 'Processing...' : null,\r\n        });\r\n\r\n        // Derive Susan status from database\r\n        // Susan files flagged sessions -> queue is flagged, processed is pending + cleaned + archived\r\n        const susanQueue = stats.flagged || 0;\r\n        const susanProcessed = (stats.pending || 0) + (stats.cleaned || 0) + (stats.archived || 0);\r\n\r\n        setSusanStatus({\r\n          isRunning: susanQueue > 0,\r\n          queue: susanQueue,\r\n          processed: susanProcessed,\r\n          lastActivity: lastSession,\r\n          error: null,\r\n          itemsCategorized: susanProcessed,\r\n          currentlyFiling: susanQueue > 0 ? 'Filing...' : null,\r\n        });\r\n      }\r\n\r\n      if (sessionsData.success && sessionsData.sessions) {\r\n        setSessions(sessionsData.sessions);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Failed to fetch from database:', error);\r\n      // Set error state on all workers\r\n      const errorMsg = error instanceof Error ? error.message : 'Database connection failed';\r\n      setChadStatus(prev => ({ ...prev, error: errorMsg, isRunning: false }));\r\n      setJenStatus(prev => ({ ...prev, error: errorMsg, isRunning: false }));\r\n      setSusanStatus(prev => ({ ...prev, error: errorMsg, isRunning: false }));\r\n    }\r\n  }, [buckets, workspace]);\r\n\r\n  // Calculate pipeline health based on database status\r\n  const calculateHealth = useCallback(() => {\r\n    const now = Date.now();\r\n    const TEN_MINUTES = 10 * 60 * 1000;\r\n    const THIRTY_MINUTES = 30 * 60 * 1000;\r\n\r\n    // Chad health - based on last activity\r\n    let chadHealth: PipelineHealth['chad'] = 'idle';\r\n    if (chadStatus.error) {\r\n      chadHealth = 'error';\r\n    } else if (chadStatus.lastActivity) {\r\n      const lastActive = new Date(chadStatus.lastActivity).getTime();\r\n      if ((now - lastActive) < TEN_MINUTES) {\r\n        chadHealth = 'healthy';\r\n      } else if ((now - lastActive) > THIRTY_MINUTES) {\r\n        chadHealth = 'stuck';\r\n      }\r\n    }\r\n\r\n    // Jen health - based on queue\r\n    let jenHealth: PipelineHealth['jen'] = 'idle';\r\n    if (jenStatus.error) {\r\n      jenHealth = 'error';\r\n    } else if (jenStatus.queue > 0) {\r\n      jenHealth = 'healthy'; // Has work to do\r\n    }\r\n\r\n    // Susan health - based on queue\r\n    let susanHealth: PipelineHealth['susan'] = 'idle';\r\n    if (susanStatus.error) {\r\n      susanHealth = 'error';\r\n    } else if (susanStatus.queue > 0) {\r\n      susanHealth = 'healthy'; // Has work to do\r\n    }\r\n\r\n    // Overall health\r\n    let overall: PipelineHealth['overall'] = 'healthy';\r\n    if (chadHealth === 'error' || jenHealth === 'error' || susanHealth === 'error') {\r\n      overall = 'down';\r\n    } else if (chadHealth === 'stuck') {\r\n      overall = 'degraded';\r\n    }\r\n\r\n    setHealth({ chad: chadHealth, jen: jenHealth, susan: susanHealth, overall });\r\n  }, [chadStatus, jenStatus, susanStatus]);\r\n\r\n  // Refresh all data from database\r\n  const refreshAll = useCallback(async () => {\r\n    setLoading(true);\r\n    await fetchFromDatabase();\r\n    calculateHealth();\r\n    setLoading(false);\r\n  }, [fetchFromDatabase, calculateHealth]);\r\n\r\n  // Trigger is no longer supported - workers run on their own schedule\r\n  const triggerTeamMember = useCallback(async (member: 'chad' | 'jen' | 'susan') => {\r\n    console.log(`Trigger not supported - ${member} runs on database polling schedule`);\r\n    // Just refresh to show latest data\r\n    await refreshAll();\r\n  }, [refreshAll]);\r\n\r\n  // Calculate bucket delta\r\n  const bucketDelta = useCallback(() => {\r\n    const prevTotal = Object.values(previousBuckets).reduce((sum, c) => sum + c, 0);\r\n    const currTotal = Object.values(buckets).reduce((sum, c) => sum + c, 0);\r\n    return currTotal - prevTotal;\r\n  }, [buckets, previousBuckets]);\r\n\r\n  // Initial fetch\r\n  useEffect(() => {\r\n    refreshAll();\r\n  }, []);\r\n\r\n  // Poll every 5 seconds\r\n  useEffect(() => {\r\n    const interval = setInterval(refreshAll, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [refreshAll]);\r\n\r\n  // Recalculate health when statuses change\r\n  useEffect(() => {\r\n    calculateHealth();\r\n  }, [chadStatus, jenStatus, susanStatus, calculateHealth]);\r\n\r\n  return {\r\n    chadStatus,\r\n    jenStatus,\r\n    susanStatus,\r\n    buckets,\r\n    previousBuckets,\r\n    sessions,\r\n    health,\r\n    totalPending,\r\n    bucketDelta: bucketDelta(),\r\n    loading,\r\n    triggerTeamMember,\r\n    refreshAll,\r\n  };\r\n}\r\n","'use client';\r\n\r\nimport { RefreshCw, AlertTriangle, CheckCircle, XCircle } from 'lucide-react';\r\nimport { usePipelineStatus } from './hooks/usePipelineStatus';\r\nimport type { PipelineHealth } from './types';\r\n\r\ninterface SessionHubPageProps {\r\n  teamBasePort?: number;\r\n  isGlobal?: boolean;\r\n}\r\n\r\n// Helper to get team name from base port\r\nfunction getTeamName(basePort?: number): string {\r\n  if (!basePort) return 'Global Team';\r\n  const teamNumber = Math.floor((basePort - 5400) / 10);\r\n  if (teamNumber === 0) return 'Global Team';\r\n  return `Development Team ${teamNumber}`;\r\n}\r\n\r\nexport default function SessionHubPage({ teamBasePort, isGlobal = false }: SessionHubPageProps) {\r\n  const chadPort = teamBasePort ? teamBasePort + 1 : undefined;\r\n  const teamName = getTeamName(teamBasePort);\r\n\r\n  const {\r\n    chadStatus,\r\n    jenStatus,\r\n    susanStatus,\r\n    buckets,\r\n    previousBuckets,\r\n    sessions,\r\n    health,\r\n    totalPending,\r\n    loading,\r\n    refreshAll,\r\n  } = usePipelineStatus({ chadPort, isGlobal });\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col bg-gray-900 text-white overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"px-4 py-2 bg-gray-800 border-b border-gray-700 flex items-center justify-between shrink-0 relative\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <h1 className=\"text-lg font-semibold\">Session Hub</h1>\r\n          <HealthBadge health={health.overall} />\r\n        </div>\r\n        <div className=\"absolute left-1/2 transform -translate-x-1/2\">\r\n          <span className=\"text-lg font-bold text-cyan-400\">{teamName}</span>\r\n        </div>\r\n        <button\r\n          onClick={refreshAll}\r\n          disabled={loading}\r\n          className=\"flex items-center gap-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 text-white text-sm rounded transition-colors\"\r\n        >\r\n          <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\r\n          Refresh\r\n        </button>\r\n      </div>\r\n\r\n      {/* 3-Column Layout */}\r\n      <div className=\"flex-1 flex overflow-hidden\">\r\n        {/* CHAD - Session Logs */}\r\n        <div className=\"flex-1 flex flex-col border-r border-gray-700 min-w-0\">\r\n          <ColumnHeader\r\n            name=\"Chad\"\r\n            role=\"Capture\"\r\n            health={health.chad}\r\n            metric={chadStatus.sessionsCapured}\r\n            metricLabel=\"captured\"\r\n            color=\"blue\"\r\n            error={chadStatus.error}\r\n          />\r\n          <div className=\"flex-1 overflow-auto p-3 space-y-2\">\r\n            {sessions.length === 0 ? (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <div className=\"text-2xl mb-2\">üì≠</div>\r\n                <p className=\"text-sm\">No sessions yet</p>\r\n                <p className=\"text-xs mt-1\">Dumps every 10 min</p>\r\n              </div>\r\n            ) : (\r\n              sessions.map(session => (\r\n                <SessionLogItem key={session.id} session={session} />\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* JEN - Flagged Buckets */}\r\n        <div className=\"flex-1 flex flex-col border-r border-gray-700 min-w-0\">\r\n          <ColumnHeader\r\n            name=\"Jen\"\r\n            role=\"Scrub & Flag\"\r\n            health={health.jen}\r\n            metric={jenStatus.itemsFlagged}\r\n            metricLabel=\"flagged\"\r\n            color=\"purple\"\r\n            error={jenStatus.error}\r\n          />\r\n          <div className=\"flex-1 overflow-auto p-3\">\r\n            {Object.keys(buckets).length === 0 ? (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <div className=\"text-2xl mb-2\">üè∑Ô∏è</div>\r\n                <p className=\"text-sm\">No items flagged yet</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-1\">\r\n                {Object.entries(buckets)\r\n                  .sort((a, b) => b[1] - a[1])\r\n                  .map(([name, count]) => (\r\n                    <BucketRow\r\n                      key={name}\r\n                      name={name}\r\n                      count={count}\r\n                      prev={previousBuckets[name] ?? 0}\r\n                    />\r\n                  ))}\r\n                <div className=\"pt-2 mt-2 border-t border-gray-700\">\r\n                  <div className=\"flex justify-between text-sm\">\r\n                    <span className=\"text-gray-400\">Total Pending</span>\r\n                    <span className=\"font-bold text-yellow-400\">{totalPending}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* SUSAN - Sorted Items */}\r\n        <div className=\"flex-1 flex flex-col min-w-0\">\r\n          <ColumnHeader\r\n            name=\"Susan\"\r\n            role=\"Categorize & File\"\r\n            health={health.susan}\r\n            metric={susanStatus.itemsCategorized}\r\n            metricLabel=\"filed\"\r\n            color=\"green\"\r\n            error={susanStatus.error}\r\n          />\r\n          <div className=\"flex-1 overflow-auto p-3\">\r\n            {susanStatus.itemsCategorized === 0 ? (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <div className=\"text-2xl mb-2\">üìÅ</div>\r\n                <p className=\"text-sm\">No items filed yet</p>\r\n                <p className=\"text-xs mt-1\">Waiting for Jen</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-2\">\r\n                {/* Show recently filed items by project */}\r\n                <SortedProjectList sessions={sessions} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Column header with team member info\r\ninterface ColumnHeaderProps {\r\n  name: string;\r\n  role: string;\r\n  health: 'healthy' | 'stuck' | 'error' | 'idle';\r\n  metric: number;\r\n  metricLabel: string;\r\n  color: 'blue' | 'purple' | 'green';\r\n  error?: string | null;\r\n}\r\n\r\nfunction ColumnHeader({ name, role, health, metric, metricLabel, color, error }: ColumnHeaderProps) {\r\n  const colors = {\r\n    blue: 'bg-blue-900/50 border-blue-600',\r\n    purple: 'bg-purple-900/50 border-purple-600',\r\n    green: 'bg-green-900/50 border-green-600',\r\n  };\r\n  const textColors = {\r\n    blue: 'text-blue-400',\r\n    purple: 'text-purple-400',\r\n    green: 'text-green-400',\r\n  };\r\n  const healthDots = {\r\n    healthy: 'bg-green-400',\r\n    stuck: 'bg-yellow-400 animate-pulse',\r\n    error: 'bg-red-400',\r\n    idle: 'bg-gray-500',\r\n  };\r\n\r\n  return (\r\n    <div className={`p-3 border-b ${colors[color]} shrink-0`}>\r\n      <div className=\"flex items-center justify-between mb-1\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className={`w-2 h-2 rounded-full ${healthDots[health]}`} />\r\n          <span className={`font-semibold ${textColors[color]}`}>{name}</span>\r\n        </div>\r\n        <span className=\"text-xs text-gray-500\">{role}</span>\r\n      </div>\r\n      <div className=\"flex items-baseline gap-1\">\r\n        <span className=\"text-2xl font-bold text-white\">{metric}</span>\r\n        <span className=\"text-xs text-gray-500\">{metricLabel}</span>\r\n      </div>\r\n      {error && (\r\n        <div className=\"mt-1 text-[10px] text-red-400 truncate\">{error}</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Session log item for Chad's column\r\nfunction SessionLogItem({ session }: { session: any }) {\r\n  const time = session.started_at ? formatTime(session.started_at) : '??:??';\r\n  const endTime = session.ended_at ? formatTime(session.ended_at) : 'now';\r\n  const user = session.user_name || session.user_id || 'Unknown';\r\n  const source = session.source_name || session.source_type || 'Terminal';\r\n\r\n  // Status indicator\r\n  const isDone = session.categorized_by_susan;\r\n  const isWithJen = session.scrubbed_by_jen && !isDone;\r\n  const isWithSusan = session.captured_by_chad && !session.scrubbed_by_jen;\r\n\r\n  return (\r\n    <div className={`p-2 rounded border text-sm ${\r\n      isDone ? 'border-green-800/50 bg-green-900/10 opacity-50' :\r\n      isWithJen ? 'border-purple-800/50 bg-purple-900/20' :\r\n      isWithSusan ? 'border-yellow-800/50 bg-yellow-900/20' :\r\n      'border-blue-800/50 bg-blue-900/20'\r\n    }`}>\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"font-medium text-white truncate\">{user}</span>\r\n        <span className=\"text-[10px] text-gray-500 font-mono shrink-0 ml-2\">\r\n          {time} - {endTime}\r\n        </span>\r\n      </div>\r\n      <div className=\"flex items-center justify-between mt-1\">\r\n        <span className=\"text-xs text-gray-500 truncate\">{source}</span>\r\n        <span className={`text-[10px] px-1.5 py-0.5 rounded ${\r\n          isDone ? 'bg-green-900/50 text-green-400' :\r\n          isWithJen ? 'bg-purple-900/50 text-purple-400' :\r\n          isWithSusan ? 'bg-yellow-900/50 text-yellow-400' :\r\n          'bg-blue-900/50 text-blue-400'\r\n        }`}>\r\n          {isDone ? '‚úì Done' : isWithJen ? '‚Üí Jen' : isWithSusan ? '‚Üí Susan' : 'Captured'}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Bucket row for Jen's column\r\nfunction BucketRow({ name, count, prev }: { name: string; count: number; prev: number }) {\r\n  const delta = count - prev;\r\n\r\n  return (\r\n    <div className={`flex items-center justify-between py-1.5 px-2 rounded ${\r\n      count > 0 ? 'bg-purple-900/20' : 'bg-gray-800/30'\r\n    }`}>\r\n      <span className={`text-sm truncate ${count > 0 ? 'text-white' : 'text-gray-500'}`}>\r\n        {name}\r\n      </span>\r\n      <div className=\"flex items-center gap-2 shrink-0 ml-2\">\r\n        {delta !== 0 && (\r\n          <span className={`text-[10px] font-mono ${delta > 0 ? 'text-green-400' : 'text-red-400'}`}>\r\n            {delta > 0 ? '+' : ''}{delta}\r\n          </span>\r\n        )}\r\n        <span className={`font-mono font-bold min-w-[24px] text-right ${\r\n          count > 0 ? 'text-purple-400' : 'text-gray-600'\r\n        }`}>\r\n          {count}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Susan's sorted items by project\r\nfunction SortedProjectList({ sessions }: { sessions: any[] }) {\r\n  // Group completed sessions by project\r\n  const byProject: Record<string, { count: number; recent: string[] }> = {};\r\n\r\n  sessions\r\n    .filter(s => s.categorized_by_susan)\r\n    .forEach(s => {\r\n      const project = s.project_path || s.source_name || 'Unknown Project';\r\n      const shortProject = project.split('/').pop() || project;\r\n      if (!byProject[shortProject]) {\r\n        byProject[shortProject] = { count: 0, recent: [] };\r\n      }\r\n      byProject[shortProject].count++;\r\n      if (byProject[shortProject].recent.length < 3) {\r\n        byProject[shortProject].recent.push(s.user_name || s.user_id || 'Unknown');\r\n      }\r\n    });\r\n\r\n  const projects = Object.entries(byProject).sort((a, b) => b[1].count - a[1].count);\r\n\r\n  if (projects.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-4 text-gray-500 text-sm\">\r\n        No items filed to projects yet\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      {projects.map(([project, data]) => (\r\n        <div key={project} className=\"p-2 rounded bg-green-900/20 border border-green-800/50\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm font-medium text-white truncate\">{project}</span>\r\n            <span className=\"text-green-400 font-mono font-bold\">{data.count}</span>\r\n          </div>\r\n          <div className=\"text-[10px] text-gray-500 mt-1 truncate\">\r\n            {data.recent.join(', ')}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Health badge\r\nfunction HealthBadge({ health }: { health: PipelineHealth['overall'] }) {\r\n  const config = {\r\n    healthy: { bg: 'bg-green-600/20', text: 'text-green-400', icon: CheckCircle, label: 'Healthy' },\r\n    degraded: { bg: 'bg-yellow-600/20', text: 'text-yellow-400', icon: AlertTriangle, label: 'Degraded' },\r\n    down: { bg: 'bg-red-600/20', text: 'text-red-400', icon: XCircle, label: 'Down' },\r\n  };\r\n  const c = config[health];\r\n  const Icon = c.icon;\r\n\r\n  return (\r\n    <div className={`flex items-center gap-1.5 px-2 py-1 rounded ${c.bg}`}>\r\n      <Icon className={`w-3.5 h-3.5 ${c.text}`} />\r\n      <span className={`text-xs font-medium ${c.text}`}>{c.label}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction formatTime(dateStr: string): string {\r\n  const date = new Date(dateStr);\r\n  return date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });\r\n}\r\n","'use client';\r\n\r\n/**\r\n * Studio Page - Development Environment\r\n * Includes browser preview with project/environment selection\r\n * and Claude terminals for AI team\r\n */\r\n\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport { PageTitleContext, PageActionsContext } from '@/app/layout';\r\nimport { useDeveloper, DEVELOPER_TEAMS } from '@/app/contexts/DeveloperContext';\r\nimport { useUser, useMinRole } from '@/app/settings/UserContext';\r\nimport { Lock } from 'lucide-react';\r\nimport { DraggableSidebar, SidebarItem } from './components';\r\nimport BrowserPage from './browser/BrowserPage';\r\nimport ClaudeTerminal from './terminal/ClaudeTerminal';\r\nimport { SessionHubPage } from './session-hub';\r\nimport ProjectManagementPanel from '../project-management/ProjectManagementPanel';\r\nimport { Plug, PlugZap, Monitor } from 'lucide-react';\r\nimport type { Project, Environment } from '@/types';\r\nimport { ENVIRONMENTS } from '@/types';\r\n\r\n// Sidebar items - same as kodiack-dashboard-5500\r\nconst SIDEBAR_ITEMS: SidebarItem[] = [\r\n  { id: 'files', icon: 'üìÅ', label: 'Files' },\r\n  { id: 'terminal', icon: 'üíª', label: 'Terminal' },\r\n  { id: 'ai-usage', icon: 'üí∞', label: 'AI Usage' },\r\n  { id: 'browser', icon: 'üåê', label: 'Browser' },\r\n  { id: 'schema', icon: 'üóÑÔ∏è', label: 'DB Schema' },\r\n  { id: 'chatlog', icon: 'üìú', label: 'Chat Log' },\r\n  { id: 'hub', icon: 'üéØ', label: 'Session Hub' },\r\n  { id: 'storage', icon: 'üíæ', label: 'Storage' },\r\n  { id: 'projects', icon: '‚öôÔ∏è', label: 'Projects' },\r\n  { id: 'docs', icon: 'üìù', label: 'Docs' },\r\n  { id: 'health', icon: 'ü©∫', label: 'AI Health' },\r\n];\r\n\r\nexport default function StudioPage() {\r\n  const setPageTitle = useContext(PageTitleContext);\r\n  const setPageActions = useContext(PageActionsContext);\r\n  const { selectedTeam, selectTeamById, connectionStatus, connect, disconnect } = useDeveloper();\r\n  const { user } = useUser();\r\n  const isEngineer = useMinRole('engineer');\r\n  const [activePanel, setActivePanel] = useState<string | null>('browser');\r\n\r\n  // Project and environment state\r\n  const [projects, setProjects] = useState<Project[]>([]);\r\n  const [selectedProject, setSelectedProject] = useState<Project | null>(null);\r\n  const [selectedEnv, setSelectedEnv] = useState<Environment>(ENVIRONMENTS[0]);\r\n  const [isLoadingProjects, setIsLoadingProjects] = useState(true);\r\n\r\n  // Locked teams state - shows which teams are in use by other users\r\n  const [lockedTeams, setLockedTeams] = useState<Record<string, { userId: string; userName: string; since: string }>>({});\r\n\r\n  // Fetch locked teams status\r\n  useEffect(() => {\r\n    async function fetchLockedTeams() {\r\n      try {\r\n        const res = await fetch('/api/dev-session/status');\r\n        const data = await res.json();\r\n        if (data.success && data.lockedTeams) {\r\n          setLockedTeams(data.lockedTeams);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch locked teams:', error);\r\n      }\r\n    }\r\n    fetchLockedTeams();\r\n    // Refresh every 10 seconds\r\n    const interval = setInterval(fetchLockedTeams, 10000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Fetch projects on mount\r\n  useEffect(() => {\r\n    async function fetchProjects() {\r\n      try {\r\n        const res = await fetch('/api/projects');\r\n        const data = await res.json();\r\n        if (data.success && data.projects) {\r\n          setProjects(data.projects);\r\n          // Auto-select first project\r\n          if (data.projects.length > 0) {\r\n            setSelectedProject(data.projects[0]);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch projects:', error);\r\n      } finally {\r\n        setIsLoadingProjects(false);\r\n      }\r\n    }\r\n    fetchProjects();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setPageTitle({\r\n      title: 'Studio',\r\n      description: 'Development environment with Claude AI'\r\n    });\r\n\r\n    // Add project/environment selectors as page actions\r\n    setPageActions(\r\n      <div className=\"flex items-center gap-2\">\r\n        {/* Project Dropdown */}\r\n        <select\r\n          value={selectedProject?.id || ''}\r\n          onChange={(e) => {\r\n            const project = projects.find(p => p.id === e.target.value);\r\n            setSelectedProject(project || null);\r\n          }}\r\n          className=\"w-44 bg-gray-800/80 text-white text-sm px-3 py-1.5 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-white/30\"\r\n          disabled={isLoadingProjects}\r\n        >\r\n          {isLoadingProjects ? (\r\n            <option>Loading...</option>\r\n          ) : projects.length === 0 ? (\r\n            <option>No projects</option>\r\n          ) : (\r\n            projects.map(p => (\r\n              <option key={p.id} value={p.id}>{p.name}</option>\r\n            ))\r\n          )}\r\n        </select>\r\n\r\n        {/* Environment Dropdown */}\r\n        <select\r\n          value={selectedEnv.id}\r\n          onChange={(e) => {\r\n            const env = ENVIRONMENTS.find(env => env.id === e.target.value);\r\n            if (env) setSelectedEnv(env);\r\n          }}\r\n          className=\"w-44 bg-gray-800/80 text-white text-sm px-3 py-1.5 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-white/30\"\r\n        >\r\n          {ENVIRONMENTS.map(env => (\r\n            <option key={env.id} value={env.id}>{env.name}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n    );\r\n\r\n    return () => {\r\n      setPageTitle({ title: '', description: '' });\r\n      setPageActions(null);\r\n    };\r\n  }, [setPageTitle, setPageActions, projects, selectedProject, selectedEnv, isLoadingProjects]);\r\n\r\n  // Show access restricted for non-engineers\r\n  if (!isEngineer) {\r\n    return (\r\n      <div className=\"h-full flex items-center justify-center bg-gray-900\">\r\n        <div className=\"text-center\">\r\n          <Lock className=\"w-16 h-16 text-gray-600 mx-auto mb-4\" />\r\n          <h2 className=\"text-xl font-bold text-white mb-2\">Access Restricted</h2>\r\n          <p className=\"text-gray-400\">Engineer+ access required for the Dev Studio Environment.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show connection modal when not connected\r\n  if (connectionStatus !== 'connected') {\r\n    return (\r\n      <div className=\"h-full flex items-center justify-center bg-gray-900\">\r\n        <div className=\"max-w-lg w-full mx-4\">\r\n          {/* Modal Card */}\r\n          <div className=\"bg-gray-800 rounded-2xl border border-gray-700 shadow-2xl overflow-hidden\">\r\n            {/* Header */}\r\n            <div className=\"p-6 text-center border-b border-gray-700\" style={{ background: 'linear-gradient(to right, #3B82F6, #06B6D4)' }}>\r\n              <Monitor className=\"w-12 h-12 text-white mx-auto mb-3\" />\r\n              <h2 className=\"text-xl font-bold text-white\">Welcome to Studio</h2>\r\n              <p className=\"text-white/80 text-sm mt-1\">Select your dev team and connect to begin</p>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"p-6 space-y-4\">\r\n              {/* Dev Team Selection */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Select Development Team</label>\r\n                <div className=\"space-y-2\">\r\n                  {DEVELOPER_TEAMS.map((team, index) => {\r\n                    const lockInfo = lockedTeams[team.id];\r\n                    const isLockedByOther = lockInfo && lockInfo.userId !== user?.id;\r\n                    const isLockedByMe = lockInfo && lockInfo.userId === user?.id;\r\n\r\n                    return (\r\n                      <button\r\n                        key={team.id}\r\n                        onClick={() => !isLockedByOther && selectTeamById(team.id)}\r\n                        disabled={isLockedByOther}\r\n                        className={`w-full p-3 rounded-lg border text-left transition-all flex items-center justify-between ${\r\n                          isLockedByOther\r\n                            ? 'border-red-800/50 bg-red-900/20 cursor-not-allowed opacity-60'\r\n                            : selectedTeam.id === team.id\r\n                            ? 'border-cyan-500 bg-cyan-500/20'\r\n                            : 'border-gray-600 bg-gray-700/50 hover:border-gray-500'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${\r\n                            isLockedByOther\r\n                              ? 'bg-red-800/50 text-red-300'\r\n                              : selectedTeam.id === team.id\r\n                              ? 'bg-cyan-500 text-white'\r\n                              : 'bg-gray-600 text-gray-300'\r\n                          }`}>\r\n                            {isLockedByOther ? <Lock className=\"w-4 h-4\" /> : index + 1}\r\n                          </div>\r\n                          <div className=\"flex flex-col\">\r\n                            <span className={`font-medium ${\r\n                              isLockedByOther\r\n                                ? 'text-red-400'\r\n                                : selectedTeam.id === team.id\r\n                                ? 'text-cyan-400'\r\n                                : 'text-gray-300'\r\n                            }`}>\r\n                              Development Team {index + 1}\r\n                            </span>\r\n                            {isLockedByOther && (\r\n                              <span className=\"text-xs text-red-400/70\">\r\n                                Locked by {lockInfo.userName}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        {isLockedByOther ? (\r\n                          <span className=\"text-red-400 text-xs\">In Use</span>\r\n                        ) : isLockedByMe ? (\r\n                          <span className=\"text-green-400 text-xs\">Your Session</span>\r\n                        ) : selectedTeam.id === team.id ? (\r\n                          <span className=\"text-cyan-400 text-sm\">Selected</span>\r\n                        ) : (\r\n                          <span className=\"text-green-400 text-xs\">Available</span>\r\n                        )}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Connect Button */}\r\n              <button\r\n                onClick={() => user?.id && connect(user.id)}\r\n                disabled={!user?.id || connectionStatus === 'connecting'}\r\n                className=\"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-medium rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {connectionStatus === 'connecting' ? (\r\n                  <>\r\n                    <Plug className=\"w-5 h-5 animate-pulse\" />\r\n                    <span>Connecting...</span>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <PlugZap className=\"w-5 h-5\" />\r\n                    <span>Connect to Development Team {selectedTeam.id.replace('dev', '')}</span>\r\n                  </>\r\n                )}\r\n              </button>\r\n\r\n              {/* Info */}\r\n              <p className=\"text-center text-gray-500 text-xs\">\r\n                Your session will be logged for {user?.name || 'your account'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full flex bg-gray-900\">\r\n      {/* Icon Sidebar */}\r\n      <div className=\"w-14 bg-gray-800 border-r border-gray-700 flex flex-col items-center py-2 flex-shrink-0\">\r\n        <DraggableSidebar\r\n          items={SIDEBAR_ITEMS}\r\n          activePanel={activePanel}\r\n          onPanelChange={setActivePanel}\r\n        />\r\n      </div>\r\n\r\n      {/* Main Area */}\r\n      <div className=\"flex-1 flex overflow-hidden\">\r\n        {/* Left: Browser/Panel content area */}\r\n        <div className=\"flex-1 flex flex-col border-r border-gray-700\">\r\n          {activePanel === 'browser' ? (\r\n            <BrowserPage\r\n              project={selectedProject}\r\n              env={selectedEnv}\r\n            />\r\n          ) : activePanel === 'hub' ? (\r\n            <SessionHubPage teamBasePort={selectedTeam.basePort} />\r\n          ) : activePanel === 'projects' ? (\r\n            <div className=\"flex-1 overflow-auto p-4\">\r\n              <ProjectManagementPanel />\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex-1 flex items-center justify-center text-gray-600 text-sm\">\r\n              {activePanel ? `${activePanel} panel - coming soon` : 'Select a panel from the sidebar'}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right: Claude Terminal area */}\r\n        <div className=\"w-[400px] bg-gray-850 flex flex-col flex-shrink-0\">\r\n          {/* Blue header bar with Disconnect button */}\r\n          <div className=\"h-10 flex items-center justify-between px-3\" style={{ background: 'linear-gradient(to right, #3B82F6, #06B6D4)' }}>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm font-medium text-white\">AI Team</span>\r\n              <span className=\"text-xs text-white/70\">({selectedTeam.portRange})</span>\r\n            </div>\r\n\r\n            <button\r\n              onClick={disconnect}\r\n              className=\"flex items-center gap-2 px-3 py-1 bg-green-500/30 text-white border border-white/30 rounded-lg hover:bg-red-500/30 hover:border-red-400/50 transition-colors\"\r\n            >\r\n              <PlugZap className=\"w-4 h-4\" />\r\n              <span className=\"text-sm font-medium\">Connected</span>\r\n              <span className=\"w-2 h-2 rounded-full bg-green-400 animate-pulse\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Terminal content */}\r\n          <div className=\"flex-1 min-h-0 flex flex-col\">\r\n            <ClaudeTerminal\r\n              port={selectedTeam.basePort}\r\n              projectPath={selectedProject?.server_path || '/var/www/Studio'}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Plus, ArrowLeft, Server, ChevronRight, Settings, GripVertical, CheckSquare, BookOpen, Clock, AlertCircle, Building2 } from 'lucide-react';\r\nimport { Project, TabType, TABS } from './types';\r\nimport { useClient } from '@/app/contexts/ClientContext';\r\nimport ProjectHeader from './components/ProjectHeader';\r\nimport ProjectTabs from './components/ProjectTabs';\r\nimport ProjectForm from './components/ProjectForm';\r\nimport {\r\n  DndContext,\r\n  closestCenter,\r\n  KeyboardSensor,\r\n  PointerSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragEndEvent,\r\n} from '@dnd-kit/core';\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  sortableKeyboardCoordinates,\r\n  useSortable,\r\n  verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\n\r\n// Tab Components\r\nimport TodosTab from './tabs/TodosTab';\r\nimport DocsTab from './tabs/DocsTab';\r\nimport DatabaseTab from './tabs/DatabaseTab';\r\nimport StructureTab from './tabs/StructureTab';\r\nimport NotepadTab from './tabs/NotepadTab';\r\nimport BugsTab from './tabs/BugsTab';\r\nimport ConventionsTab from './tabs/ConventionsTab';\r\nimport KnowledgeTab from './tabs/KnowledgeTab';\r\n\r\ninterface ProjectSummary {\r\n  sessions: { pending: number; processed: number; total: number };\r\n  todos: { pending: number; completed: number; total: number };\r\n  knowledge: number;\r\n  bugs: number;\r\n  code_changes: number;\r\n  last_activity: string | null;\r\n}\r\n\r\ninterface ProjectManagementPanelProps {\r\n  onProjectsChange?: () => void;\r\n}\r\n\r\n// Sortable Project Card Component\r\nfunction SortableProjectCard({\r\n  project,\r\n  summary,\r\n  formatTimeAgo,\r\n  onSelect,\r\n  onEdit,\r\n}: {\r\n  project: Project;\r\n  summary?: ProjectSummary;\r\n  formatTimeAgo: (date: string | null) => string | null;\r\n  onSelect: (p: Project) => void;\r\n  onEdit: (p: Project) => void;\r\n}) {\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({ id: project.id });\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n    zIndex: isDragging ? 1000 : 'auto',\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={setNodeRef}\r\n      style={style}\r\n      className=\"p-3 bg-gray-800 hover:bg-gray-750 border border-gray-700 hover:border-blue-500 rounded cursor-pointer group transition-colors\"\r\n    >\r\n      <div className=\"flex items-start gap-3\">\r\n        {/* Drag Handle */}\r\n        <button\r\n          {...attributes}\r\n          {...listeners}\r\n          className=\"p-1 text-gray-600 hover:text-white cursor-grab active:cursor-grabbing flex-shrink-0 mt-1\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <GripVertical className=\"w-4 h-4\" />\r\n        </button>\r\n\r\n        {/* Logo/Initial */}\r\n        <div onClick={() => onSelect(project)} className=\"flex-shrink-0\">\r\n          {project.logo_url ? (\r\n            <img src={project.logo_url} alt=\"\" className=\"w-10 h-10 rounded object-cover\" />\r\n          ) : (\r\n            <div className=\"w-10 h-10 rounded bg-blue-600/20 flex items-center justify-center text-blue-400 font-bold\">\r\n              {project.name.charAt(0).toUpperCase()}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Main Info */}\r\n        <div className=\"flex-1 min-w-0\" onClick={() => onSelect(project)}>\r\n          {/* Name & Description */}\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-white font-medium\">{project.name}</span>\r\n            <span className=\"text-gray-600 text-xs\">({project.slug})</span>\r\n            <ChevronRight className=\"w-4 h-4 text-gray-600 group-hover:text-blue-400 ml-auto flex-shrink-0\" />\r\n          </div>\r\n          {project.description && (\r\n            <p className=\"text-gray-400 text-sm mt-0.5 truncate\">{project.description}</p>\r\n          )}\r\n\r\n          {/* At-a-glance Info Row */}\r\n          <div className=\"flex flex-wrap items-center gap-x-4 gap-y-1 mt-2 text-xs\">\r\n            {/* Droplet */}\r\n            {project.droplet_name && (\r\n              <span className=\"flex items-center gap-1 text-gray-400\">\r\n                <Server className=\"w-3 h-3\" />\r\n                {project.droplet_name}\r\n                {project.droplet_ip && <span className=\"text-gray-600\">({project.droplet_ip})</span>}\r\n              </span>\r\n            )}\r\n\r\n            {/* Ports */}\r\n            {(project.port_dev || project.port_test || project.port_prod) && (\r\n              <span className=\"flex items-center gap-1\">\r\n                {project.port_dev && <span className=\"px-1.5 py-0.5 bg-blue-600/20 text-blue-400 rounded\">Dev:{project.port_dev}</span>}\r\n                {project.port_test && <span className=\"px-1.5 py-0.5 bg-yellow-600/20 text-yellow-400 rounded\">Test:{project.port_test}</span>}\r\n                {project.port_prod && <span className=\"px-1.5 py-0.5 bg-green-600/20 text-green-400 rounded\">Prod:{project.port_prod}</span>}\r\n              </span>\r\n            )}\r\n\r\n            {/* Build Number */}\r\n            {project.build_number && (\r\n              <span className=\"text-gray-500\">\r\n                Build: <span className=\"text-gray-300\">{project.build_number}</span>\r\n              </span>\r\n            )}\r\n\r\n            {/* Git Repo */}\r\n            {project.git_repo && (\r\n              <span className=\"text-gray-500 truncate max-w-[200px]\">\r\n                {project.git_repo.replace('https://github.com/', '')}\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          {/* At-a-glance Stats Row */}\r\n          {summary && (\r\n            <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 mt-2 pt-2 border-t border-gray-700/50 text-xs\">\r\n              {/* Todos */}\r\n              {summary.todos.total > 0 && (\r\n                <span className=\"flex items-center gap-1 text-gray-400\">\r\n                  <CheckSquare className=\"w-3 h-3\" />\r\n                  <span className=\"text-yellow-400\">{summary.todos.pending}</span>\r\n                  <span className=\"text-gray-600\">/</span>\r\n                  <span className=\"text-green-400\">{summary.todos.completed}</span>\r\n                  <span className=\"text-gray-600\">todos</span>\r\n                </span>\r\n              )}\r\n\r\n              {/* Knowledge */}\r\n              {summary.knowledge > 0 && (\r\n                <span className=\"flex items-center gap-1 text-gray-400\">\r\n                  <BookOpen className=\"w-3 h-3\" />\r\n                  <span className=\"text-purple-400\">{summary.knowledge}</span>\r\n                  <span className=\"text-gray-600\">knowledge</span>\r\n                </span>\r\n              )}\r\n\r\n              {/* Bugs */}\r\n              {summary.bugs > 0 && (\r\n                <span className=\"flex items-center gap-1 text-gray-400\">\r\n                  <AlertCircle className=\"w-3 h-3\" />\r\n                  <span className=\"text-red-400\">{summary.bugs}</span>\r\n                  <span className=\"text-gray-600\">bugs</span>\r\n                </span>\r\n              )}\r\n\r\n              {/* Pending Sessions */}\r\n              {summary.sessions.pending > 0 && (\r\n                <span className=\"flex items-center gap-1 px-1.5 py-0.5 bg-yellow-600/10 text-yellow-400 rounded\">\r\n                  {summary.sessions.pending} pending\r\n                </span>\r\n              )}\r\n\r\n              {/* Last Activity */}\r\n              {summary.last_activity && (\r\n                <span className=\"flex items-center gap-1 text-gray-500 ml-auto\">\r\n                  <Clock className=\"w-3 h-3\" />\r\n                  {formatTimeAgo(summary.last_activity)}\r\n                </span>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Edit button */}\r\n        <button\r\n          onClick={(e) => { e.stopPropagation(); onEdit(project); }}\r\n          className=\"p-2 text-gray-500 hover:text-white hover:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-all flex-shrink-0\"\r\n        >\r\n          <Settings className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function ProjectManagementPanel({ onProjectsChange }: ProjectManagementPanelProps) {\r\n  const { selectedClient } = useClient();\r\n  const [allProjects, setAllProjects] = useState<Project[]>([]);\r\n  const [selectedProject, setSelectedProject] = useState<Project | null>(null);\r\n  const [activeTab, setActiveTab] = useState<TabType>('todos');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showProjectForm, setShowProjectForm] = useState(false);\r\n  const [editingProject, setEditingProject] = useState<Project | null>(null);\r\n  const [projectSummaries, setProjectSummaries] = useState<Record<string, ProjectSummary>>({});\r\n\r\n  // DnD sensors\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, { activationConstraint: { distance: 8 } }),\r\n    useSensor(KeyboardSensor, { coordinateGetter: sortableKeyboardCoordinates })\r\n  );\r\n\r\n  // Filter projects by selected client\r\n  const projects = selectedClient\r\n    ? allProjects.filter(p => p.client_id === selectedClient.id)\r\n    : allProjects;\r\n\r\n  useEffect(() => {\r\n    fetchProjects();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (projects.length > 0) {\r\n      fetchProjectSummaries();\r\n    }\r\n  }, [projects]);\r\n\r\n  const fetchProjects = async () => {\r\n    try {\r\n      const response = await fetch('/project-management/api/projects');\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setAllProjects(data.projects);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching projects:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchProjectSummaries = async () => {\r\n    try {\r\n      const response = await fetch('/project-management/api/projects/summary');\r\n      const data = await response.json();\r\n      if (data.success && data.summaries) {\r\n        setProjectSummaries(data.summaries);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching project summaries:', error);\r\n    }\r\n  };\r\n\r\n  const formatTimeAgo = (dateStr: string | null) => {\r\n    if (!dateStr) return null;\r\n    const date = new Date(dateStr);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMins / 60);\r\n    const diffDays = Math.floor(diffHours / 24);\r\n\r\n    if (diffMins < 1) return 'just now';\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    if (diffDays < 7) return `${diffDays}d ago`;\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  const handleSelectProject = (project: Project) => {\r\n    setSelectedProject(project);\r\n    setActiveTab('todos');\r\n  };\r\n\r\n  const handleBackToList = () => {\r\n    setSelectedProject(null);\r\n  };\r\n\r\n  const handleEditProject = (project: Project) => {\r\n    setEditingProject(project);\r\n    setShowProjectForm(true);\r\n  };\r\n\r\n  const handleAddProject = () => {\r\n    setEditingProject(null);\r\n    setShowProjectForm(true);\r\n  };\r\n\r\n  const handleFormClose = () => {\r\n    setShowProjectForm(false);\r\n    setEditingProject(null);\r\n  };\r\n\r\n  const handleFormSave = () => {\r\n    fetchProjects();\r\n    onProjectsChange?.();\r\n    handleFormClose();\r\n  };\r\n\r\n  // Handle drag end for reordering\r\n  const handleDragEnd = async (event: DragEndEvent) => {\r\n    const { active, over } = event;\r\n    if (!over || active.id === over.id) return;\r\n\r\n    const oldIndex = projects.findIndex(p => p.id === active.id);\r\n    const newIndex = projects.findIndex(p => p.id === over.id);\r\n\r\n    if (oldIndex === -1 || newIndex === -1) return;\r\n\r\n    // Optimistically update the UI\r\n    const reorderedProjects = arrayMove(projects, oldIndex, newIndex);\r\n\r\n    // Update allProjects with new order\r\n    const newAllProjects = [...allProjects];\r\n    reorderedProjects.forEach((project, index) => {\r\n      const allIndex = newAllProjects.findIndex(p => p.id === project.id);\r\n      if (allIndex !== -1) {\r\n        newAllProjects[allIndex] = { ...newAllProjects[allIndex], sort_order: index };\r\n      }\r\n    });\r\n    setAllProjects(newAllProjects);\r\n\r\n    // Save to database\r\n    try {\r\n      await Promise.all(\r\n        reorderedProjects.map((project, index) =>\r\n          fetch('/project-management/api/projects', {\r\n            method: 'PATCH',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ id: project.id, sort_order: index }),\r\n          })\r\n        )\r\n      );\r\n      onProjectsChange?.();\r\n    } catch (error) {\r\n      console.error('Error saving project order:', error);\r\n      fetchProjects(); // Revert on error\r\n    }\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    if (!selectedProject) return null;\r\n    const projectPath = selectedProject.server_path || '';\r\n\r\n    switch (activeTab) {\r\n      case 'todos':\r\n        return <TodosTab projectPath={projectPath} projectId={selectedProject.id} />;\r\n      case 'knowledge':\r\n        return <KnowledgeTab projectPath={projectPath} projectId={selectedProject.id} />;\r\n      case 'docs':\r\n        return <DocsTab projectPath={projectPath} projectId={selectedProject.id} />;\r\n      case 'database':\r\n        return <DatabaseTab projectPath={projectPath} projectId={selectedProject.id} />;\r\n      case 'structure':\r\n        return <StructureTab projectPath={projectPath} projectId={selectedProject.id} />;\r\n      \r\n      case 'conventions':\r\n        return <ConventionsTab projectPath={projectPath} projectId={selectedProject.id} />;\r\n      case 'notepad':\r\n        return <NotepadTab projectPath={projectPath} projectId={selectedProject.id} />;\r\n      case 'bugs':\r\n        return <BugsTab projectPath={projectPath} projectId={selectedProject.id} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full\">\r\n        <div className=\"animate-spin text-2xl\">‚öôÔ∏è</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Detail View - when a project is selected\r\n  if (selectedProject) {\r\n    return (\r\n      <div className=\"flex flex-col h-full\">\r\n        {/* Back button */}\r\n        <button\r\n          onClick={handleBackToList}\r\n          className=\"flex items-center gap-2 text-gray-400 hover:text-white mb-3 text-sm\"\r\n        >\r\n          <ArrowLeft className=\"w-4 h-4\" />\r\n          All Projects\r\n        </button>\r\n\r\n        {/* Project Header */}\r\n        <div className=\"mb-3 pb-3 border-b border-gray-700\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-lg font-semibold text-white\">{selectedProject.name}</h2>\r\n              {selectedProject.description && (\r\n                <p className=\"text-gray-400 text-sm\">{selectedProject.description}</p>\r\n              )}\r\n              <div className=\"flex items-center gap-3 mt-2 text-xs text-gray-500\">\r\n                {selectedProject.droplet_name && (\r\n                  <span className=\"flex items-center gap-1\">\r\n                    <Server className=\"w-3 h-3\" />\r\n                    {selectedProject.droplet_name}\r\n                  </span>\r\n                )}\r\n                {selectedProject.port_dev && (\r\n                  <span className=\"px-2 py-0.5 bg-blue-600/20 text-blue-400 rounded\">\r\n                    Dev: {selectedProject.port_dev}\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => handleEditProject(selectedProject)}\r\n              className=\"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded\"\r\n            >\r\n              <Settings className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <ProjectTabs activeTab={activeTab} onTabChange={setActiveTab} />\r\n\r\n        {/* Tab Content */}\r\n        <div className=\"flex-1 overflow-auto mt-3\">\r\n          {renderTabContent()}\r\n        </div>\r\n\r\n        {/* Project Form Modal */}\r\n        {showProjectForm && (\r\n          <ProjectForm\r\n            project={editingProject}\r\n            onClose={handleFormClose}\r\n            onSave={handleFormSave}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // List View - all projects\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"text-gray-400 text-sm\">{projects.length} projects</span>\r\n          {selectedClient && (\r\n            <span className=\"px-2 py-0.5 bg-blue-600/20 text-blue-400 rounded text-xs flex items-center gap-1\">\r\n              <Building2 className=\"w-3 h-3\" />\r\n              {selectedClient.name}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <button\r\n          onClick={handleAddProject}\r\n          className=\"flex items-center gap-1 px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm\"\r\n        >\r\n          <Plus className=\"w-3 h-3\" />\r\n          Add\r\n        </button>\r\n      </div>\r\n\r\n      {/* Project List */}\r\n      {projects.length === 0 ? (\r\n        <div className=\"text-center py-8 text-gray-500\">\r\n          <div className=\"text-4xl mb-2\">üìÅ</div>\r\n          <p>No projects yet</p>\r\n        </div>\r\n      ) : (\r\n        <DndContext\r\n          sensors={sensors}\r\n          collisionDetection={closestCenter}\r\n          onDragEnd={handleDragEnd}\r\n        >\r\n          <SortableContext items={projects.map(p => p.id)} strategy={verticalListSortingStrategy}>\r\n            <div className=\"flex-1 overflow-auto space-y-2\">\r\n              {projects.map((project) => (\r\n                <SortableProjectCard\r\n                  key={project.id}\r\n                  project={project}\r\n                  summary={projectSummaries[project.id]}\r\n                  formatTimeAgo={formatTimeAgo}\r\n                  onSelect={handleSelectProject}\r\n                  onEdit={handleEditProject}\r\n                />\r\n              ))}\r\n            </div>\r\n          </SortableContext>\r\n        </DndContext>\r\n      )}\r\n\r\n      {/* Project Form Modal */}\r\n      {showProjectForm && (\r\n        <ProjectForm\r\n          project={editingProject}\r\n          onClose={handleFormClose}\r\n          onSave={handleFormSave}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// Terminal configuration constants\r\n\r\n// AI Team URLs (Development droplet - Global ports 5400-5407)\r\nexport const DEV_DROPLET = '161.35.229.220';\r\nexport const CHAD_WS_URL = `ws://${DEV_DROPLET}:5401/ws`; // 01 - WebSocket path for Chad\r\nexport const SUSAN_URL = `http://${DEV_DROPLET}:5403`;    // 03 - Classification & Sorting\r\n\r\n// Chunk size for long messages\r\nexport const CHUNK_SIZE = 1000;\r\n\r\n// Debounce delay for chat message output (ms)\r\nexport const CHAT_DEBOUNCE_MS = 1500;\r\n\r\n// Minimum content length for chat messages\r\nexport const MIN_CONTENT_LENGTH = 20;\r\n\r\n// Dedup cooldown (ms) - should match CHAT_DEBOUNCE_MS\r\nexport const DEDUP_COOLDOWN_MS = 1500;\r\n\r\n// Timer for Susan briefing (ms) - wait for Claude to fully load then send briefing\r\nexport const BRIEFING_FALLBACK_MS = 25000;\r\n\r\n// Delay before showing messages after briefing (ms)\r\nexport const POST_BRIEFING_DELAY_MS = 5000;\r\n","// Chad transcription hook - connects to Chad for session logging\r\n\r\nimport { useRef, useCallback } from 'react';\r\nimport { DEV_DROPLET } from './constants';\r\n\r\nexport function useChadTranscription(projectPath: string, userId?: string, userName?: string, chadPort: number = 5401) {\r\n  const chadWsRef = useRef<WebSocket | null>(null);\r\n  const chadSessionIdRef = useRef<string | null>(null);\r\n\r\n  const connectToChad = useCallback(() => {\r\n    if (!userId) {\r\n      console.log('[ClaudeTerminal] No user ID available for Chad connection');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Chad port is terminal port + 1 (e.g., 5410 ‚Üí 5411, 5420 ‚Üí 5421)\r\n      const chadWsUrl = `ws://${DEV_DROPLET}:${chadPort}/ws`;\r\n      console.log('[ClaudeTerminal] Connecting to Chad at:', chadWsUrl);\r\n\r\n      const chadWs = new WebSocket(\r\n        `${chadWsUrl}?project=${encodeURIComponent(projectPath)}&userId=${userId}&userName=${encodeURIComponent(userName || '')}`\r\n      );\r\n\r\n      chadWs.onopen = () => {\r\n        console.log('[ClaudeTerminal] Connected to Chad for transcription');\r\n        chadWs.send(JSON.stringify({ type: 'session_start', payload: {} }));\r\n      };\r\n\r\n      chadWs.onmessage = (event) => {\r\n        try {\r\n          const msg = JSON.parse(event.data);\r\n          if (msg.type === 'session_started' || msg.type === 'session_created') {\r\n            chadSessionIdRef.current = msg.sessionId;\r\n            console.log('[ClaudeTerminal] Chad session started:', msg.sessionId);\r\n          }\r\n        } catch (err) {\r\n          console.log('[ClaudeTerminal] Chad message parse error:', err);\r\n        }\r\n      };\r\n\r\n      chadWs.onerror = (err) => console.log('[ClaudeTerminal] Chad WebSocket error:', err);\r\n      chadWs.onclose = () => {\r\n        console.log('[ClaudeTerminal] Chad disconnected');\r\n        chadSessionIdRef.current = null;\r\n      };\r\n\r\n      chadWsRef.current = chadWs;\r\n    } catch (err) {\r\n      console.log('[ClaudeTerminal] Could not connect to Chad:', err);\r\n    }\r\n  }, [projectPath, userId, userName, chadPort]);\r\n\r\n  const sendToChad = useCallback((data: string) => {\r\n    if (chadWsRef.current?.readyState === WebSocket.OPEN) {\r\n      chadWsRef.current.send(JSON.stringify({\r\n        type: 'terminal_output',\r\n        payload: {\r\n          sessionId: chadSessionIdRef.current,\r\n          data\r\n        }\r\n      }));\r\n    }\r\n  }, []);\r\n\r\n  const disconnect = useCallback(() => {\r\n    chadWsRef.current?.close();\r\n    chadWsRef.current = null;\r\n    chadSessionIdRef.current = null;\r\n  }, []);\r\n\r\n  return {\r\n    chadWsRef,\r\n    chadSessionIdRef,\r\n    connectToChad,\r\n    sendToChad,\r\n    disconnect,\r\n  };\r\n}\r\n","// Chat message filtering - strips TUI noise from terminal output\r\n\r\n/**\r\n * Clean ANSI escape codes from terminal output\r\n */\r\nexport function cleanAnsiCodes(data: string): string {\r\n  return data\r\n    .replace(/\\x1b\\[[0-9;]*m/g, '')\r\n    .replace(/\\x1b\\[[0-9;]*[ABCDEFGHJKSTfnsu]/g, '')\r\n    .replace(/\\x1b\\[[0-9;]*[JK]/g, '')\r\n    .replace(/\\x1b\\[\\?[0-9;]*[hl]/g, '')\r\n    .replace(/\\x1b[()][AB0-2]/g, '')\r\n    .replace(/\\x1b\\][^\\x07\\x1b]*(?:\\x07|\\x1b\\\\)/g, '')\r\n    .replace(/\\x1b\\][^\\x07]*\\x07/g, '')\r\n    .replace(/\\x1b[^[]\\S?/g, '')\r\n    .replace(/\\r(?!\\n)/g, '')\r\n    .replace(/\\n{3,}/g, '\\n\\n')\r\n    .trim();\r\n}\r\n\r\n/**\r\n * Check if a line should be filtered from chat display\r\n */\r\nexport function shouldFilterLine(trimmed: string): boolean {\r\n  if (!trimmed) return false;\r\n\r\n  // Filter Susan's briefing content\r\n  if (trimmed.includes('LAST SESSION') ||\r\n      trimmed.includes('RECENT CONVERSATION') ||\r\n      trimmed.includes('KEY KNOWLEDGE') ||\r\n      trimmed.includes('END BRIEFING') ||\r\n      trimmed.includes(\"I've gathered\") ||\r\n      trimmed.includes('Ready to continue') ||\r\n      trimmed.includes(\"What's the priority\") ||\r\n      trimmed.includes('Summary:') ||\r\n      trimmed.startsWith('You:') ||\r\n      trimmed.startsWith('Claude:') ||\r\n      /^\\s*\\w*-?\\w*\\]/.test(trimmed) ||\r\n      /\\[[\\w-]+\\]/.test(trimmed) ||\r\n      /^[‚è∞üí¨üß†üìã]/.test(trimmed) ||\r\n      /^\\[\\d+/.test(trimmed) ||\r\n      trimmed === 'm' ||\r\n      trimmed === 'claude') return true;\r\n\r\n  // Spinners and thinking indicators\r\n  if (/^[‚†ã‚†ô‚†π‚†∏‚†º‚†¥‚†¶‚†ß‚†á‚†è¬∑‚ú¢‚ú∂‚úª‚úΩ‚à¥]+/.test(trimmed)) return true;\r\n  if (/Flibbertigibbet|Cogitating|Ruminating|Pondering|Cerebrating/i.test(trimmed)) return true;\r\n\r\n  // Claude Code help/info text\r\n  if (trimmed.includes('.claude/commands/')) return true;\r\n  if (trimmed.includes('commands that work in any project')) return true;\r\n  if (trimmed.includes('~/.claude/')) return true;\r\n\r\n  // Tool output and TUI prompts\r\n  if (trimmed.includes('tool uses')) return true;\r\n  if (trimmed.includes('ctrl+o to')) return true;\r\n  if (trimmed.includes('ctrl+b to')) return true;\r\n  if (trimmed.includes('Do you want to proceed')) return true;\r\n  if (trimmed.includes('Esc to cancel')) return true;\r\n  if (trimmed.includes('MCP tools')) return true;\r\n  if (trimmed.startsWith('Explore(')) return true;\r\n  if (trimmed.startsWith('Read ') && trimmed.includes(' lines')) return true;\r\n  if (/^\\+\\d+ more/.test(trimmed)) return true;\r\n  if (/^‚ùØ\\s*\\d+\\./.test(trimmed)) return true;\r\n  if (trimmed === '1. Yes' || trimmed === '2. Yes,' || trimmed.startsWith('3. Type here')) return true;\r\n\r\n  // Horizontal separators\r\n  if (/^[\\s‚îÄ‚îÅ‚ïê\\-‚îÄ‚îÅ‚îÑ‚îÖ‚îà‚îâ‚ïå‚ïç]+$/.test(trimmed)) return true;\r\n\r\n  // TUI box structure\r\n  if (trimmed.includes('‚îÇ') && trimmed.replace(/[‚îÇ\\s]/g, '').length < 20) return true;\r\n  if (/^[‚ï≠‚ïÆ‚ïØ‚ï∞‚îå‚îê‚îî‚îò‚îú‚î§‚î¨‚î¥‚îº‚îÇ‚îÄ‚ïê‚ïë]+/.test(trimmed)) return true;\r\n\r\n  // Try/Tip messages\r\n  if (trimmed.startsWith('Try \"') || trimmed.startsWith(\"Try '\")) return true;\r\n  if (trimmed.includes('Tip:') || trimmed.startsWith('‚éø') || trimmed.includes('‚éø')) return true;\r\n\r\n  // Thinking/status indicators\r\n  if (trimmed.includes('Thinking') || trimmed.includes('Ideating')) return true;\r\n  if (trimmed.includes('Thought for')) return true;\r\n  if (trimmed.includes('Using tool:')) return true;\r\n  if (trimmed.includes('Crunching')) return true;\r\n  if (trimmed.includes('‚èµ‚èµ')) return true;\r\n\r\n  // Prompts\r\n  if (trimmed === '>' || trimmed === '‚ùØ' || trimmed === '$') return true;\r\n  if (/^>\\s*.+/.test(trimmed)) return true;\r\n\r\n  // Claude Code TUI header\r\n  if (trimmed.includes('Claude Code v') || trimmed.includes('Welcome back')) return true;\r\n  if (trimmed.includes('Tips for') || trimmed.includes('Run /init')) return true;\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Filter terminal output for chat display\r\n */\r\nexport function filterForChat(rawData: string): string {\r\n  const cleanData = cleanAnsiCodes(rawData);\r\n  const lines = cleanData.split('\\n');\r\n  let buffer = '';\r\n\r\n  for (const line of lines) {\r\n    const trimmed = line.trim();\r\n    if (!trimmed && !buffer) continue;\r\n    if (!trimmed) {\r\n      buffer += '\\n';\r\n      continue;\r\n    }\r\n    if (shouldFilterLine(trimmed)) continue;\r\n    buffer += line + '\\n';\r\n  }\r\n\r\n  return buffer;\r\n}\r\n","// Terminal input utilities - chunked message sending\r\n\r\nimport { CHUNK_SIZE } from './constants';\r\n\r\n/**\r\n * Send a message to the terminal WebSocket, chunking if necessary\r\n */\r\nexport function sendChunkedMessage(\r\n  ws: WebSocket,\r\n  message: string,\r\n  onComplete?: () => void\r\n): void {\r\n  if (ws.readyState !== WebSocket.OPEN) return;\r\n\r\n  if (message.length > CHUNK_SIZE) {\r\n    const chunks: string[] = [];\r\n    for (let i = 0; i < message.length; i += CHUNK_SIZE) {\r\n      chunks.push(message.slice(i, i + CHUNK_SIZE));\r\n    }\r\n\r\n    let chunkIndex = 0;\r\n    const sendNextChunk = () => {\r\n      if (chunkIndex < chunks.length && ws.readyState === WebSocket.OPEN) {\r\n        ws.send(JSON.stringify({ type: 'input', data: chunks[chunkIndex] }));\r\n        chunkIndex++;\r\n        if (chunkIndex < chunks.length) {\r\n          setTimeout(sendNextChunk, 50);\r\n        } else {\r\n          // All chunks sent, now send Enter\r\n          setTimeout(() => {\r\n            if (ws.readyState === WebSocket.OPEN) {\r\n              ws.send(JSON.stringify({ type: 'input', data: '\\r' }));\r\n              onComplete?.();\r\n            }\r\n          }, 100);\r\n        }\r\n      }\r\n    };\r\n    sendNextChunk();\r\n  } else {\r\n    // Short message - send normally\r\n    ws.send(JSON.stringify({ type: 'input', data: message }));\r\n    setTimeout(() => {\r\n      if (ws.readyState === WebSocket.OPEN) {\r\n        ws.send(JSON.stringify({ type: 'input', data: '\\r' }));\r\n        onComplete?.();\r\n      }\r\n    }, 50);\r\n  }\r\n}\r\n\r\n/**\r\n * Send multiple Enter keystrokes to ensure message submission\r\n * Waits 1 second first, then sends multiple enters\r\n */\r\nexport function sendMultipleEnters(ws: WebSocket, onComplete?: () => void): void {\r\n  if (ws.readyState !== WebSocket.OPEN) return;\r\n\r\n  // Wait 1 second for Claude to process the message, then send enters\r\n  [1000, 1200, 1500, 2000].forEach((delay, index, arr) => {\r\n    setTimeout(() => {\r\n      if (ws.readyState === WebSocket.OPEN) {\r\n        ws.send(JSON.stringify({ type: 'input', data: '\\r' }));\r\n        if (index === arr.length - 1) {\r\n          onComplete?.();\r\n        }\r\n      }\r\n    }, delay);\r\n  });\r\n}\r\n\r\n/**\r\n * Send arrow key escape sequence\r\n */\r\nexport function sendArrowKey(ws: WebSocket, direction: 'up' | 'down' | 'left' | 'right'): void {\r\n  if (ws.readyState !== WebSocket.OPEN) return;\r\n\r\n  const escapeSequences: Record<string, string> = {\r\n    up: '\\x1b[A',\r\n    down: '\\x1b[B',\r\n    right: '\\x1b[C',\r\n    left: '\\x1b[D',\r\n  };\r\n\r\n  ws.send(JSON.stringify({ type: 'input', data: escapeSequences[direction] }));\r\n}\r\n\r\n/**\r\n * Send Escape key\r\n */\r\nexport function sendEscape(ws: WebSocket): void {\r\n  if (ws.readyState !== WebSocket.OPEN) return;\r\n  ws.send(JSON.stringify({ type: 'input', data: '\\x1b' }));\r\n}\r\n\r\n/**\r\n * Send Enter key\r\n */\r\nexport function sendEnter(ws: WebSocket): void {\r\n  if (ws.readyState !== WebSocket.OPEN) return;\r\n  ws.send(JSON.stringify({ type: 'input', data: '\\r' }));\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '20', height: '14', x: '2', y: '3', rx: '2', key: '48i651' }],\n  ['line', { x1: '8', x2: '16', y1: '21', y2: '21', key: '1svkeh' }],\n  ['line', { x1: '12', x2: '12', y1: '17', y2: '21', key: 'vw1qmm' }],\n];\n\n/**\n * @component @name Monitor\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHg9IjIiIHk9IjMiIHJ4PSIyIiAvPgogIDxsaW5lIHgxPSI4IiB4Mj0iMTYiIHkxPSIyMSIgeTI9IjIxIiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMTciIHkyPSIyMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/monitor\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Monitor = createLucideIcon('monitor', __iconNode);\n\nexport default Monitor;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18.36 6.64A9 9 0 0 1 20.77 15', key: 'dxknvb' }],\n  ['path', { d: 'M6.16 6.16a9 9 0 1 0 12.68 12.68', key: '1x7qb5' }],\n  ['path', { d: 'M12 2v4', key: '3427ic' }],\n  ['path', { d: 'm2 2 20 20', key: '1ooewy' }],\n];\n\n/**\n * @component @name PowerOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTguMzYgNi42NEE5IDkgMCAwIDEgMjAuNzcgMTUiIC8+CiAgPHBhdGggZD0iTTYuMTYgNi4xNmE5IDkgMCAxIDAgMTIuNjggMTIuNjgiIC8+CiAgPHBhdGggZD0iTTEyIDJ2NCIgLz4KICA8cGF0aCBkPSJtMiAyIDIwIDIwIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/power-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PowerOff = createLucideIcon('power-off', __iconNode);\n\nexport default PowerOff;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 22v-5', key: '1ega77' }],\n  ['path', { d: 'M15 8V2', key: '18g5xt' }],\n  [\n    'path',\n    { d: 'M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z', key: '1xoxul' },\n  ],\n  ['path', { d: 'M9 8V2', key: '14iosj' }],\n];\n\n/**\n * @component @name Plug\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjJ2LTUiIC8+CiAgPHBhdGggZD0iTTE1IDhWMiIgLz4KICA8cGF0aCBkPSJNMTcgOGExIDEgMCAwIDEgMSAxdjRhNCA0IDAgMCAxLTQgNGgtNGE0IDQgMCAwIDEtNC00VjlhMSAxIDAgMCAxIDEtMXoiIC8+CiAgPHBhdGggZD0iTTkgOFYyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/plug\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plug = createLucideIcon('plug', __iconNode);\n\nexport default Plug;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 2v10', key: 'mnfbl' }],\n  ['path', { d: 'M18.4 6.6a9 9 0 1 1-12.77.04', key: 'obofu9' }],\n];\n\n/**\n * @component @name Power\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMnYxMCIgLz4KICA8cGF0aCBkPSJNMTguNCA2LjZhOSA5IDAgMSAxLTEyLjc3LjA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/power\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Power = createLucideIcon('power', __iconNode);\n\nexport default Power;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    { d: 'M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z', key: 'goz73y' },\n  ],\n  ['path', { d: 'm2 22 3-3', key: '19mgm9' }],\n  ['path', { d: 'M7.5 13.5 10 11', key: '7xgeeb' }],\n  ['path', { d: 'M10.5 16.5 13 14', key: '10btkg' }],\n  ['path', { d: 'm18 3-4 4h6l-4 4', key: '16psg9' }],\n];\n\n/**\n * @component @name PlugZap\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNi4zIDIwLjNhMi40IDIuNCAwIDAgMCAzLjQgMEwxMiAxOGwtNi02LTIuMyAyLjNhMi40IDIuNCAwIDAgMCAwIDMuNFoiIC8+CiAgPHBhdGggZD0ibTIgMjIgMy0zIiAvPgogIDxwYXRoIGQ9Ik03LjUgMTMuNSAxMCAxMSIgLz4KICA8cGF0aCBkPSJNMTAuNSAxNi41IDEzIDE0IiAvPgogIDxwYXRoIGQ9Im0xOCAzLTQgNGg2bC00IDQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/plug-zap\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PlugZap = createLucideIcon('plug-zap', __iconNode);\n\nexport default PlugZap;\n","// Susan briefing hook - fetches and manages Susan's context\r\n\r\nimport { useState, useRef, useCallback } from 'react';\r\nimport { SUSAN_URL } from './constants';\r\nimport type { SusanContext } from './types';\r\n\r\nexport type MemoryStatus = 'idle' | 'loading' | 'loaded' | 'error';\r\n\r\n/**\r\n * Build context prompt to send to Claude on startup\r\n */\r\nexport function buildContextPrompt(context: SusanContext): string {\r\n  if (context.greeting) {\r\n    return context.greeting;\r\n  }\r\n  return \"Susan couldn't load your memory. Starting fresh - what would you like to work on?\";\r\n}\r\n\r\nexport function useSusanBriefing(projectPath: string) {\r\n  const [memoryStatus, setMemoryStatus] = useState<MemoryStatus>('idle');\r\n  const [susanContext, setSusanContext] = useState<SusanContext | null>(null);\r\n  const susanContextRef = useRef<SusanContext | null>(null);\r\n\r\n  const fetchSusanContext = useCallback(async (): Promise<SusanContext | null> => {\r\n    setMemoryStatus('loading');\r\n    console.log('[useSusanBriefing] Fetching context from Susan...');\r\n    try {\r\n      const response = await fetch(\r\n        `${SUSAN_URL}/api/context?project=${encodeURIComponent(projectPath)}`\r\n      );\r\n      if (response.ok) {\r\n        const context = await response.json();\r\n        console.log('[useSusanBriefing] Context received:', {\r\n          hasGreeting: !!context?.greeting,\r\n          greetingLength: context?.greeting?.length || 0,\r\n          todos: context?.todos?.length || 0,\r\n          ports: context?.ports?.length || 0\r\n        });\r\n        setSusanContext(context);\r\n        susanContextRef.current = context;\r\n        setMemoryStatus('loaded');\r\n        return context;\r\n      } else {\r\n        console.log('[useSusanBriefing] Susan returned non-OK:', response.status);\r\n      }\r\n    } catch (err) {\r\n      console.log('[useSusanBriefing] Susan not available:', err);\r\n    }\r\n    setMemoryStatus('error');\r\n    return null;\r\n  }, [projectPath]);\r\n\r\n  const reset = useCallback(() => {\r\n    setMemoryStatus('idle');\r\n    setSusanContext(null);\r\n    susanContextRef.current = null;\r\n  }, []);\r\n\r\n  return {\r\n    memoryStatus,\r\n    susanContext,\r\n    susanContextRef,\r\n    fetchSusanContext,\r\n    reset,\r\n  };\r\n}\r\n","// Shared types for the dev environment\r\n\r\nexport type DevServerStatus = 'stopped' | 'starting' | 'running' | 'error';\r\n\r\nexport interface Project {\r\n  id: string;\r\n  name: string;\r\n  slug: string;\r\n  description: string;\r\n  droplet_name: string;\r\n  droplet_ip: string;\r\n  server_path: string;\r\n  server_path_test?: string;\r\n  port_dev: number;\r\n  port_test: number;\r\n  port_prod: number;\r\n  is_locked: boolean;\r\n  table_prefix?: string;\r\n  database_schema?: Record<string, { columns: string[]; types: Record<string, string> }>;\r\n  lock?: {\r\n    locked_by_name: string;\r\n    locked_at: string;\r\n    purpose: string;\r\n  };\r\n  // Dev server management\r\n  dev_server_status?: DevServerStatus;\r\n  dev_server_started_at?: string;\r\n  dev_server_started_by?: string;\r\n  dev_server_error?: string;\r\n  pm2_process_name?: string;\r\n  // Project metadata\r\n  git_repo?: string;\r\n  logo_url?: string;\r\n  created_at?: string;\r\n  sort_order?: number;\r\n  is_active?: boolean;\r\n}\r\n\r\nexport interface Environment {\r\n  id: string;\r\n  name: string;\r\n  portKey: 'port_dev' | 'port_test' | 'port_prod';\r\n  readOnly?: boolean;\r\n}\r\n\r\nexport interface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  role: string;\r\n}\r\n\r\nexport interface SessionSummary {\r\n  summary: string;\r\n  key_points: string[];\r\n  action_items: string[];\r\n  context_for_next_session: string;\r\n}\r\n\r\nexport interface Message {\r\n  role: 'user' | 'assistant';\r\n  content: string;\r\n  input_tokens?: number;\r\n  output_tokens?: number;\r\n  cost_usd?: number;\r\n  model?: string;\r\n}\r\n\r\nexport interface Session {\r\n  id: string;\r\n  status: string;\r\n  user_id: string;\r\n  project_id?: string;\r\n  started_at: string;\r\n}\r\n\r\nexport type PanelType = 'files' | 'terminal' | 'ai-usage' | 'browser' | 'schema' | 'chatlog' | 'hub' | 'storage' | 'projects' | 'docs' | 'health' | null;\r\n\r\nexport const ENVIRONMENTS: Environment[] = [\r\n  { id: 'dev', name: 'Dev Studio', portKey: 'port_dev' },\r\n  { id: 'test', name: 'Test', portKey: 'port_test' },\r\n  { id: 'prod', name: 'Production', portKey: 'port_prod', readOnly: true },\r\n];\r\n"],"names":[],"mappings":"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","ignoreList":[17,18,19,20,21]}