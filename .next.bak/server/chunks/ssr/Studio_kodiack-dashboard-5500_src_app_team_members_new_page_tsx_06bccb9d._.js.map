{"version":3,"sources":["../../../../../../Studio/kodiack-dashboard-5500/src/app/team/members/new/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\n\r\ninterface Role {\r\n  id: string;\r\n  name: string;\r\n  level: number;\r\n  description: string;\r\n}\r\n\r\nexport default function AddMemberPage() {\r\n  const router = useRouter();\r\n\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [email, setEmail] = useState('');\r\n  const [selectedRole, setSelectedRole] = useState('developer');\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    async function loadRoles() {\r\n      try {\r\n        const res = await fetch('/api/team/roles');\r\n        const data = await res.json();\r\n        setRoles(data);\r\n      } catch (e) {\r\n        setError((e as Error).message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    loadRoles();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const res = await fetch('/api/team/members', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          name: email.split('@')[0], // Use email prefix as name\r\n          email: email.toLowerCase(),\r\n          role: selectedRole,\r\n        }),\r\n      });\r\n\r\n      const result = await res.json();\r\n\r\n      if (!res.ok) {\r\n        throw new Error(result.error || 'Failed to add member');\r\n      }\r\n\r\n      router.push('/team/members');\r\n    } catch (e) {\r\n      setError((e as Error).message);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const selectedRoleInfo = roles.find(r => r.id === selectedRole);\r\n\r\n  return (\r\n    <div>\r\n      {/* Header */}\r\n      <div className=\"mb-6 pb-4 border-b border-gray-700\">\r\n        <div className=\"flex items-center gap-2 text-sm text-gray-400 mb-1\">\r\n          <Link href=\"/team\" className=\"hover:text-white transition-colors\">\r\n            Team\r\n          </Link>\r\n          <span>/</span>\r\n          <Link href=\"/team/members\" className=\"hover:text-white transition-colors\">\r\n            Members\r\n          </Link>\r\n          <span>/</span>\r\n          <span className=\"text-white\">Add Member</span>\r\n        </div>\r\n        <h2 className=\"text-2xl font-semibold text-white\">Add Team Member</h2>\r\n        <p className=\"text-gray-400 text-sm\">\r\n          Grant Dashboard access to an existing NextBid user\r\n        </p>\r\n      </div>\r\n\r\n      {/* Alert */}\r\n      {error && (\r\n        <div className=\"bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-6\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Info Box */}\r\n      <div className=\"bg-blue-500/10 border border-blue-500/30 text-blue-400 px-4 py-3 rounded-lg mb-6\">\r\n        <strong>Note:</strong> The user must already have a NextBid account (registered via Gateway).\r\n        This form grants them access to the Dashboard with a specific role.\r\n      </div>\r\n\r\n      {/* Form */}\r\n      <form onSubmit={handleSubmit} className=\"bg-gray-800 border border-gray-700 rounded-xl p-6\">\r\n        {/* Email */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            Email Address\r\n          </label>\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            placeholder=\"user@example.com\"\r\n            required\r\n            className=\"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none\"\r\n          />\r\n          <p className=\"mt-2 text-sm text-gray-500\">\r\n            Must match their NextBid account email\r\n          </p>\r\n        </div>\r\n\r\n        {/* Role Selection */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n            Role\r\n          </label>\r\n          {loading ? (\r\n            <div className=\"text-gray-400\">Loading roles...</div>\r\n          ) : (\r\n            <>\r\n              <select\r\n                value={selectedRole}\r\n                onChange={(e) => setSelectedRole(e.target.value)}\r\n                className=\"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-blue-500 focus:outline-none\"\r\n              >\r\n                {roles.map((role) => (\r\n                  <option key={role.id} value={role.id}>\r\n                    {role.name} (Level {role.level})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              {selectedRoleInfo && (\r\n                <p className=\"mt-2 text-sm text-gray-500\">\r\n                  {selectedRoleInfo.description}\r\n                </p>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={saving || loading}\r\n            className=\"px-6 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition-colors disabled:opacity-50\"\r\n          >\r\n            {saving ? 'Adding...' : 'Add Member'}\r\n          </button>\r\n          <Link\r\n            href=\"/team/members\"\r\n            className=\"px-6 py-2 bg-gray-700 text-white rounded-lg font-semibold hover:bg-gray-600 transition-colors\"\r\n          >\r\n            Cancel\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}