module.exports=[23072,a=>{"use strict";var b=a.i(18030),c=a.i(30072),d=a.i(55259),e=a.i(51679);let f=[{key:"credentials",label:"Credentials",icon:"ðŸ”‘"},{key:"naics",label:"NAICS Codes",icon:"ðŸ“‹"},{key:"psc",label:"PSC Codes",icon:"ðŸ›ï¸"},{key:"unspsc",label:"UNSPSC Codes",icon:"ðŸ·ï¸"},{key:"keywords",label:"Keywords",icon:"ðŸ”"},{key:"categories",label:"Categories",icon:"ðŸ“‚"}];function g({sourceId:a,category:g,backPath:h,showPscCodes:i=!1,showCategories:j=!1}){(0,d.useRouter)();let[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)("credentials"),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)(""),[W,X]=(0,c.useState)(new Set),[Y,Z]=(0,c.useState)([]),$=f.filter(a=>("psc"!==a.key||!!i)&&("categories"!==a.key||!!j));(0,c.useEffect)(()=>{_()},[a,g]);let _=async()=>{l(!0);try{let b=await fetch(`/api/patcher/sources/${g}/${a}`);if(b.ok){let a=await b.json();if(z(a.source),B(a.source.displayName||a.source.name||""),D(a.source.username||""),H(a.source.apiKey||""),J(a.source.expiresAt?.split("T")[0]||""),a.source.naicsCodes&&N(a.source.naicsCodes.map(a=>`${a.code} - ${a.name}`).join("\n")),a.source.pscCodes&&P(a.source.pscCodes.map(a=>`${a.code} - ${a.name}`).join("\n")),a.source.unspscCodes&&R(a.source.unspscCodes.map(a=>`${a.code} - ${a.name}`).join("\n")),a.source.keywords&&T(a.source.keywords.join("\n")),a.source.categories){let b=new Set(a.source.categories.filter(a=>a.selected).map(a=>a.id));X(b)}a.source.availableCategories&&Z(a.source.availableCategories)}else z({id:a,name:a,platform:g,type:"login",status:"not_configured"}),B(a)}catch(a){console.error("Failed to fetch source:",a),t("Failed to load source configuration")}finally{l(!1)}},aa=async()=>{n(!0),t(null),v(null);try{let b=a=>a.split("\n").map(a=>a.trim()).filter(Boolean).map(a=>{let[b,...c]=a.split(" - ");return{code:b.trim(),name:c.join(" - ").trim()||b.trim()}}),c={displayName:A,username:C||void 0,password:E||void 0,apiKey:G||void 0,expiresAt:I||void 0,naicsCodes:b(M),pscCodes:i?b(O):void 0,unspscCodes:b(Q),keywords:S.split("\n").map(a=>a.trim()).filter(Boolean),selectedCategories:j?Array.from(W):void 0};if(!(await fetch(`/api/patcher/sources/${g}/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok)throw Error("Failed to save configuration");v("Configuration saved successfully!"),F(""),await _()}catch(a){t(a.message)}finally{n(!1)}},ab=async()=>{p(!0),x(null);try{let b=await fetch(`/api/patcher/sources/${g}/${a}/test`,{method:"POST"}),c=await b.json();x({success:c.success,message:c.message||(c.success?"Connection successful!":"Connection failed")})}catch(a){x({success:!1,message:a.message})}finally{p(!1)}},ac=a=>{X(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},ad=Y.filter(a=>a.name.toLowerCase().includes(U.toLowerCase())||a.id.toLowerCase().includes(U.toLowerCase()));return k?(0,b.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-400",children:"Loading source configuration..."})}):(0,b.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex-shrink-0 p-6 border-b border-gray-700 bg-gray-800/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,b.jsx)(e.default,{href:h,className:"px-3 py-1.5 text-sm bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-colors",children:"â† Back"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("input",{type:"text",value:A,onChange:a=>B(a.target.value),className:"text-2xl font-bold bg-transparent text-white border-b border-transparent hover:border-gray-600 focus:border-blue-500 focus:outline-none w-full max-w-lg",placeholder:"Source name..."}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[y?.platform," â€¢ ",y?.id]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-lg text-sm ${y?.status==="active"?"bg-green-500/20 text-green-400":y?.status==="failed"||y?.status==="expired"?"bg-red-500/20 text-red-400":"bg-gray-700 text-gray-400"}`,children:y?.status||"not_configured"})})]}),(0,b.jsx)("div",{className:"flex gap-1",children:$.map(a=>(0,b.jsxs)("button",{onClick:()=>r(a.key),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors flex items-center gap-2 ${q===a.key?"bg-gray-900 text-white border-t border-l border-r border-gray-700":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,children:[(0,b.jsx)("span",{children:a.icon}),a.label]},a.key))})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[s&&(0,b.jsx)("div",{className:"mb-4 bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg text-sm",children:s}),u&&(0,b.jsx)("div",{className:"mb-4 bg-green-500/15 border border-green-500/30 text-green-400 px-4 py-3 rounded-lg text-sm",children:u}),w&&(0,b.jsx)("div",{className:`mb-4 px-4 py-3 rounded-lg text-sm ${w.success?"bg-green-500/15 border border-green-500/30 text-green-400":"bg-red-500/15 border border-red-500/30 text-red-400"}`,children:w.message}),"credentials"===q&&(0,b.jsxs)("div",{className:"max-w-2xl space-y-6",children:[y?.type==="login"&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Username"}),(0,b.jsx)("input",{type:"text",value:C,onChange:a=>D(a.target.value),placeholder:"Enter username",autoComplete:"username",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:K?"text":"password",value:E,onChange:a=>F(a.target.value),placeholder:y.hasPassword?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢":"Enter password",autoComplete:"current-password",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none pr-20"}),(0,b.jsx)("button",{type:"button",onClick:()=>L(!K),className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500 hover:text-gray-400",children:K?"Hide":"Show"})]}),y.hasPassword&&!E&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to keep existing password"})]})]}),y?.type==="api_key"&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"API Key"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:K?"text":"password",value:G,onChange:a=>H(a.target.value),placeholder:"Enter API key",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none font-mono text-sm pr-20"}),(0,b.jsx)("button",{type:"button",onClick:()=>L(!K),className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500 hover:text-gray-400",children:K?"Hide":"Show"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Expiration Date (optional)"}),(0,b.jsx)("input",{type:"date",value:I,onChange:a=>J(a.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-blue-500 focus:outline-none"})]}),(0,b.jsx)("div",{className:"flex gap-3 pt-4",children:(0,b.jsx)("button",{onClick:ab,disabled:o||y?.status==="not_configured",className:"px-4 py-2 text-sm font-medium bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:o?"Testing...":"Test Connection"})}),y?.lastChecked&&(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Last checked: ",new Date(y.lastChecked).toLocaleString()]})]}),"naics"===q&&(0,b.jsxs)("div",{className:"max-w-3xl",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-400 mb-2",children:["Enter NAICS codes, one per line. Format: ",(0,b.jsx)("code",{className:"bg-gray-800 px-1 rounded",children:"CODE - Description"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Example: 541330 - Engineering Services"})]}),(0,b.jsx)("textarea",{value:M,onChange:a=>N(a.target.value),rows:20,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white font-mono text-sm focus:border-blue-500 focus:outline-none",placeholder:"541330 - Engineering Services 238210 - Electrical Contractors 561621 - Security Systems Services"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[M.split("\n").filter(Boolean).length," codes"]})]}),"psc"===q&&i&&(0,b.jsxs)("div",{className:"max-w-3xl",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-400 mb-2",children:["Enter PSC (Product Service Codes), one per line. Format: ",(0,b.jsx)("code",{className:"bg-gray-800 px-1 rounded",children:"CODE - Description"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Example: R425 - Engineering and Technical Services"})]}),(0,b.jsx)("textarea",{value:O,onChange:a=>P(a.target.value),rows:20,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white font-mono text-sm focus:border-blue-500 focus:outline-none",placeholder:"R425 - Engineering and Technical Services J099 - Maintenance of Misc Equipment S206 - Housekeeping Services"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[O.split("\n").filter(Boolean).length," codes"]})]}),"unspsc"===q&&(0,b.jsxs)("div",{className:"max-w-3xl",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-400 mb-2",children:["Enter UNSPSC codes, one per line. Format: ",(0,b.jsx)("code",{className:"bg-gray-800 px-1 rounded",children:"CODE - Description"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Example: 72101500 - Building construction services"})]}),(0,b.jsx)("textarea",{value:Q,onChange:a=>R(a.target.value),rows:20,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white font-mono text-sm focus:border-blue-500 focus:outline-none",placeholder:"72101500 - Building construction services 81101500 - Engineering services 92121500 - Security guard services"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[Q.split("\n").filter(Boolean).length," codes"]})]}),"keywords"===q&&(0,b.jsxs)("div",{className:"max-w-3xl",children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Enter keywords, one per line. These will be used to search for relevant opportunities."})}),(0,b.jsx)("textarea",{value:S,onChange:a=>T(a.target.value),rows:20,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white font-mono text-sm focus:border-blue-500 focus:outline-none",placeholder:"fire alarm security system CCTV access control intrusion detection"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[S.split("\n").filter(Boolean).length," keywords"]})]}),"categories"===q&&j&&(0,b.jsxs)("div",{className:"max-w-4xl",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-400 mb-2",children:["Select categories to monitor for this portal. Use search to filter through ",Y.length," available categories."]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("input",{type:"text",value:U,onChange:a=>V(a.target.value),placeholder:"Search categories...",className:"flex-1 max-w-md bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-sm text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none"}),(0,b.jsxs)("span",{className:"text-sm text-gray-400",children:[W.size," selected"]})]})]}),W.size>0&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Selected Categories"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.from(W).map(a=>{let c=Y.find(b=>b.id===a);return(0,b.jsxs)("button",{onClick:()=>ac(a),className:"px-2 py-1 text-xs bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-lg hover:bg-red-500/20 hover:text-red-400 hover:border-red-500/30 transition-colors",children:[c?.name||a," Ã—"]},a)})})]}),(0,b.jsx)("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:(0,b.jsx)("div",{className:"max-h-96 overflow-y-auto",children:ad.length>0?(0,b.jsxs)("div",{className:"divide-y divide-gray-700",children:[ad.slice(0,200).map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-3 px-4 py-2 hover:bg-gray-800/50 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:W.has(a.id),onChange:()=>ac(a.id),className:"w-4 h-4 rounded bg-gray-700 border-gray-600 text-blue-500 focus:ring-blue-500"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"text-sm text-white truncate",children:a.name}),a.parent&&(0,b.jsx)("div",{className:"text-xs text-gray-500 truncate",children:a.parent})]}),(0,b.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:a.id})]},a.id)),ad.length>200&&(0,b.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-500 text-center",children:["Showing 200 of ",ad.length," results. Use search to narrow down."]})]}):(0,b.jsx)("div",{className:"px-4 py-8 text-center text-gray-500",children:U?"No categories match your search":"No categories available"})})})]})]}),(0,b.jsxs)("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-700 bg-gray-900/50 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:y?.lastChecked&&`Last checked: ${new Date(y.lastChecked).toLocaleString()}`}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.default,{href:h,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:aa,disabled:m,className:"px-6 py-2 text-sm font-semibold bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:m?"Saving...":"Save & Push"})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=d1936_src_app_credentials_components_SourceDetailPage_tsx_faa9a210._.js.map