{"version":3,"sources":["../../../../../../Studio/kodiack-dashboard-5500/src/app/team/roles/page.tsx","../../../../../../Studio/kodiack-dashboard-5500/src/app/team/roles/components/RolesList.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useContext } from 'react';\r\nimport { PageTitleContext, PageActionsContext } from '@/app/layout';\r\nimport RolesList from './components/RolesList';\r\n\r\nexport default function TeamRolesPage() {\r\n  const setPageTitle = useContext(PageTitleContext);\r\n  const setPageActions = useContext(PageActionsContext);\r\n  const [roles, setRoles] = useState<any[]>([]);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Set page title in nav\r\n  useEffect(() => {\r\n    setPageTitle({\r\n      title: 'Roles & Permissions',\r\n      description: 'System-defined roles and their permissions'\r\n    });\r\n    setPageActions(null);\r\n\r\n    return () => {\r\n      setPageTitle({ title: '', description: '' });\r\n      setPageActions(null);\r\n    };\r\n  }, [setPageTitle, setPageActions]);\r\n\r\n  // Load data\r\n  useEffect(() => {\r\n    async function loadData() {\r\n      try {\r\n        const res = await fetch('/api/team/roles');\r\n        if (!res.ok) throw new Error('Failed to load roles');\r\n        const data = await res.json();\r\n        setRoles(data);\r\n      } catch (e) {\r\n        setError((e as Error).message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    loadData();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"text-gray-400\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {/* Error Alert */}\r\n      {error && (\r\n        <div className=\"bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-6\">\r\n          <strong>Error:</strong> {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Roles List */}\r\n      <RolesList roles={roles} />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState } from 'react';\r\n\r\ninterface Role {\r\n  id: string;\r\n  name: string;\r\n  description?: string;\r\n  permissions: string[];\r\n  level: number;\r\n  members_count?: number;\r\n}\r\n\r\ninterface RolesListProps {\r\n  roles: Role[];\r\n  permissions?: any[]; // Kept for backward compatibility but not used\r\n}\r\n\r\nexport default function RolesList({ roles }: RolesListProps) {\r\n  const [expandedRole, setExpandedRole] = useState<string | null>(null);\r\n\r\n  const levelColors: Record<number, string> = {\r\n    1: 'bg-gray-500/20 text-gray-400',\r\n    2: 'bg-blue-500/20 text-blue-400',\r\n    3: 'bg-purple-500/20 text-purple-400',\r\n    4: 'bg-yellow-500/20 text-yellow-400',\r\n    5: 'bg-orange-500/20 text-orange-400',\r\n    6: 'bg-red-500/20 text-red-400',\r\n  };\r\n\r\n  // Format permission names for display\r\n  const formatPermissionName = (permId: string) => {\r\n    // Convert camelCase to readable format (e.g., canPushToTest -> Push To Test)\r\n    return permId\r\n      .replace(/^can/, '')\r\n      .replace(/([A-Z])/g, ' $1')\r\n      .trim();\r\n  };\r\n\r\n  // Sort by level descending (highest first)\r\n  const sortedRoles = [...roles].sort((a, b) => b.level - a.level);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {sortedRoles.map((role) => (\r\n        <div\r\n          key={role.id}\r\n          className=\"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden\"\r\n        >\r\n          {/* Role Header */}\r\n          <div\r\n            className=\"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-900/50\"\r\n            onClick={() => setExpandedRole(expandedRole === role.id ? null : role.id)}\r\n          >\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className={`px-3 py-1 rounded text-xs font-bold ${levelColors[role.level] || levelColors[1]}`}>\r\n                Level {role.level}\r\n              </div>\r\n              <div>\r\n                <div className=\"font-medium text-white\">{role.name}</div>\r\n                {role.description && (\r\n                  <div className=\"text-xs text-gray-500\">{role.description}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"text-xs text-gray-500\">\r\n                {role.members_count || 0} members · {role.permissions.length} permissions\r\n              </div>\r\n              <span className=\"text-gray-400\">\r\n                {expandedRole === role.id ? '▼' : '▶'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Expanded Content */}\r\n          {expandedRole === role.id && (\r\n            <div className=\"border-t border-gray-700 p-4 bg-gray-900/50\">\r\n              <div className=\"mb-4\">\r\n                <div className=\"text-sm font-medium text-gray-400 mb-2\">Permissions</div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {role.permissions.map((permId) => (\r\n                    <span\r\n                      key={permId}\r\n                      className=\"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded\"\r\n                    >\r\n                      {formatPermissionName(permId)}\r\n                    </span>\r\n                  ))}\r\n                  {role.permissions.length === 0 && (\r\n                    <span className=\"text-xs text-gray-500\">No permissions assigned</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"text-xs text-gray-500 italic\">\r\n                System-defined role. Permissions cannot be modified.\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      ))}\r\n\r\n      {roles.length === 0 && (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          No roles defined. Create a role to get started.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}