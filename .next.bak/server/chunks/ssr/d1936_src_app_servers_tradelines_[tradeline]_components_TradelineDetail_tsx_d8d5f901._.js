module.exports=[83986,a=>{"use strict";var b=a.i(18030),c=a.i(30072);function d({tradeline:a,onSuccess:d}){let[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(null),i=async b=>{f(b),h(null);let c=a?`/api/tradelines/${b}/${a}`:`/api/tradelines/${b}`;try{let a=await fetch(c,{method:"POST"}),b=await a.json();b.success?(d?.(),setTimeout(()=>window.location.reload(),2e3)):h(b.error||"Action failed")}catch(a){h(a.message)}finally{f(null)}};return a?(0,b.jsxs)("div",{className:"flex gap-2",children:[g&&(0,b.jsx)("span",{className:"text-red-400 text-xs mr-2",children:g}),(0,b.jsx)("button",{onClick:()=>i("start"),disabled:null!==e,className:"px-3 py-1 text-xs font-semibold rounded bg-green-500/15 text-green-400 border border-green-500/30 hover:bg-green-500 hover:text-white transition-colors disabled:opacity-50",children:"start"===e?"...":"Start"}),(0,b.jsx)("button",{onClick:()=>i("restart"),disabled:null!==e,className:"px-3 py-1 text-xs font-semibold rounded bg-yellow-500/15 text-yellow-400 border border-yellow-500/30 hover:bg-yellow-500 hover:text-white transition-colors disabled:opacity-50",children:"restart"===e?"...":"Restart"}),(0,b.jsx)("button",{onClick:()=>i("stop"),disabled:null!==e,className:"px-3 py-1 text-xs font-semibold rounded bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500 hover:text-white transition-colors disabled:opacity-50",children:"stop"===e?"...":"Stop"})]}):(0,b.jsxs)("div",{className:"flex gap-3",children:[g&&(0,b.jsx)("div",{className:"text-red-400 text-xs",children:g}),(0,b.jsx)("button",{onClick:()=>i("launch-all"),disabled:null!==e,className:"px-4 py-2 bg-green-500/15 text-green-400 border border-green-500/30 rounded-lg text-xs font-semibold uppercase hover:bg-green-500 hover:text-white transition-colors disabled:opacity-50",children:"launch-all"===e?"Launching...":"Launch All"}),(0,b.jsx)("button",{onClick:()=>i("restart-all"),disabled:null!==e,className:"px-4 py-2 bg-yellow-500/15 text-yellow-400 border border-yellow-500/30 rounded-lg text-xs font-semibold uppercase hover:bg-yellow-500 hover:text-white transition-colors disabled:opacity-50",children:"restart-all"===e?"Restarting...":"Restart All"}),(0,b.jsx)("button",{onClick:()=>i("stop-all"),disabled:null!==e,className:"px-4 py-2 bg-red-500/15 text-red-400 border border-red-500/30 rounded-lg text-xs font-semibold uppercase hover:bg-red-500 hover:text-white transition-colors disabled:opacity-50",children:"stop-all"===e?"Stopping...":"Stop All"})]})}function e({tradeline:a,onClose:d}){let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(100),[m,n]=(0,c.useState)(!1),o=async()=>{try{let b=await fetch(`/api/tradelines/logs/${a}?lines=${k}`),c=await b.json();c.success?(f(c.logs||"No logs available"),j(null)):j(c.error||"Failed to fetch logs")}catch(a){j(a.message)}finally{h(!1)}};return(0,c.useEffect)(()=>{o()},[a,k]),(0,c.useEffect)(()=>{if(!m)return;let a=setInterval(o,5e3);return()=>clearInterval(a)},[m,a,k]),(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-8",children:(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl w-full max-w-5xl max-h-[80vh] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-700",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Logs: ",a]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["Showing last ",k," lines"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("select",{value:k,onChange:a=>l(Number(a.target.value)),className:"bg-gray-800 border border-gray-700 rounded px-3 py-1 text-sm text-white",children:[(0,b.jsx)("option",{value:50,children:"50 lines"}),(0,b.jsx)("option",{value:100,children:"100 lines"}),(0,b.jsx)("option",{value:200,children:"200 lines"}),(0,b.jsx)("option",{value:500,children:"500 lines"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,b.jsx)("input",{type:"checkbox",checked:m,onChange:a=>n(a.target.checked),className:"rounded bg-gray-700 border-gray-600"}),"Auto-refresh"]}),(0,b.jsx)("button",{onClick:o,className:"px-3 py-1 text-xs font-semibold rounded bg-blue-500/15 text-blue-400 border border-blue-500/30 hover:bg-blue-500 hover:text-white transition-colors",children:"Refresh"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-white transition-colors text-2xl leading-none",children:"Ã—"})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto p-4",children:g?(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Loading logs..."}):i?(0,b.jsxs)("div",{className:"flex items-center justify-center h-full text-red-400",children:["Error: ",i]}):(0,b.jsx)("pre",{className:"font-mono text-xs text-gray-300 whitespace-pre-wrap",children:e})}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-700 text-xs text-gray-500",children:[(0,b.jsx)("span",{children:m?"Auto-refreshing every 5 seconds":"Manual refresh"}),(0,b.jsx)("span",{children:"Press ESC to close"})]})]})})}function f({tradeline:a,tradelineInfo:f,status:g,config:h}){let[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)("overview"),m=g?.status||"stopped",n={healthy:"bg-green-500",partial:"bg-yellow-500",stopped:"bg-red-500",degraded:"bg-orange-500"};return(0,b.jsxs)("div",{children:[i&&(0,b.jsx)(e,{tradeline:a,onClose:()=>j(!1)}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:`w-4 h-4 rounded-full ${n[m]}`}),(0,b.jsx)("span",{className:`text-lg font-semibold ${{healthy:"text-green-400",partial:"text-yellow-400",stopped:"text-red-400",degraded:"text-orange-400"}[m]}`,children:m.charAt(0).toUpperCase()+m.slice(1)})]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[g?.online||0," / ",g?.total||5," processes online"]}),(0,b.jsx)("div",{className:"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full ${n[m]} transition-all`,style:{width:`${(g?.online||0)/(g?.total||5)*100}%`}})})]}),(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Main Port"}),(0,b.jsx)("div",{className:"font-mono text-2xl text-blue-400",children:f?.ports?.main||"N/A"}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Workers: ",f?.ports?.worker1,", ",f?.ports?.worker2,",",f?.ports?.worker3,", ",f?.ports?.worker4]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-3",children:"Actions"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(d,{tradeline:a}),(0,b.jsx)("button",{onClick:()=>j(!0),className:"w-full px-3 py-1.5 text-xs font-semibold rounded bg-gray-700 text-gray-400 hover:text-white transition-colors",children:"View Logs"})]})]})]}),(0,b.jsxs)("div",{className:"flex border-b border-gray-700 mb-6",children:[(0,b.jsx)("button",{onClick:()=>l("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"overview"===k?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:"Overview"}),(0,b.jsx)("button",{onClick:()=>l("config"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"config"===k?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:"Configuration"}),(0,b.jsx)("button",{onClick:()=>l("workers"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"workers"===k?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:"Workers"})]}),"overview"===k&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-white mb-4",children:"Discovery Statistics"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Opportunities Found"}),(0,b.jsx)("span",{className:"text-white font-mono",children:g?.stats?.opportunities||"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Last Discovery Run"}),(0,b.jsx)("span",{className:"text-white font-mono",children:g?.stats?.lastRun||"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Next Scheduled"}),(0,b.jsx)("span",{className:"text-white font-mono",children:g?.stats?.nextRun||"-"})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-white mb-4",children:"API Status"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"SAM.gov"}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${g?.apis?.sam_gov?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-400"}`,children:g?.apis?.sam_gov?"Connected":"Not configured"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"GovWin"}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${g?.apis?.govwin?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-400"}`,children:g?.apis?.govwin?"Connected":"Not configured"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"PlanetBids"}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${g?.apis?.planetbids?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-400"}`,children:g?.apis?.planetbids?"Connected":"Not configured"})]})]})]})]}),"config"===k&&(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-white mb-4",children:"Configuration"}),(0,b.jsx)("pre",{className:"font-mono text-xs text-gray-300 bg-black/30 p-4 rounded-lg overflow-auto max-h-96",children:h?JSON.stringify(h,null,2):"No configuration loaded"})]}),"workers"===k&&(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3,4].map(a=>{let c=`worker${a}`,d=f?.ports?.[c],e=g?.workers?.[a-1]||{};return(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${e.online?"bg-green-500":"bg-red-500"}`}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"font-medium text-white",children:["Worker ",a]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Port ",d]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:[e.tasks||0," tasks processed"]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${e.online?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:e.online?"Online":"Offline"})]})]},a)})})]})}a.s(["default",()=>f],83986)}];

//# sourceMappingURL=d1936_src_app_servers_tradelines_%5Btradeline%5D_components_TradelineDetail_tsx_d8d5f901._.js.map