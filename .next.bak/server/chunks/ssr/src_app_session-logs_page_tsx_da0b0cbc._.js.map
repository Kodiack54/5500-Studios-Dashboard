{"version":3,"sources":["../../../../src/app/session-logs/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { RefreshCw, AlertTriangle, CheckCircle, XCircle, ChevronDown, ChevronRight } from 'lucide-react';\r\nimport Link from 'next/link';\r\n\r\n// ALL data comes from DATABASE - no HTTP calls to workers\r\n// Workers write TO database, dashboard reads FROM database\r\n\r\n// All 4 team workspaces\r\nconst TEAMS = [\r\n  { id: 'global', name: 'Global Team', workspace: 'global' },\r\n  { id: 'dev1', name: 'Dev Team 1', workspace: 'dev1' },\r\n  { id: 'dev2', name: 'Dev Team 2', workspace: 'dev2' },\r\n  { id: 'dev3', name: 'Dev Team 3', workspace: 'dev3' },\r\n];\r\n\r\n// Jen's 20 extraction buckets\r\nconst JEN_BUCKETS = [\r\n  'Bugs Open', 'Bugs Fixed', 'Todos', 'Journal', 'Work Log', 'Ideas',\r\n  'Decisions', 'Lessons', 'System Breakdown', 'How-To Guide', 'Schematic',\r\n  'Reference', 'Naming Conventions', 'File Structure', 'Database Patterns',\r\n  'API Patterns', 'Component Patterns', 'Quirks & Gotchas', 'Snippets', 'Other'\r\n];\r\n\r\ninterface TeamStatus {\r\n  captured: number;\r\n  flagged: number;\r\n  filed: number;\r\n}\r\n\r\ninterface Session {\r\n  id: string;\r\n  user_name?: string;\r\n  user_id?: string;\r\n  started_at?: string;\r\n  ended_at?: string;\r\n  terminal_port?: number;\r\n  status?: string;\r\n  source_type?: string;\r\n  source_name?: string;\r\n  project_path?: string;\r\n}\r\n\r\ninterface BucketCounts {\r\n  [key: string]: number;\r\n}\r\n\r\ninterface DatabaseStats {\r\n  total_sessions: number;\r\n  active: number;\r\n  captured: number;\r\n  scrubbed: number;\r\n  flagged: number;\r\n  pending: number;\r\n  cleaned: number;\r\n  archived: number;\r\n  last_24h: number;\r\n  last_session: string | null;\r\n}\r\n\r\ninterface Project {\r\n  id: string;\r\n  name: string;\r\n  slug?: string;\r\n  server_path?: string;\r\n  parent_id?: string | null;\r\n  todos: number;\r\n  knowledge: number;\r\n  bugs: number;\r\n  children?: Project[];\r\n}\r\n\r\nexport default function SessionLogsPage() {\r\n  const [sessions, setSessions] = useState<Session[]>([]);\r\n  const [buckets, setBuckets] = useState<BucketCounts>({});\r\n  const [jenBuckets, setJenBuckets] = useState<BucketCounts>({});\r\n  const [projects, setProjects] = useState<Project[]>([]);\r\n  const [stats, setStats] = useState<DatabaseStats | null>(null);\r\n  const [teamStatuses, setTeamStatuses] = useState<Record<string, TeamStatus>>({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [lastRefresh, setLastRefresh] = useState<Date | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [externalClaudeHealth, setExternalClaudeHealth] = useState<'healthy' | 'missed'>('healthy');\r\n\r\n  // Fetch all data from database\r\n  const refreshAll = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // Fetch sessions, pipeline buckets, Jen's extraction buckets, and projects\r\n      const [sessionsRes, bucketsRes, extractionsRes, projectsListRes, projectsSummaryRes] = await Promise.all([\r\n        fetch('/api/ai-sessions?limit=100', { cache: 'no-store' }),\r\n        fetch('/api/ai-sessions/buckets', { cache: 'no-store' }),\r\n        fetch('/api/ai-extractions', { cache: 'no-store' }),\r\n        fetch('/project-management/api/projects', { cache: 'no-store' }),\r\n        fetch('/project-management/api/projects/summary', { cache: 'no-store' }),\r\n      ]);\r\n\r\n      if (!sessionsRes.ok || !bucketsRes.ok) {\r\n        throw new Error('Failed to fetch from database');\r\n      }\r\n\r\n      const sessionsData = await sessionsRes.json();\r\n      const bucketsData = await bucketsRes.json();\r\n      const extractionsData = extractionsRes.ok ? await extractionsRes.json() : { success: false };\r\n      const projectsListData = projectsListRes.ok ? await projectsListRes.json() : { success: false };\r\n      const projectsSummaryData = projectsSummaryRes.ok ? await projectsSummaryRes.json() : { success: false };\r\n\r\n      if (sessionsData.success) {\r\n        setSessions(sessionsData.sessions || []);\r\n\r\n        // Check Transcript capture health - Chad should capture every 15 min\r\n        // Match by source_type === 'transcript' (from transcripts-9500 via Chad)\r\n        const transcriptSessions = (sessionsData.sessions || []).filter(\r\n          (s: Session) => s.source_type === 'transcript'\r\n        );\r\n        if (transcriptSessions.length > 0) {\r\n          const mostRecent = transcriptSessions[0]; // Already sorted by started_at desc\r\n          const lastCapture = new Date(mostRecent.started_at || 0);\r\n          const now = new Date();\r\n          const minutesSince = (now.getTime() - lastCapture.getTime()) / (1000 * 60);\r\n          // Allow 18 min buffer (15 min interval + 3 min grace)\r\n          setExternalClaudeHealth(minutesSince <= 18 ? 'healthy' : 'missed');\r\n        } else {\r\n          setExternalClaudeHealth('missed'); // No transcript sessions = Chad not capturing\r\n        }\r\n      }\r\n\r\n      if (bucketsData.success) {\r\n        setBuckets(bucketsData.buckets || {});\r\n        setStats(bucketsData.stats || null);\r\n      }\r\n\r\n      if (extractionsData.success) {\r\n        setJenBuckets(extractionsData.buckets || {});\r\n      }\r\n      // Build parent projects with aggregated children stats\r\n      if (projectsListData.success && projectsListData.projects) {\r\n        const allProjects = projectsListData.projects;\r\n        const summaries = projectsSummaryData.success ? projectsSummaryData.summaries || {} : {};\r\n\r\n        // Create a map of all projects with their stats\r\n        const projectMap: Record<string, Project> = {};\r\n        for (const p of allProjects) {\r\n          const summary = summaries[p.id] || {};\r\n          projectMap[p.id] = {\r\n            id: p.id,\r\n            name: p.name,\r\n            slug: p.slug,\r\n            server_path: p.server_path,\r\n            parent_id: p.parent_id || null,\r\n            todos: summary.pending_todos || summary.todos || 0,\r\n            knowledge: summary.pending_knowledge || summary.knowledge || 0,\r\n            bugs: summary.pending_bugs || summary.bugs || 0,\r\n            children: [],\r\n          };\r\n        }\r\n\r\n        // Group children under parents and aggregate stats\r\n        const parentProjects: Project[] = [];\r\n\r\n        for (const p of allProjects) {\r\n          const project = projectMap[p.id];\r\n\r\n          if (!project.parent_id) {\r\n            // This is a parent project - find all children and aggregate\r\n            const children: Project[] = [];\r\n            let totalTodos = project.todos;\r\n            let totalKnowledge = project.knowledge;\r\n            let totalBugs = project.bugs;\r\n\r\n            for (const child of allProjects) {\r\n              if (child.parent_id === p.id) {\r\n                const childProject = projectMap[child.id];\r\n                children.push(childProject);\r\n                totalTodos += childProject.todos;\r\n                totalKnowledge += childProject.knowledge;\r\n                totalBugs += childProject.bugs;\r\n              }\r\n            }\r\n\r\n            parentProjects.push({\r\n              ...project,\r\n              todos: totalTodos,\r\n              knowledge: totalKnowledge,\r\n              bugs: totalBugs,\r\n              children: children.sort((a, b) => a.name.localeCompare(b.name)),\r\n            });\r\n          }\r\n        }\r\n\r\n        // Sort parents alphabetically\r\n        parentProjects.sort((a, b) => a.name.localeCompare(b.name));\r\n        setProjects(parentProjects);\r\n      }\r\n\r\n      // Fetch each team's stats\r\n      const teamPromises = TEAMS.map(async (team) => {\r\n        try {\r\n          const res = await fetch(`/api/ai-sessions/buckets?workspace=${team.workspace}`, { cache: 'no-store' });\r\n          if (res.ok) {\r\n            const data = await res.json();\r\n            const s = data.stats || {};\r\n            return {\r\n              id: team.id,\r\n              status: {\r\n                captured: Number(s.active || 0) + Number(s.captured || 0),\r\n                flagged: Number(s.flagged || 0),\r\n                filed: Number(s.pending || 0) + Number(s.cleaned || 0) + Number(s.archived || 0),\r\n              }\r\n            };\r\n          }\r\n        } catch {}\r\n        return { id: team.id, status: { captured: 0, flagged: 0, filed: 0 } };\r\n      });\r\n\r\n      const teamResults = await Promise.all(teamPromises);\r\n      const statusMap: Record<string, TeamStatus> = {};\r\n      teamResults.forEach(r => { statusMap[r.id] = r.status; });\r\n      setTeamStatuses(statusMap);\r\n\r\n      setLastRefresh(new Date());\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Database connection failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Initial load\r\n  useEffect(() => {\r\n    refreshAll();\r\n  }, []);\r\n\r\n  // Auto-refresh every 5 seconds for real-time updates\r\n  useEffect(() => {\r\n    const interval = setInterval(refreshAll, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [refreshAll]);\r\n\r\n  // Pipeline totals from database stats\r\n  // Flow: active ‚Üí captured ‚Üí flagged ‚Üí pending ‚Üí cleaned ‚Üí archived\r\n  const totals = {\r\n    active: Number(stats?.active || buckets['active'] || 0),\r\n    processed: Number(stats?.scrubbed || buckets[\"processed\"] || buckets[\"pending_review\"] || 0),\r\n    flagged: Number(stats?.flagged || buckets['flagged'] || 0),\r\n    pending: Number(stats?.pending || buckets[\"pending\"] || 0),\r\n    published: Number(buckets[\"published\"] || buckets[\"cataloged\"] || 0),\r\n    cleaned: Number(stats?.cleaned || buckets['cleaned'] || 0),\r\n    archived: Number(stats?.archived || buckets['archived'] || 0),\r\n    total: Number(stats?.total_sessions || Object.values(buckets).reduce((sum, c) => sum + Number(c), 0)),\r\n    last24h: Number(stats?.last_24h || 0),\r\n  };\r\n\r\n  const overallHealth = error ? 'down' : 'healthy';\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col bg-gray-900 text-white overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"px-6 py-4 bg-gray-800 border-b border-gray-700 flex items-center justify-between shrink-0\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <h1 className=\"text-xl font-bold\">Session Logs</h1>\r\n          <span className=\"text-sm text-gray-400\">Database View</span>\r\n          <HealthBadge health={overallHealth} />\r\n        </div>\r\n        <div className=\"flex items-center gap-4\">\r\n          {lastRefresh && (\r\n            <span className=\"text-xs text-gray-500\">\r\n              Last updated: {lastRefresh.toLocaleTimeString()}\r\n            </span>\r\n          )}\r\n          <button\r\n            onClick={refreshAll}\r\n            disabled={loading}\r\n            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 text-white text-sm rounded-lg transition-colors\"\r\n          >\r\n            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\r\n            Refresh\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error Banner */}\r\n      {error && (\r\n        <div className=\"px-6 py-2 bg-red-900/50 border-b border-red-700 text-red-300 text-sm\">\r\n          Database Error: {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Team Summary Cards */}\r\n      <div className=\"p-4 bg-gray-850 border-b border-gray-700 shrink-0\">\r\n        <div className=\"grid grid-cols-4 gap-4\">\r\n          {TEAMS.map(team => {\r\n            const status = teamStatuses[team.id] || { captured: 0, flagged: 0, filed: 0 };\r\n            return (\r\n              <div key={team.id} className=\"p-3 rounded-lg border border-gray-700 bg-gray-800/50\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"font-medium text-white\">{team.name}</span>\r\n                </div>\r\n                <div className=\"grid grid-cols-3 gap-2 text-center\">\r\n                  <div>\r\n                    <div className=\"text-lg font-bold text-blue-400\">{status.captured}</div>\r\n                    <div className=\"text-[10px] text-gray-500\">Captured</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-lg font-bold text-purple-400\">{status.flagged}</div>\r\n                    <div className=\"text-[10px] text-gray-500\">Flagged</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-lg font-bold text-green-400\">{status.filed}</div>\r\n                    <div className=\"text-[10px] text-gray-500\">Filed</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Pipeline Header Row: 3/4 header | 1/4 pipeline buckets */}\r\n      <div className=\"flex border-b border-gray-700 shrink-0\">\r\n        {/* 3/4 Pipeline Header */}\r\n        <div className=\"flex-[3] px-4 py-3 bg-gray-800/50 border-r border-gray-700\">\r\n          <div className=\"flex items-center justify-around\">\r\n            <TotalStat label=\"Active\" value={totals.active} color=\"cyan\" />\r\n            <PipelineArrow />\r\n            <TotalStat label=\"Processed\" value={totals.processed} color=\"blue\" />\r\n            <PipelineArrow />\r\n            <TotalStat label=\"Flagged\" value={totals.flagged} color=\"purple\" />\r\n            <PipelineArrow />\r\n            <TotalStat label=\"Pending\" value={totals.pending} color=\"yellow\" />\r\n            <PipelineArrow />\r\n            <TotalStat label=\"Published\" value={totals.published} color=\"indigo\" />\r\n            <PipelineArrow />\r\n            <TotalStat label=\"Cleaned\" value={totals.cleaned} color=\"teal\" />\r\n            <PipelineArrow />\r\n            <TotalStat label=\"Archived\" value={totals.archived} color=\"green\" />\r\n          </div>\r\n          <div className=\"text-center mt-2 text-xs text-gray-500\">\r\n            {totals.total} total sessions | {totals.last24h} in last 24h\r\n          </div>\r\n        </div>\r\n\r\n        {/* 1/4 Pipeline Buckets (compact) */}\r\n        <div className=\"flex-1 px-3 py-2 bg-gray-800/50\">\r\n          <div className=\"space-y-0.5\">\r\n            {['active', 'processed', 'cleaned', 'archived'].map(name => (\r\n              <div key={name} className=\"flex items-center justify-between text-xs\">\r\n                <span className=\"text-gray-400 capitalize\">{name}</span>\r\n                <span className=\"font-mono font-bold text-white\">{buckets[name] || 0}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content - 3 equal columns */}\r\n      <div className=\"flex-1 flex overflow-hidden\">\r\n        {/* Column 1: Chad's Session Logs */}\r\n        <div className=\"flex-1 flex flex-col border-r border-gray-700 min-w-0\">\r\n          <div className=\"px-4 py-2 bg-gray-800/50 border-b border-gray-700 shrink-0\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h2 className=\"text-sm font-medium text-gray-300\">Chad's Sessions ({sessions.length})</h2>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div\r\n                  className={`w-2.5 h-2.5 rounded-full ${externalClaudeHealth === 'healthy' ? 'bg-green-500' : 'bg-red-500 animate-pulse'}`}\r\n                  title={externalClaudeHealth === 'healthy' ? 'Chad: Capturing every 15 min' : 'Chad: MISSED 15-min capture!'}\r\n                />\r\n                <span className=\"text-xs text-gray-500\">Chad</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex-1 overflow-auto p-3 space-y-2\">\r\n            {sessions.length === 0 ? (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <div className=\"text-3xl mb-2\">üì≠</div>\r\n                <p>No sessions in database</p>\r\n              </div>\r\n            ) : (\r\n              sessions.map(session => (\r\n                <SessionItem key={session.id} session={session} />\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Column 2: Jen's Flagged Buckets */}\r\n        <div className=\"flex-1 flex flex-col border-r border-gray-700 min-w-0\">\r\n          <div className=\"px-4 py-2 bg-gray-800/50 border-b border-gray-700 shrink-0\">\r\n            <h2 className=\"text-sm font-medium text-gray-300\">Jen's Flagged Items</h2>\r\n          </div>\r\n          <div className=\"flex-1 overflow-auto p-3\">\r\n            <div className=\"space-y-1\">\r\n              {JEN_BUCKETS.map(name => (\r\n                <BucketRow key={name} name={name} count={jenBuckets[name] || 0} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Column 3: Susan's Projects */}\r\n        <div className=\"flex-1 flex flex-col min-w-0\">\r\n          <div className=\"px-4 py-2 bg-gray-800/50 border-b border-gray-700 shrink-0\">\r\n            <h2 className=\"text-sm font-medium text-gray-300\">Susan's Projects ({projects.length})</h2>\r\n          </div>\r\n          <div className=\"flex-1 overflow-auto p-3\">\r\n            <div className=\"space-y-2\">\r\n              {projects.length === 0 ? (\r\n                <div className=\"text-center py-8 text-gray-500\">\r\n                  <div className=\"text-3xl mb-2\">üìÅ</div>\r\n                  <p>No projects</p>\r\n                </div>\r\n              ) : (\r\n                projects.map(project => (\r\n                  <ProjectCard key={project.id} project={project} />\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Pipeline arrow\r\nfunction PipelineArrow() {\r\n  return <span className=\"text-gray-600 text-xs\">‚Üí</span>;\r\n}\r\n\r\n// Total stat display\r\nfunction TotalStat({ label, value, color }: { label: string; value: number; color: string }) {\r\n  const colors: Record<string, string> = {\r\n    cyan: 'text-cyan-400',\r\n    blue: 'text-blue-400',\r\n    indigo: 'text-indigo-400',\r\n    purple: 'text-purple-400',\r\n    yellow: 'text-yellow-400',\r\n    teal: 'text-teal-400',\r\n    green: 'text-green-400',\r\n  };\r\n\r\n  return (\r\n    <div className=\"text-center\">\r\n      <div className={`text-xl font-bold ${colors[color] || 'text-gray-400'}`}>{value}</div>\r\n      <div className=\"text-[10px] text-gray-500\">{label}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Session list item\r\nfunction SessionItem({ session }: { session: Session }) {\r\n  const datetime = session.started_at ? formatDateTime(session.started_at) : '??:??';\r\n\r\n  // Display logic: show meaningful names based on source\r\n  const getDisplayName = () => {\r\n    // AI session types - differentiate by terminal port\r\n    if (session.source_type === 'internal_claude') {\r\n      const port = session.terminal_port;\r\n      if (port === 5400) return 'Internal Claude (Main)';\r\n      if (port === 5410) return 'Internal Claude (Dev Team 1)';\r\n      if (port === 5420) return 'Internal Claude (Dev Team 2)';\r\n      if (port === 5430) return 'Internal Claude (Dev Team 3)';\r\n      return 'Internal Claude';\r\n    }\r\n    if (session.source_type === 'external') {\r\n      return 'External Claude';\r\n    }\r\n    if (session.source_type === 'chat_systems') {\r\n      return 'Chat Systems';\r\n    }\r\n    // Show source_name if available\r\n    if (session.source_name && session.source_name.trim()) {\r\n      return session.source_name;\r\n    }\r\n    // Show user name\r\n    if (session.user_name && session.user_name.trim()) {\r\n      return session.user_name;\r\n    }\r\n    // Don't show raw UUIDs\r\n    if (session.user_id && !session.user_id.includes('-')) {\r\n      return session.user_id;\r\n    }\r\n    return 'Unknown';\r\n  };\r\n\r\n  const user = getDisplayName();\r\n\r\n  // Pipeline: active ‚Üí captured ‚Üí flagged ‚Üí pending ‚Üí cleaned ‚Üí archived\r\n  const statusColors: Record<string, string> = {\r\n    active: 'bg-cyan-900/50 text-cyan-400',\r\n    processed: \"bg-blue-900/50 text-blue-400\",\r\n    published: \"bg-indigo-900/50 text-indigo-400\",\r\n    flagged: 'bg-purple-900/50 text-purple-400',\r\n    pending: 'bg-yellow-900/50 text-yellow-400',\r\n    cleaned: 'bg-teal-900/50 text-teal-400',\r\n    archived: 'bg-gray-900/50 text-gray-400',\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-2 rounded border border-gray-700 bg-gray-800/50 text-sm\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"font-medium text-white truncate\">{user}</span>\r\n        <span className=\"text-[10px] text-gray-500 font-mono shrink-0 ml-2\">{datetime}</span>\r\n      </div>\r\n      <div className=\"flex items-center justify-between mt-1\">\r\n        <span className=\"text-xs text-gray-500 truncate\">{session.project_path || session.source_name || 'Unknown'}</span>\r\n        <span className={`text-[10px] px-1.5 py-0.5 rounded ${statusColors[session.status || 'captured'] || statusColors.captured}`}>\r\n          {session.status || 'captured'}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Bucket row\r\n// Pipeline: active ‚Üí captured ‚Üí flagged ‚Üí pending ‚Üí cleaned ‚Üí archived\r\nfunction BucketRow({ name, count }: { name: string; count: number }) {\r\n  const bucketColors: Record<string, string> = {\r\n    active: 'bg-cyan-900/20',\r\n    processed: \"bg-blue-900/20\",\r\n    published: \"bg-indigo-900/20\",\r\n    flagged: 'bg-purple-900/20',\r\n    pending: 'bg-yellow-900/20',\r\n    cleaned: 'bg-teal-900/20',\r\n    archived: 'bg-gray-800/30',\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-center justify-between py-1.5 px-2 rounded ${bucketColors[name] || 'bg-gray-800/30'}`}>\r\n      <span className={`text-sm truncate ${count > 0 ? 'text-white' : 'text-gray-500'}`}>\r\n        {name}\r\n      </span>\r\n      <span className={`font-mono font-bold min-w-[24px] text-right ${count > 0 ? 'text-white' : 'text-gray-600'}`}>\r\n        {count}\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Project card for Susan's column - clickable to project management page\r\nfunction ProjectCard({ project }: { project: Project }) {\r\n  const [expanded, setExpanded] = useState(false);\r\n  const hasChildren = project.children && project.children.length > 0;\r\n  const total = project.todos + project.knowledge + project.bugs;\r\n\r\n  return (\r\n    <div className=\"rounded border border-gray-700 bg-gray-800/50 overflow-hidden\">\r\n      <div\r\n        className=\"p-2 flex items-center gap-2 hover:bg-gray-700/50 cursor-pointer\"\r\n        onClick={() => hasChildren && setExpanded(!expanded)}\r\n      >\r\n        {hasChildren ? (\r\n          expanded ? (\r\n            <ChevronDown className=\"w-4 h-4 text-gray-500 shrink-0\" />\r\n          ) : (\r\n            <ChevronRight className=\"w-4 h-4 text-gray-500 shrink-0\" />\r\n          )\r\n        ) : (\r\n          <div className=\"w-4 shrink-0\" />\r\n        )}\r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <Link\r\n              href={`/project-management?project=${project.slug}&allClients=true`}\r\n              className=\"font-medium text-white text-sm truncate hover:text-blue-400\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              {project.name}\r\n            </Link>\r\n            {total > 0 && (\r\n              <span className=\"text-xs text-gray-400 ml-2 shrink-0\">{total}</span>\r\n            )}\r\n          </div>\r\n          <div className=\"flex items-center gap-3 mt-1 text-xs\">\r\n            <span className={project.todos > 0 ? 'text-blue-400' : 'text-gray-600'}>\r\n              To-do: {project.todos}\r\n            </span>\r\n            <span className={project.knowledge > 0 ? 'text-green-400' : 'text-gray-600'}>\r\n              Knowledge: {project.knowledge}\r\n            </span>\r\n            <span className={project.bugs > 0 ? 'text-red-400' : 'text-gray-600'}>\r\n              Bugs: {project.bugs}\r\n            </span>\r\n            {hasChildren && (\r\n              <span className=\"text-gray-500\">\r\n                ({project.children!.length} projects)\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {expanded && hasChildren && (\r\n        <div className=\"border-t border-gray-700 bg-gray-900/50\">\r\n          {project.children!.map(child => {\r\n            const childTotal = child.todos + child.knowledge + child.bugs;\r\n            return (\r\n              <Link\r\n                key={child.id}\r\n                href={`/project-management?project=${child.slug}&allClients=true`}\r\n                className=\"block p-2 pl-8 hover:bg-gray-700/30 border-b border-gray-700/50 last:border-b-0\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-sm text-gray-300 truncate\">{child.name}</span>\r\n                  {childTotal > 0 && (\r\n                    <span className=\"text-xs text-gray-500 ml-2\">{childTotal}</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"flex items-center gap-3 mt-0.5 text-[11px]\">\r\n                  <span className={child.todos > 0 ? 'text-blue-400/80' : 'text-gray-600'}>\r\n                    {child.todos}\r\n                  </span>\r\n                  <span className={child.knowledge > 0 ? 'text-green-400/80' : 'text-gray-600'}>\r\n                    {child.knowledge}\r\n                  </span>\r\n                  <span className={child.bugs > 0 ? 'text-red-400/80' : 'text-gray-600'}>\r\n                    {child.bugs}\r\n                  </span>\r\n                </div>\r\n              </Link>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n// Health badge\r\nfunction HealthBadge({ health }: { health: 'healthy' | 'degraded' | 'down' }) {\r\n  const config = {\r\n    healthy: { bg: 'bg-green-600/20', text: 'text-green-400', icon: CheckCircle, label: 'Connected' },\r\n    degraded: { bg: 'bg-yellow-600/20', text: 'text-yellow-400', icon: AlertTriangle, label: 'Degraded' },\r\n    down: { bg: 'bg-red-600/20', text: 'text-red-400', icon: XCircle, label: 'Disconnected' },\r\n  };\r\n  const c = config[health];\r\n  const Icon = c.icon;\r\n\r\n  return (\r\n    <div className={`flex items-center gap-1.5 px-2 py-1 rounded ${c.bg}`}>\r\n      <Icon className={`w-3.5 h-3.5 ${c.text}`} />\r\n      <span className={`text-xs font-medium ${c.text}`}>{c.label}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction formatDateTime(dateStr: string): string {\r\n  const date = new Date(dateStr);\r\n  const today = new Date();\r\n  const yesterday = new Date(today);\r\n  yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n  const isToday = date.toDateString() === today.toDateString();\r\n  const isYesterday = date.toDateString() === yesterday.toDateString();\r\n\r\n  const time = date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });\r\n\r\n  if (isToday) {\r\n    return `Today ${time}`;\r\n  } else if (isYesterday) {\r\n    return `Yesterday ${time}`;\r\n  } else {\r\n    const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n    return `${dateStr} ${time}`;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}