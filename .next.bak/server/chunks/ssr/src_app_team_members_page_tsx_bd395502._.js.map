{"version":3,"sources":["../../../../src/app/team/members/page.tsx","../../../../src/app/team/members/components/MembersTable.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useContext } from 'react';\r\nimport Link from 'next/link';\r\nimport { PageTitleContext, PageActionsContext } from '@/app/layout';\r\nimport MembersTable from './components/MembersTable';\r\n\r\nexport default function TeamMembersPage() {\r\n  const setPageTitle = useContext(PageTitleContext);\r\n  const setPageActions = useContext(PageActionsContext);\r\n  const [members, setMembers] = useState<any[]>([]);\r\n  const [roles, setRoles] = useState<any[]>([]);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Set page title and actions in nav\r\n  useEffect(() => {\r\n    setPageTitle({\r\n      title: 'Team Members',\r\n      description: 'Manage team member accounts and access'\r\n    });\r\n    setPageActions(\r\n      <Link\r\n        href=\"/team/members/new\"\r\n        className=\"px-4 py-2 bg-white/20 text-white rounded-lg text-sm font-semibold hover:bg-white/30 transition-colors border border-white/30\"\r\n      >\r\n        + Add Member\r\n      </Link>\r\n    );\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      setPageTitle({ title: '', description: '' });\r\n      setPageActions(null);\r\n    };\r\n  }, [setPageTitle, setPageActions]);\r\n\r\n  // Load data\r\n  useEffect(() => {\r\n    async function loadData() {\r\n      try {\r\n        const [membersRes, rolesRes] = await Promise.all([\r\n          fetch('/api/team/members'),\r\n          fetch('/api/team/roles'),\r\n        ]);\r\n\r\n        if (!membersRes.ok) throw new Error('Failed to load members');\r\n        if (!rolesRes.ok) throw new Error('Failed to load roles');\r\n\r\n        const membersData = await membersRes.json();\r\n        const rolesData = await rolesRes.json();\r\n\r\n        setMembers(membersData);\r\n        setRoles(rolesData);\r\n      } catch (e) {\r\n        setError((e as Error).message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    loadData();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"text-gray-400\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {/* Error Alert */}\r\n      {error && (\r\n        <div className=\"bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-6\">\r\n          <strong>Error:</strong> {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Members Table */}\r\n      <MembersTable members={members} roles={roles} />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\n\r\ninterface TeamMember {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  role: string;\r\n  status: 'active' | 'inactive' | 'pending';\r\n  last_active?: string;\r\n  projects?: string[];\r\n  created_at?: string;\r\n}\r\n\r\ninterface Role {\r\n  id: string;\r\n  name: string;\r\n  level: number;\r\n  description: string;\r\n}\r\n\r\ninterface MembersTableProps {\r\n  members: TeamMember[];\r\n  roles: Role[];\r\n}\r\n\r\nexport default function MembersTable({ members, roles }: MembersTableProps) {\r\n  const [search, setSearch] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [roleFilter, setRoleFilter] = useState<string>('all');\r\n\r\n  const filteredMembers = members.filter((member) => {\r\n    if (statusFilter !== 'all' && member.status !== statusFilter) return false;\r\n    if (roleFilter !== 'all' && member.role.toLowerCase() !== roleFilter.toLowerCase()) return false;\r\n    if (search) {\r\n      const searchLower = search.toLowerCase();\r\n      if (\r\n        !member.name.toLowerCase().includes(searchLower) &&\r\n        !member.email.toLowerCase().includes(searchLower)\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  });\r\n\r\n  const statusColors: Record<string, string> = {\r\n    active: 'bg-green-500/20 text-green-400',\r\n    inactive: 'bg-gray-500/20 text-gray-400',\r\n    pending: 'bg-yellow-500/20 text-yellow-400',\r\n  };\r\n\r\n  const getRoleName = (roleId: string) => {\r\n    const role = roles.find((r) => r.id === roleId.toLowerCase());\r\n    return role?.name || roleId.charAt(0).toUpperCase() + roleId.slice(1);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Filters */}\r\n      <div className=\"bg-gray-800 border border-gray-700 rounded-xl p-4 mb-6\">\r\n        <div className=\"flex flex-wrap items-center gap-4\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by name or email...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            className=\"flex-1 min-w-[200px] bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-sm text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none\"\r\n          />\r\n\r\n          <select\r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n            className=\"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 focus:outline-none\"\r\n          >\r\n            <option value=\"all\">All Status</option>\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n            <option value=\"pending\">Pending</option>\r\n          </select>\r\n\r\n          <select\r\n            value={roleFilter}\r\n            onChange={(e) => setRoleFilter(e.target.value)}\r\n            className=\"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 focus:outline-none\"\r\n          >\r\n            <option value=\"all\">All Roles</option>\r\n            {roles.map((role) => (\r\n              <option key={role.id} value={role.id}>{role.name}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Results */}\r\n      <div className=\"text-sm text-gray-400 mb-4\">\r\n        Showing {filteredMembers.length} of {members.length} members\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-900\">\r\n            <tr>\r\n              <th className=\"text-left text-xs font-medium text-gray-500 uppercase px-4 py-3\">Member</th>\r\n              <th className=\"text-left text-xs font-medium text-gray-500 uppercase px-4 py-3\">Role</th>\r\n              <th className=\"text-left text-xs font-medium text-gray-500 uppercase px-4 py-3\">Status</th>\r\n              <th className=\"text-left text-xs font-medium text-gray-500 uppercase px-4 py-3\">Projects</th>\r\n              <th className=\"text-right text-xs font-medium text-gray-500 uppercase px-4 py-3\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-700\">\r\n            {filteredMembers.map((member) => (\r\n              <tr key={member.id} className=\"hover:bg-gray-900/50\">\r\n                <td className=\"px-4 py-3\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 font-bold text-sm\">\r\n                      {member.name.charAt(0)}\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"font-medium text-white\">{member.name}</div>\r\n                      <div className=\"text-xs text-gray-500\">{member.email}</div>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td className=\"px-4 py-3\">\r\n                  <span className=\"text-sm text-purple-400\">{getRoleName(member.role)}</span>\r\n                </td>\r\n                <td className=\"px-4 py-3\">\r\n                  <span className={`text-xs px-2 py-1 rounded ${statusColors[member.status]}`}>\r\n                    {member.status}\r\n                  </span>\r\n                </td>\r\n                <td className=\"px-4 py-3\">\r\n                  <div className=\"text-xs text-gray-400\">\r\n                    {member.projects?.length || 0} projects\r\n                  </div>\r\n                </td>\r\n                <td className=\"px-4 py-3 text-right\">\r\n                  <Link\r\n                    href={`/team/members/${member.id}`}\r\n                    className=\"px-3 py-1 text-xs font-semibold rounded bg-blue-500/15 text-blue-400 border border-blue-500/30 hover:bg-blue-500 hover:text-white transition-colors\"\r\n                  >\r\n                    Edit\r\n                  </Link>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        {filteredMembers.length === 0 && (\r\n          <div className=\"text-center py-12 text-gray-500\">\r\n            No members found\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}