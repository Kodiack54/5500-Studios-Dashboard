{"version":3,"sources":["../../../../src/app/team/reports/components/ActivityReport.tsx","../../../../src/app/team/reports/components/AuditLogPanel.tsx"],"sourcesContent":["'use client';\r\n\r\ninterface ActivityReportProps {\r\n  report: {\r\n    total_actions: number;\r\n    active_users: number;\r\n    top_users: Array<{\r\n      user_id: string;\r\n      name: string;\r\n      actions: number;\r\n    }>;\r\n    actions_by_type: Record<string, number>;\r\n  } | null;\r\n}\r\n\r\nexport default function ActivityReport({ report }: ActivityReportProps) {\r\n  const data = report || {\r\n    total_actions: 0,\r\n    active_users: 0,\r\n    top_users: [],\r\n    actions_by_type: {},\r\n  };\r\n\r\n  const actionColors: Record<string, string> = {\r\n    login: 'bg-green-500',\r\n    view: 'bg-blue-500',\r\n    edit: 'bg-yellow-500',\r\n    create: 'bg-purple-500',\r\n    delete: 'bg-red-500',\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-800 border border-gray-700 rounded-xl p-5\">\r\n      <h3 className=\"text-lg font-semibold text-white mb-4\">Activity Summary</h3>\r\n\r\n      {/* Stats */}\r\n      <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n        <div className=\"bg-gray-900 rounded-lg p-3\">\r\n          <div className=\"text-xs text-gray-500\">Total Actions</div>\r\n          <div className=\"text-xl font-bold text-white\">{data.total_actions}</div>\r\n        </div>\r\n        <div className=\"bg-gray-900 rounded-lg p-3\">\r\n          <div className=\"text-xs text-gray-500\">Active Users</div>\r\n          <div className=\"text-xl font-bold text-green-400\">{data.active_users}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Actions by Type */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"text-sm font-medium text-gray-400 mb-3\">Actions by Type</div>\r\n        <div className=\"space-y-2\">\r\n          {Object.entries(data.actions_by_type).map(([type, count]) => {\r\n            const total = data.total_actions || 1;\r\n            const percentage = Math.round((count / total) * 100);\r\n\r\n            return (\r\n              <div key={type} className=\"flex items-center gap-3\">\r\n                <div className=\"w-16 text-xs text-gray-400 capitalize\">{type}</div>\r\n                <div className=\"flex-1 h-2 bg-gray-900 rounded-full overflow-hidden\">\r\n                  <div\r\n                    className={`h-full ${actionColors[type] || 'bg-gray-500'}`}\r\n                    style={{ width: `${percentage}%` }}\r\n                  />\r\n                </div>\r\n                <div className=\"w-12 text-xs text-gray-500 text-right\">{count}</div>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          {Object.keys(data.actions_by_type).length === 0 && (\r\n            <div className=\"text-center py-4 text-gray-500 text-sm\">\r\n              No activity data\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Top Users */}\r\n      <div>\r\n        <div className=\"text-sm font-medium text-gray-400 mb-3\">Most Active Users</div>\r\n        <div className=\"space-y-2\">\r\n          {data.top_users.slice(0, 5).map((user, index) => (\r\n            <div\r\n              key={user.user_id}\r\n              className=\"flex items-center gap-3 bg-gray-900 rounded-lg p-2\"\r\n            >\r\n              <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${\r\n                index === 0 ? 'bg-yellow-500/20 text-yellow-400' :\r\n                index === 1 ? 'bg-gray-400/20 text-gray-300' :\r\n                index === 2 ? 'bg-orange-500/20 text-orange-400' :\r\n                'bg-gray-700 text-gray-400'\r\n              }`}>\r\n                {index + 1}\r\n              </div>\r\n              <div className=\"flex-1 text-sm text-white\">{user.name}</div>\r\n              <div className=\"text-xs text-gray-500\">{user.actions} actions</div>\r\n            </div>\r\n          ))}\r\n\r\n          {data.top_users.length === 0 && (\r\n            <div className=\"text-center py-4 text-gray-500 text-sm\">\r\n              No user activity data\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\ninterface AuditLog {\r\n  id: string;\r\n  user_id: string;\r\n  user_name: string;\r\n  action: string;\r\n  resource: string;\r\n  resource_id?: string;\r\n  details?: string;\r\n  ip_address?: string;\r\n  created_at: string;\r\n}\r\n\r\ninterface AuditLogPanelProps {\r\n  logs: AuditLog[];\r\n}\r\n\r\nexport default function AuditLogPanel({ logs }: AuditLogPanelProps) {\r\n  const actionColors: Record<string, string> = {\r\n    login: 'bg-green-500/20 text-green-400',\r\n    logout: 'bg-gray-500/20 text-gray-400',\r\n    create: 'bg-blue-500/20 text-blue-400',\r\n    update: 'bg-yellow-500/20 text-yellow-400',\r\n    delete: 'bg-red-500/20 text-red-400',\r\n    view: 'bg-purple-500/20 text-purple-400',\r\n  };\r\n\r\n  const formatTime = (dateStr: string) => {\r\n    const date = new Date(dateStr);\r\n    return date.toLocaleString();\r\n  };\r\n\r\n  const getTimeSince = (dateStr: string) => {\r\n    const date = new Date(dateStr);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMins / 60);\r\n    const diffDays = Math.floor(diffHours / 24);\r\n\r\n    if (diffMins < 1) return 'just now';\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    return `${diffDays}d ago`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-800 border border-gray-700 rounded-xl p-5\">\r\n      <h3 className=\"text-lg font-semibold text-white mb-4\">Audit Log</h3>\r\n\r\n      <div className=\"space-y-2 max-h-[500px] overflow-y-auto\">\r\n        {logs.map((log) => (\r\n          <div\r\n            key={log.id}\r\n            className=\"bg-gray-900 rounded-lg p-3\"\r\n          >\r\n            <div className=\"flex items-start justify-between mb-1\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className={`text-xs px-2 py-0.5 rounded ${actionColors[log.action] || actionColors.view}`}>\r\n                  {log.action}\r\n                </span>\r\n                <span className=\"text-sm font-medium text-white\">{log.user_name}</span>\r\n              </div>\r\n              <span className=\"text-xs text-gray-600\" title={formatTime(log.created_at)}>\r\n                {getTimeSince(log.created_at)}\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"text-xs text-gray-400\">\r\n              {log.action} {log.resource}\r\n              {log.resource_id && <span className=\"text-gray-600\"> #{log.resource_id.slice(0, 8)}</span>}\r\n            </div>\r\n\r\n            {log.details && (\r\n              <div className=\"text-xs text-gray-500 mt-1\">{log.details}</div>\r\n            )}\r\n\r\n            {log.ip_address && (\r\n              <div className=\"text-xs text-gray-600 mt-1\">IP: {log.ip_address}</div>\r\n            )}\r\n          </div>\r\n        ))}\r\n\r\n        {logs.length === 0 && (\r\n          <div className=\"text-center py-8 text-gray-500 text-sm\">\r\n            No audit log entries\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}