module.exports=[96591,a=>{"use strict";let b=(0,a.i(81338).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);a.s(["FolderOpen",()=>b],96591)},66782,a=>{"use strict";let b=(0,a.i(81338).default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);a.s(["GripVertical",()=>b],66782)},90658,a=>{"use strict";let b=(0,a.i(81338).default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckSquare",()=>b],90658)},33020,a=>{"use strict";let b=(0,a.i(81338).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],33020)},31600,8555,74176,45224,5613,a=>{"use strict";var b=a.i(81338);let c=(0,b.default)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);a.s(["Table",()=>c],31600);let d=(0,b.default)("git-commit-horizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);a.s(["GitCommit",()=>d],8555);let e=(0,b.default)("sticky-note",[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]]);a.s(["StickyNote",()=>e],74176);let f=(0,b.default)("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);a.s(["Bug",()=>f],45224);let g=(0,b.default)("folder-tree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);a.s(["FolderTree",()=>g],5613)},5494,97233,53828,48934,88304,34498,12583,41848,42084,99049,88085,23785,63545,a=>{"use strict";let b;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a.i(18030),w=a.i(90658),x=a.i(57977),y=a.i(31600),z=a.i(64143),A=a.i(8555),B=a.i(74176),C=a.i(45224),D=a.i(68471),E=a.i(5613),F=a.i(33020);let G=[{id:"todos",label:"Todos",icon:"CheckSquare"},{id:"knowledge",label:"Knowledge",icon:"Brain"},{id:"docs",label:"Docs",icon:"FileText"},{id:"database",label:"Database",icon:"Database"},{id:"structure",label:"Structure",icon:"FolderTree"},{id:"conventions",label:"Conventions",icon:"BookOpen"},{id:"notepad",label:"Notepad",icon:"StickyNote"},{id:"bugs",label:"Bug Reports",icon:"Bug"}],H={CheckSquare:(0,v.jsx)(w.CheckSquare,{className:"w-4 h-4"}),Brain:(0,v.jsx)(D.Brain,{className:"w-4 h-4"}),FileText:(0,v.jsx)(x.FileText,{className:"w-4 h-4"}),Table:(0,v.jsx)(y.Table,{className:"w-4 h-4"}),Database:(0,v.jsx)(z.Database,{className:"w-4 h-4"}),FolderTree:(0,v.jsx)(E.FolderTree,{className:"w-4 h-4"}),GitCommit:(0,v.jsx)(A.GitCommit,{className:"w-4 h-4"}),StickyNote:(0,v.jsx)(B.StickyNote,{className:"w-4 h-4"}),Bug:(0,v.jsx)(C.Bug,{className:"w-4 h-4"}),BookOpen:(0,v.jsx)(F.BookOpen,{className:"w-4 h-4"})};function I({activeTab:a,onTabChange:b}){return(0,v.jsx)("div",{className:"bg-gray-800 border-b border-gray-700",children:(0,v.jsx)("div",{className:"flex items-center gap-1 px-6",children:G.map(c=>(0,v.jsxs)("button",{onClick:()=>b(c.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${a===c.id?"text-blue-400 border-blue-500":"text-gray-400 border-transparent hover:text-white hover:border-gray-600"}`,children:[H[c.icon],c.label]},c.id))})})}a.s(["default",()=>I],5494);var J=a.i(30072),K=a.i(51684);function L({project:a,onClose:b,onSave:c}){let[d,e]=(0,J.useState)([]),[f,g]=(0,J.useState)([]),[h,i]=(0,J.useState)({name:a?.name||"",slug:a?.slug||"",description:a?.description||"",client_id:a?.client_id||"",parent_id:a?.parent_id||"",is_parent:a?.is_parent??!1,is_active:a?.is_active??!0,is_main:a?.is_main??!1,droplet_name:a?.droplet_name||"",droplet_ip:a?.droplet_ip||"",server_path:a?.server_path||"",port_dev:a?.port_dev?.toString()||"",port_test:a?.port_test?.toString()||"",port_prod:a?.port_prod?.toString()||"",git_repo:a?.git_repo||"",table_prefix:a?.table_prefix||"",logo_url:a?.logo_url||""}),[j,k]=(0,J.useState)(!1),[l,m]=(0,J.useState)("");(0,J.useEffect)(()=>{n()},[]),(0,J.useEffect)(()=>{h.client_id?o(h.client_id):g([])},[h.client_id]);let n=async()=>{try{let a=await fetch("/project-management/api/clients"),b=await a.json();b.success&&e(b.clients)}catch(a){console.error("Failed to fetch clients:",a)}},o=async b=>{try{let c=await fetch(`/project-management/api/projects?client_id=${b}&is_parent=true`),d=await c.json();if(d.success){let b=(d.projects||[]).filter(b=>b.id!==a?.id);g(b)}}catch(a){console.error("Failed to fetch parent projects:",a)}},p=a=>{let{name:b,value:c,type:d}=a.target;i(e=>({...e,[b]:"checkbox"===d?a.target.checked:c}))},q=async b=>{b.preventDefault(),k(!0),m("");try{let b={...h,client_id:h.client_id||null,parent_id:h.is_parent?null:h.parent_id||null,is_parent:h.is_parent,is_main:h.is_main,port_dev:h.port_dev?parseInt(h.port_dev):null,port_test:h.port_test?parseInt(h.port_test):null,port_prod:h.port_prod?parseInt(h.port_prod):null},d=a?`/project-management/api/projects/${a.id}`:"/project-management/api/projects",e=a?"PATCH":"POST",f=await fetch(d,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),g=await f.json();g.success?c():m(g.error||"Failed to save project")}catch(a){m("Failed to save project"),console.error(a)}finally{k(!1)}};return(0,v.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,v.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-700",children:[(0,v.jsx)("h2",{className:"text-xl font-semibold text-white",children:a?"Edit Project":"Add Project"}),(0,v.jsx)("button",{onClick:b,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:(0,v.jsx)(K.X,{className:"w-5 h-5"})})]}),(0,v.jsxs)("form",{onSubmit:q,className:"p-6 overflow-y-auto max-h-[calc(90vh-130px)]",children:[l&&(0,v.jsx)("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-500/50 text-red-400 rounded-lg",children:l}),(0,v.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"col-span-2",children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Client"}),(0,v.jsxs)("select",{name:"client_id",value:h.client_id,onChange:p,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none",children:[(0,v.jsx)("option",{value:"",children:"-- No Client --"}),d.map(a=>(0,v.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),!h.is_parent&&(0,v.jsxs)("div",{className:"col-span-2",children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Parent Project"}),(0,v.jsxs)("select",{name:"parent_id",value:h.parent_id,onChange:p,disabled:!h.client_id,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none disabled:opacity-50",children:[(0,v.jsx)("option",{value:"",children:"-- No Parent (Top Level) --"}),f.map(a=>(0,v.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,v.jsxs)("div",{className:"col-span-2 flex items-center gap-6",children:[(0,v.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,v.jsx)("input",{type:"checkbox",name:"is_active",checked:h.is_active,onChange:p,className:"w-4 h-4 rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-blue-500"}),(0,v.jsx)("span",{className:"text-gray-400",children:"Active"})]}),(0,v.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,v.jsx)("input",{type:"checkbox",name:"is_parent",checked:h.is_parent,onChange:p,className:"w-4 h-4 rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-blue-500"}),(0,v.jsx)("span",{className:"text-gray-400",children:"Parent Project"})]}),(0,v.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,v.jsx)("input",{type:"checkbox",name:"is_main",checked:h.is_main,onChange:p,className:"w-4 h-4 rounded bg-gray-700 border-gray-600 text-yellow-600 focus:ring-yellow-500"}),(0,v.jsx)("span",{className:"text-gray-400",children:"Main (Top of List)"})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Name *"}),(0,v.jsx)("input",{type:"text",name:"name",value:h.name,onChange:p,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Slug *"}),(0,v.jsx)("input",{type:"text",name:"slug",value:h.slug,onChange:p,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,v.jsxs)("div",{className:"col-span-2",children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),(0,v.jsx)("textarea",{name:"description",value:h.description,onChange:p,rows:2,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none resize-none"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Droplet Name"}),(0,v.jsx)("input",{type:"text",name:"droplet_name",value:h.droplet_name,onChange:p,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Droplet IP"}),(0,v.jsx)("input",{type:"text",name:"droplet_ip",value:h.droplet_ip,onChange:p,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,v.jsxs)("div",{className:"col-span-2",children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Server Path"}),(0,v.jsx)("input",{type:"text",name:"server_path",value:h.server_path,onChange:p,placeholder:"/var/www/project-name",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none font-mono text-sm"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Dev Port"}),(0,v.jsx)("input",{type:"number",name:"port_dev",value:h.port_dev,onChange:p,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Test Port"}),(0,v.jsx)("input",{type:"number",name:"port_test",value:h.port_test,onChange:p,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Prod Port"}),(0,v.jsx)("input",{type:"number",name:"port_prod",value:h.port_prod,onChange:p,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Table Prefix"}),(0,v.jsx)("input",{type:"text",name:"table_prefix",value:h.table_prefix,onChange:p,placeholder:"project_",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,v.jsxs)("div",{className:"col-span-2",children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Git Repository"}),(0,v.jsx)("input",{type:"text",name:"git_repo",value:h.git_repo,onChange:p,placeholder:"https://github.com/org/repo",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,v.jsxs)("div",{className:"col-span-2",children:[(0,v.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Logo URL"}),(0,v.jsx)("input",{type:"text",name:"logo_url",value:h.logo_url,onChange:p,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]})]})]}),(0,v.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-700",children:[(0,v.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,v.jsx)("button",{onClick:q,disabled:j,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50 transition-colors",children:j?"Saving...":a?"Update Project":"Create Project"})]})]})})}a.s(["default",()=>L],97233);var M=a.i(38159);function N(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(0,J.useMemo)(()=>a=>{b.forEach(b=>b(a))},b)}function O(a){let b=Object.prototype.toString.call(a);return"[object Window]"===b||"[object global]"===b}function P(a){return"nodeType"in a}function Q(a){var b,c;return a?O(a)?a:P(a)&&null!=(b=null==(c=a.ownerDocument)?void 0:c.defaultView)?b:window:window}function R(a){let{Document:b}=Q(a);return a instanceof b}function S(a){return!O(a)&&a instanceof Q(a).HTMLElement}function T(a){return a instanceof Q(a).SVGElement}function U(a){return a?O(a)?a.document:P(a)?R(a)?a:S(a)||T(a)?a.ownerDocument:document:document:document}let V=J.useEffect;function W(a){let b=(0,J.useRef)(a);return V(()=>{b.current=a}),(0,J.useCallback)(function(){for(var a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];return null==b.current?void 0:b.current(...c)},[])}function X(){let a=(0,J.useRef)(null);return[(0,J.useCallback)((b,c)=>{a.current=setInterval(b,c)},[]),(0,J.useCallback)(()=>{null!==a.current&&(clearInterval(a.current),a.current=null)},[])]}function Y(a,b){void 0===b&&(b=[a]);let c=(0,J.useRef)(a);return V(()=>{c.current!==a&&(c.current=a)},b),c}function Z(a,b){let c=(0,J.useRef)();return(0,J.useMemo)(()=>{let b=a(c.current);return c.current=b,b},[...b])}function $(a){let b=W(a),c=(0,J.useRef)(null),d=(0,J.useCallback)(a=>{a!==c.current&&(null==b||b(a,c.current)),c.current=a},[]);return[c,d]}function _(a){let b=(0,J.useRef)();return(0,J.useEffect)(()=>{b.current=a},[a]),b.current}let aa={};function ab(a,b){return(0,J.useMemo)(()=>{if(b)return b;let c=null==aa[a]?0:aa[a]+1;return aa[a]=c,a+"-"+c},[a,b])}function ac(a){return function(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return d.reduce((b,c)=>{for(let[d,e]of Object.entries(c)){let c=b[d];null!=c&&(b[d]=c+a*e)}return b},{...b})}}let ad=ac(1),ae=ac(-1);function af(a){if(!a)return!1;let{KeyboardEvent:b}=Q(a.target);return b&&a instanceof b}function ag(a){if(function(a){if(!a)return!1;let{TouchEvent:b}=Q(a.target);return b&&a instanceof b}(a)){if(a.touches&&a.touches.length){let{clientX:b,clientY:c}=a.touches[0];return{x:b,y:c}}else if(a.changedTouches&&a.changedTouches.length){let{clientX:b,clientY:c}=a.changedTouches[0];return{x:b,y:c}}}return"clientX"in a&&"clientY"in a?{x:a.clientX,y:a.clientY}:null}let ah=Object.freeze({Translate:{toString(a){if(!a)return;let{x:b,y:c}=a;return"translate3d("+(b?Math.round(b):0)+"px, "+(c?Math.round(c):0)+"px, 0)"}},Scale:{toString(a){if(!a)return;let{scaleX:b,scaleY:c}=a;return"scaleX("+b+") scaleY("+c+")"}},Transform:{toString(a){if(a)return[ah.Translate.toString(a),ah.Scale.toString(a)].join(" ")}},Transition:{toString(a){let{property:b,duration:c,easing:d}=a;return b+" "+c+"ms "+d}}}),ai="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function aj(a){return a.matches(ai)?a:a.querySelector(ai)}a.s(["CSS",()=>ah,"add",()=>ad,"canUseDOM",()=>!1,"findFirstFocusableNode",()=>aj,"getEventCoordinates",()=>ag,"getOwnerDocument",()=>U,"getWindow",()=>Q,"isDocument",()=>R,"isHTMLElement",()=>S,"isKeyboardEvent",()=>af,"isNode",()=>P,"isSVGElement",()=>T,"isWindow",()=>O,"subtract",()=>ae,"useCombinedRefs",()=>N,"useEvent",()=>W,"useInterval",()=>X,"useIsomorphicLayoutEffect",()=>V,"useLatestValue",()=>Y,"useLazyMemo",()=>Z,"useNodeRef",()=>$,"usePrevious",()=>_,"useUniqueId",()=>ab],53828);let ak={display:"none"};function al(a){let{id:b,value:c}=a;return J.default.createElement("div",{id:b,style:ak},c)}function am(a){let{id:b,announcement:c,ariaLiveType:d="assertive"}=a;return J.default.createElement("div",{id:b,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":d,"aria-atomic":!0},c)}let an=(0,J.createContext)(null),ao={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ap={onDragStart(a){let{active:b}=a;return"Picked up draggable item "+b.id+"."},onDragOver(a){let{active:b,over:c}=a;return c?"Draggable item "+b.id+" was moved over droppable area "+c.id+".":"Draggable item "+b.id+" is no longer over a droppable area."},onDragEnd(a){let{active:b,over:c}=a;return c?"Draggable item "+b.id+" was dropped over droppable area "+c.id:"Draggable item "+b.id+" was dropped."},onDragCancel(a){let{active:b}=a;return"Dragging was cancelled. Draggable item "+b.id+" was dropped."}};function aq(a){var b;let c,{announcements:d=ap,container:e,hiddenTextDescribedById:f,screenReaderInstructions:g=ao}=a,{announce:h,announcement:i}=function(){let[a,b]=(0,J.useState)("");return{announce:(0,J.useCallback)(a=>{null!=a&&b(a)},[]),announcement:a}}(),j=ab("DndLiveRegion"),[k,l]=(0,J.useState)(!1);if((0,J.useEffect)(()=>{l(!0)},[]),b=(0,J.useMemo)(()=>({onDragStart(a){let{active:b}=a;h(d.onDragStart({active:b}))},onDragMove(a){let{active:b,over:c}=a;d.onDragMove&&h(d.onDragMove({active:b,over:c}))},onDragOver(a){let{active:b,over:c}=a;h(d.onDragOver({active:b,over:c}))},onDragEnd(a){let{active:b,over:c}=a;h(d.onDragEnd({active:b,over:c}))},onDragCancel(a){let{active:b,over:c}=a;h(d.onDragCancel({active:b,over:c}))}}),[h,d]),c=(0,J.useContext)(an),(0,J.useEffect)(()=>{if(!c)throw Error("useDndMonitor must be used within a children of <DndContext>");return c(b)},[b,c]),!k)return null;let m=J.default.createElement(J.default.Fragment,null,J.default.createElement(al,{id:f,value:g.draggable}),J.default.createElement(am,{id:j,announcement:i}));return e?(0,M.createPortal)(m,e):m}function ar(){}function as(a,b){return(0,J.useMemo)(()=>({sensor:a,options:null!=b?b:{}}),[a,b])}function at(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(0,J.useMemo)(()=>[...b].filter(a=>null!=a),[...b])}(c=l||(l={})).DragStart="dragStart",c.DragMove="dragMove",c.DragEnd="dragEnd",c.DragCancel="dragCancel",c.DragOver="dragOver",c.RegisterDroppable="registerDroppable",c.SetDroppableDisabled="setDroppableDisabled",c.UnregisterDroppable="unregisterDroppable";let au=Object.freeze({x:0,y:0});function av(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))}function aw(a,b){let{data:{value:c}}=a,{data:{value:d}}=b;return c-d}function ax(a,b){let{data:{value:c}}=a,{data:{value:d}}=b;return d-c}function ay(a){let{left:b,top:c,height:d,width:e}=a;return[{x:b,y:c},{x:b+e,y:c},{x:b,y:c+d},{x:b+e,y:c+d}]}function az(a,b){if(!a||0===a.length)return null;let[c]=a;return b?c[b]:c}function aA(a,b,c){return void 0===b&&(b=a.left),void 0===c&&(c=a.top),{x:b+.5*a.width,y:c+.5*a.height}}let aB=a=>{let{collisionRect:b,droppableRects:c,droppableContainers:d}=a,e=aA(b,b.left,b.top),f=[];for(let a of d){let{id:b}=a,d=c.get(b);if(d){let c=av(aA(d),e);f.push({id:b,data:{droppableContainer:a,value:c}})}}return f.sort(aw)},aC=a=>{let{collisionRect:b,droppableRects:c,droppableContainers:d}=a,e=ay(b),f=[];for(let a of d){let{id:b}=a,d=c.get(b);if(d){let c=ay(d),g=Number((e.reduce((a,b,d)=>a+av(c[d],b),0)/4).toFixed(4));f.push({id:b,data:{droppableContainer:a,value:g}})}}return f.sort(aw)},aD=a=>{let{collisionRect:b,droppableRects:c,droppableContainers:d}=a,e=[];for(let a of d){let{id:d}=a,f=c.get(d);if(f){let c=function(a,b){let c=Math.max(b.top,a.top),d=Math.max(b.left,a.left),e=Math.min(b.left+b.width,a.left+a.width),f=Math.min(b.top+b.height,a.top+a.height);if(d<e&&c<f){let g=b.width*b.height,h=a.width*a.height,i=(e-d)*(f-c);return Number((i/(g+h-i)).toFixed(4))}return 0}(f,b);c>0&&e.push({id:d,data:{droppableContainer:a,value:c}})}}return e.sort(ax)};function aE(a,b){return a&&b?{x:a.left-b.left,y:a.top-b.top}:au}let aF=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.reduce((a,b)=>({...a,top:a.top+ +b.y,bottom:a.bottom+ +b.y,left:a.left+ +b.x,right:a.right+ +b.x}),{...a})};function aG(a){if(a.startsWith("matrix3d(")){let b=a.slice(9,-1).split(/, /);return{x:+b[12],y:+b[13],scaleX:+b[0],scaleY:+b[5]}}if(a.startsWith("matrix(")){let b=a.slice(7,-1).split(/, /);return{x:+b[4],y:+b[5],scaleX:+b[0],scaleY:+b[3]}}return null}let aH={ignoreTransform:!1};function aI(a,b){void 0===b&&(b=aH);let c=a.getBoundingClientRect();if(b.ignoreTransform){let{transform:b,transformOrigin:d}=Q(a).getComputedStyle(a);b&&(c=function(a,b,c){let d=aG(b);if(!d)return a;let{scaleX:e,scaleY:f,x:g,y:h}=d,i=a.left-g-(1-e)*parseFloat(c),j=a.top-h-(1-f)*parseFloat(c.slice(c.indexOf(" ")+1)),k=e?a.width/e:a.width,l=f?a.height/f:a.height;return{width:k,height:l,top:j,right:i+k,bottom:j+l,left:i}}(c,b,d))}let{top:d,left:e,width:f,height:g,bottom:h,right:i}=c;return{top:d,left:e,width:f,height:g,bottom:h,right:i}}function aJ(a){return aI(a,{ignoreTransform:!0})}function aK(a,b){let c=[];return a?function d(e){var f,g;let h;if(null!=b&&c.length>=b||!e)return c;if(R(e)&&null!=e.scrollingElement&&!c.includes(e.scrollingElement))return c.push(e.scrollingElement),c;if(!S(e)||T(e)||c.includes(e))return c;let i=Q(a).getComputedStyle(e);return(e!==a&&(void 0===(f=i)&&(f=Q(e).getComputedStyle(e)),h=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(a=>{let b=f[a];return"string"==typeof b&&h.test(b)}))&&c.push(e),void 0===(g=i)&&(g=Q(e).getComputedStyle(e)),"fixed"===g.position)?c:d(e.parentNode)}(a):c}function aL(a){let[b]=aK(a,1);return null!=b?b:null}function aM(a){return O(a)?a.scrollX:a.scrollLeft}function aN(a){return O(a)?a.scrollY:a.scrollTop}function aO(a){return{x:aM(a),y:aN(a)}}function aP(a){let b={x:0,y:0},c={height:a.clientHeight,width:a.clientWidth},d={x:a.scrollWidth-c.width,y:a.scrollHeight-c.height},e=a.scrollTop<=b.y,f=a.scrollLeft<=b.x;return{isTop:e,isLeft:f,isBottom:a.scrollTop>=d.y,isRight:a.scrollLeft>=d.x,maxScroll:d,minScroll:b}}(d=m||(m={}))[d.Forward=1]="Forward",d[d.Backward=-1]="Backward";let aQ={x:.2,y:.2};function aR(a){return a.reduce((a,b)=>ad(a,aO(b)),au)}function aS(a,b){if(void 0===b&&(b=aI),!a)return;let{top:c,left:d,bottom:e,right:f}=b(a);aL(a)&&(e<=0||f<=0||c>=window.innerHeight||d>=window.innerWidth)&&a.scrollIntoView({block:"center",inline:"center"})}let aT=[["x",["left","right"],function(a){return a.reduce((a,b)=>a+aM(b),0)}],["y",["top","bottom"],function(a){return a.reduce((a,b)=>a+aN(b),0)}]];class aU{constructor(a,b){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const c=aK(b),d=aR(c);for(const[b,e,f]of(this.rect={...a},this.width=a.width,this.height=a.height,aT))for(const a of e)Object.defineProperty(this,a,{get:()=>{let e=f(c),g=d[b]-e;return this.rect[a]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class aV{constructor(a){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var b;return null==(b=this.target)?void 0:b.removeEventListener(...a)})},this.target=a}add(a,b,c){var d;null==(d=this.target)||d.addEventListener(a,b,c),this.listeners.push([a,b,c])}}function aW(a,b){let c=Math.abs(a.x),d=Math.abs(a.y);return"number"==typeof b?Math.sqrt(c**2+d**2)>b:"x"in b&&"y"in b?c>b.x&&d>b.y:"x"in b?c>b.x:"y"in b&&d>b.y}function aX(a){a.preventDefault()}function aY(a){a.stopPropagation()}(e=n||(n={})).Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange",(f=o||(o={})).Space="Space",f.Down="ArrowDown",f.Right="ArrowRight",f.Left="ArrowLeft",f.Up="ArrowUp",f.Esc="Escape",f.Enter="Enter",f.Tab="Tab";let aZ={start:[o.Space,o.Enter],cancel:[o.Esc],end:[o.Space,o.Enter,o.Tab]},a$=(a,b)=>{let{currentCoordinates:c}=b;switch(a.code){case o.Right:return{...c,x:c.x+25};case o.Left:return{...c,x:c.x-25};case o.Down:return{...c,y:c.y+25};case o.Up:return{...c,y:c.y-25}}};class a_{constructor(a){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=a;const{event:{target:b}}=a;this.props=a,this.listeners=new aV(U(b)),this.windowListeners=new aV(Q(b)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(n.Resize,this.handleCancel),this.windowListeners.add(n.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(n.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:a,onStart:b}=this.props,c=a.node.current;c&&aS(c),b(au)}handleKeyDown(a){if(af(a)){let{active:b,context:c,options:d}=this.props,{keyboardCodes:e=aZ,coordinateGetter:f=a$,scrollBehavior:g="smooth"}=d,{code:h}=a;if(e.end.includes(h))return void this.handleEnd(a);if(e.cancel.includes(h))return void this.handleCancel(a);let{collisionRect:i}=c.current,j=i?{x:i.left,y:i.top}:au;this.referenceCoordinates||(this.referenceCoordinates=j);let k=f(a,{active:b,context:c.current,currentCoordinates:j});if(k){let b=ae(k,j),d={x:0,y:0},{scrollableAncestors:e}=c.current;for(let c of e){let e=a.code,{isTop:f,isRight:h,isLeft:i,isBottom:j,maxScroll:l,minScroll:m}=aP(c),n=function(a){if(a===document.scrollingElement){let{innerWidth:a,innerHeight:b}=window;return{top:0,left:0,right:a,bottom:b,width:a,height:b}}let{top:b,left:c,right:d,bottom:e}=a.getBoundingClientRect();return{top:b,left:c,right:d,bottom:e,width:a.clientWidth,height:a.clientHeight}}(c),p={x:Math.min(e===o.Right?n.right-n.width/2:n.right,Math.max(e===o.Right?n.left:n.left+n.width/2,k.x)),y:Math.min(e===o.Down?n.bottom-n.height/2:n.bottom,Math.max(e===o.Down?n.top:n.top+n.height/2,k.y))},q=e===o.Right&&!h||e===o.Left&&!i,r=e===o.Down&&!j||e===o.Up&&!f;if(q&&p.x!==k.x){let a=c.scrollLeft+b.x,f=e===o.Right&&a<=l.x||e===o.Left&&a>=m.x;if(f&&!b.y)return void c.scrollTo({left:a,behavior:g});f?d.x=c.scrollLeft-a:d.x=e===o.Right?c.scrollLeft-l.x:c.scrollLeft-m.x,d.x&&c.scrollBy({left:-d.x,behavior:g});break}if(r&&p.y!==k.y){let a=c.scrollTop+b.y,f=e===o.Down&&a<=l.y||e===o.Up&&a>=m.y;if(f&&!b.x)return void c.scrollTo({top:a,behavior:g});f?d.y=c.scrollTop-a:d.y=e===o.Down?c.scrollTop-l.y:c.scrollTop-m.y,d.y&&c.scrollBy({top:-d.y,behavior:g});break}}this.handleMove(a,ad(ae(k,this.referenceCoordinates),d))}}}handleMove(a,b){let{onMove:c}=this.props;a.preventDefault(),c(b)}handleEnd(a){let{onEnd:b}=this.props;a.preventDefault(),this.detach(),b()}handleCancel(a){let{onCancel:b}=this.props;a.preventDefault(),this.detach(),b()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function a0(a){return!!(a&&"distance"in a)}function a1(a){return!!(a&&"delay"in a)}a_.activators=[{eventName:"onKeyDown",handler:(a,b,c)=>{let{keyboardCodes:d=aZ,onActivation:e}=b,{active:f}=c,{code:g}=a.nativeEvent;if(d.start.includes(g)){let b=f.activatorNode.current;return(!b||a.target===b)&&(a.preventDefault(),null==e||e({event:a.nativeEvent}),!0)}return!1}}];class a2{constructor(a,b,c){var d;void 0===c&&(c=function(a){let{EventTarget:b}=Q(a);return a instanceof b?a:U(a)}(a.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=a,this.events=b;const{event:e}=a,{target:f}=e;this.props=a,this.events=b,this.document=U(f),this.documentListeners=new aV(this.document),this.listeners=new aV(c),this.windowListeners=new aV(Q(f)),this.initialCoordinates=null!=(d=ag(e))?d:au,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:a,props:{options:{activationConstraint:b,bypassActivationConstraint:c}}}=this;if(this.listeners.add(a.move.name,this.handleMove,{passive:!1}),this.listeners.add(a.end.name,this.handleEnd),a.cancel&&this.listeners.add(a.cancel.name,this.handleCancel),this.windowListeners.add(n.Resize,this.handleCancel),this.windowListeners.add(n.DragStart,aX),this.windowListeners.add(n.VisibilityChange,this.handleCancel),this.windowListeners.add(n.ContextMenu,aX),this.documentListeners.add(n.Keydown,this.handleKeydown),b){if(null!=c&&c({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(a1(b)){this.timeoutId=setTimeout(this.handleStart,b.delay),this.handlePending(b);return}if(a0(b))return void this.handlePending(b)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(a,b){let{active:c,onPending:d}=this.props;d(c,a,this.initialCoordinates,b)}handleStart(){let{initialCoordinates:a}=this,{onStart:b}=this.props;a&&(this.activated=!0,this.documentListeners.add(n.Click,aY,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(n.SelectionChange,this.removeTextSelection),b(a))}handleMove(a){var b;let{activated:c,initialCoordinates:d,props:e}=this,{onMove:f,options:{activationConstraint:g}}=e;if(!d)return;let h=null!=(b=ag(a))?b:au,i=ae(d,h);if(!c&&g){if(a0(g)){if(null!=g.tolerance&&aW(i,g.tolerance))return this.handleCancel();if(aW(i,g.distance))return this.handleStart()}return a1(g)&&aW(i,g.tolerance)?this.handleCancel():void this.handlePending(g,i)}a.cancelable&&a.preventDefault(),f(h)}handleEnd(){let{onAbort:a,onEnd:b}=this.props;this.detach(),this.activated||a(this.props.active),b()}handleCancel(){let{onAbort:a,onCancel:b}=this.props;this.detach(),this.activated||a(this.props.active),b()}handleKeydown(a){a.code===o.Esc&&this.handleCancel()}removeTextSelection(){var a;null==(a=this.document.getSelection())||a.removeAllRanges()}}let a3={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class a4 extends a2{constructor(a){const{event:b}=a;super(a,a3,U(b.target))}}a4.activators=[{eventName:"onPointerDown",handler:(a,b)=>{let{nativeEvent:c}=a,{onActivation:d}=b;return!!c.isPrimary&&0===c.button&&(null==d||d({event:c}),!0)}}];(g=p||(p={}))[g.RightClick=2]="RightClick";(h=q||(q={}))[h.Pointer=0]="Pointer",h[h.DraggableRect=1]="DraggableRect",(i=r||(r={}))[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder";let a5={x:{[m.Backward]:!1,[m.Forward]:!1},y:{[m.Backward]:!1,[m.Forward]:!1}};(j=s||(s={}))[j.Always=0]="Always",j[j.BeforeDragging=1]="BeforeDragging",j[j.WhileDragging=2]="WhileDragging",(t||(t={})).Optimized="optimized";let a6=new Map;function a7(a,b){return Z(c=>a?c||("function"==typeof b?b(a):a):null,[b,a])}function a8(a){let{callback:b,disabled:c}=a;W(b);let d=(0,J.useMemo)(()=>{},[c]);return(0,J.useEffect)(()=>()=>null==d?void 0:d.disconnect(),[d]),d}function a9(a){return new aU(aI(a),a)}function ba(a,b,c){void 0===b&&(b=a9);let[d,e]=(0,J.useState)(null);function f(){e(d=>{if(!a)return null;if(!1===a.isConnected){var e;return null!=(e=null!=d?d:c)?e:null}let f=b(a);return JSON.stringify(d)===JSON.stringify(f)?d:f})}let g=function(a){let{callback:b,disabled:c}=a,d=W(b),e=(0,J.useMemo)(()=>{},[d,c]);return(0,J.useEffect)(()=>()=>null==e?void 0:e.disconnect(),[e]),e}({callback(b){if(a)for(let c of b){let{type:b,target:d}=c;if("childList"===b&&d instanceof HTMLElement&&d.contains(a)){f();break}}}}),h=a8({callback:f});return V(()=>{f(),a?(null==h||h.observe(a),null==g||g.observe(document.body,{childList:!0,subtree:!0})):(null==h||h.disconnect(),null==g||g.disconnect())},[a]),d}let bb=[];function bc(a,b){void 0===b&&(b=[]);let c=(0,J.useRef)(null);return(0,J.useEffect)(()=>{c.current=null},b),(0,J.useEffect)(()=>{let b=a!==au;b&&!c.current&&(c.current=a),!b&&c.current&&(c.current=null)},[a]),c.current?ae(a,c.current):au}function bd(a){return(0,J.useMemo)(()=>{let b,c;return a?(b=a.innerWidth,{top:0,left:0,right:b,bottom:c=a.innerHeight,width:b,height:c}):null},[a])}let be=[];function bf(a){if(!a)return null;if(a.children.length>1)return a;let b=a.children[0];return S(b)?b:a}let bg=[{sensor:a4,options:{}},{sensor:a_,options:{}}],bh={current:{}},bi={draggable:{measure:aJ},droppable:{measure:aJ,strategy:s.WhileDragging,frequency:t.Optimized},dragOverlay:{measure:aI}};class bj extends Map{get(a){var b;return null!=a&&null!=(b=super.get(a))?b:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(a=>{let{disabled:b}=a;return!b})}getNodeFor(a){var b,c;return null!=(b=null==(c=this.get(a))?void 0:c.node.current)?b:void 0}}let bk={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new bj,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ar},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:bi,measureDroppableContainers:ar,windowRect:null,measuringScheduled:!1},bl={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ar,draggableNodes:new Map,over:null,measureDroppableContainers:ar},bm=(0,J.createContext)(bl),bn=(0,J.createContext)(bk);function bo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new bj}}}function bp(a,b){switch(b.type){case l.DragStart:return{...a,draggable:{...a.draggable,initialCoordinates:b.initialCoordinates,active:b.active}};case l.DragMove:if(null==a.draggable.active)return a;return{...a,draggable:{...a.draggable,translate:{x:b.coordinates.x-a.draggable.initialCoordinates.x,y:b.coordinates.y-a.draggable.initialCoordinates.y}}};case l.DragEnd:case l.DragCancel:return{...a,draggable:{...a.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case l.RegisterDroppable:{let{element:c}=b,{id:d}=c,e=new bj(a.droppable.containers);return e.set(d,c),{...a,droppable:{...a.droppable,containers:e}}}case l.SetDroppableDisabled:{let{id:c,key:d,disabled:e}=b,f=a.droppable.containers.get(c);if(!f||d!==f.key)return a;let g=new bj(a.droppable.containers);return g.set(c,{...f,disabled:e}),{...a,droppable:{...a.droppable,containers:g}}}case l.UnregisterDroppable:{let{id:c,key:d}=b,e=a.droppable.containers.get(c);if(!e||d!==e.key)return a;let f=new bj(a.droppable.containers);return f.delete(c),{...a,droppable:{...a.droppable,containers:f}}}default:return a}}function bq(a){let{disabled:b}=a,{active:c,activatorEvent:d,draggableNodes:e}=(0,J.useContext)(bm),f=_(d),g=_(null==c?void 0:c.id);return(0,J.useEffect)(()=>{if(!b&&!d&&f&&null!=g){if(!af(f)||document.activeElement===f.target)return;let a=e.get(g);if(!a)return;let{activatorNode:b,node:c}=a;(b.current||c.current)&&requestAnimationFrame(()=>{for(let a of[b.current,c.current]){if(!a)continue;let b=aj(a);if(b){b.focus();break}}})}},[d,b,e,g,f]),null}function br(a,b){let{transform:c,...d}=b;return null!=a&&a.length?a.reduce((a,b)=>b({transform:a,...d}),c):c}let bs=(0,J.createContext)({...au,scaleX:1,scaleY:1});(k=u||(u={}))[k.Uninitialized=0]="Uninitialized",k[k.Initializing=1]="Initializing",k[k.Initialized=2]="Initialized";let bt=(0,J.memo)(function(a){var b,c,d,e,f,g,h,i;let j,k,n,o,p,t,v,w,{id:x,accessibility:y,autoScroll:z=!0,children:A,sensors:B=bg,collisionDetection:C=aD,measuring:D,modifiers:E,...F}=a,[G,H]=(0,J.useReducer)(bp,void 0,bo),[I,K]=function(){let[a]=(0,J.useState)(()=>new Set),b=(0,J.useCallback)(b=>(a.add(b),()=>a.delete(b)),[a]);return[(0,J.useCallback)(b=>{let{type:c,event:d}=b;a.forEach(a=>{var b;return null==(b=a[c])?void 0:b.call(a,d)})},[a]),b]}(),[L,N]=(0,J.useState)(u.Uninitialized),O=L===u.Initialized,{draggable:{active:P,nodes:R,translate:T},droppable:{containers:U}}=G,W=null!=P?R.get(P):null,aa=(0,J.useRef)({initial:null,translated:null}),ac=(0,J.useMemo)(()=>{var a;return null!=P?{id:P,data:null!=(a=null==W?void 0:W.data)?a:bh,rect:aa}:null},[P,W]),ae=(0,J.useRef)(null),[af,ah]=(0,J.useState)(null),[ai,aj]=(0,J.useState)(null),ak=Y(F,Object.values(F)),al=ab("DndDescribedBy",x),am=(0,J.useMemo)(()=>U.getEnabled(),[U]),ao=(0,J.useMemo)(()=>({draggable:{...bi.draggable,...null==D?void 0:D.draggable},droppable:{...bi.droppable,...null==D?void 0:D.droppable},dragOverlay:{...bi.dragOverlay,...null==D?void 0:D.dragOverlay}}),[null==D?void 0:D.draggable,null==D?void 0:D.droppable,null==D?void 0:D.dragOverlay]),{droppableRects:ap,measureDroppableContainers:ar,measuringScheduled:as}=function(a,b){let{dragging:c,dependencies:d,config:e}=b,[f,g]=(0,J.useState)(null),{frequency:h,measure:i,strategy:j}=e,k=(0,J.useRef)(a),l=function(){switch(j){case s.Always:return!1;case s.BeforeDragging:return c;default:return!c}}(),m=Y(l),n=(0,J.useCallback)(function(a){void 0===a&&(a=[]),m.current||g(b=>null===b?a:b.concat(a.filter(a=>!b.includes(a))))},[m]),o=(0,J.useRef)(null),p=Z(b=>{if(l&&!c)return a6;if(!b||b===a6||k.current!==a||null!=f){let b=new Map;for(let c of a){if(!c)continue;if(f&&f.length>0&&!f.includes(c.id)&&c.rect.current){b.set(c.id,c.rect.current);continue}let a=c.node.current,d=a?new aU(i(a),a):null;c.rect.current=d,d&&b.set(c.id,d)}return b}return b},[a,f,c,l,i]);return(0,J.useEffect)(()=>{k.current=a},[a]),(0,J.useEffect)(()=>{l||n()},[c,l]),(0,J.useEffect)(()=>{f&&f.length>0&&g(null)},[JSON.stringify(f)]),(0,J.useEffect)(()=>{l||"number"!=typeof h||null!==o.current||(o.current=setTimeout(()=>{n(),o.current=null},h))},[h,l,n,...d]),{droppableRects:p,measureDroppableContainers:n,measuringScheduled:null!=f}}(am,{dragging:O,dependencies:[T.x,T.y],config:ao.droppable}),at=Z(a=>{var b;return null==P?null:null!=(b=null!=p?p:a)?b:null},[p=(o=null!=P?R.get(P):void 0)?o.node.current:null,P]),av=(0,J.useMemo)(()=>ai?ag(ai):null,[ai]),aw=(j=(null==af?void 0:af.autoScrollEnabled)===!1,k="object"==typeof z?!1===z.enabled:!1===z,n=O&&!j&&!k,"object"==typeof z?{...z,enabled:n}:{enabled:n}),ax=a7(at,ao.draggable.measure);!function(a){let{activeNode:b,measure:c,initialRect:d,config:e=!0}=a,f=(0,J.useRef)(!1),{x:g,y:h}="boolean"==typeof e?{x:e,y:e}:e;V(()=>{if(!g&&!h||!b){f.current=!1;return}if(f.current||!d)return;let a=null==b?void 0:b.node.current;if(!a||!1===a.isConnected)return;let e=aE(c(a),d);if(g||(e.x=0),h||(e.y=0),f.current=!0,Math.abs(e.x)>0||Math.abs(e.y)>0){let b=aL(a);b&&b.scrollBy({top:e.y,left:e.x})}},[b,g,h,d,c])}({activeNode:null!=P?R.get(P):null,config:aw.layoutShiftCompensation,initialRect:ax,measure:ao.draggable.measure});let ay=ba(at,ao.draggable.measure,ax),aA=ba(at?at.parentElement:null),aB=(0,J.useRef)({activatorEvent:null,active:null,activeNode:at,collisionRect:null,collisions:null,droppableRects:ap,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),aC=U.getNodeFor(null==(b=aB.current.over)?void 0:b.id),aG=function(a){let{measure:b}=a,[c,d]=(0,J.useState)(null),e=a8({callback:(0,J.useCallback)(a=>{for(let{target:c}of a)if(S(c)){d(a=>{let d=b(c);return a?{...a,width:d.width,height:d.height}:d});break}},[b])}),[f,g]=$((0,J.useCallback)(a=>{let c=bf(a);null==e||e.disconnect(),c&&(null==e||e.observe(c)),d(c?b(c):null)},[b,e]));return(0,J.useMemo)(()=>({nodeRef:f,rect:c,setRef:g}),[c,f,g])}({measure:ao.dragOverlay.measure}),aH=null!=(c=aG.nodeRef.current)?c:at,aJ=O?null!=(d=aG.rect)?d:ay:null,aM=!!(aG.nodeRef.current&&aG.rect),aN=(t=a7(f=aM?null:ay),aE(f,t)),aS=bd(aH?Q(aH):null),aT=(g=O?null!=aC?aC:at:null,v=(0,J.useRef)(g),w=Z(a=>g?a&&a!==bb&&g&&v.current&&g.parentNode===v.current.parentNode?a:aK(g):bb,[g]),(0,J.useEffect)(()=>{v.current=g},[g]),w),aV=function(a,b){void 0===b&&(b=aI);let[c]=a,d=bd(c?Q(c):null),[e,f]=(0,J.useState)(be);function g(){f(()=>a.length?a.map(a=>new aU(b(a),a)):be)}let h=a8({callback:g});return V(()=>{null==h||h.disconnect(),g(),a.forEach(a=>null==h?void 0:h.observe(a))},[a]),e}(aT),aW=br(E,{transform:{x:T.x-aN.x,y:T.y-aN.y,scaleX:1,scaleY:1},activatorEvent:ai,active:ac,activeNodeRect:ay,containerNodeRect:aA,draggingNodeRect:aJ,over:aB.current.over,overlayNodeRect:aG.rect,scrollableAncestors:aT,scrollableAncestorRects:aV,windowRect:aS}),aX=av?ad(av,T):null,aY=function(a){let[b,c]=(0,J.useState)(null),d=(0,J.useRef)(a),e=(0,J.useCallback)(a=>{var b;let d=(b=a.target,null);d&&c(a=>a?(a.set(d,aO(d)),new Map(a)):null)},[]);return(0,J.useEffect)(()=>{let b=d.current;if(a!==b){f(b);let g=a.map(a=>{var b;let c=(b=0,null);return c?(c.addEventListener("scroll",e,{passive:!0}),[c,aO(c)]):null}).filter(a=>null!=a);c(g.length?new Map(g):null),d.current=a}return()=>{f(a),f(b)};function f(a){a.forEach(a=>{let b=null;null==b||b.removeEventListener("scroll",e)})}},[e,a]),(0,J.useMemo)(()=>a.length?b?Array.from(b.values()).reduce((a,b)=>ad(a,b),au):aR(a):au,[a,b])}(aT),aZ=bc(aY),a$=bc(aY,[ay]),a_=ad(aW,aZ),a0=aJ?aF(aJ,aW):null,a1=ac&&a0?C({active:ac,collisionRect:a0,droppableRects:ap,droppableContainers:am,pointerCoordinates:aX}):null,a2=az(a1,"id"),[a3,a4]=(0,J.useState)(null),a9=(h=aM?aW:ad(aW,a$),i=null!=(e=null==a3?void 0:a3.rect)?e:null,{...h,scaleX:i&&ay?i.width/ay.width:1,scaleY:i&&ay?i.height/ay.height:1}),bj=(0,J.useRef)(null),bk=(0,J.useCallback)((a,b)=>{let{sensor:c,options:d}=b;if(null==ae.current)return;let e=R.get(ae.current);if(!e)return;let f=a.nativeEvent,g=new c({active:ae.current,activeNode:e,event:f,options:d,context:aB,onAbort(a){if(!R.get(a))return;let{onDragAbort:b}=ak.current,c={id:a};null==b||b(c),I({type:"onDragAbort",event:c})},onPending(a,b,c,d){if(!R.get(a))return;let{onDragPending:e}=ak.current,f={id:a,constraint:b,initialCoordinates:c,offset:d};null==e||e(f),I({type:"onDragPending",event:f})},onStart(a){let b=ae.current;if(null==b)return;let c=R.get(b);if(!c)return;let{onDragStart:d}=ak.current,e={activatorEvent:f,active:{id:b,data:c.data,rect:aa}};(0,M.unstable_batchedUpdates)(()=>{null==d||d(e),N(u.Initializing),H({type:l.DragStart,initialCoordinates:a,active:b}),I({type:"onDragStart",event:e}),ah(bj.current),aj(f)})},onMove(a){H({type:l.DragMove,coordinates:a})},onEnd:h(l.DragEnd),onCancel:h(l.DragCancel)});function h(a){return async function(){let{active:b,collisions:c,over:d,scrollAdjustedTranslate:e}=aB.current,g=null;if(b&&e){let{cancelDrop:h}=ak.current;g={activatorEvent:f,active:b,collisions:c,delta:e,over:d},a===l.DragEnd&&"function"==typeof h&&await Promise.resolve(h(g))&&(a=l.DragCancel)}ae.current=null,(0,M.unstable_batchedUpdates)(()=>{H({type:a}),N(u.Uninitialized),a4(null),ah(null),aj(null),bj.current=null;let b=a===l.DragEnd?"onDragEnd":"onDragCancel";if(g){let a=ak.current[b];null==a||a(g),I({type:b,event:g})}})}}bj.current=g},[R]),bl=(0,J.useCallback)((a,b)=>(c,d)=>{let e=c.nativeEvent,f=R.get(d);null!==ae.current||!f||e.dndKit||e.defaultPrevented||!0===a(c,b.options,{active:f})&&(e.dndKit={capturedBy:b.sensor},ae.current=d,bk(c,b))},[R,bk]),bt=(0,J.useMemo)(()=>B.reduce((a,b)=>{let{sensor:c}=b;return[...a,...c.activators.map(a=>({eventName:a.eventName,handler:bl(a.handler,b)}))]},[]),[B,bl]);(0,J.useEffect)(()=>{},B.map(a=>{let{sensor:b}=a;return b})),V(()=>{ay&&L===u.Initializing&&N(u.Initialized)},[ay,L]),(0,J.useEffect)(()=>{let{onDragMove:a}=ak.current,{active:b,activatorEvent:c,collisions:d,over:e}=aB.current;if(!b||!c)return;let f={active:b,activatorEvent:c,collisions:d,delta:{x:a_.x,y:a_.y},over:e};(0,M.unstable_batchedUpdates)(()=>{null==a||a(f),I({type:"onDragMove",event:f})})},[a_.x,a_.y]),(0,J.useEffect)(()=>{let{active:a,activatorEvent:b,collisions:c,droppableContainers:d,scrollAdjustedTranslate:e}=aB.current;if(!a||null==ae.current||!b||!e)return;let{onDragOver:f}=ak.current,g=d.get(a2),h=g&&g.rect.current?{id:g.id,rect:g.rect.current,data:g.data,disabled:g.disabled}:null,i={active:a,activatorEvent:b,collisions:c,delta:{x:e.x,y:e.y},over:h};(0,M.unstable_batchedUpdates)(()=>{a4(h),null==f||f(i),I({type:"onDragOver",event:i})})},[a2]),V(()=>{aB.current={activatorEvent:ai,active:ac,activeNode:at,collisionRect:a0,collisions:a1,droppableRects:ap,draggableNodes:R,draggingNode:aH,draggingNodeRect:aJ,droppableContainers:U,over:a3,scrollableAncestors:aT,scrollAdjustedTranslate:a_},aa.current={initial:aJ,translated:a0}},[ac,at,a1,a0,R,aH,aJ,ap,U,a3,aT,a_]),function(a){let{acceleration:b,activator:c=q.Pointer,canScroll:d,draggingRect:e,enabled:f,interval:g=5,order:h=r.TreeOrder,pointerCoordinates:i,scrollableAncestors:j,scrollableAncestorRects:k,delta:l,threshold:n}=a,o=function(a){let{delta:b,disabled:c}=a,d=_(b);return Z(a=>{if(c||!d||!a)return a5;let e={x:Math.sign(b.x-d.x),y:Math.sign(b.y-d.y)};return{x:{[m.Backward]:a.x[m.Backward]||-1===e.x,[m.Forward]:a.x[m.Forward]||1===e.x},y:{[m.Backward]:a.y[m.Backward]||-1===e.y,[m.Forward]:a.y[m.Forward]||1===e.y}}},[c,b,d])}({delta:l,disabled:!f}),[p,s]=X(),t=(0,J.useRef)({x:0,y:0}),u=(0,J.useRef)({x:0,y:0}),v=(0,J.useMemo)(()=>{switch(c){case q.Pointer:return i?{top:i.y,bottom:i.y,left:i.x,right:i.x}:null;case q.DraggableRect:return e}},[c,e,i]),w=(0,J.useRef)(null),x=(0,J.useCallback)(()=>{let a=w.current;if(!a)return;let b=t.current.x*u.current.x,c=t.current.y*u.current.y;a.scrollBy(b,c)},[]),y=(0,J.useMemo)(()=>h===r.TreeOrder?[...j].reverse():j,[h,j]);(0,J.useEffect)(()=>{if(!f||!j.length||!v)return void s();for(let a of y){if((null==d?void 0:d(a))===!1)continue;let c=k[j.indexOf(a)];if(!c)continue;let{direction:e,speed:f}=function(a,b,c,d,e){let{top:f,left:g,right:h,bottom:i}=c;void 0===d&&(d=10),void 0===e&&(e=aQ);let{isTop:j,isBottom:k,isLeft:l,isRight:n}=aP(a),o={x:0,y:0},p={x:0,y:0},q={height:b.height*e.y,width:b.width*e.x};return!j&&f<=b.top+q.height?(o.y=m.Backward,p.y=d*Math.abs((b.top+q.height-f)/q.height)):!k&&i>=b.bottom-q.height&&(o.y=m.Forward,p.y=d*Math.abs((b.bottom-q.height-i)/q.height)),!n&&h>=b.right-q.width?(o.x=m.Forward,p.x=d*Math.abs((b.right-q.width-h)/q.width)):!l&&g<=b.left+q.width&&(o.x=m.Backward,p.x=d*Math.abs((b.left+q.width-g)/q.width)),{direction:o,speed:p}}(a,c,v,b,n);for(let a of["x","y"])o[a][e[a]]||(f[a]=0,e[a]=0);if(f.x>0||f.y>0){s(),w.current=a,p(x,g),t.current=f,u.current=e;return}}t.current={x:0,y:0},u.current={x:0,y:0},s()},[b,x,d,s,f,g,JSON.stringify(v),JSON.stringify(o),p,j,y,k,JSON.stringify(n)])}({...aw,delta:T,draggingRect:a0,pointerCoordinates:aX,scrollableAncestors:aT,scrollableAncestorRects:aV});let bu=(0,J.useMemo)(()=>({active:ac,activeNode:at,activeNodeRect:ay,activatorEvent:ai,collisions:a1,containerNodeRect:aA,dragOverlay:aG,draggableNodes:R,droppableContainers:U,droppableRects:ap,over:a3,measureDroppableContainers:ar,scrollableAncestors:aT,scrollableAncestorRects:aV,measuringConfiguration:ao,measuringScheduled:as,windowRect:aS}),[ac,at,ay,ai,a1,aA,aG,R,U,ap,a3,ar,aT,aV,ao,as,aS]),bv=(0,J.useMemo)(()=>({activatorEvent:ai,activators:bt,active:ac,activeNodeRect:ay,ariaDescribedById:{draggable:al},dispatch:H,draggableNodes:R,over:a3,measureDroppableContainers:ar}),[ai,bt,ac,ay,H,al,R,a3,ar]);return J.default.createElement(an.Provider,{value:K},J.default.createElement(bm.Provider,{value:bv},J.default.createElement(bn.Provider,{value:bu},J.default.createElement(bs.Provider,{value:a9},A)),J.default.createElement(bq,{disabled:(null==y?void 0:y.restoreFocus)===!1})),J.default.createElement(aq,{...y,hiddenTextDescribedById:al}))}),bu=(0,J.createContext)(null),bv="button";function bw(a){let{id:b,data:c,disabled:d=!1,attributes:e}=a,f=ab("Draggable"),{activators:g,activatorEvent:h,active:i,activeNodeRect:j,ariaDescribedById:k,draggableNodes:l,over:m}=(0,J.useContext)(bm),{role:n=bv,roleDescription:o="draggable",tabIndex:p=0}=null!=e?e:{},q=(null==i?void 0:i.id)===b,r=(0,J.useContext)(q?bs:bu),[s,t]=$(),[u,v]=$(),w=(0,J.useMemo)(()=>g.reduce((a,c)=>{let{eventName:d,handler:e}=c;return a[d]=a=>{e(a,b)},a},{}),[g,b]),x=Y(c);return V(()=>(l.set(b,{id:b,key:f,node:s,activatorNode:u,data:x}),()=>{let a=l.get(b);a&&a.key===f&&l.delete(b)}),[l,b]),{active:i,activatorEvent:h,activeNodeRect:j,attributes:(0,J.useMemo)(()=>({role:n,tabIndex:p,"aria-disabled":d,"aria-pressed":!!q&&n===bv||void 0,"aria-roledescription":o,"aria-describedby":k.draggable}),[d,n,p,q,o,k.draggable]),isDragging:q,listeners:d?void 0:w,node:s,over:m,setNodeRef:t,setActivatorNodeRef:v,transform:r}}function bx(){return(0,J.useContext)(bn)}let by={timeout:25};function bz(a){let{data:b,disabled:c=!1,id:d,resizeObserverConfig:e}=a,f=ab("Droppable"),{active:g,dispatch:h,over:i,measureDroppableContainers:j}=(0,J.useContext)(bm),k=(0,J.useRef)({disabled:c}),m=(0,J.useRef)(!1),n=(0,J.useRef)(null),o=(0,J.useRef)(null),{disabled:p,updateMeasurementsFor:q,timeout:r}={...by,...e},s=Y(null!=q?q:d),t=a8({callback:(0,J.useCallback)(()=>{if(!m.current){m.current=!0;return}null!=o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{j(Array.isArray(s.current)?s.current:[s.current]),o.current=null},r)},[r]),disabled:p||!g}),[u,v]=$((0,J.useCallback)((a,b)=>{t&&(b&&(t.unobserve(b),m.current=!1),a&&t.observe(a))},[t])),w=Y(b);return(0,J.useEffect)(()=>{t&&u.current&&(t.disconnect(),m.current=!1,t.observe(u.current))},[u,t]),(0,J.useEffect)(()=>(h({type:l.RegisterDroppable,element:{id:d,key:f,disabled:c,node:u,rect:n,data:w}}),()=>h({type:l.UnregisterDroppable,key:f,id:d})),[d]),(0,J.useEffect)(()=>{c!==k.current.disabled&&(h({type:l.SetDroppableDisabled,id:d,key:f,disabled:c}),k.current.disabled=c)},[d,f,c,h]),{active:g,rect:n,isOver:(null==i?void 0:i.id)===d,node:u,over:i,setNodeRef:v}}function bA(a){let{animation:b,children:c}=a,[d,e]=(0,J.useState)(null),[f,g]=(0,J.useState)(null),h=_(c);return c||d||!h||e(h),V(()=>{if(!f)return;let a=null==d?void 0:d.key,c=null==d?void 0:d.props.id;null==a||null==c?e(null):Promise.resolve(b(c,f)).then(()=>{e(null)})},[b,d,f]),J.default.createElement(J.default.Fragment,null,c,d?(0,J.cloneElement)(d,{ref:g}):null)}let bB={x:0,y:0,scaleX:1,scaleY:1};function bC(a){let{children:b}=a;return J.default.createElement(bm.Provider,{value:bl},J.default.createElement(bs.Provider,{value:bB},b))}let bD={position:"fixed",touchAction:"none"},bE=a=>af(a)?"transform 250ms ease":void 0,bF=(0,J.forwardRef)((a,b)=>{let{as:c,activatorEvent:d,adjustScale:e,children:f,className:g,rect:h,style:i,transform:j,transition:k=bE}=a;if(!h)return null;let l=e?j:{...j,scaleX:1,scaleY:1},m={...bD,width:h.width,height:h.height,top:h.top,left:h.left,transform:ah.Transform.toString(l),transformOrigin:e&&d?function(a,b){let c=ag(a);if(!c)return"0 0";let d={x:(c.x-b.left)/b.width*100,y:(c.y-b.top)/b.height*100};return d.x+"% "+d.y+"%"}(d,h):void 0,transition:"function"==typeof k?k(d):k,...i};return J.default.createElement(c,{className:g,style:m,ref:b},f)}),bG={duration:250,easing:"ease",keyframes:a=>{let{transform:{initial:b,final:c}}=a;return[{transform:ah.Transform.toString(b)},{transform:ah.Transform.toString(c)}]},sideEffects:(b={styles:{active:{opacity:"0"}}},a=>{let{active:c,dragOverlay:d}=a,e={},{styles:f,className:g}=b;if(null!=f&&f.active)for(let[a,b]of Object.entries(f.active))void 0!==b&&(e[a]=c.node.style.getPropertyValue(a),c.node.style.setProperty(a,b));if(null!=f&&f.dragOverlay)for(let[a,b]of Object.entries(f.dragOverlay))void 0!==b&&d.node.style.setProperty(a,b);return null!=g&&g.active&&c.node.classList.add(g.active),null!=g&&g.dragOverlay&&d.node.classList.add(g.dragOverlay),function(){for(let[a,b]of Object.entries(e))c.node.style.setProperty(a,b);null!=g&&g.active&&c.node.classList.remove(g.active)}})},bH=0,bI=J.default.memo(a=>{var b;let{adjustScale:c=!1,children:d,dropAnimation:e,style:f,transition:g,modifiers:h,wrapperElement:i="div",className:j,zIndex:k=999}=a,{activatorEvent:l,active:m,activeNodeRect:n,containerNodeRect:o,draggableNodes:p,droppableContainers:q,dragOverlay:r,over:s,measuringConfiguration:t,scrollableAncestors:u,scrollableAncestorRects:v,windowRect:w}=bx(),x=(0,J.useContext)(bs),y=(b=null==m?void 0:m.id,(0,J.useMemo)(()=>{if(null!=b)return++bH},[b])),z=br(h,{activatorEvent:l,active:m,activeNodeRect:n,containerNodeRect:o,draggingNodeRect:r.rect,over:s,overlayNodeRect:r.rect,scrollableAncestors:u,scrollableAncestorRects:v,transform:x,windowRect:w}),A=a7(n),B=function(a){let{config:b,draggableNodes:c,droppableContainers:d,measuringConfiguration:e}=a;return W((a,f)=>{if(null===b)return;let g=c.get(a);if(!g)return;let h=g.node.current;if(!h)return;let i=bf(f);if(!i)return;let{transform:j}=Q(f).getComputedStyle(f),k=aG(j);if(!k)return;let l="function"==typeof b?b:function(a){let{duration:b,easing:c,sideEffects:d,keyframes:e}={...bG,...a};return a=>{let{active:f,dragOverlay:g,transform:h,...i}=a;if(!b)return;let j={x:g.rect.left-f.rect.left,y:g.rect.top-f.rect.top},k={scaleX:1!==h.scaleX?f.rect.width*h.scaleX/g.rect.width:1,scaleY:1!==h.scaleY?f.rect.height*h.scaleY/g.rect.height:1},l={x:h.x-j.x,y:h.y-j.y,...k},m=e({...i,active:f,dragOverlay:g,transform:{initial:h,final:l}}),[n]=m,o=m[m.length-1];if(JSON.stringify(n)===JSON.stringify(o))return;let p=null==d?void 0:d({active:f,dragOverlay:g,...i}),q=g.node.animate(m,{duration:b,easing:c,fill:"forwards"});return new Promise(a=>{q.onfinish=()=>{null==p||p(),a()}})}}(b);return aS(h,e.draggable.measure),l({active:{id:a,data:g.data,node:h,rect:e.draggable.measure(h)},draggableNodes:c,dragOverlay:{node:f,rect:e.dragOverlay.measure(i)},droppableContainers:d,measuringConfiguration:e,transform:k})})}({config:e,draggableNodes:p,droppableContainers:q,measuringConfiguration:t}),C=A?r.setRef:void 0;return J.default.createElement(bC,null,J.default.createElement(bA,{animation:B},m&&y?J.default.createElement(bF,{key:y,id:m.id,ref:C,as:i,activatorEvent:l,adjustScale:c,className:j,transition:g,rect:A,style:{zIndex:k,...f},transform:z},d):null))});function bJ(a,b,c){let d=a.slice();return d.splice(c<0?d.length+c:c,0,d.splice(b,1)[0]),d}function bK(a){return null!==a&&a>=0}a.s(["DndContext",()=>bt,"DragOverlay",()=>bI,"KeyboardCode",()=>o,"KeyboardSensor",()=>a_,"PointerSensor",()=>a4,"closestCenter",()=>aB,"closestCorners",()=>aC,"getClientRect",()=>aI,"getFirstCollision",()=>az,"getScrollableAncestors",()=>aK,"useDndContext",()=>bx,"useDraggable",()=>bw,"useDroppable",()=>bz,"useSensor",()=>as,"useSensors",()=>at],48934);let bL=a=>{let{rects:b,activeIndex:c,overIndex:d,index:e}=a,f=bJ(b,d,c),g=b[e],h=f[e];return h&&g?{x:h.left-g.left,y:h.top-g.top,scaleX:h.width/g.width,scaleY:h.height/g.height}:null},bM={scaleX:1,scaleY:1},bN=a=>{var b,c,d,e;let f,g,h,{activeIndex:i,activeNodeRect:j,index:k,rects:l,overIndex:m}=a,n=null!=(b=l[i])?b:j;if(!n)return null;if(k===i){let a=l[m];return a?{x:0,y:i<m?a.top+a.height-(n.top+n.height):a.top-n.top,...bM}:null}let o=(c=l,d=k,e=i,f=c[d],g=c[d-1],h=c[d+1],f?e<d?g?f.top-(g.top+g.height):h?h.top-(f.top+f.height):0:h?h.top-(f.top+f.height):g?f.top-(g.top+g.height):0:0);return k>i&&k<=m?{x:0,y:-n.height-o,...bM}:k<i&&k>=m?{x:0,y:n.height+o,...bM}:{x:0,y:0,...bM}},bO="Sortable",bP=J.default.createContext({activeIndex:-1,containerId:bO,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:bL,disabled:{draggable:!1,droppable:!1}});function bQ(a){let{children:b,id:c,items:d,strategy:e=bL,disabled:f=!1}=a,{active:g,dragOverlay:h,droppableRects:i,over:j,measureDroppableContainers:k}=bx(),l=ab(bO,c),m=null!==h.rect,n=(0,J.useMemo)(()=>d.map(a=>"object"==typeof a&&"id"in a?a.id:a),[d]),o=null!=g,p=g?n.indexOf(g.id):-1,q=j?n.indexOf(j.id):-1,r=(0,J.useRef)(n),s=!function(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}(n,r.current),t=-1!==q&&-1===p||s,u="boolean"==typeof f?{draggable:f,droppable:f}:f;V(()=>{s&&o&&k(n)},[s,n,o,k]),(0,J.useEffect)(()=>{r.current=n},[n]);let v=(0,J.useMemo)(()=>({activeIndex:p,containerId:l,disabled:u,disableTransforms:t,items:n,overIndex:q,useDragOverlay:m,sortedRects:n.reduce((a,b,c)=>{let d=i.get(b);return d&&(a[c]=d),a},Array(n.length)),strategy:e}),[p,l,u.draggable,u.droppable,t,n,q,i,m,e]);return J.default.createElement(bP.Provider,{value:v},b)}let bR=a=>{let{id:b,items:c,activeIndex:d,overIndex:e}=a;return bJ(c,d,e).indexOf(b)},bS=a=>{let{containerId:b,isSorting:c,wasDragging:d,index:e,items:f,newIndex:g,previousItems:h,previousContainerId:i,transition:j}=a;return!!j&&!!d&&(h===f||e!==g)&&(!!c||g!==e&&b===i)},bT={duration:200,easing:"ease"},bU="transform",bV=ah.Transition.toString({property:bU,duration:0,easing:"linear"}),bW={roleDescription:"sortable"};function bX(a){var b,c,d,e;let{animateLayoutChanges:f=bS,attributes:g,disabled:h,data:i,getNewIndex:j=bR,id:k,strategy:l,resizeObserverConfig:m,transition:n=bT}=a,{items:o,containerId:p,activeIndex:q,disabled:r,disableTransforms:s,sortedRects:t,overIndex:u,useDragOverlay:v,strategy:w}=(0,J.useContext)(bP),x=(b=h,c=r,"boolean"==typeof b?{draggable:b,droppable:!1}:{draggable:null!=(d=null==b?void 0:b.draggable)?d:c.draggable,droppable:null!=(e=null==b?void 0:b.droppable)?e:c.droppable}),y=o.indexOf(k),z=(0,J.useMemo)(()=>({sortable:{containerId:p,index:y,items:o},...i}),[p,i,y,o]),A=(0,J.useMemo)(()=>o.slice(o.indexOf(k)),[o,k]),{rect:B,node:C,isOver:D,setNodeRef:E}=bz({id:k,data:z,disabled:x.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...m}}),{active:F,activatorEvent:G,activeNodeRect:H,attributes:I,setNodeRef:K,listeners:L,isDragging:M,over:O,setActivatorNodeRef:P,transform:Q}=bw({id:k,data:z,attributes:{...bW,...g},disabled:x.draggable}),R=N(E,K),S=!!F,T=S&&!s&&bK(q)&&bK(u),U=!v&&M,W=U&&T?Q:null,X=T?null!=W?W:(null!=l?l:w)({rects:t,activeNodeRect:H,activeIndex:q,overIndex:u,index:y}):null,Y=bK(q)&&bK(u)?j({id:k,items:o,activeIndex:q,overIndex:u}):y,Z=null==F?void 0:F.id,$=(0,J.useRef)({activeId:Z,items:o,newIndex:Y,containerId:p}),_=o!==$.current.items,aa=f({active:F,containerId:p,isDragging:M,isSorting:S,id:k,index:y,items:o,newIndex:$.current.newIndex,previousItems:$.current.items,previousContainerId:$.current.containerId,transition:n,wasDragging:null!=$.current.activeId}),ab=function(a){let{disabled:b,index:c,node:d,rect:e}=a,[f,g]=(0,J.useState)(null),h=(0,J.useRef)(c);return V(()=>{if(!b&&c!==h.current&&d.current){let a=e.current;if(a){let b=aI(d.current,{ignoreTransform:!0}),c={x:a.left-b.left,y:a.top-b.top,scaleX:a.width/b.width,scaleY:a.height/b.height};(c.x||c.y)&&g(c)}}c!==h.current&&(h.current=c)},[b,c,d,e]),(0,J.useEffect)(()=>{f&&g(null)},[f]),f}({disabled:!aa,index:y,node:C,rect:B});return(0,J.useEffect)(()=>{S&&$.current.newIndex!==Y&&($.current.newIndex=Y),p!==$.current.containerId&&($.current.containerId=p),o!==$.current.items&&($.current.items=o)},[S,Y,p,o]),(0,J.useEffect)(()=>{if(Z===$.current.activeId)return;if(null!=Z&&null==$.current.activeId){$.current.activeId=Z;return}let a=setTimeout(()=>{$.current.activeId=Z},50);return()=>clearTimeout(a)},[Z]),{active:F,activeIndex:q,attributes:I,data:z,rect:B,index:y,newIndex:Y,items:o,isOver:D,isSorting:S,isDragging:M,listeners:L,node:C,overIndex:u,over:O,setNodeRef:R,setActivatorNodeRef:P,setDroppableNodeRef:E,setDraggableNodeRef:K,transform:null!=ab?ab:X,transition:ab||_&&$.current.newIndex===y?bV:(!U||af(G))&&n&&(S||aa)?ah.Transition.toString({...n,property:bU}):void 0}}function bY(a){if(!a)return!1;let b=a.data.current;return!!b&&"sortable"in b&&"object"==typeof b.sortable&&"containerId"in b.sortable&&"items"in b.sortable&&"index"in b.sortable}let bZ=[o.Down,o.Right,o.Up,o.Left],b$=(a,b)=>{let{context:{active:c,collisionRect:d,droppableRects:e,droppableContainers:f,over:g,scrollableAncestors:h}}=b;if(bZ.includes(a.code)){if(a.preventDefault(),!c||!d)return;let b=[];f.getEnabled().forEach(c=>{if(!c||null!=c&&c.disabled)return;let f=e.get(c.id);if(f)switch(a.code){case o.Down:d.top<f.top&&b.push(c);break;case o.Up:d.top>f.top&&b.push(c);break;case o.Left:d.left>f.left&&b.push(c);break;case o.Right:d.left<f.left&&b.push(c)}});let k=aC({active:c,collisionRect:d,droppableRects:e,droppableContainers:b,pointerCoordinates:null}),l=az(k,"id");if(l===(null==g?void 0:g.id)&&k.length>1&&(l=k[1].id),null!=l){let a=f.get(c.id),b=f.get(l),g=b?e.get(b.id):null,k=null==b?void 0:b.node.current;if(k&&g&&a&&b){var i,j;let c=aK(k).some((a,b)=>h[b]!==a),e=b_(a,b),f=(i=a,j=b,!!bY(i)&&!!bY(j)&&!!b_(i,j)&&i.data.current.sortable.index<j.data.current.sortable.index),l=c||!e?{x:0,y:0}:{x:f?d.width-g.width:0,y:f?d.height-g.height:0},m={x:g.left,y:g.top};return l.x&&l.y?m:ae(m,l)}}}};function b_(a,b){return!!bY(a)&&!!bY(b)&&a.data.current.sortable.containerId===b.data.current.sortable.containerId}a.s(["SortableContext",()=>bQ,"arrayMove",()=>bJ,"sortableKeyboardCoordinates",()=>b$,"useSortable",()=>bX,"verticalListSortingStrategy",()=>bN],88304);var b0=a.i(30836),b1=a.i(77236),b2=a.i(90417),b3=a.i(59539),b4=a.i(59089);let b5=`
  .scrollbar-blue::-webkit-scrollbar { height: 12px; }
  .scrollbar-blue::-webkit-scrollbar-track { background: #1f2937; border-radius: 6px; }
  .scrollbar-blue::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 6px; border: 2px solid #1f2937; }
  .scrollbar-blue::-webkit-scrollbar-thumb:hover { background: #2563eb; }
`;function b6({projectPath:a,projectId:b,projectName:c}){let[d,e]=(0,J.useState)([]),[f,g]=(0,J.useState)([]),[h,i]=(0,J.useState)(!0),[j,k]=(0,J.useState)("kanban"),[l,m]=(0,J.useState)(null);(0,J.useEffect)(()=>{n()},[a,b]);let n=async()=>{i(!0);try{a.startsWith("/")&&a.slice(1);let[c,d]=await Promise.all([fetch(`/project-management/api/phases/${b}`),fetch(`/project-management/api/clair/todos/${b}`)]),f=await c.json(),h=await d.json();f.success&&e(f.phases||[]),h.success&&g(h.todos||[])}catch(a){console.error(a)}finally{i(!1)}},o=async(c,d)=>{a.startsWith("/")&&a.slice(1),await fetch(`/project-management/api/clair/todos/${b}/${c.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:d})}),n()},p=async(c,d)=>{a.startsWith("/")&&a.slice(1),await fetch(`/project-management/api/clair/todos/${b}/${c}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({phase_id:d})}),m(null),n()},q=f.reduce((a,b)=>{let c=b.phase_id||"unassigned";return a[c]||(a[c]=[]),a[c].push(b),a},{}),r=q.unassigned||[],s=c||a.split("/").pop()||"Project";return h?(0,v.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,v.jsx)(b0.RefreshCw,{className:"w-6 h-6 text-blue-400 animate-spin"})}):(0,v.jsxs)("div",{className:"h-full flex flex-col",children:[(0,v.jsx)("style",{children:b5}),(0,v.jsxs)("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between bg-gray-800",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsx)(b1.CheckCircle,{className:"w-5 h-5 text-blue-400"}),(0,v.jsxs)("h3",{className:"text-white font-semibold",children:[s," Roadmap"]})]}),(0,v.jsxs)("div",{className:"flex bg-gray-700 rounded-lg p-0.5",children:[(0,v.jsxs)("button",{onClick:()=>k("kanban"),className:`px-3 py-1 rounded text-xs ${"kanban"===j?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:["Phases (",d.length,")"]}),(0,v.jsxs)("button",{onClick:()=>k("unassigned"),className:`px-3 py-1 rounded text-xs ${"unassigned"===j?"bg-yellow-600 text-white":"text-gray-400 hover:text-white"}`,children:["Unassigned (",r.length,")"]})]})]}),"kanban"===j&&(0,v.jsx)("div",{className:"flex-1 overflow-x-auto p-4 scrollbar-blue",children:(0,v.jsxs)("div",{className:"flex gap-4 min-w-max h-full",children:[d.map(a=>{let b=q[a.id]||[],c=b.filter(a=>"completed"===a.status).length,d=b.length>0&&c===b.length;return(0,v.jsxs)("div",{className:"w-80 flex-shrink-0 flex flex-col",children:[(0,v.jsxs)("div",{className:`p-3 rounded-t-lg border-b ${d?"bg-green-900/30 border-green-600":"bg-gray-750 border-gray-600"}`,children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,v.jsxs)("span",{className:`font-medium ${d?"text-green-400":"text-white"}`,children:["Phase ",a.phase_num,": ",a.name]}),(0,v.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded ${d?"bg-green-600/30 text-green-400":"bg-gray-600 text-gray-400"}`,children:[c,"/",b.length]})]}),(0,v.jsx)("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,v.jsx)("div",{className:`h-full ${d?"bg-green-500":"bg-blue-500"}`,style:{width:b.length>0?`${c/b.length*100}%`:"0%"}})})]}),(0,v.jsxs)("div",{className:"flex-1 bg-gray-800 border border-gray-700 border-t-0 rounded-b-lg p-2 space-y-1 overflow-y-auto max-h-[calc(100vh-280px)]",children:[b.map(a=>{let b="completed"===a.status;return(0,v.jsxs)("div",{className:`flex items-start gap-2 p-2 rounded hover:bg-gray-700/50 ${b?"opacity-60":""}`,children:[(0,v.jsx)("button",{onClick:()=>o(a,b?"pending":"completed"),className:"mt-0.5 flex-shrink-0",children:b?(0,v.jsx)(b1.CheckCircle,{className:"w-4 h-4 text-green-400"}):(0,v.jsx)(b2.Circle,{className:"w-4 h-4 text-gray-400 hover:text-blue-400"})}),(0,v.jsx)("span",{className:`text-sm ${b?"text-gray-500 line-through":"text-gray-200"}`,children:a.title})]},a.id)}),0===b.length&&(0,v.jsx)("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No items"})]})]},a.id)}),0===d.length&&(0,v.jsx)("div",{className:"w-full text-center py-12 text-gray-500",children:(0,v.jsx)("p",{children:"No phases defined for this project"})})]})}),"unassigned"===j&&(0,v.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,v.jsx)("div",{className:"bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-4 mb-4",children:(0,v.jsx)("p",{className:"text-yellow-400 text-sm",children:"These items need to be assigned to a phase. Click the dropdown to assign."})}),(0,v.jsxs)("div",{className:"space-y-2",children:[r.map(a=>{let b="completed"===a.status,c=l===a.id;return(0,v.jsx)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-3",children:(0,v.jsxs)("div",{className:"flex items-start gap-3",children:[(0,v.jsx)("button",{onClick:()=>o(a,b?"pending":"completed"),className:"mt-0.5",children:b?(0,v.jsx)(b1.CheckCircle,{className:"w-5 h-5 text-green-400"}):(0,v.jsx)(b2.Circle,{className:"w-5 h-5 text-gray-400"})}),(0,v.jsx)("div",{className:"flex-1",children:(0,v.jsx)("p",{className:`${b?"text-gray-500 line-through":"text-white"}`,children:a.title})}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsxs)("button",{onClick:()=>m(c?null:a.id),className:"flex items-center gap-1 px-2 py-1 text-xs bg-gray-700 hover:bg-gray-600 rounded text-gray-300",children:[(0,v.jsx)(b4.Plus,{className:"w-3 h-3"}),"Assign",(0,v.jsx)(b3.ChevronDown,{className:"w-3 h-3"})]}),c&&(0,v.jsx)("div",{className:"absolute right-0 top-8 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg py-1 min-w-[200px]",children:d.map(b=>(0,v.jsxs)("button",{onClick:()=>p(a.id,b.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-700 text-gray-300",children:["Phase ",b.phase_num,": ",b.name]},b.id))})]})]})},a.id)}),0===r.length&&(0,v.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,v.jsx)(b1.CheckCircle,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,v.jsx)("p",{children:"All todos are assigned to phases"})]})]})]})]})}a.s(["default",()=>b6],34498);var b7=a.i(81338);let b8=(0,b7.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["Edit2",()=>b8],12583);var b9=a.i(23021),ca=a.i(96591),cb=a.i(82239),cc=a.i(17800);let cd=(0,b7.default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),ce=(0,b7.default)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),cf=(0,b7.default)("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]),cg=(0,b7.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>cg],41848);var ch=a.i(30587);let ci={breakdown:{label:"System Breakdown",icon:cd,color:"bg-blue-600/20 text-blue-400",activeColor:"bg-blue-600 text-white",description:"Architecture and component documentation"},howto:{label:"How-To Guide",icon:F.BookOpen,color:"bg-green-600/20 text-green-400",activeColor:"bg-green-600 text-white",description:"Step-by-step instructions"},schematic:{label:"Schematic",icon:ce,color:"bg-purple-600/20 text-purple-400",activeColor:"bg-purple-600 text-white",description:"Diagrams, flows, and relationships"},reference:{label:"Reference",icon:cf,color:"bg-orange-600/20 text-orange-400",activeColor:"bg-orange-600 text-white",description:"API docs, configurations, constants"}};function cj({projectPath:a,projectId:b,projectName:c,isParent:d,childProjectIds:e}){let[f,g]=(0,J.useState)([]),[h,i]=(0,J.useState)(null),[j,k]=(0,J.useState)([]),[l,m]=(0,J.useState)({}),[n,o]=(0,J.useState)(!0),[p,q]=(0,J.useState)("breakdown"),[r,s]=(0,J.useState)(null),[t,u]=(0,J.useState)(""),[w,y]=(0,J.useState)(!1),[z,A]=(0,J.useState)(null),[B,C]=(0,J.useState)({type:"breakdown",title:"",content:"",category:""});(0,J.useEffect)(()=>{F(a)},[a]),(0,J.useEffect)(()=>{D()},[b]);let D=async()=>{try{let c=d&&e?.length?e:[b],f=[];for(let a of c){let b=await fetch(`/project-management/api/project-paths?project_id=${a}`),c=await b.json();c.success&&c.paths&&f.push(...c.paths)}if(0===f.length&&a){let c={id:"virtual-main",project_id:b,path:a,label:a.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};f.push(c)}g(f);let h=f.find(b=>b.path===a);h?i(h):f.length>0&&i(f[0])}catch(a){console.error("Error fetching project paths:",a)}},E=async(a,b)=>{let c=f.findIndex(b=>b.id===a);if(-1===c)return;let d="up"===b?c-1:c+1;if(d<0||d>=f.length)return;let e=f[c],h=f[d],i=[...f];i[c]={...h,sort_order:e.sort_order},i[d]={...e,sort_order:h.sort_order},i.sort((a,b)=>(a.sort_order||0)-(b.sort_order||0)),g(i);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,sort_order:h.sort_order||d})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h.id,sort_order:e.sort_order||c})})])}catch(a){console.error("Error moving folder:",a),D()}},F=async a=>{if(a){o(!0);try{let b=a.startsWith("/")?a.slice(1):a,c=await fetch(`/project-management/api/clair/docs/${b}`),d=await c.json();if(d.success){k(d.docs||[]);let a={};(d.docs||[]).forEach(b=>{a[b.doc_type]||(a[b.doc_type]=[]),a[b.doc_type].push(b)}),m(a)}}catch(a){console.error("Error fetching docs:",a)}finally{o(!1)}}},G=async()=>{if(B.title&&B.content&&h)try{let a=h.path.startsWith("/")?h.path.slice(1):h.path,b=z?`/project-management/api/clair/docs/${a}/${z.id}`:`/project-management/api/clair/docs/${a}`,c=z?"PATCH":"POST";await fetch(b,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),I(),F(h.path)}catch(a){console.error("Error saving doc:",a)}},H=async a=>{if(confirm("Delete this document?")&&h)try{let b=h.path.startsWith("/")?h.path.slice(1):h.path;await fetch(`/project-management/api/clair/docs/${b}/${a.id}`,{method:"DELETE"}),r?.id===a.id&&s(null),F(h.path)}catch(a){console.error("Error deleting doc:",a)}},I=()=>{y(!1),A(null),C({type:p,title:"",content:"",category:""})},L=(l[p]||[]).filter(a=>{if(!t)return!0;let b=t.toLowerCase();return a.title.toLowerCase().includes(b)||a.content.toLowerCase().includes(b)}),M=ci[p],N=M.icon;if(r){let a=ci[r.doc_type],b=a.icon;return(0,v.jsxs)("div",{className:"flex h-full gap-4",children:[(0,v.jsx)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:(0,v.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,v.jsx)("button",{onClick:()=>s(null),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:" Back to docs"})})}),(0,v.jsxs)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,v.jsxs)("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,v.jsxs)("span",{className:`px-2 py-0.5 rounded text-xs flex items-center gap-1 ${a.color}`,children:[(0,v.jsx)(b,{className:"w-3 h-3"}),a.label]}),r.category&&(0,v.jsx)("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-400 rounded text-xs",children:r.category})]}),(0,v.jsx)("h2",{className:"text-xl font-semibold text-white",children:r.title})]}),(0,v.jsxs)("div",{className:"flex gap-2",children:[(0,v.jsx)("button",{onClick:()=>{A(r),C({type:r.doc_type,title:r.title,content:r.content,category:r.category||""}),y(!0),s(null)},className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded",children:(0,v.jsx)(b8,{className:"w-4 h-4"})}),(0,v.jsx)("button",{onClick:()=>H(r),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-gray-700 rounded",children:(0,v.jsx)(cc.Trash2,{className:"w-4 h-4"})})]})]}),(0,v.jsx)("div",{className:"p-4 overflow-y-auto max-h-[calc(100vh-250px)]",children:(0,v.jsx)("div",{className:"prose prose-invert max-w-none",children:(0,v.jsx)("pre",{className:"whitespace-pre-wrap text-gray-300 font-sans text-sm leading-relaxed",children:r.content})})})]})]})}return(0,v.jsxs)("div",{className:"flex h-full gap-4",children:[(0,v.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,v.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,v.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,v.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===f.length?(0,v.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,v.jsx)(ca.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,v.jsx)("p",{children:"No folders linked"})]}):(0,v.jsx)("div",{className:"divide-y divide-gray-700",children:f.map((a,b)=>(0,v.jsxs)("div",{className:`p-3 cursor-pointer group ${h?.id===a.id?"bg-blue-600/20 border-l-2 border-blue-500":"hover:bg-gray-750"}`,onClick:()=>i(a),children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,v.jsx)("button",{onClick:b=>{b.stopPropagation(),E(a.id,"up")},disabled:0===b,className:`p-0.5 rounded ${0===b?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,v.jsx)(cg,{className:"w-3 h-3"})}),(0,v.jsx)("button",{onClick:b=>{b.stopPropagation(),E(a.id,"down")},disabled:b===f.length-1,className:`p-0.5 rounded ${b===f.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,v.jsx)(b3.ChevronDown,{className:"w-3 h-3"})})]}),(0,v.jsx)(ca.FolderOpen,{className:`w-4 h-4 ${h?.id===a.id?"text-blue-400":"text-yellow-400"}`}),(0,v.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:a.label})]}),(0,v.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:a.path.split("/").pop()})]},a.id))})})]}),(0,v.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden flex flex-col",children:h?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"border-b border-gray-700",children:[(0,v.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(x.FileText,{className:"w-5 h-5 text-blue-400"}),(0,v.jsxs)("h3",{className:"text-white font-semibold",children:[c||h?.label||"Project"," Documentation"]}),(0,v.jsxs)("span",{className:"text-gray-500 text-sm",children:["(",j.length," docs)"]})]}),(0,v.jsxs)("button",{onClick:()=>{C({...B,type:p}),y(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:[(0,v.jsx)(b4.Plus,{className:"w-4 h-4"}),"Add Doc"]})]}),(0,v.jsx)("div",{className:"flex px-3 -mb-px",children:Object.entries(ci).map(([a,b])=>{let c=b.icon,d=l[a]?.length||0,e=p===a;return(0,v.jsxs)("button",{onClick:()=>q(a),className:`flex items-center gap-1.5 px-4 py-2.5 text-sm font-medium border-b-2 transition-colors ${e?`${b.activeColor} border-current`:"text-gray-400 border-transparent hover:text-white hover:border-gray-600"}`,children:[(0,v.jsx)(c,{className:"w-4 h-4"}),b.label,(0,v.jsx)("span",{className:`ml-1 px-1.5 py-0.5 rounded text-xs ${e?"bg-white/20":"bg-gray-700"}`,children:d})]},a)})})]}),(0,v.jsxs)("div",{className:`px-4 py-2 text-sm ${M.color} border-b border-gray-700`,children:[(0,v.jsx)(N,{className:"w-4 h-4 inline mr-2"}),M.description]}),w&&(0,v.jsxs)("div",{className:"p-4 border-b border-gray-700 bg-gray-750 space-y-3",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsx)("h4",{className:"text-white font-medium",children:z?"Edit Document":`New ${ci[B.type].label}`}),(0,v.jsx)("button",{onClick:I,className:"text-gray-500 hover:text-white",children:(0,v.jsx)(K.X,{className:"w-4 h-4"})})]}),(0,v.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,v.jsx)("select",{value:B.type,onChange:a=>C(b=>({...b,type:a.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:Object.entries(ci).map(([a,b])=>(0,v.jsx)("option",{value:a,children:b.label},a))}),(0,v.jsx)("input",{type:"text",placeholder:"Title",value:B.title,onChange:a=>C(b=>({...b,title:a.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,v.jsx)("input",{type:"text",placeholder:"Category (optional)",value:B.category,onChange:a=>C(b=>({...b,category:a.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"})]}),(0,v.jsx)("textarea",{placeholder:"Content (markdown supported)...",value:B.content,onChange:a=>C(b=>({...b,content:a.target.value})),rows:10,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm font-mono resize-none"}),(0,v.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,v.jsx)("button",{onClick:I,className:"px-3 py-1.5 text-gray-400 hover:text-white",children:"Cancel"}),(0,v.jsx)("button",{onClick:G,className:"px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:z?"Update":"Create"})]})]}),(0,v.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(cb.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),(0,v.jsx)("input",{type:"text",placeholder:`Search ${M.label.toLowerCase()}...`,value:t,onChange:a=>u(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 text-sm"})]})}),(0,v.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:n?(0,v.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,v.jsx)(b0.RefreshCw,{className:"w-6 h-6 text-blue-400 animate-spin"})}):0===L.length?(0,v.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,v.jsx)(N,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,v.jsxs)("p",{children:["No ",M.label.toLowerCase()," documents"]}),(0,v.jsx)("p",{className:"text-sm mt-1",children:M.description})]}):(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:L.map(a=>{let b,c,d,e,f;return(0,v.jsx)("div",{onClick:()=>s(a),className:"bg-gray-750 border border-gray-700 rounded-lg p-4 hover:border-blue-500 transition-colors cursor-pointer group",children:(0,v.jsxs)("div",{className:"flex items-start justify-between",children:[(0,v.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.category&&(0,v.jsx)("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-400 rounded text-xs",children:a.category}),(0,v.jsxs)("span",{className:"flex items-center gap-1 text-gray-500 text-xs",children:[(0,v.jsx)(ch.Clock,{className:"w-3 h-3"}),(b=new Date(a.created_at),d=Math.floor((c=new Date().getTime()-b.getTime())/6e4),e=Math.floor(c/36e5),f=Math.floor(c/864e5),d<60?`${d}m ago`:e<24?`${e}h ago`:f<7?`${f}d ago`:b.toLocaleDateString("en-US",{month:"short",day:"numeric"}))]})]}),(0,v.jsx)("h3",{className:"text-white font-medium truncate",children:a.title}),(0,v.jsx)("p",{className:"text-gray-500 text-sm mt-2 line-clamp-2",children:a.content})]}),(0,v.jsx)(b9.Eye,{className:"w-4 h-4 text-gray-500 group-hover:text-blue-400 flex-shrink-0 ml-2"})]})},a.id)})})})]}):(0,v.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)(x.FileText,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,v.jsx)("p",{children:"Select a folder to view docs"})]})})})]})}a.s(["default",()=>cj],42084);var ck=a.i(32808),cl=a.i(23834),cm=a.i(9901),cn=a.i(9544),co=a.i(60997);function cp({projectPath:a,projectId:b,isParent:c,childProjectIds:d}){let[e,f]=(0,J.useState)([]),[g,h]=(0,J.useState)(null),[i,j]=(0,J.useState)("tables"),[k,l]=(0,J.useState)([]),[m,n]=(0,J.useState)(null),[o,p]=(0,J.useState)(""),[q,r]=(0,J.useState)([]),[s,t]=(0,J.useState)([]),[u,w]=(0,J.useState)(""),[x,A]=(0,J.useState)(!0),[B,C]=(0,J.useState)(null);(0,J.useEffect)(()=>{D()},[b]),(0,J.useEffect)(()=>{g&&F()},[g,i]);let D=async()=>{A(!0);try{let e=c&&d?.length?d:[b],g=[];for(let a of e){let b=await fetch(`/project-management/api/project-paths?project_id=${a}`),c=await b.json();c.success&&c.paths&&g.push(...c.paths)}if(0===g.length&&a){let c={id:"virtual-main",project_id:b,path:a,label:a.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};g.push(c)}f(g);let i=g.find(b=>b.path===a);i?h(i):g.length>0&&h(g[0])}catch(a){console.error("Error fetching project paths:",a)}finally{A(!1)}},E=async(a,b)=>{let c=e.findIndex(b=>b.id===a);if(-1===c)return;let d="up"===b?c-1:c+1;if(d<0||d>=e.length)return;let g=e[c],h=e[d],i=[...e];i[c]={...h,sort_order:g.sort_order},i[d]={...g,sort_order:h.sort_order},i.sort((a,b)=>(a.sort_order||0)-(b.sort_order||0)),f(i);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g.id,sort_order:h.sort_order||d})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h.id,sort_order:g.sort_order||c})})])}catch(a){console.error("Error moving folder:",a),D()}},F=async()=>{if(g){A(!0);try{let a=g.path.startsWith("/")?g.path.slice(1):g.path;if("tables"===i){let b=await fetch(`/project-management/api/clair/database/${a}/tables`),c=await b.json();c.success&&l(c.tables||[])}else if("schemas"===i){let b=await fetch(`/project-management/api/clair/database/${a}/schemas`),c=await b.json();c.success&&r(c.schemas||[])}else if("rls"===i){let b=await fetch(`/project-management/api/clair/database/${a}/rls`),c=await b.json();c.success&&t(c.policies||[])}}catch(a){console.error("Error fetching database data:",a)}finally{A(!1)}}},G=async a=>{if(g)try{let b=g.path.startsWith("/")?g.path.slice(1):g.path,c=await fetch(`/project-management/api/clair/database/${b}/table/${a}/columns`),d=await c.json();d.success&&l(b=>b.map(b=>b.table_name===a?{...b,columns:d.columns,indexes:d.indexes}:b))}catch(a){console.error("Error fetching columns:",a)}},H=a=>{if(!a.columns||0===a.columns.length)return`-- No column info available for ${a.table_name}`;let b=a.columns.map(a=>{let b=`  ${a.column_name} ${a.data_type.toUpperCase()}`;return a.is_nullable||(b+=" NOT NULL"),a.column_default&&(b+=` DEFAULT ${a.column_default}`),a.is_primary&&(b+=" PRIMARY KEY"),a.references&&(b+=` REFERENCES ${a.references}`),b});return`CREATE TABLE ${a.schema?`${a.schema}.`:""}${a.table_name} (
${b.join(",\n")}
);`},I=async a=>{let b=H(a);await navigator.clipboard.writeText(b),C(a.table_name),setTimeout(()=>C(null),2e3)},K=k.filter(a=>a.table_name.toLowerCase().includes(o.toLowerCase())),L=s.filter(a=>a.policy_name.toLowerCase().includes(u.toLowerCase())||a.table_name.toLowerCase().includes(u.toLowerCase()));if(x&&!g)return(0,v.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,v.jsx)(b0.RefreshCw,{className:"w-6 h-6 text-blue-400 animate-spin"})});let M=[{id:"tables",label:"Tables",icon:y.Table,count:k.length},{id:"schemas",label:"Schemas",icon:cd,count:q.length},{id:"rls",label:"RLS Policies",icon:cn.Shield,count:s.length}];return(0,v.jsxs)("div",{className:"flex h-full gap-4",children:[(0,v.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,v.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,v.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,v.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===e.length?(0,v.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,v.jsx)(ca.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,v.jsx)("p",{children:"No folders linked"})]}):(0,v.jsx)("div",{className:"divide-y divide-gray-700",children:e.map((a,b)=>(0,v.jsxs)("div",{className:`p-3 cursor-pointer group ${g?.id===a.id?"bg-blue-600/20 border-l-2 border-blue-500":"hover:bg-gray-750"}`,onClick:()=>h(a),children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,v.jsx)("button",{onClick:b=>{b.stopPropagation(),E(a.id,"up")},disabled:0===b,className:`p-0.5 rounded ${0===b?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,v.jsx)(cg,{className:"w-3 h-3"})}),(0,v.jsx)("button",{onClick:b=>{b.stopPropagation(),E(a.id,"down")},disabled:b===e.length-1,className:`p-0.5 rounded ${b===e.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,v.jsx)(b3.ChevronDown,{className:"w-3 h-3"})})]}),(0,v.jsx)(ca.FolderOpen,{className:`w-4 h-4 ${g?.id===a.id?"text-blue-400":"text-yellow-400"}`}),(0,v.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:a.label})]}),(0,v.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:a.path.split("/").pop()})]},a.id))})})]}),(0,v.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden flex flex-col",children:g?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"border-b border-gray-700",children:[(0,v.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,v.jsx)("div",{children:(0,v.jsxs)("h3",{className:"text-white font-semibold text-sm flex items-center gap-2",children:[(0,v.jsx)(z.Database,{className:"w-4 h-4 text-blue-400"}),g.label," Database"]})}),(0,v.jsxs)("button",{onClick:F,disabled:x,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white rounded text-sm",children:[(0,v.jsx)(b0.RefreshCw,{className:`w-4 h-4 ${x?"animate-spin":""}`}),"Refresh"]})]}),(0,v.jsx)("div",{className:"flex border-t border-gray-700",children:M.map(a=>(0,v.jsxs)("button",{onClick:()=>j(a.id),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${i===a.id?"text-blue-400 border-blue-400 bg-gray-750":"text-gray-400 border-transparent hover:text-white hover:bg-gray-750"}`,children:[(0,v.jsx)(a.icon,{className:"w-4 h-4"}),a.label,(0,v.jsx)("span",{className:`px-1.5 py-0.5 rounded text-xs ${i===a.id?"bg-blue-600 text-white":"bg-gray-700 text-gray-400"}`,children:a.count})]},a.id))})]}),(0,v.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:x?(0,v.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,v.jsx)(b0.RefreshCw,{className:"w-6 h-6 text-blue-400 animate-spin"})}):(0,v.jsxs)(v.Fragment,{children:["tables"===i&&(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsx)("input",{type:"text",value:o,onChange:a=>p(a.target.value),placeholder:"Filter tables...",className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm placeholder-gray-500"})}),0===K.length?(0,v.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,v.jsx)(z.Database,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,v.jsx)("p",{children:"No tables found"})]}):(0,v.jsx)("div",{className:"space-y-2",children:K.map(a=>(0,v.jsxs)("div",{className:"bg-gray-750 border border-gray-700 rounded-lg overflow-hidden",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-700 transition-colors",children:[(0,v.jsxs)("button",{onClick:()=>(a=>{if(m===a)n(null);else{n(a);let b=k.find(b=>b.table_name===a);b?.columns||G(a)}})(a.table_name),className:"flex items-center gap-3 flex-1 text-left",children:[m===a.table_name?(0,v.jsx)(b3.ChevronDown,{className:"w-4 h-4 text-gray-500"}):(0,v.jsx)(ck.ChevronRight,{className:"w-4 h-4 text-gray-500"}),(0,v.jsx)(y.Table,{className:"w-4 h-4 text-blue-400"}),(0,v.jsx)("span",{className:"text-white font-mono text-sm",children:a.table_name}),a.schema&&"public"!==a.schema&&(0,v.jsxs)("span",{className:"text-gray-500 text-xs",children:["(",a.schema,")"]}),void 0!==a.row_count&&(0,v.jsxs)("span",{className:"text-gray-500 text-xs ml-auto",children:[a.row_count.toLocaleString()," rows"]})]}),a.columns&&(0,v.jsx)("button",{onClick:b=>{b.stopPropagation(),I(a)},className:"flex items-center gap-1 px-2 py-1 text-gray-400 hover:text-white hover:bg-gray-600 rounded text-xs ml-2",children:B===a.table_name?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(cm.Check,{className:"w-3 h-3 text-green-400"}),"Copied"]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(cl.Copy,{className:"w-3 h-3"}),"SQL"]})})]}),m===a.table_name&&(0,v.jsx)("div",{className:"border-t border-gray-700 p-3 bg-gray-800",children:a.columns?(0,v.jsxs)("div",{className:"space-y-1",children:[a.columns.map(a=>(0,v.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 hover:bg-gray-750 rounded",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[a.is_primary&&(0,v.jsx)(co.Key,{className:"w-3 h-3 text-yellow-400"}),(0,v.jsx)("span",{className:"text-gray-300 font-mono text-sm",children:a.column_name})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("span",{className:"text-blue-400 text-xs font-mono",children:a.data_type}),!a.is_nullable&&(0,v.jsx)("span",{className:"text-red-400 text-xs",children:"NOT NULL"}),a.column_default&&(0,v.jsxs)("span",{className:"text-gray-500 text-xs truncate max-w-[150px]",title:a.column_default,children:["= ",a.column_default]}),a.references&&(0,v.jsxs)("span",{className:"text-purple-400 text-xs",children:[" ",a.references]})]})]},a.column_name)),a.indexes&&a.indexes.length>0&&(0,v.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[(0,v.jsx)("span",{className:"text-gray-500 text-xs font-medium",children:"Indexes"}),(0,v.jsx)("div",{className:"mt-2 space-y-1",children:a.indexes.map(a=>(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,v.jsx)("span",{className:"text-gray-400 font-mono",children:a.name}),(0,v.jsxs)("span",{className:"text-gray-600",children:["(",a.columns.join(", "),")"]}),a.unique&&(0,v.jsx)("span",{className:"text-yellow-400",children:"UNIQUE"})]},a.name))})]}),(0,v.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,v.jsx)("span",{className:"text-gray-500 text-xs",children:"CREATE TABLE Statement"}),(0,v.jsx)("button",{onClick:()=>I(a),className:"flex items-center gap-1 text-gray-400 hover:text-white text-xs",children:B===a.table_name?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(cm.Check,{className:"w-3 h-3 text-green-400"}),"Copied"]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(cl.Copy,{className:"w-3 h-3"}),"Copy"]})})]}),(0,v.jsx)("pre",{className:"text-gray-400 font-mono text-xs bg-gray-900 p-2 rounded overflow-x-auto",children:H(a)})]})]}):(0,v.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,v.jsx)(b0.RefreshCw,{className:"w-4 h-4 text-blue-400 animate-spin mr-2"}),(0,v.jsx)("span",{className:"text-gray-500 text-sm",children:"Loading columns..."})]})})]},a.table_name))})]}),"schemas"===i&&(0,v.jsx)("div",{children:0===q.length?(0,v.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,v.jsx)(cd,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,v.jsx)("p",{children:"No schemas found"})]}):(0,v.jsx)("div",{className:"space-y-2",children:q.map(a=>(0,v.jsx)("div",{className:"bg-gray-750 border border-gray-700 rounded-lg p-4",children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsx)(cd,{className:"w-5 h-5 text-purple-400"}),(0,v.jsx)("span",{className:"text-white font-mono text-sm",children:a.schema_name})]}),(0,v.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,v.jsxs)("span",{className:"text-gray-500",children:["Owner: ",(0,v.jsx)("span",{className:"text-gray-300",children:a.owner})]}),(0,v.jsxs)("span",{className:"text-gray-500",children:["Tables: ",(0,v.jsx)("span",{className:"text-blue-400",children:a.table_count})]})]})]})},a.schema_name))})}),"rls"===i&&(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsx)("input",{type:"text",value:u,onChange:a=>w(a.target.value),placeholder:"Filter policies...",className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm placeholder-gray-500"})}),0===L.length?(0,v.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,v.jsx)(cn.Shield,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,v.jsx)("p",{children:"No RLS policies found"}),(0,v.jsx)("p",{className:"text-xs mt-1",children:"Row-Level Security policies control access to table rows"})]}):(0,v.jsx)("div",{className:"space-y-2",children:L.map(a=>(0,v.jsxs)("div",{className:"bg-gray-750 border border-gray-700 rounded-lg p-4",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsx)(cn.Shield,{className:"w-4 h-4 text-green-400"}),(0,v.jsx)("span",{className:"text-white font-medium text-sm",children:a.policy_name})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("span",{className:"px-2 py-0.5 bg-blue-600/20 text-blue-400 rounded text-xs",children:a.table_name}),(0,v.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${"ALL"===a.command?"bg-purple-600/20 text-purple-400":"SELECT"===a.command?"bg-green-600/20 text-green-400":"INSERT"===a.command?"bg-yellow-600/20 text-yellow-400":"UPDATE"===a.command?"bg-orange-600/20 text-orange-400":"bg-red-600/20 text-red-400"}`,children:a.command})]})]}),(0,v.jsxs)("div",{className:"text-xs space-y-2 mt-3",children:[a.roles&&a.roles.length>0&&(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"text-gray-500",children:"Roles: "}),(0,v.jsx)("span",{className:"text-gray-300",children:a.roles.join(", ")})]}),a.using_expression&&(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"text-gray-500",children:"USING: "}),(0,v.jsx)("code",{className:"text-green-400 font-mono bg-gray-900 px-1 rounded",children:a.using_expression})]}),a.with_check_expression&&(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"text-gray-500",children:"WITH CHECK: "}),(0,v.jsx)("code",{className:"text-yellow-400 font-mono bg-gray-900 px-1 rounded",children:a.with_check_expression})]})]})]},`${a.table_name}-${a.policy_name}`))})]})]})})]}):(0,v.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)(ca.FolderOpen,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,v.jsx)("p",{children:"Select a folder to view database"})]})})})]})}a.s(["default",()=>cp],99049);let cq=(0,b7.default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]),cr=(0,b7.default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);function cs({projectPath:a,projectId:b,isParent:c,childProjectIds:d}){let[e,f]=(0,J.useState)([]),[g,h]=(0,J.useState)(null),[i,j]=(0,J.useState)(null),[k,l]=(0,J.useState)(!0),[m,n]=(0,J.useState)(new Set),[o,p]=(0,J.useState)(null),[q,r]=(0,J.useState)(""),[s,t]=(0,J.useState)(0);(0,J.useEffect)(()=>{u()},[b]),(0,J.useEffect)(()=>{g&&x(g.path)},[g]);let u=async()=>{l(!0);try{let e=c&&d?.length?d:[b],g=[];for(let a of e){let b=await fetch(`/project-management/api/project-paths?project_id=${a}`),c=await b.json();c.success&&c.paths&&g.push(...c.paths)}if(0===g.length&&a){let c={id:"virtual-main",project_id:b,path:a,label:a.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};g.push(c)}f(g);let i=g.find(b=>b.path===a);i?h(i):g.length>0&&h(g[0])}catch(a){console.error("Error fetching project paths:",a)}finally{l(!1)}},w=async(a,b)=>{let c=e.findIndex(b=>b.id===a);if(-1===c)return;let d="up"===b?c-1:c+1;if(d<0||d>=e.length)return;let g=e[c],h=e[d],i=[...e];i[c]={...h,sort_order:g.sort_order},i[d]={...g,sort_order:h.sort_order},i.sort((a,b)=>(a.sort_order||0)-(b.sort_order||0)),f(i);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g.id,sort_order:h.sort_order||d})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h.id,sort_order:g.sort_order||c})})])}catch(a){console.error("Error moving folder:",a),u()}},x=async a=>{l(!0);try{let b=a.startsWith("/")?a.slice(1):a,c=await fetch(`/project-management/api/clair/structure/${b}?depth=4`),d=await c.json();if(d.success&&(j(d.tree),t(d.descriptionCount||0),d.tree?.children)){let a=d.tree.children.filter(a=>"directory"===a.type).map(a=>a.path);n(new Set([d.tree.path,...a]))}}catch(a){console.error("Error fetching structure:",a)}finally{l(!1)}},y=async a=>{if(g)try{let b=g.path.startsWith("/")?g.path.slice(1):g.path;await fetch(`/project-management/api/clair/structure/${b}/describe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:a,description:q})}),p(null),x(g.path)}catch(a){console.error("Error saving description:",a)}},z=(a,b=0)=>{var c;let d=m.has(a.path),e=o===a.path,f=a.children&&a.children.length>0;return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 py-1 px-2 hover:bg-gray-700/50 rounded group",style:{paddingLeft:`${16*b+8}px`},children:["directory"===a.type?(0,v.jsx)("button",{onClick:()=>{var b;return b=a.path,void n(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},className:"text-gray-500 hover:text-white",children:d?(0,v.jsx)(b3.ChevronDown,{className:"w-4 h-4"}):(0,v.jsx)(ck.ChevronRight,{className:"w-4 h-4"})}):(0,v.jsx)("span",{className:"w-4"}),"directory"===a.type?(0,v.jsx)(cr,{className:`w-4 h-4 ${d?"text-yellow-400":"text-yellow-600"}`}):(c=a.extension,(0,v.jsx)(cq,{className:`w-4 h-4 ${{".tsx":"text-blue-400",".ts":"text-blue-300",".js":"text-yellow-400",".jsx":"text-yellow-300",".css":"text-pink-400",".json":"text-green-400",".md":"text-gray-400",".sql":"text-orange-400",".sh":"text-green-300"}[c||""]||"text-gray-500"}`})),(0,v.jsx)("span",{className:"font-mono text-sm text-white",children:a.name}),a.truncated&&(0,v.jsx)("span",{className:"text-xs text-gray-500",children:"(truncated)"}),"directory"===a.type&&(e?(0,v.jsxs)("div",{className:"flex items-center gap-1 ml-2 flex-1",children:[(0,v.jsx)("input",{type:"text",value:q,onChange:a=>r(a.target.value),className:"flex-1 px-2 py-0.5 bg-gray-700 border border-gray-600 rounded text-xs text-white",placeholder:"Description...",autoFocus:!0,onKeyDown:b=>{"Enter"===b.key&&y(a.path),"Escape"===b.key&&p(null)}}),(0,v.jsx)("button",{onClick:()=>y(a.path),className:"text-green-400 hover:text-green-300",children:(0,v.jsx)(cm.Check,{className:"w-3 h-3"})}),(0,v.jsx)("button",{onClick:()=>p(null),className:"text-gray-500 hover:text-white",children:(0,v.jsx)(K.X,{className:"w-3 h-3"})})]}):(0,v.jsxs)(v.Fragment,{children:[a.description&&(0,v.jsxs)("span",{className:"text-gray-500 text-xs ml-2",children:["- ",a.description]}),(0,v.jsx)("button",{onClick:()=>{p(a.path),r(a.description||"")},className:"ml-auto p-1 text-gray-600 hover:text-white opacity-0 group-hover:opacity-100",title:"Add description",children:(0,v.jsx)(b8,{className:"w-3 h-3"})})]}))]}),"directory"===a.type&&d&&f&&(0,v.jsx)("div",{children:a.children.sort((a,b)=>a.type!==b.type?"directory"===a.type?-1:1:a.name.localeCompare(b.name)).map(a=>z(a,b+1))})]},a.path)};return k&&!i?(0,v.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,v.jsx)("div",{className:"animate-spin text-2xl",children:(0,v.jsx)(b0.RefreshCw,{className:"w-6 h-6 text-blue-400"})})}):(0,v.jsxs)("div",{className:"flex h-full gap-4",children:[(0,v.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,v.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,v.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,v.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===e.length?(0,v.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,v.jsx)(ca.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,v.jsx)("p",{children:"No folders linked"})]}):(0,v.jsx)("div",{className:"divide-y divide-gray-700",children:e.map((a,b)=>(0,v.jsxs)("div",{className:`p-3 cursor-pointer group ${g?.id===a.id?"bg-blue-600/20 border-l-2 border-blue-500":"hover:bg-gray-750"}`,onClick:()=>h(a),children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,v.jsx)("button",{onClick:b=>{b.stopPropagation(),w(a.id,"up")},disabled:0===b,className:`p-0.5 rounded ${0===b?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,v.jsx)(cg,{className:"w-3 h-3"})}),(0,v.jsx)("button",{onClick:b=>{b.stopPropagation(),w(a.id,"down")},disabled:b===e.length-1,className:`p-0.5 rounded ${b===e.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,v.jsx)(b3.ChevronDown,{className:"w-3 h-3"})})]}),(0,v.jsx)(ca.FolderOpen,{className:`w-4 h-4 ${g?.id===a.id?"text-blue-400":"text-yellow-400"}`}),(0,v.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:a.label})]}),(0,v.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:a.path.split("/").pop()})]},a.id))})})]}),(0,v.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:g&&i?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"p-3 border-b border-gray-700 flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("h3",{className:"text-white font-semibold text-sm",children:[g.label," Structure"]}),(0,v.jsx)("p",{className:"text-gray-500 text-xs font-mono",children:g.path})]}),(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsxs)("span",{className:"text-xs text-gray-500",children:[s," descriptions"]}),(0,v.jsx)("button",{onClick:()=>x(g.path),className:"p-1 text-gray-400 hover:text-white hover:bg-gray-700 rounded",title:"Refresh",children:(0,v.jsx)(b0.RefreshCw,{className:`w-4 h-4 ${k?"animate-spin":""}`})})]})]}),(0,v.jsx)("div",{className:"overflow-y-auto p-2 max-h-[calc(100vh-300px)]",children:i.error?(0,v.jsx)("div",{className:"text-center py-8 text-red-400",children:(0,v.jsxs)("p",{className:"text-sm",children:["Error: ",i.error]})}):z(i)})]}):(0,v.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)(E.FolderTree,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,v.jsx)("p",{children:"Select a folder to view its structure"})]})})})]})}a.s(["Folder",()=>cr],88085),a.s(["default",()=>cs],23785);let ct=(0,b7.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>ct],63545)},58270,87756,a=>{"use strict";var b=a.i(18030),c=a.i(30072),d=a.i(59089),e=a.i(74176),f=a.i(51684),g=a.i(12583),h=a.i(63545);function i({projectPath:a,projectId:i,isParent:j,childProjectIds:k}){let[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)({title:"",content:""}),[x,y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{z()},[i,j,k]),(0,c.useEffect)(()=>{n.length>0&&A()},[n]);let z=async()=>{try{let b=j&&k?.length?k:[i],c=[];for(let a of b){let b=await fetch(`/project-management/api/project-paths?project_id=${a}`),d=await b.json();d.success&&d.paths&&d.paths.forEach(a=>c.push(a.path))}0===c.length&&c.push(a),o(c)}catch(b){console.error("Error fetching project paths:",b),o([a])}},A=async()=>{try{let a=[];for(let b of n){let c=await fetch(`/api/susan/notes?project=${encodeURIComponent(b)}`),d=await c.json();d.success&&d.notes&&a.push(...d.notes)}m(a)}catch(a){console.error("Error fetching notes:",a)}finally{q(!1)}},B=async b=>{b.preventDefault(),y(!0);try{let b=r?`/api/susan/note/${r.id}`:"/api/susan/note",c=r?"PATCH":"POST";(await fetch(b,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify({...v,project_path:a})})).ok&&(A(),u(!1),s(null),w({title:"",content:""}))}catch(a){console.error("Error saving note:",a)}finally{y(!1)}},C=async a=>{if(confirm("Delete this note?"))try{await fetch(`/api/susan/note/${a.id}`,{method:"DELETE"}),A()}catch(a){console.error("Error deleting note:",a)}};return p?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin text-2xl",children:""})}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Notepad"}),(0,b.jsxs)("button",{onClick:()=>{s(null),w({title:"",content:""}),u(!0)},className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4"}),"New Note"]})]}),t&&(0,b.jsx)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 mb-4",children:(0,b.jsx)("form",{onSubmit:B,children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Note title",value:v.title,onChange:a=>w(b=>({...b,title:a.target.value})),required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"}),(0,b.jsx)("textarea",{placeholder:"Write your notes here...",value:v.content,onChange:a=>w(b=>({...b,content:a.target.value})),required:!0,rows:8,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none resize-none"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50",children:[(0,b.jsx)(h.Save,{className:"w-4 h-4"}),x?"Saving...":r?"Update Note":"Save Note"]}),(0,b.jsx)("button",{type:"button",onClick:()=>{u(!1),s(null)},className:"px-4 py-2 text-gray-400 hover:text-white",children:"Cancel"})]})]})})}),0===l.length?(0,b.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,b.jsx)(e.StickyNote,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No notes yet"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Jot down thoughts, ideas, and reminders"})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:l.map(a=>(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 group",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-white font-medium",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)("button",{onClick:()=>{s(a),w({title:a.title,content:a.content}),u(!0)},className:"p-1.5 text-gray-500 hover:text-white hover:bg-gray-700 rounded",children:(0,b.jsx)(g.Edit2,{className:"w-3 h-3"})}),(0,b.jsx)("button",{onClick:()=>C(a),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-700 rounded",children:(0,b.jsx)(f.X,{className:"w-3 h-3"})})]})]}),(0,b.jsx)("p",{className:"text-gray-400 text-sm whitespace-pre-wrap line-clamp-4",children:a.content}),(0,b.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-700",children:(0,b.jsxs)("span",{className:"text-gray-600 text-xs",children:["Updated ",new Date(a.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})})]},a.id))})]})}a.s(["default",()=>i],58270);var j=a.i(45224),k=a.i(84852),l=a.i(77236),m=a.i(30587),n=a.i(82239);let o=(0,a.i(81338).default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var p=a.i(96591),q=a.i(30836),r=a.i(17800),s=a.i(41848),t=a.i(59539);let u={low:{label:"Low",color:"bg-gray-600/20 text-gray-400 border-gray-600"},medium:{label:"Medium",color:"bg-yellow-600/20 text-yellow-400 border-yellow-600"},high:{label:"High",color:"bg-orange-600/20 text-orange-400 border-orange-600"},critical:{label:"Critical",color:"bg-red-600/20 text-red-400 border-red-600"}},v={open:{label:"Open",color:"bg-red-600/20 text-red-400",icon:k.AlertTriangle},investigating:{label:"Investigating",color:"bg-yellow-600/20 text-yellow-400",icon:n.Search},fixed:{label:"Fixed",color:"bg-green-600/20 text-green-400",icon:l.CheckCircle},wont_fix:{label:"Won't Fix",color:"bg-gray-600/20 text-gray-500",icon:f.X},duplicate:{label:"Duplicate",color:"bg-purple-600/20 text-purple-400",icon:j.Bug}};function w({projectPath:a,projectId:d,projectName:e,isParent:h,childProjectIds:i}){let[k,n]=(0,c.useState)([]),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)("all"),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)({title:"",description:"",severity:"medium",status:"open",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",environment:"dev",related_file:"",resolution_notes:""});(0,c.useEffect)(()=>{K()},[d]),(0,c.useEffect)(()=>{w&&M(w.path)},[w]);let K=async()=>{try{let b=h&&i?.length?i:[d],c=[];for(let a of b){let b=await fetch(`/project-management/api/project-paths?project_id=${a}`),d=await b.json();d.success&&d.paths&&c.push(...d.paths)}if(0===c.length&&a){let b={id:"virtual-main",project_id:d,path:a,label:a.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};c.push(b)}n(c);let e=c.find(b=>b.path===a);e?x(e):c.length>0&&x(c[0])}catch(a){console.error("Error fetching project paths:",a)}},L=async(a,b)=>{let c=k.findIndex(b=>b.id===a);if(-1===c)return;let d="up"===b?c-1:c+1;if(d<0||d>=k.length)return;let e=k[c],f=k[d],g=[...k];g[c]={...f,sort_order:e.sort_order},g[d]={...e,sort_order:f.sort_order},g.sort((a,b)=>(a.sort_order||0)-(b.sort_order||0)),n(g);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,sort_order:f.sort_order||d})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:f.id,sort_order:e.sort_order||c})})])}catch(a){console.error("Error moving folder:",a),K()}},M=async a=>{B(!0);try{let b=a.startsWith("/")?a.slice(1):a,c=await fetch(`/project-management/api/clair/bugs/${b}`),d=await c.json();d.success&&z(d.bugs||[])}catch(a){console.error("Error fetching bugs:",a)}finally{B(!1)}},N=async()=>{if(I.title&&w)try{let a=w.path.startsWith("/")?w.path.slice(1):w.path,b=G?`/project-management/api/clair/bugs/${a}/${G.id}`:`/project-management/api/clair/bugs/${a}`,c=G?"PATCH":"POST";await fetch(b,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify({...I,reported_by:I.title?"manual":void 0,resolved_at:"fixed"===I.status?new Date().toISOString():null})}),R(),M(w.path)}catch(a){console.error("Error saving bug:",a)}},O=async(a,b)=>{if(w)try{let c=w.path.startsWith("/")?w.path.slice(1):w.path;await fetch(`/project-management/api/clair/bugs/${c}/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b,resolved_at:"fixed"===b?new Date().toISOString():null})}),M(w.path)}catch(a){console.error("Error updating bug:",a)}},P=async a=>{if(confirm("Delete this bug report?")&&w)try{let b=w.path.startsWith("/")?w.path.slice(1):w.path;await fetch(`/project-management/api/clair/bugs/${b}/${a.id}`,{method:"DELETE"}),M(w.path)}catch(a){console.error("Error deleting bug:",a)}},Q=async a=>{if(w)try{let b=w.path.startsWith("/")?w.path.slice(1):w.path;await fetch(`/project-management/api/clair/bugs/${b}/${a.id}/archive`,{method:"POST"}),M(w.path)}catch(a){console.error("Error archiving bug:",a)}},R=()=>{F(!1),H(null),J({title:"",description:"",severity:"medium",status:"open",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",environment:"dev",related_file:"",resolution_notes:""})},S=y.filter(a=>"all"===C||("open"===C?["open","investigating"].includes(a.status):"fixed"!==C||"fixed"===a.status)),T={all:y.length,open:y.filter(a=>["open","investigating"].includes(a.status)).length,fixed:y.filter(a=>"fixed"===a.status).length};return(0,b.jsxs)("div",{className:"flex h-full gap-4",children:[(0,b.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,b.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,b.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===k.length?(0,b.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,b.jsx)(p.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{children:"No folders linked"})]}):(0,b.jsx)("div",{className:"divide-y divide-gray-700",children:k.map((a,c)=>(0,b.jsxs)("div",{className:`p-3 cursor-pointer group ${w?.id===a.id?"bg-red-600/20 border-l-2 border-red-500":"hover:bg-gray-750"}`,onClick:()=>x(a),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),L(a.id,"up")},disabled:0===c,className:`p-0.5 rounded ${0===c?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,b.jsx)(s.ChevronUp,{className:"w-3 h-3"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),L(a.id,"down")},disabled:c===k.length-1,className:`p-0.5 rounded ${c===k.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,b.jsx)(t.ChevronDown,{className:"w-3 h-3"})})]}),(0,b.jsx)(p.FolderOpen,{className:`w-4 h-4 ${w?.id===a.id?"text-red-400":"text-yellow-400"}`}),(0,b.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:a.label})]}),(0,b.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:a.path.split("/").pop()})]},a.id))})})]}),(0,b.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden flex flex-col",children:w?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"p-3 border-b border-gray-700 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(j.Bug,{className:"w-5 h-5 text-red-400"}),(0,b.jsxs)("h3",{className:"text-white font-semibold",children:[e||w?.label||"Project"," Bugs"]}),(0,b.jsx)("div",{className:"flex items-center gap-1 bg-gray-700 rounded-lg p-0.5",children:["all","open","fixed"].map(a=>(0,b.jsxs)("button",{onClick:()=>D(a),className:`px-3 py-1 rounded text-xs transition-colors ${C===a?"bg-gray-600 text-white":"text-gray-400 hover:text-white"}`,children:[a.charAt(0).toUpperCase()+a.slice(1)," (",T[a],")"]},a))})]}),(0,b.jsxs)("button",{onClick:()=>{R(),F(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:[(0,b.jsx)(j.Bug,{className:"w-4 h-4"}),"Report Bug"]})]}),E&&(0,b.jsxs)("div",{className:"p-4 border-b border-gray-700 bg-gray-750 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h4",{className:"text-white font-medium",children:G?"Edit Bug":"New Bug Report"}),(0,b.jsx)("button",{onClick:R,className:"text-gray-500 hover:text-white",children:(0,b.jsx)(f.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Bug title",value:I.title,onChange:a=>J(b=>({...b,title:a.target.value})),className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,b.jsx)("select",{value:I.severity,onChange:a=>J(b=>({...b,severity:a.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:Object.entries(u).map(([a,c])=>(0,b.jsx)("option",{value:a,children:c.label},a))}),(0,b.jsxs)("select",{value:I.environment,onChange:a=>J(b=>({...b,environment:a.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[(0,b.jsx)("option",{value:"dev",children:"Dev"}),(0,b.jsx)("option",{value:"test",children:"Test"}),(0,b.jsx)("option",{value:"prod",children:"Prod"})]})]}),(0,b.jsx)("textarea",{placeholder:"Description",value:I.description,onChange:a=>J(b=>({...b,description:a.target.value})),rows:2,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("textarea",{placeholder:"Steps to reproduce",value:I.steps_to_reproduce,onChange:a=>J(b=>({...b,steps_to_reproduce:a.target.value})),rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Expected behavior",value:I.expected_behavior,onChange:a=>J(b=>({...b,expected_behavior:a.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,b.jsx)("input",{type:"text",placeholder:"Actual behavior",value:I.actual_behavior,onChange:a=>J(b=>({...b,actual_behavior:a.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,b.jsx)("input",{type:"text",placeholder:"Related file (optional)",value:I.related_file,onChange:a=>J(b=>({...b,related_file:a.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm font-mono"})]})]}),G&&(0,b.jsx)("textarea",{placeholder:"Resolution notes",value:I.resolution_notes,onChange:a=>J(b=>({...b,resolution_notes:a.target.value})),rows:2,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none"}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:R,className:"px-3 py-1.5 text-gray-400 hover:text-white",children:"Cancel"}),(0,b.jsx)("button",{onClick:N,className:"px-4 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:G?"Update":"Submit"})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:A?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(q.RefreshCw,{className:"w-6 h-6 text-red-400 animate-spin"})}):0===S.length?(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)(j.Bug,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{children:"all"===C?"No bugs reported":`No ${C} bugs`})]}):(0,b.jsx)("div",{className:"space-y-2",children:S.map(a=>{let c=u[a.severity],d=v[a.status],e=d.icon;return(0,b.jsx)("div",{className:`bg-gray-750 border rounded-lg p-3 group ${c.color.split(" ")[2]}`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsxs)("span",{className:`px-2 py-0.5 rounded text-xs flex items-center gap-1 ${d.color}`,children:[(0,b.jsx)(e,{className:"w-3 h-3"}),d.label]}),(0,b.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${c.color.split(" ").slice(0,2).join(" ")}`,children:c.label}),a.environment&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-400 rounded text-xs",children:a.environment})]}),(0,b.jsx)("h3",{className:"text-white font-medium",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(m.Clock,{className:"w-3 h-3"}),new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),a.reported_by&&(0,b.jsxs)("span",{children:["by ",a.reported_by]}),a.related_file&&(0,b.jsx)("span",{className:"font-mono bg-gray-700 px-1 rounded",children:a.related_file.split("/").pop()})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["fixed"!==a.status&&(0,b.jsx)("button",{onClick:()=>O(a,"fixed"),className:"p-1.5 text-gray-500 hover:text-green-400 hover:bg-gray-700 rounded",title:"Mark fixed",children:(0,b.jsx)(l.CheckCircle,{className:"w-4 h-4"})}),"fixed"===a.status&&(0,b.jsx)("button",{onClick:()=>Q(a),className:"p-1.5 text-gray-500 hover:text-purple-400 hover:bg-gray-700 rounded",title:"Archive",children:(0,b.jsx)(o,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{H(a),J({title:a.title,description:a.description||"",severity:a.severity,status:a.status,steps_to_reproduce:a.steps_to_reproduce||"",expected_behavior:a.expected_behavior||"",actual_behavior:a.actual_behavior||"",environment:a.environment||"dev",related_file:a.related_file||"",resolution_notes:a.resolution_notes||""}),F(!0)},className:"p-1.5 text-gray-500 hover:text-white hover:bg-gray-700 rounded",children:(0,b.jsx)(g.Edit2,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>P(a),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-700 rounded",children:(0,b.jsx)(r.Trash2,{className:"w-4 h-4"})})]})]})},a.id)})})})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(j.Bug,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"Select a folder to view bugs"})]})})})]})}a.s(["default",()=>w],87756)},31452,a=>{"use strict";var b=a.i(18030),c=a.i(30072),d=a.i(59089),e=a.i(12583),f=a.i(17800),g=a.i(51684),h=a.i(63545),i=a.i(33020),j=a.i(45819),k=a.i(64143);let l=(0,a.i(81338).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var m=a.i(84852),n=a.i(88085),o=a.i(30587);let p=[{id:"all",label:"All",icon:i.BookOpen},{id:"naming",label:"Naming Conventions",icon:j.Code},{id:"structure",label:"File Structure",icon:n.Folder},{id:"database",label:"Database Patterns",icon:k.Database},{id:"api",label:"API Patterns",icon:l},{id:"component",label:"Component Patterns",icon:j.Code},{id:"quirk",label:"Quirks & Gotchas",icon:m.AlertTriangle}];function q({projectPath:a,projectId:j,isParent:k,childProjectIds:l}){let m,[n,q]=(0,c.useState)([]),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)({convention_type:"naming",name:"",description:"",example:""});(0,c.useEffect)(()=>{E(a)},[a]),(0,c.useEffect)(()=>{D()},[j,k,l]);let D=async()=>{try{let b=k&&l?.length?l:[j],c=[];for(let a of b){let b=await fetch(`/project-management/api/project-paths?project_id=${a}`),d=await b.json();d.success&&d.paths&&d.paths.forEach(a=>c.push(a.path))}0===c.length&&c.push(a),s(c)}catch(b){console.error("Error fetching project paths:",b),s([a])}},E=async a=>{if(a){u(!0);try{let b=await fetch(`/project-management/api/conventions?project_path=${encodeURIComponent(a)}`),c=await b.json();c.success&&c.conventions&&q(c.conventions)}catch(a){console.error("Error fetching conventions:",a)}finally{u(!1)}}},F=async()=>{try{let a=[];for(let b of r){let c=await fetch(`/project-management/api/conventions?project_path=${encodeURIComponent(b)}`),d=await c.json();d.success&&d.conventions&&a.push(...d.conventions)}q(a)}catch(a){console.error("Error fetching conventions:",a)}finally{u(!1)}},G=async()=>{if(B.name.trim())try{let b=z?`/project-management/api/conventions/${z}`:"/project-management/api/conventions",c=await fetch(b,{method:z?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_path:a,...B})});(await c.json()).success&&(F(),I())}catch(a){console.error("Error saving convention:",a)}},H=async a=>{if(confirm("Delete this convention?"))try{let b=await fetch(`/project-management/api/conventions/${a}`,{method:"DELETE"});(await b.json()).success&&F()}catch(a){console.error("Error deleting convention:",a)}},I=()=>{y(!1),A(null),C({convention_type:"naming",name:"",description:"",example:""})},J="all"===v?n:n.filter(a=>a.convention_type===v),K=(m={all:n.length},p.slice(1).forEach(a=>{m[a.id]=n.filter(b=>b.convention_type===a.id).length}),m);return t?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin text-2xl",children:""})}):(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Coding Conventions"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Help Claude understand project patterns and maintain consistency"})]}),(0,b.jsxs)("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4"}),"Add Convention"]})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:p.map(a=>{let c=a.icon;return(0,b.jsxs)("button",{onClick:()=>w(a.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors ${v===a.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[(0,b.jsx)(c,{className:"w-4 h-4"}),a.label,(0,b.jsx)("span",{className:"ml-1 px-1.5 py-0.5 bg-black/20 rounded text-xs",children:K[a.id]||0})]},a.id)})}),x&&(0,b.jsxs)("div",{className:"mb-4 p-4 bg-gray-800 rounded-lg border border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"text-white font-medium",children:z?"Edit Convention":"Add Convention"}),(0,b.jsx)("button",{onClick:I,className:"text-gray-400 hover:text-white",children:(0,b.jsx)(g.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Category"}),(0,b.jsx)("select",{value:B.convention_type,onChange:a=>C({...B,convention_type:a.target.value}),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm",children:p.slice(1).map(a=>(0,b.jsx)("option",{value:a.id,children:a.label},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Pattern/Rule Name"}),(0,b.jsx)("input",{type:"text",value:B.name,onChange:a=>C({...B,name:a.target.value}),placeholder:"e.g., Component files use PascalCase",className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:B.description,onChange:a=>C({...B,description:a.target.value}),placeholder:"Explain the convention...",rows:2,className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Example"}),(0,b.jsx)("textarea",{value:B.example,onChange:a=>C({...B,example:a.target.value}),placeholder:"Code example...",rows:2,className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm font-mono"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:I,className:"px-4 py-2 text-gray-400 hover:text-white text-sm",children:"Cancel"}),(0,b.jsxs)("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",children:[(0,b.jsx)(h.Save,{className:"w-4 h-4"}),z?"Update":"Save"]})]})]})]}),0===J.length?(0,b.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,b.jsx)(i.BookOpen,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No conventions documented yet."}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Add conventions to help Claude maintain consistency."})]}):(0,b.jsx)("div",{className:"space-y-3",children:J.map(a=>{let c,d,g,h,i;return(0,b.jsx)("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-700",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-300 text-xs rounded",children:p.find(b=>b.id===a.convention_type)?.label||a.convention_type}),(0,b.jsxs)("span",{className:"flex items-center gap-1 text-gray-500 text-xs",children:[(0,b.jsx)(o.Clock,{className:"w-3 h-3"}),(c=new Date(a.created_at),g=Math.floor((d=new Date().getTime()-c.getTime())/6e4),h=Math.floor(d/36e5),i=Math.floor(d/864e5),g<60?`${g}m ago`:h<24?`${h}h ago`:i<7?`${i}d ago`:c.toLocaleDateString("en-US",{month:"short",day:"numeric"}))]})]}),(0,b.jsx)("h4",{className:"text-white font-medium",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:a.description}),a.example&&(0,b.jsx)("pre",{className:"mt-2 p-2 bg-gray-900 rounded text-sm text-gray-300 font-mono overflow-x-auto",children:a.example})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 ml-4",children:[(0,b.jsx)("button",{onClick:()=>{A(a.id),C({convention_type:a.convention_type||"naming",name:a.name,description:a.description||"",example:a.example||""}),y(!0)},className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded",children:(0,b.jsx)(e.Edit2,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>H(a.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-gray-700 rounded",children:(0,b.jsx)(f.Trash2,{className:"w-4 h-4"})})]})]})},a.id)})})]})}a.s(["default",()=>q],31452)},55921,a=>{"use strict";var b=a.i(18030),c=a.i(30072),d=a.i(68471),e=a.i(82239),f=a.i(30587),g=a.i(59539),h=a.i(32808),i=a.i(41848),j=a.i(59089),k=a.i(23379),l=a.i(57977),m=a.i(81338);let n=(0,m.default)("scale",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]]),o=(0,m.default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var p=a.i(51684),q=a.i(12583),r=a.i(17800),s=a.i(96591);let t={"Work Log":{label:"Work Log",icon:l.FileText,color:"bg-blue-600/20 text-blue-400 border-blue-500",activeColor:"bg-blue-600 text-white",description:"What was done, when, by who"},Ideas:{label:"Ideas",icon:k.Lightbulb,color:"bg-yellow-600/20 text-yellow-400 border-yellow-500",activeColor:"bg-yellow-600 text-white",description:"Future features, improvements"},Decisions:{label:"Decisions",icon:n,color:"bg-purple-600/20 text-purple-400 border-purple-500",activeColor:"bg-purple-600 text-white",description:"Why things were built this way"},Journal:{label:"Journal",icon:o,color:"bg-green-600/20 text-green-400 border-green-500",activeColor:"bg-green-600 text-white",description:"Session notes and learnings"}},u=["Work Log","Ideas","Decisions","Journal"];function v({projectPath:a,projectId:k,projectName:l,isParent:m,childProjectIds:n}){let[o,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)({}),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)("Work Log"),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(new Set),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)({category:"Work Log",title:"",content:"",author:""});(0,c.useEffect)(()=>{S(a)},[a]),(0,c.useEffect)(()=>{Q()},[k]);let Q=async()=>{try{let b=m&&n?.length?n:[k],c=[];for(let a of b){let b=await fetch(`/project-management/api/project-paths?project_id=${a}`),d=await b.json();d.success&&d.paths&&c.push(...d.paths)}if(0===c.length&&a){let b={id:"virtual-main",project_id:k,path:a,label:a.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};c.push(b)}v(c);let d=c.find(b=>b.path===a);d?x(d):c.length>0&&x(c[0])}catch(a){console.error("Error fetching project paths:",a)}},R=async(a,b)=>{let c=o.findIndex(b=>b.id===a);if(-1===c)return;let d="up"===b?c-1:c+1;if(d<0||d>=o.length)return;let e=o[c],f=o[d],g=[...o];g[c]={...f,sort_order:e.sort_order},g[d]={...e,sort_order:f.sort_order},g.sort((a,b)=>(a.sort_order||0)-(b.sort_order||0)),v(g);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,sort_order:f.sort_order||d})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:f.id,sort_order:e.sort_order||c})})])}catch(a){console.error("Error moving folder:",a),Q()}},S=async a=>{if(a){D(!0);try{let b=a.startsWith("/")?a.slice(1):a,c=await fetch(`/project-management/api/clair/knowledge/${b}`),d=await c.json();d.success&&(z(d.entries||[]),B(d.grouped||{}))}catch(a){console.error("Error fetching knowledge:",a)}finally{D(!1)}}},T=async()=>{if(O.title&&O.content&&w)try{let a=w.path.startsWith("/")?w.path.slice(1):w.path,b=M?`/project-management/api/clair/knowledge/${a}/${M.id}`:`/project-management/api/clair/knowledge/${a}`,c=M?"PATCH":"POST";await fetch(b,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(O)}),W(),S(w.path)}catch(a){console.error("Error saving entry:",a)}},U=async b=>{if(confirm("Delete this entry?"))try{let c=a.startsWith("/")?a.slice(1):a;await fetch(`/project-management/api/clair/knowledge/${c}/${b.id}`,{method:"DELETE"}),S(a)}catch(a){console.error("Error deleting entry:",a)}},V=a=>{N(a),P({category:a.category,title:a.title,content:a.content,author:a.author||""}),L(!0)},W=()=>{L(!1),N(null),P({category:E,title:"",content:"",author:""})},X=(A[E]||[]).filter(a=>{if(!G)return!0;let b=G.toLowerCase();return a.title.toLowerCase().includes(b)||a.content.toLowerCase().includes(b)}),Y=t[E]||t["Work Log"],Z=Y.icon;return(0,b.jsxs)("div",{className:"flex h-full gap-4",children:[(0,b.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,b.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,b.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===o.length?(0,b.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,b.jsx)(s.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{children:"No folders linked"})]}):(0,b.jsx)("div",{className:"divide-y divide-gray-700",children:o.map((a,c)=>(0,b.jsxs)("div",{className:`p-3 cursor-pointer group ${w?.id===a.id?"bg-purple-600/20 border-l-2 border-purple-500":"hover:bg-gray-750"}`,onClick:()=>x(a),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),R(a.id,"up")},disabled:0===c,className:`p-0.5 rounded ${0===c?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,b.jsx)(i.ChevronUp,{className:"w-3 h-3"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),R(a.id,"down")},disabled:c===o.length-1,className:`p-0.5 rounded ${c===o.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,b.jsx)(g.ChevronDown,{className:"w-3 h-3"})})]}),(0,b.jsx)(s.FolderOpen,{className:`w-4 h-4 ${w?.id===a.id?"text-purple-400":"text-yellow-400"}`}),(0,b.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:a.label})]}),(0,b.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:a.path.split("/").pop()})]},a.id))})})]}),(0,b.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden flex flex-col",children:w?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"border-b border-gray-700",children:[(0,b.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Brain,{className:"w-5 h-5 text-purple-400"}),(0,b.jsxs)("h3",{className:"text-white font-semibold",children:[l||w?.label||"Project"," Knowledge"]}),(0,b.jsxs)("span",{className:"text-gray-500 text-sm",children:["(",y.length," entries)"]})]}),(0,b.jsxs)("button",{onClick:()=>{P({...O,category:E}),L(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:[(0,b.jsx)(j.Plus,{className:"w-4 h-4"}),"Add Entry"]})]}),(0,b.jsx)("div",{className:"flex px-3 -mb-px",children:u.map(a=>{let c=t[a]||t["Work Log"],d=c.icon,e=A[a]?.length||0,f=E===a;return(0,b.jsxs)("button",{onClick:()=>F(a),className:`flex items-center gap-1.5 px-4 py-2.5 text-sm font-medium border-b-2 transition-colors ${f?`${c.activeColor} border-current`:"text-gray-400 border-transparent hover:text-white hover:border-gray-600"}`,children:[(0,b.jsx)(d,{className:"w-4 h-4"}),c.label,(0,b.jsx)("span",{className:`ml-1 px-1.5 py-0.5 rounded text-xs ${f?"bg-white/20":"bg-gray-700"}`,children:e})]},a)})})]}),(0,b.jsxs)("div",{className:`px-4 py-2 text-sm ${Y.color} border-b border-gray-700`,children:[(0,b.jsx)(Z,{className:"w-4 h-4 inline mr-2"}),Y.description]}),K&&(0,b.jsxs)("div",{className:"p-4 border-b border-gray-700 bg-gray-750 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h4",{className:"text-white font-medium",children:M?"Edit Entry":`New ${(t[O.category]||t["Work Log"]).label} Entry`}),(0,b.jsx)("button",{onClick:W,className:"text-gray-500 hover:text-white",children:(0,b.jsx)(p.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("select",{value:O.category,onChange:a=>P(b=>({...b,category:a.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:u.map(a=>(0,b.jsx)("option",{value:a,children:(t[a]||{}).label||a},a))}),(0,b.jsx)("input",{type:"text",placeholder:"Author (optional)",value:O.author,onChange:a=>P(b=>({...b,author:a.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"})]}),(0,b.jsx)("input",{type:"text",placeholder:"Title",value:O.title,onChange:a=>P(b=>({...b,title:a.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,b.jsx)("textarea",{placeholder:"Content...",value:O.content,onChange:a=>P(b=>({...b,content:a.target.value})),rows:4,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none"}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:W,className:"px-3 py-1.5 text-gray-400 hover:text-white",children:"Cancel"}),(0,b.jsx)("button",{onClick:T,className:"px-4 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:M?"Update":"Save"})]})]}),(0,b.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),(0,b.jsx)("input",{type:"text",placeholder:`Search ${Y.label.toLowerCase()}...`,value:G,onChange:a=>H(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 text-sm"})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:C?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(d.Brain,{className:"w-6 h-6 text-purple-400 animate-pulse"})}):0===X.length?(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)(Z,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,b.jsxs)("p",{children:["No ",Y.label.toLowerCase()," entries"]}),(0,b.jsx)("p",{className:"text-sm mt-1",children:Y.description})]}):(0,b.jsx)("div",{className:"space-y-2",children:X.map(a=>{let c;return(0,b.jsxs)("div",{className:"bg-gray-750 border border-gray-700 rounded-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-3 cursor-pointer hover:bg-gray-700 flex items-start gap-3",onClick:()=>{var b;return b=a.id,void J(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},children:[(0,b.jsx)("button",{className:"text-gray-500 mt-0.5",children:I.has(a.id)?(0,b.jsx)(g.ChevronDown,{className:"w-4 h-4"}):(0,b.jsx)(h.ChevronRight,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("span",{className:"text-white font-medium",children:a.title}),!I.has(a.id)&&(0,b.jsx)("p",{className:"text-gray-400 text-sm truncate mt-1",children:a.content})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs whitespace-nowrap",children:[a.author&&(0,b.jsx)("span",{className:"text-gray-600",children:a.author}),(0,b.jsx)(f.Clock,{className:"w-3 h-3"}),(c=new Date(a.created_at)).toLocaleDateString()+" "+c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),V(a)},className:"p-1 text-gray-500 hover:text-white hover:bg-gray-600 rounded",children:(0,b.jsx)(q.Edit2,{className:"w-3 h-3"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),U(a)},className:"p-1 text-gray-500 hover:text-red-400 hover:bg-gray-600 rounded",children:(0,b.jsx)(r.Trash2,{className:"w-3 h-3"})})]})]}),I.has(a.id)&&(0,b.jsxs)("div",{className:"px-10 pb-3 border-t border-gray-700 pt-3",children:[(0,b.jsx)("p",{className:"text-gray-300 text-sm whitespace-pre-wrap",children:a.content}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,b.jsxs)("button",{onClick:()=>V(a),className:"text-xs text-gray-500 hover:text-white flex items-center gap-1",children:[(0,b.jsx)(q.Edit2,{className:"w-3 h-3"})," Edit"]}),(0,b.jsxs)("button",{onClick:()=>U(a),className:"text-xs text-gray-500 hover:text-red-400 flex items-center gap-1",children:[(0,b.jsx)(r.Trash2,{className:"w-3 h-3"})," Delete"]})]})]})]},a.id)})})})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(d.Brain,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"Select a folder to view knowledge"})]})})})]})}a.s(["default",()=>v],55921)}];

//# sourceMappingURL=Studio_kodiack-dashboard-5500_9b075921._.js.map