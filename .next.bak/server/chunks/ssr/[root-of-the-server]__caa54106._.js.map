{"version":3,"sources":["../../../../../../Studio/kodiack-dashboard-5500/src/app/servers/tradelines/api.ts","../../../../../../Studio/kodiack-dashboard-5500/src/app/servers/tradelines/components/TradelinesClient.tsx/__nextjs-internal-proxy.mjs","../../../../../../Studio/kodiack-dashboard-5500/src/app/servers/tradelines/page.tsx"],"sourcesContent":["/**\r\n * Tradelines API - 7101 Engine Patcher\r\n *\r\n * All API calls specific to tradeline servers.\r\n * Database tables: security_, lowvoltage_, landscaping_, etc. (per tradeline)\r\n */\r\n\r\nconst PATCHER_URL = process.env.PATCHER_ENGINE_URL || 'http://134.199.209.140:7101';\r\n\r\nasync function callApi<T = unknown>(\r\n  endpoint: string,\r\n  method: 'GET' | 'POST' | 'PUT' | 'DELETE' = 'GET',\r\n  data?: unknown\r\n): Promise<T> {\r\n  const config: RequestInit = {\r\n    method,\r\n    headers: { 'Content-Type': 'application/json' },\r\n  };\r\n\r\n  if (data && (method === 'POST' || method === 'PUT')) {\r\n    config.body = JSON.stringify(data);\r\n  }\r\n\r\n  const response = await fetch(`${PATCHER_URL}${endpoint}`, config);\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`Tradelines API error: ${response.statusText}`);\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\n// ============================================================\r\n// SERVER CONTROL\r\n// ============================================================\r\n\r\nexport const startTradeline = (tradeline: string) =>\r\n  callApi(`/server/start/${tradeline}`, 'POST');\r\n\r\nexport const stopTradeline = (tradeline: string) =>\r\n  callApi(`/server/stop/${tradeline}`, 'POST');\r\n\r\nexport const restartTradeline = (tradeline: string) =>\r\n  callApi(`/server/restart/${tradeline}`, 'POST');\r\n\r\nexport const launchAll = () =>\r\n  callApi('/server/launch-all', 'POST');\r\n\r\nexport const stopAll = () =>\r\n  callApi('/server/stop-all', 'POST');\r\n\r\nexport const restartAll = () =>\r\n  callApi('/server/restart-all', 'POST');\r\n\r\n// ============================================================\r\n// STATUS & HEALTH\r\n// ============================================================\r\n\r\nexport const getHealthAll = () =>\r\n  callApi('/server/health-all');\r\n\r\nexport const getStatus = (tradeline: string) =>\r\n  callApi(`/server/status/${tradeline}`);\r\n\r\nexport const getTradelines = () =>\r\n  callApi('/tradelines');\r\n\r\nexport const getRegistryStats = () =>\r\n  callApi('/registry/stats');\r\n\r\n// ============================================================\r\n// LOGS\r\n// ============================================================\r\n\r\nexport const getLogs = (tradeline: string, lines = 100) =>\r\n  callApi(`/server/logs/${tradeline}?lines=${lines}`);\r\n\r\n// ============================================================\r\n// CONFIG\r\n// ============================================================\r\n\r\nexport const getConfig = (tradeline: string) =>\r\n  callApi(`/config/${tradeline}`);\r\n\r\nexport const pushConfig = (tradeline: string, config: unknown) =>\r\n  callApi(`/config/${tradeline}`, 'POST', config);\r\n\r\n// ============================================================\r\n// DEPLOYMENT\r\n// ============================================================\r\n\r\nexport const deploy = (tradeline: string, options?: unknown) =>\r\n  callApi(`/patch/${tradeline}`, 'POST', options);\r\n\r\nexport const deployAll = (options?: unknown) =>\r\n  callApi('/patch/all', 'POST', options);\r\n\r\nexport const getHistory = (limit = 20) =>\r\n  callApi(`/history?limit=${limit}`);\r\n\r\n// ============================================================\r\n// DEV SYNC\r\n// ============================================================\r\n\r\nexport const getDevStatus = () =>\r\n  callApi('/dev/status');\r\n\r\nexport const devPull = () =>\r\n  callApi('/dev/pull', 'POST');\r\n\r\nexport const devCompare = () =>\r\n  callApi('/dev/compare', 'POST');\r\n\r\nexport const devPush = () =>\r\n  callApi('/dev/push', 'POST');\r\n\r\nexport const devPushTradeline = (tradeline: string) =>\r\n  callApi(`/dev/push/${tradeline}`, 'POST');\r\n\r\nexport const devSyncDeploy = () =>\r\n  callApi('/dev/sync-deploy', 'POST');\r\n\r\n// ============================================================\r\n// CREDENTIALS\r\n// ============================================================\r\n\r\nexport const getCredentialsSummary = () =>\r\n  callApi('/credentials/summary');\r\n\r\nexport const getCredentials = (tradeline: string, raw = false) =>\r\n  callApi(`/credentials/${tradeline}${raw ? '?raw=true' : ''}`);\r\n\r\nexport const updateCredentials = (tradeline: string, credentials: unknown) =>\r\n  callApi(`/credentials/${tradeline}`, 'PUT', credentials);\r\n\r\n// ============================================================\r\n// TRADELINE DATA\r\n// ============================================================\r\n\r\nexport const getNAICSCodes = () =>\r\n  callApi('/naics');\r\n\r\nexport const getPSCCodes = () =>\r\n  callApi('/psc');\r\n\r\nexport const getUNSPSCCodes = () =>\r\n  callApi('/unspsc');\r\n\r\nexport const getKeywords = () =>\r\n  callApi('/keywords');\r\n\r\nexport const getApis = () =>\r\n  callApi('/apis');\r\n\r\n// ============================================================\r\n// ANALYTICS (Supabase via Dashboard API)\r\n// ============================================================\r\n\r\nexport async function getEngineAnalytics() {\r\n  const res = await fetch('/api/dev-controls/analytics/engine', {\r\n    cache: 'no-store',\r\n  });\r\n  return res.json();\r\n}\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Studio/kodiack-dashboard-5500/src/app/servers/tradelines/components/TradelinesClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Studio/kodiack-dashboard-5500/src/app/servers/tradelines/components/TradelinesClient.tsx\",\n    \"default\",\n);\n","import { getHealthAll, getTradelines, getEngineAnalytics } from './api';\r\nimport TradelinesClient from './components/TradelinesClient';\r\n\r\nexport default async function TradelinesPage() {\r\n  let healthAll: any = { success: false, tradelines: {} };\r\n  let tradelines: any[] = [];\r\n  let analytics: any = null;\r\n  let error: string | null = null;\r\n\r\n  try {\r\n    const [healthRes, tradelinesRes, analyticsRes] = await Promise.all([\r\n      getHealthAll().catch(() => ({ success: false, tradelines: {} })),\r\n      getTradelines().catch(() => ({ tradelines: [] })),\r\n      getEngineAnalytics().catch(() => ({ success: false, data: null }))\r\n    ]);\r\n\r\n    healthAll = healthRes;\r\n    tradelines = (tradelinesRes as any).tradelines || [];\r\n    analytics = analyticsRes?.data || null;\r\n  } catch (e) {\r\n    error = (e as Error).message;\r\n  }\r\n\r\n  return (\r\n    <TradelinesClient\r\n      tradelines={tradelines}\r\n      healthAll={healthAll}\r\n      analytics={analytics}\r\n      initialError={error}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":"kUAOA,IAAM,EAAc,QAAQ,GAAG,CAAC,kBAAkB,EAAI,8BAEtD,eAAe,EACb,CAAgB,CAChB,EAA4C,KAAK,CACjD,CAAc,EAEd,IAAM,EAAsB,QAC1B,EACA,QAAS,CAAE,eAAgB,kBAAmB,CAChD,EAEI,IAAS,AAAW,IAAZ,QAAiC,QAAX,CAAW,CAAK,GAChD,AADmD,EAC5C,IAAI,CAAG,KAAK,SAAS,CAAC,EAAA,EAG/B,IAAM,EAAW,MAAM,MAAM,CAAA,EAAG,EAAA,EAAc,EAAA,CAAU,CAAE,GAE1D,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,CAAC,sBAAsB,EAAE,EAAS,UAAU,CAAA,CAAE,EAGhE,OAAO,EAAS,IAAI,EACtB,CAgIO,eAAe,IAIpB,MAAO,CAHK,MAAM,MAAM,qCAAsC,CAC5D,MAAO,UACT,EAAA,EACW,IAAI,EACjB,oBAlFyB,AAAC,GACxB,EAAQ,CAAC,QAAQ,EAAE,EAAA,CAAW,8CAxBJ,IAC1B,EAAQ,oCAEe,AAAC,GACxB,EAAQ,CAAC,eAAe,EAAE,EAAA,CAAW,oBAEV,IAC3B,EAAQ,+CC/DK,CAAA,EADf,AACe,EADf,CAAA,CAAA,MACe,uBAAA,AAAuB,EAClC,WAAa,MAAU,AAAJ,MAAU,0VAA4V,EACzX,yHACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,MACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,sUAAwU,EACrW,qGACA,oICLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,IAC5B,IAAI,EAAiB,CAAE,SAAS,EAAO,WAAY,CAAC,CAAE,EAClD,EAAoB,EAAE,CACtB,EAAiB,KACjB,EAAuB,KAE3B,GAAI,CACF,GAAM,CAAC,EAAW,EAAe,EAAa,CAAG,MAAM,QAAQ,GAAG,CAAC,CACjE,CAAA,EAAA,EAAA,YAAA,AAAY,IAAG,KAAK,CAAC,IAAM,CAAC,CAAE,SAAS,EAAO,WAAY,CAAC,CAAE,CAAC,GAC9D,CAAA,EAAA,EAAA,aAAA,AAAa,IAAG,KAAK,CAAC,IAAM,CAAC,CAAE,WAAY,EAAE,CAAC,CAAC,EAC/C,CAAA,EAAA,EAAA,kBAAA,AAAkB,IAAG,KAAK,CAAC,IAAM,CAAC,CAAE,SAAS,EAAO,KAAM,KAAK,CAAC,EACjE,EAED,EAAY,EACZ,EAAc,EAAsB,UAAU,EAAI,EAAE,CACpD,EAAY,GAAc,MAAQ,IACpC,CAAE,MAAO,EAAG,CACV,EAAS,EAAY,OAAO,AAC9B,CAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAgB,CAAA,CACf,WAAY,EACZ,UAAW,EACX,UAAW,EACX,aAAc,GAGpB","ignoreList":[1]}