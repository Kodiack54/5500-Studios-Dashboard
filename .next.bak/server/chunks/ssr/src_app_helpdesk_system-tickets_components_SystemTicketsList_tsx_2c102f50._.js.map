{"version":3,"sources":["../../../../src/app/helpdesk/system-tickets/components/SystemTicketsList.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\n\r\ninterface SystemTicket {\r\n  id: string;\r\n  title: string;\r\n  description?: string;\r\n  status: 'open' | 'in_progress' | 'resolved' | 'closed';\r\n  priority: 'low' | 'normal' | 'high' | 'critical';\r\n  type: 'bug' | 'feature' | 'improvement' | 'task';\r\n  project: string;\r\n  assignee?: string;\r\n  reporter: string;\r\n  labels?: string[];\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\ninterface Project {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface SystemTicketsListProps {\r\n  tickets: SystemTicket[];\r\n  projects: Project[];\r\n}\r\n\r\nexport default function SystemTicketsList({ tickets, projects }: SystemTicketsListProps) {\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [priorityFilter, setPriorityFilter] = useState<string>('all');\r\n  const [projectFilter, setProjectFilter] = useState<string>('all');\r\n  const [typeFilter, setTypeFilter] = useState<string>('all');\r\n  const [search, setSearch] = useState('');\r\n\r\n  const filteredTickets = tickets.filter((ticket) => {\r\n    if (statusFilter !== 'all' && ticket.status !== statusFilter) return false;\r\n    if (priorityFilter !== 'all' && ticket.priority !== priorityFilter) return false;\r\n    if (projectFilter !== 'all' && ticket.project !== projectFilter) return false;\r\n    if (typeFilter !== 'all' && ticket.type !== typeFilter) return false;\r\n    if (search && !ticket.title.toLowerCase().includes(search.toLowerCase())) return false;\r\n    return true;\r\n  });\r\n\r\n  const priorityColors: Record<string, string> = {\r\n    low: 'bg-gray-500/20 text-gray-400 border-gray-500/30',\r\n    normal: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\r\n    high: 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',\r\n    critical: 'bg-red-500/20 text-red-400 border-red-500/30',\r\n  };\r\n\r\n  const statusColors: Record<string, string> = {\r\n    open: 'bg-blue-500/20 text-blue-400',\r\n    in_progress: 'bg-yellow-500/20 text-yellow-400',\r\n    resolved: 'bg-green-500/20 text-green-400',\r\n    closed: 'bg-gray-500/20 text-gray-400',\r\n  };\r\n\r\n  const typeIcons: Record<string, string> = {\r\n    bug: 'ðŸ›',\r\n    feature: 'âœ¨',\r\n    improvement: 'ðŸ“ˆ',\r\n    task: 'ðŸ“‹',\r\n  };\r\n\r\n  const getTimeSince = (dateStr: string) => {\r\n    const date = new Date(dateStr);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\r\n\r\n    if (diffDays === 0) return 'Today';\r\n    if (diffDays === 1) return 'Yesterday';\r\n    if (diffDays < 7) return `${diffDays} days ago`;\r\n    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;\r\n    return `${Math.floor(diffDays / 30)} months ago`;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Filters */}\r\n      <div className=\"bg-gray-800 border border-gray-700 rounded-xl p-4 mb-6\">\r\n        <div className=\"flex flex-wrap items-center gap-4\">\r\n          {/* Search */}\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search tickets...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            className=\"flex-1 min-w-[200px] bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-sm text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none\"\r\n          />\r\n\r\n          {/* Status */}\r\n          <select\r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n            className=\"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 focus:outline-none\"\r\n          >\r\n            <option value=\"all\">All Status</option>\r\n            <option value=\"open\">Open</option>\r\n            <option value=\"in_progress\">In Progress</option>\r\n            <option value=\"resolved\">Resolved</option>\r\n            <option value=\"closed\">Closed</option>\r\n          </select>\r\n\r\n          {/* Priority */}\r\n          <select\r\n            value={priorityFilter}\r\n            onChange={(e) => setPriorityFilter(e.target.value)}\r\n            className=\"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 focus:outline-none\"\r\n          >\r\n            <option value=\"all\">All Priority</option>\r\n            <option value=\"critical\">Critical</option>\r\n            <option value=\"high\">High</option>\r\n            <option value=\"normal\">Normal</option>\r\n            <option value=\"low\">Low</option>\r\n          </select>\r\n\r\n          {/* Type */}\r\n          <select\r\n            value={typeFilter}\r\n            onChange={(e) => setTypeFilter(e.target.value)}\r\n            className=\"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 focus:outline-none\"\r\n          >\r\n            <option value=\"all\">All Types</option>\r\n            <option value=\"bug\">Bug</option>\r\n            <option value=\"feature\">Feature</option>\r\n            <option value=\"improvement\">Improvement</option>\r\n            <option value=\"task\">Task</option>\r\n          </select>\r\n\r\n          {/* Project */}\r\n          <select\r\n            value={projectFilter}\r\n            onChange={(e) => setProjectFilter(e.target.value)}\r\n            className=\"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 focus:outline-none\"\r\n          >\r\n            <option value=\"all\">All Projects</option>\r\n            {projects.map((p) => (\r\n              <option key={p.id} value={p.id}>{p.name}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Quick Filters */}\r\n        <div className=\"flex gap-2 mt-3\">\r\n          <button\r\n            onClick={() => { setStatusFilter('open'); setPriorityFilter('critical'); }}\r\n            className=\"px-3 py-1 text-xs rounded-lg bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500 hover:text-white transition-colors\"\r\n          >\r\n            Critical Only\r\n          </button>\r\n          <button\r\n            onClick={() => { setStatusFilter('open'); setTypeFilter('bug'); }}\r\n            className=\"px-3 py-1 text-xs rounded-lg bg-orange-500/15 text-orange-400 border border-orange-500/30 hover:bg-orange-500 hover:text-white transition-colors\"\r\n          >\r\n            Open Bugs\r\n          </button>\r\n          <button\r\n            onClick={() => { setStatusFilter('all'); setPriorityFilter('all'); setTypeFilter('all'); setProjectFilter('all'); setSearch(''); }}\r\n            className=\"px-3 py-1 text-xs rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors\"\r\n          >\r\n            Clear Filters\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Results Count */}\r\n      <div className=\"text-sm text-gray-400 mb-4\">\r\n        Showing {filteredTickets.length} of {tickets.length} tickets\r\n      </div>\r\n\r\n      {/* Tickets List */}\r\n      <div className=\"space-y-3\">\r\n        {filteredTickets.map((ticket) => (\r\n          <Link\r\n            key={ticket.id}\r\n            href={`/helpdesk/system-tickets/${ticket.id}`}\r\n            className=\"block bg-gray-800 border border-gray-700 rounded-xl p-4 hover:bg-blue-500/5 hover:border-blue-500/30 transition-colors\"\r\n          >\r\n            <div className=\"flex items-start gap-4\">\r\n              {/* Type Icon */}\r\n              <div className=\"text-2xl\">{typeIcons[ticket.type] || 'ðŸ“‹'}</div>\r\n\r\n              {/* Content */}\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <span className=\"font-medium text-white\">{ticket.title}</span>\r\n                  <span className={`text-xs px-2 py-0.5 rounded border ${priorityColors[ticket.priority]}`}>\r\n                    {ticket.priority}\r\n                  </span>\r\n                </div>\r\n\r\n                {ticket.description && (\r\n                  <div className=\"text-sm text-gray-500 mb-3 line-clamp-2\">\r\n                    {ticket.description}\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <span className={`text-xs px-2 py-0.5 rounded ${statusColors[ticket.status]}`}>\r\n                    {ticket.status.replace('_', ' ')}\r\n                  </span>\r\n                  <span className=\"text-xs bg-gray-700 text-gray-300 px-2 py-0.5 rounded\">\r\n                    {ticket.project}\r\n                  </span>\r\n                  {ticket.labels?.map((label) => (\r\n                    <span key={label} className=\"text-xs bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded\">\r\n                      {label}\r\n                    </span>\r\n                  ))}\r\n                  <span className=\"text-xs text-gray-600\">\r\n                    by {ticket.reporter}\r\n                  </span>\r\n                  {ticket.assignee && (\r\n                    <span className=\"text-xs text-gray-500\">\r\n                      â†’ {ticket.assignee}\r\n                    </span>\r\n                  )}\r\n                  <span className=\"text-xs text-gray-600 ml-auto\">\r\n                    {getTimeSince(ticket.created_at)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Link>\r\n        ))}\r\n\r\n        {filteredTickets.length === 0 && (\r\n          <div className=\"text-center py-12 text-gray-500\">\r\n            No tickets match your filters\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}