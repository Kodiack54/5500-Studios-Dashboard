module.exports=[45408,a=>{"use strict";let b=(0,a.i(81338).default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);a.s(["Rocket",()=>b],45408)},34734,a=>{"use strict";let b=process.env.NEXT_PUBLIC_ORCHESTRATOR_URL||"http://localhost:7100",c=process.env.NEXT_PUBLIC_TRADELINE_PATCHER_URL||"http://localhost:7101";async function d(a,b,c={}){let e=`${a}${b}`,f=await fetch(e,{...c,headers:{"Content-Type":"application/json",...c.headers},cache:"no-store"});if(!f.ok){let a=await f.json().catch(()=>({error:f.statusText}));throw Error(a.error||a.message||`API Error: ${f.status}`)}return f.json()}async function e(a=20){return d(b,`/deploy/jobs?limit=${a}`)}async function f(){return d(c,"/server/health-all")}async function g(){return d(c,"/dev/status")}async function h(){return d(c,"/dev/pull",{method:"POST"})}async function i(){return d(c,"/dev/compare",{method:"POST"})}async function j(){return d(c,"/dev/diff")}async function k(){return d(c,"/dev/push",{method:"POST"})}async function l(a){return d(c,`/dev/push/${a}`,{method:"POST"})}async function m(){return d(c,"/dev/push-all",{method:"POST"})}async function n(){return d(c,"/dev/sync-deploy",{method:"POST"})}async function o(a){return e(a?.limit||20)}async function p(){try{return(await fetch("/api/dev-controls/analytics/engine",{cache:"no-store"})).json()}catch(a){return{success:!1,error:a.message}}}async function q(){try{return(await fetch("/api/deploy/dev-environment",{cache:"no-store"})).json()}catch(a){return{success:!1,error:a.message}}}a.s(["compareDevProd",()=>i,"fullSyncDeploy",()=>n,"getDeployments",()=>o,"getDevDiff",()=>j,"getDevEnvironmentStatus",()=>q,"getDevStatus",()=>g,"getEngineAnalytics",()=>p,"getHealthAll",()=>f,"gitPullDev",()=>h,"pushDevToAllTradelines",()=>m,"pushDevToProd",()=>k,"pushDevToTradeline",()=>l])},17361,a=>{"use strict";var b=a.i(18030),c=a.i(30072),d=a.i(51679),e=a.i(45408),f=a.i(34734),g=a.i(3159);function h({deployments:a}){let[d,e]=(0,c.useState)("all"),[f,h]=(0,c.useState)("all"),i=a.filter(a=>("all"===d||a.project===d)&&("all"===f||a.environment===f)),j={pending:"bg-yellow-500/20 text-yellow-400",running:"bg-blue-500/20 text-blue-400",success:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400",rolled_back:"bg-orange-500/20 text-orange-400"},k={development:"border-gray-500/30",staging:"border-blue-500/30",production:"border-green-500/30"},l=[...new Set(a.map(a=>a.project))],m=async a=>{if(confirm("Are you sure you want to rollback this deployment?"))try{let b=await fetch(`/api/dev-controls/deployments/${a}/rollback`,{method:"POST"}),c=await b.json();c.success?(alert("Rollback initiated"),window.location.reload()):alert(c.error||"Rollback failed")}catch(a){alert(a.message)}};return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("select",{value:d,onChange:a=>e(a.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-green-500 focus:outline-none",children:[(0,b.jsx)("option",{value:"all",children:"All Projects"}),l.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsxs)("select",{value:f,onChange:a=>h(a.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-green-500 focus:outline-none",children:[(0,b.jsx)("option",{value:"all",children:"All Environments"}),(0,b.jsx)("option",{value:"development",children:"Development"}),(0,b.jsx)("option",{value:"staging",children:"Staging"}),(0,b.jsx)("option",{value:"production",children:"Production"})]})]})}),(0,b.jsxs)("div",{className:"space-y-3",children:[i.map(a=>(0,b.jsx)("div",{className:`bg-gray-800 border-l-4 ${k[a.environment]} border border-gray-700 rounded-xl p-4`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:"font-medium text-white",children:a.project}),(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${j[a.status]}`,children:a.status}),(0,b.jsx)("span",{className:"text-xs bg-gray-700 text-gray-300 px-2 py-0.5 rounded",children:a.environment})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-400 mb-1",children:["Branch: ",(0,b.jsx)("code",{className:"text-blue-400",children:a.branch}),a.commit&&(0,b.jsxs)("span",{children:[" @ ",(0,b.jsx)("code",{className:"text-purple-400",children:a.commit.slice(0,7)})]})]}),a.notes&&(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.notes})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:new Date(a.created_at).toLocaleString()}),(0,b.jsxs)("div",{className:"text-xs text-gray-600 mb-2",children:["by ",a.user]}),"success"===a.status&&"production"===a.environment&&(0,b.jsx)(g.RoleGate,{permission:"canPushToProd",children:(0,b.jsx)("button",{onClick:()=>m(a.id),className:"px-3 py-1 text-xs font-semibold rounded bg-orange-500/15 text-orange-400 border border-orange-500/30 hover:bg-orange-500 hover:text-white transition-colors",children:"Rollback"})})]})]})},a.id)),0===i.length&&(0,b.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No deployments found"})]})]})}var i=a.i(38270);function j(){let[a,g]=(0,c.useState)([]),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),n=(0,c.useContext)(i.PageTitleContext),o=(0,c.useContext)(i.PageActionsContext),p=async()=>{m(!0);try{let a=await (0,f.getDeployments)({limit:20});g(a?.jobs||[]),k(null)}catch(a){k(a.message)}finally{m(!1)}};return(0,c.useEffect)(()=>(n({title:"Deployments",description:"View and manage deployment history"}),o((0,b.jsx)("div",{className:"flex gap-1",children:(0,b.jsxs)(d.default,{href:"/dev-controls/releases",className:"flex items-center gap-1.5 px-3 py-1 bg-cyan-500/80 hover:bg-cyan-500 border border-black/30 rounded-lg text-white text-sm transition-colors",children:[(0,b.jsx)(e.Rocket,{className:"w-3.5 h-3.5"}),"New Deploy"]})})),()=>{o(null)}),[n,o]),(0,c.useEffect)(()=>{p()},[]),(0,b.jsxs)("div",{children:[j&&(0,b.jsxs)("div",{className:"bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-6",children:[(0,b.jsx)("strong",{children:"Error:"})," ",j]}),l?(0,b.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading deployments..."}):(0,b.jsx)(h,{deployments:a})]})}a.s(["default",()=>j],17361)}];

//# sourceMappingURL=Studio_kodiack-dashboard-5500_0ce99932._.js.map