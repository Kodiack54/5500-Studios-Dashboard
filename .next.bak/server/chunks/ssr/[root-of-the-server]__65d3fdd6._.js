module.exports=[25518,a=>{a.v({className:"geist_a71539c9-module__T19VSG__className",variable:"geist_a71539c9-module__T19VSG__variable"})},29269,a=>{a.v({className:"geist_mono_8d43a2aa-module__8Li5zG__className",variable:"geist_mono_8d43a2aa-module__8Li5zG__variable"})},5109,77375,58212,46842,27999,92e3,36267,a=>{"use strict";var b=a.i(25518);let c={className:b.default.className,style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"}};null!=b.default.variable&&(c.variable=b.default.variable),a.s(["default",0,c],5109);var d=a.i(29269);let e={className:d.default.className,style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"}};null!=d.default.variable&&(e.variable=d.default.variable),a.s(["default",0,e],77375),a.s(["default",()=>H],58212);var f=a.i(87924),g=a.i(72131),h=a.i(38246),i=a.i(50944),j=a.i(5784),k=a.i(70106);let l=(0,k.default)("door-open",[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]]);var m=a.i(210),n=a.i(67900),o=a.i(41710),p=a.i(10849);function q(){let a,b,[c,d]=(0,g.useState)(!1),[e,h]=(0,g.useState)(null),[i,j]=(0,g.useState)("clocked_out"),[k,l]=(0,g.useState)(null),[m,n]=(0,g.useState)(null),[q,r]=(0,g.useState)(0),[s,t]=(0,g.useState)(!1),[u,v]=(0,g.useState)(!1),[w,x]=(0,g.useState)(!1),y=(0,g.useRef)(null);async function z(){let{data:{user:a}}=await p.supabase.auth.getUser();if(a){let{data:b}=await p.supabase.from("dev_users").select("*").eq("id",a.id).single();h(b||{id:a.id,email:a.email})}}async function A(){if(!e)return;let a=new Date().toISOString().split("T")[0],{data:b}=await p.supabase.from("dev_time_punches").select("*").eq("user_id",e.id).gte("clock_in",`${a}T00:00:00`).is("clock_out",null).order("clock_in",{ascending:!1}).limit(1);if(b&&b.length>0){let a=b[0];l(a);let{data:d}=await p.supabase.from("dev_break_periods").select("*").eq("time_punch_id",a.id).is("break_end",null).order("break_start",{ascending:!1}).limit(1);if(d&&d.length>0){let a=d[0];n(a),j("lunch"===a.break_type?"on_lunch":"on_break")}else{var c;let b;n(null),j("working"),c=a,b=(new Date().getTime()-new Date(c.clock_in).getTime())/36e5,p.supabase.from("dev_break_periods").select("*").eq("time_punch_id",c.id).then(({data:a})=>{let c=a&&a.some(a=>"break"===a.break_type),d=a&&a.some(a=>"lunch"===a.break_type);t(!c&&b>=3),v(!d&&b>=5.5),x(!c&&b>=5.5)})}B()}else l(null),n(null),j("clocked_out"),t(!1),v(!1),x(!1)}function B(){k&&(m?r((new Date().getTime()-new Date(m.break_start).getTime())/1e3):r((new Date().getTime()-new Date(k.clock_in).getTime())/1e3))}function C(a){let b=Math.floor(a/3600),c=Math.floor(a%3600/60);return`${b}h ${c}m`}async function D(){if(!e)return;let{data:a,error:b}=await p.supabase.from("dev_time_punches").insert([{user_id:e.id,clock_in:new Date().toISOString(),status:"active"}]).select().single();if(b){console.error("Error clocking in:",b),alert("Error starting work");return}await A(),d(!1)}async function E(a="break"){if(!k)return;let{data:b,error:c}=await p.supabase.from("dev_break_periods").insert([{time_punch_id:k.id,break_start:new Date().toISOString(),break_type:a}]).select().single();if(c){console.error("Error starting break:",c),alert("Error starting break: "+c.message);return}await A(),d(!1)}async function F(){if(!m)return;let{error:a}=await p.supabase.from("dev_break_periods").update({break_end:new Date().toISOString()}).eq("id",m.id);if(a){console.error("Error ending break:",a),alert("Error ending break");return}await A(),d(!1)}async function G(){if(!k)return;m&&await p.supabase.from("dev_break_periods").update({break_end:new Date().toISOString()}).eq("id",m.id);let a=new Date,b=new Date(k.clock_in),{data:c}=await p.supabase.from("dev_break_periods").select("*").eq("time_punch_id",k.id),e=0;c&&c.forEach(a=>{if("lunch"===a.break_type&&a.break_start&&a.break_end){let b=new Date(a.break_start),c=new Date(a.break_end);e+=(c.getTime()-b.getTime())/6e4}});let f=(((a.getTime()-b.getTime())/6e4-e)/60).toFixed(2),{error:g}=await p.supabase.from("dev_time_punches").update({clock_out:a.toISOString(),total_hours:parseFloat(f),status:"completed"}).eq("id",k.id);if(g){console.error("Error clocking out:",g),alert("Error ending work");return}await A(),d(!1)}return(0,g.useEffect)(()=>{z()},[]),(0,g.useEffect)(()=>{if(e){A();let a=setInterval(A,3e4);return()=>clearInterval(a)}},[e]),(0,g.useEffect)(()=>{if(k&&"clocked_out"!==i){let a=setInterval(()=>{B()},1e3);return()=>clearInterval(a)}},[k,i]),(0,g.useEffect)(()=>{function a(a){y.current&&!y.current.contains(a.target)&&d(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,f.jsxs)("div",{className:"relative",ref:y,children:[(0,f.jsxs)("button",{onClick:()=>d(!c),className:(a="w-10 h-10 rounded-xl flex items-center justify-center transition-all",w?`${a} bg-red-500/20 hover:bg-red-500/30 border border-red-500/50`:s||u?`${a} bg-orange-500/20 hover:bg-orange-500/30 border border-orange-500/50`:"on_break"===i||"on_lunch"===i?`${a} bg-sky-500/20 hover:bg-sky-500/30 border border-sky-500/50`:"working"===i?`${a} bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-500/50`:`${a} bg-gray-700 hover:bg-gray-600 border border-gray-600`),title:"clocked_out"===i?"Time Clock - Not clocked in":"working"===i?`Working - ${C(q)}${s?" - Break time!":""}${u?" - Lunch time!":""}${w?" - OVERDUE!":""}`:"on_break"===i?`On Break - ${C(q)}`:`On Lunch - ${C(q)}`,children:[(0,f.jsx)(o.Clock,{className:(b="w-5 h-5 transition-colors",w?`${b} text-red-400 animate-pulse`:s||u?`${b} text-orange-400 animate-pulse`:"on_break"===i||"on_lunch"===i?`${b} text-sky-400`:"working"===i?`${b} text-emerald-400`:`${b} text-gray-400`)}),(s||u||w)&&(0,f.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-orange-500 rounded-full animate-pulse"})]}),c&&(0,f.jsxs)("div",{className:"absolute right-0 mt-2 w-72 bg-gray-800 rounded-xl shadow-xl border border-gray-700 overflow-hidden z-50",children:["clocked_out"===i&&(0,f.jsxs)("div",{className:"p-4",children:[(0,f.jsx)("div",{className:"text-sm text-gray-400 mb-3 text-center",children:"Not clocked in"}),(0,f.jsxs)("button",{onClick:D,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-2.5 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[(0,f.jsx)(o.Clock,{className:"w-4 h-4"}),(0,f.jsx)("span",{children:"Start Work"})]})]}),"working"===i&&(0,f.jsxs)("div",{className:"p-4",children:[(0,f.jsxs)("div",{className:"mb-3 pb-3 border-b border-gray-700",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,f.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Working"}),(0,f.jsx)("span",{className:"text-xs px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded-full border border-emerald-500/50",children:"Active"})]}),(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:C(q)}),(0,f.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Started ",k&&new Date(k.clock_in).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]}),(s||u||w)&&(0,f.jsxs)("div",{className:`mb-3 p-2 rounded-lg text-xs ${w?"bg-red-500/20 border border-red-500/50 text-red-300":"bg-orange-500/20 border border-orange-500/50 text-orange-300"}`,children:[w&&"ðŸ”´ Break overdue! (5.5+ hours)",!w&&u&&"ðŸ½ï¸ Lunch break recommended",!w&&s&&!u&&"â˜• Break time approaching"]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)("button",{onClick:()=>E("break"),className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"â˜• Start Break"}),(0,f.jsx)("button",{onClick:()=>E("lunch"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"ðŸ½ï¸ Start Lunch"}),(0,f.jsx)("button",{onClick:G,className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"ðŸ End Work"})]})]}),("on_break"===i||"on_lunch"===i)&&(0,f.jsxs)("div",{className:"p-4",children:[(0,f.jsxs)("div",{className:"mb-3 pb-3 border-b border-gray-700",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,f.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"on_lunch"===i?"ðŸ½ï¸ On Lunch":"â˜• On Break"}),(0,f.jsx)("span",{className:"text-xs px-2 py-1 bg-sky-500/20 text-sky-400 rounded-full border border-sky-500/50",children:"Break"})]}),(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:C(q)}),(0,f.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Started ",m&&new Date(m.break_start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]}),(0,f.jsx)("button",{onClick:F,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-2.5 px-4 rounded-lg font-medium transition-colors",children:"âœ… End Break"})]})]})]})}var r=a.i(21161);function s({user:a}){let b=(0,i.useRouter)(),[c,d]=(0,g.useState)(!1),e=(0,g.useRef)(null);(0,g.useEffect)(()=>{function a(a){e.current&&!e.current.contains(a.target)&&d(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let h={title:"ðŸ–¥ï¸ SERVERS",items:[{label:"Engine Slots",path:"/settings/engine-slots",description:"Assign tradelines to slots",permission:"canManageServers"},{label:"Patcher Config",path:"/settings/patcher",description:"API endpoints & deployment",permission:"canManageServers"},{label:"Environment Variables",path:"/settings/env-vars",description:"Server .env configuration",permission:"canManageServers"}]},j={title:"ðŸ”‘ CREDENTIALS",items:[{label:"API Keys",path:"/settings/api-keys",description:"Claude, OpenAI, Supabase",permission:"canManageCredentials"},{label:"Source Logins",path:"/settings/source-logins",description:"SAM.gov, PlanetBids, etc.",permission:"canManageCredentials"},{label:"SSH Keys",path:"/settings/ssh-keys",description:"Server access keys",permission:"canManageCredentials"}]},k={title:"ðŸ‘¥ TEAM",items:[{label:"Team Members",path:"/team/members",description:"Staff accounts & access",permission:"canManageTeam"},{label:"Roles & Permissions",path:"/team/roles",description:"Access control settings",permission:"canManageTeam"},{label:"Timesheets",path:"/settings/timesheets",description:"Time tracking settings",permission:"canManageTeam"}]},l={title:"ðŸ”” ALERTS",items:[{label:"Alert Rules",path:"/settings/alert-rules",description:"When to notify",permission:"canManageAlerts"},{label:"Notification Channels",path:"/settings/notifications",description:"Slack, email, SMS",permission:"canManageAlerts"},{label:"Health Thresholds",path:"/settings/health-thresholds",description:"Server health limits",permission:"canManageAlerts"}]},m={title:"âš™ï¸ SYSTEM",items:[{label:"Dashboard Settings",path:"/settings/dashboard",description:"UI preferences",permission:"canManageSystem"},{label:"Audit Logs",path:"/settings/audit-logs",description:"System activity history",permission:"canManageSystem"},{label:"Database",path:"/settings/database",description:"Supabase connection",permission:"canManageSystem"}]},n={title:"ðŸ¢ CLIENTS",items:[{label:"Add Client",path:"/settings/clients/new",description:"Create new dev_client",permission:"canManageClients"},{label:"Manage Clients",path:"/settings/clients",description:"View & edit clients",permission:"canManageClients"}]};return(0,f.jsxs)("div",{className:"relative",ref:e,children:[(0,f.jsx)("button",{onClick:()=>d(!c),className:"w-10 h-10 bg-gray-700 hover:bg-gray-600 rounded-xl flex items-center justify-center transition-colors border border-gray-600",title:"Settings",children:(0,f.jsx)(r.Settings,{className:"w-5 h-5 text-gray-300"})}),c&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),(0,f.jsxs)("div",{className:"absolute right-0 mt-2 rounded-xl shadow-xl border border-gray-700 py-4 z-50 bg-gray-800",style:{minWidth:"650px"},children:[(0,f.jsx)("div",{className:"px-4 pb-3 border-b border-gray-700",children:(0,f.jsx)("p",{className:"text-xs text-gray-400 uppercase font-bold tracking-wider",children:"âš™ï¸ DEV COMMAND CENTER SETTINGS"})}),(0,f.jsxs)("div",{className:"grid grid-cols-3 gap-4 px-4 pt-4",children:[(0,f.jsxs)("div",{className:"space-y-4",children:[h&&(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:h.title}),(0,f.jsx)("div",{className:"space-y-1",children:h.items.map(a=>(0,f.jsxs)("button",{onClick:()=>{b.push(a.path),d(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,f.jsx)("p",{className:"font-medium text-sm",children:a.label}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:a.description})]},a.path))})]}),l&&(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:l.title}),(0,f.jsx)("div",{className:"space-y-1",children:l.items.map(a=>(0,f.jsxs)("button",{onClick:()=>{b.push(a.path),d(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,f.jsx)("p",{className:"font-medium text-sm",children:a.label}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:a.description})]},a.path))})]})]}),(0,f.jsxs)("div",{className:"space-y-4",children:[j&&(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:j.title}),(0,f.jsx)("div",{className:"space-y-1",children:j.items.map(a=>(0,f.jsxs)("button",{onClick:()=>{b.push(a.path),d(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,f.jsx)("p",{className:"font-medium text-sm",children:a.label}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:a.description})]},a.path))})]}),m&&(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:m.title}),(0,f.jsx)("div",{className:"space-y-1",children:m.items.map(a=>(0,f.jsxs)("button",{onClick:()=>{b.push(a.path),d(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,f.jsx)("p",{className:"font-medium text-sm",children:a.label}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:a.description})]},a.path))})]}),n&&(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:n.title}),(0,f.jsx)("div",{className:"space-y-1",children:n.items.map(a=>(0,f.jsxs)("button",{onClick:()=>{b.push(a.path),d(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,f.jsx)("p",{className:"font-medium text-sm",children:a.label}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:a.description})]},a.path))})]})]}),(0,f.jsxs)("div",{className:"space-y-4",children:[k&&(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:k.title}),(0,f.jsx)("div",{className:"space-y-1",children:k.items.map(a=>(0,f.jsxs)("button",{onClick:()=>{b.push(a.path),d(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,f.jsx)("p",{className:"font-medium text-sm",children:a.label}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:a.description})]},a.path))})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:"ðŸ”— QUICK LINKS"}),(0,f.jsxs)("div",{className:"space-y-1",children:[(0,f.jsxs)("button",{onClick:()=>{b.push("/dev-controls"),d(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,f.jsx)("p",{className:"font-medium text-sm",children:"Dev Controls"}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:"Deploy, SSH, Git, Logs"})]}),(0,f.jsxs)("button",{onClick:()=>{b.push("/helpdesk"),d(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,f.jsx)("p",{className:"font-medium text-sm",children:"Helpdesk"}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:"System & user tickets"})]})]})]})]})]})]})]})]})}let t=(0,k.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),u=(0,k.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),v=(0,k.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var w=a.i(33508),x=a.i(54074),y=a.i(65151);let z=(0,k.default)("grip-horizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),A=(0,k.default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),B=(0,k.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);function C(){let[a,b]=(0,g.useState)(!1),[c,d]=(0,g.useState)(null),[e,h]=(0,g.useState)([]),[i,j]=(0,g.useState)(""),[k,l]=(0,g.useState)(!1),[m,n]=(0,g.useState)(0),[o,p]=(0,g.useState)({x:0,y:0}),[q,r]=(0,g.useState)(!1),[s,C]=(0,g.useState)({x:0,y:0}),[D,E]=(0,g.useState)({width:500,height:500}),[F,G]=(0,g.useState)(!1),[H,I]=(0,g.useState)({x:0,y:0,width:0,height:0}),[J,K]=(0,g.useState)(!1),[L,M]=(0,g.useState)({width:500,height:500,x:0,y:0}),N=(0,g.useRef)(null),O=(0,g.useRef)(null),P=(0,g.useRef)(null),[Q,R]=(0,g.useState)([{id:"1",name:"general",type:"channel",description:"General team discussion",unread_count:2},{id:"2",name:"dev-updates",type:"channel",description:"Development updates & announcements",unread_count:0},{id:"3",name:"code-review",type:"channel",description:"Code snippets and reviews",unread_count:1},{id:"4",name:"deployments",type:"channel",description:"Deployment coordination",unread_count:0}]),[S,T]=(0,g.useState)([{id:"dm1",name:"Michael",type:"dm",unread_count:1,participants:["Michael"]},{id:"dm2",name:"Dev Team",type:"dm",unread_count:0,participants:["Dev Team"]}]);(0,g.useEffect)(()=>{n(Q.reduce((a,b)=>a+b.unread_count,0)+S.reduce((a,b)=>a+b.unread_count,0))},[Q,S]),(0,g.useEffect)(()=>{P.current?.scrollIntoView({behavior:"smooth"})},[e]);let U=(0,g.useCallback)(a=>{if(J)return;r(!0);let b=O.current?.getBoundingClientRect();b&&C({x:a.clientX-b.left,y:a.clientY-b.top}),a.preventDefault()},[J]),V=(0,g.useCallback)(a=>{if(q){let b=a.clientX-s.x,c=a.clientY-s.y;p({x:Math.max(0,Math.min(b,window.innerWidth-D.width)),y:Math.max(0,Math.min(c,window.innerHeight-D.height))})}if(F){let b=a.clientX-H.x,c=a.clientY-H.y;E({width:Math.max(400,H.width+b),height:Math.max(350,H.height+c)})}},[q,F,s,H,D.width,D.height]),W=(0,g.useCallback)(()=>{r(!1),G(!1)},[]);(0,g.useEffect)(()=>{if(q||F)return document.addEventListener("mousemove",V),document.addEventListener("mouseup",W),()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",W)}},[q,F,V,W]);let X=(0,g.useCallback)(a=>{J||(G(!0),I({x:a.clientX,y:a.clientY,width:D.width,height:D.height}),a.preventDefault(),a.stopPropagation())},[D,J]);function Y(a){d(a),"channel"===a.type?R(b=>b.map(b=>b.id===a.id?{...b,unread_count:0}:b)):T(b=>b.map(b=>b.id===a.id?{...b,unread_count:0}:b));let b=new Date;h([{id:"1",channel_id:a.id,user_id:"michael",user_name:"Michael",content:"Hey team, just pushed the new tradelines update",created_at:new Date(b.getTime()-36e5).toISOString()},{id:"2",channel_id:a.id,user_id:"dev",user_name:"Dev",content:"Nice! I'll run the tests on it",created_at:new Date(b.getTime()-35e5).toISOString()},{id:"3",channel_id:a.id,user_id:"michael",user_name:"Michael",content:"Here's the code snippet for the API endpoint:",created_at:new Date(b.getTime()-34e5).toISOString()},{id:"4",channel_id:a.id,user_id:"michael",user_name:"Michael",content:`async function fetchTradelines(userId: string) {
  const response = await fetch('/api/tradelines/' + userId);
  return response.json();
}`,created_at:new Date(b.getTime()-33e5).toISOString(),is_code:!0},{id:"5",channel_id:a.id,user_id:"dev",user_name:"Dev",content:"Looks good! I'll integrate it into the portal",created_at:new Date(b.getTime()-6e5).toISOString()}])}function Z(){if(!i.trim()||!c)return;let a={id:Date.now().toString(),channel_id:c.id,user_id:"me",user_name:"You",content:i,created_at:new Date().toISOString(),is_code:k};h(b=>[...b,a]),j(""),l(!1)}return(0,g.useEffect)(()=>{a&&0===o.x&&0===o.y&&p({x:window.innerWidth-D.width-20,y:80})},[a,o.x,o.y,D.width]),(0,f.jsxs)("div",{className:"relative",ref:N,children:[(0,f.jsxs)("button",{onClick:()=>b(!a),className:"w-10 h-10 bg-gray-700 text-white rounded-xl flex items-center justify-center hover:bg-gray-600 transition-colors relative",title:"Team Chat",children:[(0,f.jsx)(t,{className:"w-5 h-5"}),m>0&&(0,f.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:m>9?"9+":m})]}),a&&(0,f.jsxs)("div",{ref:O,className:"fixed bg-gray-800 rounded-xl shadow-2xl border border-gray-700 overflow-hidden z-[100]",style:{width:D.width,height:D.height,left:o.x,top:o.y,cursor:q?"grabbing":"default"},children:[(0,f.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-900 border-b border-gray-700 cursor-grab select-none",onMouseDown:U,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(z,{className:"w-4 h-4 text-gray-500"}),(0,f.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Dev Chat"}),(0,f.jsx)("span",{className:"text-gray-500 text-xs",children:"Team messaging"})]}),(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[(0,f.jsx)("button",{onClick:()=>{J?(E({width:L.width,height:L.height}),p({x:L.x,y:L.y}),K(!1)):(M({...D,...o}),E({width:window.innerWidth-100,height:window.innerHeight-100}),p({x:50,y:50}),K(!0))},className:"p-1.5 rounded hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",title:J?"Restore":"Maximize",children:J?(0,f.jsx)(A,{className:"w-4 h-4"}):(0,f.jsx)(B,{className:"w-4 h-4"})}),(0,f.jsx)("button",{onClick:()=>b(!1),className:"p-1.5 rounded hover:bg-red-600 text-gray-400 hover:text-white transition-colors",title:"Close",children:(0,f.jsx)(w.X,{className:"w-4 h-4"})})]})]}),(0,f.jsxs)("div",{className:"flex",style:{height:D.height-44},children:[(0,f.jsx)("div",{className:"w-48 bg-gray-900 border-r border-gray-700 flex flex-col overflow-hidden",children:(0,f.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,f.jsxs)("div",{className:"p-2",children:[(0,f.jsx)("p",{className:"text-gray-500 text-xs font-semibold uppercase px-2 mb-1",children:"Channels"}),Q.map(a=>(0,f.jsxs)("button",{onClick:()=>Y(a),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-left text-sm transition-colors ${c?.id===a.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800"}`,children:[(0,f.jsx)(v,{className:"w-4 h-4 flex-shrink-0"}),(0,f.jsx)("span",{className:"truncate flex-1",children:a.name}),a.unread_count>0&&(0,f.jsx)("span",{className:"w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:a.unread_count})]},a.id))]}),(0,f.jsxs)("div",{className:"p-2",children:[(0,f.jsx)("p",{className:"text-gray-500 text-xs font-semibold uppercase px-2 mb-1",children:"Direct Messages"}),S.map(a=>(0,f.jsxs)("button",{onClick:()=>Y(a),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-left text-sm transition-colors ${c?.id===a.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800"}`,children:[(0,f.jsx)(y.Circle,{className:"w-3 h-3 fill-green-500 text-green-500 flex-shrink-0"}),(0,f.jsx)("span",{className:"truncate flex-1",children:a.name}),a.unread_count>0&&(0,f.jsx)("span",{className:"w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:a.unread_count})]},a.id))]})]})}),(0,f.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:c?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"px-4 py-2 border-b border-gray-700 flex items-center justify-between flex-shrink-0",children:(0,f.jsxs)("div",{className:"flex items-center gap-2",children:["channel"===c.type?(0,f.jsx)(v,{className:"w-5 h-5 text-gray-400"}):(0,f.jsx)(y.Circle,{className:"w-4 h-4 fill-green-500 text-green-500"}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-white font-medium",children:c.name}),c.description&&(0,f.jsx)("p",{className:"text-gray-500 text-xs",children:c.description})]})]})}),(0,f.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map(a=>{let b,c;return(0,f.jsxs)("div",{className:`flex gap-3 ${"me"===a.user_id?"flex-row-reverse":""}`,children:[(0,f.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold flex-shrink-0 ${"me"===a.user_id?"bg-blue-600":"bg-purple-600"}`,children:a.user_name.charAt(0)}),(0,f.jsxs)("div",{className:`flex-1 min-w-0 ${"me"===a.user_id?"text-right":""}`,children:[(0,f.jsxs)("div",{className:`flex items-center gap-2 ${"me"===a.user_id?"justify-end":""}`,children:[(0,f.jsx)("span",{className:"text-white text-sm font-medium",children:a.user_name}),(0,f.jsx)("span",{className:"text-gray-500 text-xs",children:(b=new Date(a.created_at),(c=Math.floor((new Date().getTime()-b.getTime())/6e4))<1?"just now":c<60?`${c}m ago`:c<1440?`${Math.floor(c/60)}h ago`:b.toLocaleDateString())})]}),a.is_code?(0,f.jsxs)("div",{className:"relative mt-1",children:[(0,f.jsx)("pre",{className:"bg-gray-900 rounded-lg p-3 text-sm text-green-400 overflow-x-auto font-mono whitespace-pre-wrap break-all",children:a.content}),(0,f.jsx)("button",{onClick:()=>{var b;return b=a.content,void navigator.clipboard.writeText(b)},className:"absolute top-2 right-2 text-gray-500 hover:text-white text-xs px-2 py-1 bg-gray-800 rounded",children:"Copy"})]}):(0,f.jsx)("p",{className:`text-gray-300 text-sm mt-0.5 break-words ${"me"===a.user_id?"bg-blue-600/20 inline-block px-3 py-1.5 rounded-lg":""}`,children:a.content})]})]},a.id)}),(0,f.jsx)("div",{ref:P})]}),(0,f.jsxs)("div",{className:"p-3 border-t border-gray-700 flex-shrink-0",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("button",{onClick:()=>l(!k),className:`p-2 rounded-lg transition-colors ${k?"bg-green-600 text-white":"bg-gray-700 text-gray-400 hover:text-white"}`,title:"Code mode",children:(0,f.jsx)(x.Code,{className:"w-4 h-4"})}),(0,f.jsx)("div",{className:"flex-1 relative",children:k?(0,f.jsx)("textarea",{value:i,onChange:a=>j(a.target.value),placeholder:"Paste code here...",className:"w-full bg-gray-900 text-green-400 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none font-mono resize-none",rows:3,onKeyDown:a=>{"Enter"===a.key&&a.ctrlKey&&Z()}}):(0,f.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value),placeholder:`Message #${c.name}`,className:"w-full bg-gray-700 text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none",onKeyDown:a=>{"Enter"===a.key&&Z()}})}),(0,f.jsx)("button",{onClick:Z,disabled:!i.trim(),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,f.jsx)(u,{className:"w-4 h-4"})})]}),k&&(0,f.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Press Ctrl+Enter to send code"})]})]}):(0,f.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:(0,f.jsxs)("div",{className:"text-center",children:[(0,f.jsx)(t,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,f.jsx)("p",{className:"text-sm",children:"Select a channel to start chatting"})]})})})]}),!J&&(0,f.jsx)("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:X,style:{background:"linear-gradient(135deg, transparent 50%, #4B5563 50%)",borderBottomRightRadius:"0.75rem"}})]})]})}let D=(0,k.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);function E(){let[a,b]=(0,g.useState)(!1);return(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("button",{onClick:()=>b(!a),className:"w-10 h-10 bg-gray-700 text-white rounded-xl flex items-center justify-center hover:bg-gray-600 transition-colors",title:"AI Team Chat",children:(0,f.jsx)(D,{className:"w-5 h-5"})}),a&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>b(!1)}),(0,f.jsxs)("div",{className:"absolute right-0 top-12 w-80 bg-gray-800 rounded-lg shadow-xl z-50 border border-gray-700",children:[(0,f.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,f.jsx)("h3",{className:"text-white font-medium",children:"AI Team Chat"}),(0,f.jsx)("p",{className:"text-gray-400 text-sm",children:"Chat with AI workers"})]}),(0,f.jsx)("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Coming soon..."})]})]})]})}var F=a.i(91599),G=a.i(4748);function H({pageTitle:a,pageActions:b}){let c=(0,i.usePathname)(),d=(0,i.useRouter)(),[e,k]=(0,g.useState)(!1),{showServers:o,toggleServers:r}=(0,g.useContext)(F.ProductionStatusContext),{clients:t,selectedClient:u,setSelectedClient:v,isLoading:w}=(0,G.useClient)(),x=c?.startsWith("/servers")||c?.startsWith("/credentials")?"servers":c?.startsWith("/dev-controls")?"dev-tools":c?.startsWith("/helpdesk")?"helpdesk":c?.startsWith("/calendar")?"calendar":c?.startsWith("/studio")||c?.startsWith("/team")?"studio":"",y=c?.startsWith("/credentials"),z=[{key:"overview",label:"Overview",path:"/credentials"},{key:"federal",label:"Federal",path:"/credentials/federal"},{key:"state",label:"State",path:"/credentials/state"},{key:"local",label:"Local",path:"/credentials/local"},{key:"municipal",label:"Municipal",path:"/credentials/municipal"},{key:"other",label:"Other",path:"/credentials/other"}];async function A(){await p.supabase.auth.signOut(),d.push("/")}return(0,f.jsxs)("div",{className:"sticky top-0 z-50",children:[(0,f.jsx)("nav",{className:"bg-gray-800 shadow-lg",children:(0,f.jsx)("div",{className:"px-6",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,f.jsx)(h.default,{href:"/dashboard",className:"flex items-center py-3 hover:opacity-80 transition-opacity",children:(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"text-white font-bold text-xl leading-tight",children:"Kodiack Studio"}),(0,f.jsx)("div",{className:"text-gray-400 text-xs leading-tight",children:"Games. Platforms. Systems."})]})}),(0,f.jsx)("div",{className:"hidden md:flex items-end space-x-1 pb-0",children:[{id:"servers",label:"Servers",path:"/servers/tradelines"},{id:"dev-tools",label:"Dev Tools",path:"/dev-controls"},{id:"helpdesk",label:"HelpDesk",path:"/helpdesk"},{id:"calendar",label:"Calendar",path:"/calendar"},{id:"studio",label:"Studio",path:"/studio"}].map(a=>{let b=x===a.id,c="external"in a&&a.external,d=`w-32 py-1.5 rounded-t-xl text-base font-medium transition-all border-t border-x flex items-center justify-center ${b?"bg-blue-600 text-white border-blue-500 shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white border-gray-600"}`;return c?(0,f.jsx)("a",{href:a.path,className:d,children:a.label},a.id):(0,f.jsx)(h.default,{href:a.path,className:d,children:a.label},a.id)})})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsxs)("select",{value:u?.id||"all",onChange:a=>{if("all"===a.target.value)v(null);else{var b;let c;b=a.target.value,(c=t.find(a=>a.id===b))&&v(c)}},disabled:w,className:"appearance-none bg-gray-700 text-white pl-10 pr-10 py-2 rounded-xl border border-gray-600 focus:ring-2 focus:ring-blue-500 cursor-pointer hover:bg-gray-600 disabled:opacity-50 min-w-[200px]",children:[(0,f.jsx)("option",{value:"all",children:"All Clients"}),t.map(a=>(0,f.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,f.jsx)(n.Building2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),(0,f.jsx)(j.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),(0,f.jsx)(C,{}),(0,f.jsx)(E,{}),(0,f.jsx)(q,{}),(0,f.jsx)(s,{}),(0,f.jsx)("button",{onClick:()=>k(!0),className:"w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center hover:bg-blue-700 transition-colors",title:"Logout",children:(0,f.jsx)(l,{className:"w-5 h-5"})})]})]})})}),(0,f.jsx)("div",{className:"shadow-md",style:{background:"linear-gradient(to right, #3B82F6, #06B6D4)"},children:(0,f.jsx)("div",{className:"px-6 py-1",children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsxs)("div",{className:"flex-1 flex items-center space-x-3",children:[(0,f.jsx)("button",{onClick:()=>window.history.back(),className:"w-10 h-10 rounded-xl flex items-center justify-center transition-all flex-shrink-0 text-white border border-black/30 hover:bg-white/10",title:"Go Back",children:(0,f.jsx)(m.ArrowLeft,{className:"w-5 h-5"})}),(0,f.jsxs)("div",{className:"min-w-0",children:[(0,f.jsx)("h1",{className:"text-xl font-bold text-white leading-tight",children:a?.title||(0,f.jsxs)(f.Fragment,{children:[""===x&&"Dashboard","servers"===x&&!y&&"Server Management",y&&"Credentials & Sources","dev-tools"===x&&"Development Tools","helpdesk"===x&&"Support Center","calendar"===x&&"Team Schedule","studio"===x&&"Development Environment"]})}),a?.description&&(0,f.jsx)("p",{className:"text-white/80 text-xs mt-0.5 leading-tight",children:a.description})]}),b&&(0,f.jsx)("div",{className:"flex items-center space-x-2",children:b}),(0,f.jsx)("div",{className:"flex-1"})]}),y&&(0,f.jsx)("div",{className:"flex items-center gap-1 ml-4",children:z.map(a=>{let b=(()=>{if("/credentials"===c)return"overview";let a=z.find(a=>"/credentials"!==a.path&&c?.startsWith(a.path));return a?.key||"overview"})()===a.key;return(0,f.jsx)(h.default,{href:a.path,className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${b?"bg-white/20 text-white":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:a.label},a.key)})})]})})}),e&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>k(!1)}),(0,f.jsxs)("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-xl z-50 p-6 w-96",children:[(0,f.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Confirm Logout"}),(0,f.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to log out?"}),(0,f.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,f.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,f.jsx)("button",{onClick:A,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Yes, Logout"})]})]})]})]})}let I=(0,k.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>I],46842);let J=(0,k.default)("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);a.s(["CalendarCheck",()=>J],27999);let K=(0,k.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>K],92e3);var L=a.i(50522);let M=[{id:"tradelines",name:"NextBid Engine",patcherPort:7101,prodPort:"31001-31020",health:"degraded",totalSlots:20,healthySlots:18,degradedSlots:2,offlineSlots:0,slots:[{slotId:"01",tradeline:"security",mainPort:31001,health:"healthy",workers:[],cpu:45,memory:62,requestsPerMin:120},{slotId:"02",tradeline:"administrative",mainPort:31002,health:"healthy",workers:[],cpu:38,memory:55},{slotId:"03",tradeline:"facilities",mainPort:31003,health:"degraded",workers:[],cpu:78,memory:85},{slotId:"04",tradeline:"logistics",mainPort:31004,health:"healthy",workers:[]},{slotId:"05",tradeline:"electrical",mainPort:31005,health:"healthy",workers:[]},{slotId:"06",tradeline:"lowvoltage",mainPort:31006,health:"healthy",workers:[]},{slotId:"07",tradeline:"landscaping",mainPort:31007,health:"healthy",workers:[]},{slotId:"08",tradeline:"hvac",mainPort:31008,health:"degraded",workers:[]},{slotId:"09",tradeline:"plumbing",mainPort:31009,health:"healthy",workers:[]},{slotId:"10",tradeline:"janitorial",mainPort:31010,health:"healthy",workers:[]},{slotId:"11",tradeline:"support",mainPort:31011,health:"healthy",workers:[]},{slotId:"12",tradeline:"waste",mainPort:31012,health:"healthy",workers:[]},{slotId:"13",tradeline:"construction",mainPort:31013,health:"healthy",workers:[]},{slotId:"14",tradeline:"roofing",mainPort:31014,health:"healthy",workers:[]},{slotId:"15",tradeline:"painting",mainPort:31015,health:"healthy",workers:[]},{slotId:"16",tradeline:"flooring",mainPort:31016,health:"healthy",workers:[]},{slotId:"17",tradeline:"demolition",mainPort:31017,health:"healthy",workers:[]},{slotId:"18",tradeline:"environmental",mainPort:31018,health:"healthy",workers:[]},{slotId:"19",tradeline:"concrete",mainPort:31019,health:"healthy",workers:[]},{slotId:"20",tradeline:"fencing",mainPort:31020,health:"healthy",workers:[]}]},{id:"sources",name:"NextSource",patcherPort:7102,prodPort:"8002",health:"healthy"},{id:"nextbidder",name:"NextBidder",patcherPort:7103,prodPort:"8003",health:"healthy"},{id:"portals",name:"NextBid Portal",patcherPort:7104,prodPort:"8004",health:"healthy"},{id:"nexttech",name:"NextTech",patcherPort:7105,prodPort:"8005",health:"healthy"},{id:"nexttask",name:"NextTask",patcherPort:7106,prodPort:"8006",health:"critical"}];function N({onSelectProject:a,onSelectSlot:b,selectedProjectId:c,selectedSlotId:d}){let[e,h]=(0,g.useState)(M),[i,k]=(0,g.useState)(null);(0,g.useEffect)(()=>{let a=async()=>{try{let a=await fetch("/api/servers/health");if(a.ok){let b=await a.json();b.projects&&h(b.projects)}}catch(a){console.error("Failed to fetch server health:",a)}};a();let b=setInterval(a,d?3e3:3e4);return()=>clearInterval(b)},[d]);let l=a=>{switch(a){case"healthy":return"bg-green-500";case"degraded":return"bg-yellow-500";case"critical":return"bg-red-500";case"offline":return"bg-gray-500";default:return"bg-gray-600"}};return(0,f.jsx)("div",{className:"space-y-0.5",children:e.map(e=>{let g=e.slots?[...e.slots].sort((a,b)=>a.slotId.localeCompare(b.slotId)):[],h=g.length>0,m=i===e.id;return(0,f.jsxs)("div",{children:[(0,f.jsxs)("button",{onClick:()=>(b=>{b.slots&&b.slots.length>0?k(i===b.id?null:b.id):a?.(b)})(e),className:`w-full flex items-center gap-2 px-3 py-1.5 rounded text-sm transition-all ${c===e.id?"bg-cyan-500/15":"hover:bg-gray-800/30"}`,children:[(0,f.jsx)("div",{className:`w-2 h-2 rounded-full ${l(e.health)} ${"critical"===e.health?"animate-pulse":""}`}),(0,f.jsx)("span",{className:`flex-1 text-left ${"critical"===e.health?"text-red-400":"degraded"===e.health?"text-yellow-400":"text-gray-400"}`,children:e.name}),h&&(0,f.jsx)("div",{className:"text-gray-500",children:m?(0,f.jsx)(j.ChevronDown,{className:"w-3 h-3"}):(0,f.jsx)(L.ChevronRight,{className:"w-3 h-3"})})]}),m&&g.length>0&&(0,f.jsx)("div",{className:"ml-4 mt-0.5 space-y-0.5 border-l border-gray-800 pl-2",children:g.map(a=>(0,f.jsxs)("button",{onClick:c=>{c.stopPropagation(),b?.(e,a)},className:`w-full flex items-center gap-2 px-2 py-1 rounded text-xs transition-all ${d===a.slotId?"bg-cyan-500/20":"hover:bg-gray-800/30"}`,children:[(0,f.jsx)("div",{className:`w-1.5 h-1.5 rounded-full ${l(a.health)}`}),(0,f.jsx)("span",{className:`font-mono text-[10px] ${"healthy"===a.health?"text-green-400":"degraded"===a.health?"text-yellow-400":"text-red-400"}`,children:a.mainPort}),(0,f.jsx)("span",{className:`capitalize ${"healthy"===a.health?"text-green-400":"degraded"===a.health?"text-yellow-400":"text-red-400"}`,children:a.tradeline}),(0,f.jsx)("span",{className:"flex-1"}),d===a.slotId&&(0,f.jsx)("span",{className:"text-cyan-400 text-xs",children:">"})]},a.slotId))})]},e.id)})})}function O({health:a,size:b="sm",pulse:c=!1}){return(0,f.jsx)("span",{className:`inline-block rounded-full ${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[b]} ${(a=>{switch(a){case"healthy":return"bg-green-500";case"degraded":return"bg-yellow-500";case"critical":return"bg-red-500";case"offline":return"bg-gray-500";default:return"bg-gray-600"}})(a)} ${c||"critical"===a?"animate-pulse":""}`})}a.s(["StatusDot",()=>O,"default",()=>N],36267)},58066,a=>{"use strict";var b=a.i(87924),c=a.i(20643);function d({children:a,minRole:d,permission:e,fallback:f=null}){let{hasMinRole:g,hasPermission:h,isLoading:i}=(0,c.useUser)();return i?null:e&&!h(e)||d&&!g(d)?(0,b.jsx)(b.Fragment,{children:f}):(0,b.jsx)(b.Fragment,{children:a})}a.s(["RoleGate",()=>d])},91599,98451,a=>{"use strict";a.s(["PageActionsContext",()=>F,"PageTitleContext",()=>E,"ProductionStatusContext",()=>G,"default",()=>H],91599);var b=a.i(87924),c=a.i(5109),d=a.i(77375),e=a.i(58212),f=a.i(72131),g=a.i(38246),h=a.i(50944),i=a.i(46842),j=a.i(60246),k=a.i(41675),l=a.i(27999),m=a.i(92e3),n=a.i(5784),o=a.i(50522),p=a.i(36267),q=a.i(58066),r=a.i(20643);function s({project:a,slot:c,onClose:d,onReboot:e,onServerAction:g}){let{hasPermission:h}=(0,r.useUser)(),[i,j]=(0,f.useState)("health"),[k,l]=(0,f.useState)(""),[m,n]=(0,f.useState)(!1),[o,s]=(0,f.useState)(null),[t,u]=(0,f.useState)(null),[v,w]=(0,f.useState)(!0),x=(0,f.useRef)(null),y=async()=>{if(c){n(!0);try{let a=encodeURIComponent(c.tradeline);console.log("Fetching logs for tradeline:",c.tradeline,"encoded:",a);let b=await fetch(`/api/patcher/server/logs/${a}?lines=50`),d=await b.json();console.log("Logs response:",d),d.success&&d.logs?l(d.logs):l(`Error: ${d.error||"Failed to fetch logs"}

Tradeline: ${c.tradeline}
Port: ${c.mainPort}
Process: ${d.process||"unknown"}`)}catch(a){l("Error fetching logs: "+a.message)}finally{n(!1)}}};(0,f.useEffect)(()=>{v&&x.current&&(x.current.scrollTop=x.current.scrollHeight)},[k,v]);let z=c?c.workers&&c.workers.length>0?c.workers:((a,b="offline")=>[{port:parseInt(`310${a}`),name:"Engine",status:b},{port:parseInt(`311${a}`),name:"Discovery",status:b},{port:parseInt(`312${a}`),name:"Scope of Work",status:b},{port:parseInt(`313${a}`),name:"Full Report",status:b},{port:parseInt(`314${a}`),name:"Proposal",status:b}])(c.slotId,"offline"):[],A=async b=>{if(confirm("all"===b?`Reboot ALL workers for ${c?.tradeline||a.name}?`:"main"===b?`Reboot main server for ${c?.tradeline||a.name}?`:`Reboot worker on port ${b}?`)){s(b.toString());try{await e?.(b),setTimeout(()=>s(null),5e3)}catch(a){s(null)}}},B=async a=>{if(c&&confirm({start:`Start all workers for port ${c.mainPort}?`,restart:`Restart all workers for port ${c.mainPort}? This will briefly interrupt service.`,stop:`Stop all workers for port ${c.mainPort}? Service will go offline.`}[a])){u(a);try{await g?.(a,c.mainPort.toString()),setTimeout(()=>{u(null),window.location.reload()},2e3)}catch(a){u(null)}}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed top-14 bottom-0 left-64 right-0 z-30",onClick:d}),(0,b.jsxs)("div",{className:"fixed top-14 bottom-0 left-64 w-[480px] bg-gray-900 border-l border-gray-700 z-40 flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.StatusDot,{health:c?.health||a.health,size:"md"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:c?`${c.tradeline} (Slot ${c.slotId})`:a.name})]}),(0,b.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:c?`Port ${c.mainPort} + workers`:`Patcher ${a.patcherPort}`})]}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-white text-2xl leading-none",children:"Ã—"})]}),(0,b.jsxs)("div",{className:"flex border-b border-gray-700",children:[(0,b.jsx)("button",{onClick:()=>j("health"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${"health"===i?"text-white bg-gray-700":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:"Health"}),(0,b.jsx)("button",{onClick:()=>j("logs"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${"logs"===i?"text-white bg-gray-700":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:"Logs"})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-hidden",children:["health"===i&&(0,b.jsxs)("div",{className:"p-4 space-y-4 h-full overflow-y-auto",children:[(0,b.jsx)("div",{className:`rounded-xl p-4 border ${"healthy"===(c?.health||a.health)?"bg-green-500/10 border-green-500/30":"degraded"===(c?.health||a.health)?"bg-yellow-500/10 border-yellow-500/30":"bg-red-500/10 border-red-500/30"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-400 uppercase tracking-wider",children:"Overall Health"}),(0,b.jsx)("div",{className:`text-2xl font-bold capitalize ${"healthy"===(c?.health||a.health)?"text-green-400":"degraded"===(c?.health||a.health)?"text-yellow-400":"text-red-400"}`,children:c?.health||a.health})]}),(0,b.jsx)("div",{className:`text-5xl ${"healthy"===(c?.health||a.health)?"text-green-400":"degraded"===(c?.health||a.health)?"text-yellow-400":"text-red-400"}`,children:"healthy"===(c?.health||a.health)?"âœ“":"degraded"===(c?.health||a.health)?"âš ":"âœ—"})]})}),c&&(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl",children:[(0,b.jsxs)("div",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[(0,b.jsxs)("h4",{className:"font-medium text-white",children:["Workers (",z.length,")"]}),(0,b.jsx)(q.RoleGate,{permission:"canPushToTest",children:(0,b.jsx)("button",{onClick:()=>A("all"),disabled:"all"===o,className:"px-3 py-1 text-xs font-semibold rounded bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500 hover:text-white transition-colors disabled:opacity-50",children:"all"===o?"Rebooting...":"Reboot All"})})]}),(0,b.jsx)("div",{className:"divide-y divide-gray-700",children:z.map(a=>(0,b.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-2.5 h-2.5 rounded-full ${"online"===a.status?"bg-green-500":"error"===a.status?"bg-yellow-500":"bg-red-500"}`}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-white capitalize",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Port ",a.port]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:`text-xs ${"online"===a.status?"text-green-400":"error"===a.status?"text-yellow-400":"text-red-400"}`,children:"online"===a.status?"Online":"error"===a.status?"Error":"Offline"}),a.lastPing&&(0,b.jsx)("div",{className:"text-xs text-gray-600",children:a.lastPing}),a.errorCount&&a.errorCount>0&&(0,b.jsxs)("div",{className:"text-xs text-red-400",children:[a.errorCount," errors"]})]}),(0,b.jsx)(q.RoleGate,{permission:"canPushToTest",children:(0,b.jsx)("button",{onClick:()=>A(a.port),disabled:o===a.port.toString(),className:"px-2 py-1 text-xs rounded bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors disabled:opacity-50",children:o===a.port.toString()?"...":"Reboot"})})]})]},a.port))})]}),c&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"CPU"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-white mt-1",children:[c.cpu||0,"%"]}),(0,b.jsx)("div",{className:"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full rounded-full ${(c.cpu||0)>80?"bg-red-500":(c.cpu||0)>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${c.cpu||0}%`}})})]}),(0,b.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Memory"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-white mt-1",children:[c.memory||0,"%"]}),(0,b.jsx)("div",{className:"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full rounded-full ${(c.memory||0)>80?"bg-red-500":(c.memory||0)>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${c.memory||0}%`}})})]})]}),c&&(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[(0,b.jsx)("button",{onClick:()=>B("start"),disabled:null!==t,className:"py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-500 transition-colors disabled:opacity-50",children:"start"===t?"Starting...":"Start"}),(0,b.jsx)("button",{onClick:()=>B("restart"),disabled:null!==t,className:"py-3 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-500 transition-colors disabled:opacity-50",children:"restart"===t?"Restarting...":"Restart"}),(0,b.jsx)("button",{onClick:()=>B("stop"),disabled:null!==t,className:"py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-500 transition-colors disabled:opacity-50",children:"stop"===t?"Stopping...":"Stop"})]})]}),"logs"===i&&(0,b.jsxs)("div",{className:"h-full flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-700 bg-gray-800/50",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-400",children:["PM2 Logs - nextbid-",c?.mainPort]}),(0,b.jsx)("button",{onClick:y,disabled:m,className:"px-3 py-1.5 text-xs bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors disabled:opacity-50",children:m?"Loading...":"Get Last 50 Lines"})]}),(0,b.jsx)("div",{ref:x,className:"flex-1 overflow-y-auto p-3 font-mono text-xs bg-black/30",children:m?(0,b.jsx)("div",{className:"text-gray-500",children:"Loading logs..."}):k?(0,b.jsx)("pre",{className:"text-gray-300 whitespace-pre-wrap",children:k}):(0,b.jsxs)("div",{className:"text-gray-500 text-center py-8",children:[(0,b.jsx)("p",{children:'Click "Get Last 50 Lines" to fetch PM2 logs'}),(0,b.jsx)("p",{className:"text-gray-600 mt-2 text-xs",children:"Requires PM2 process to be running on server"})]})})]})]})]})]})}let t=["dev-team","frontend-team"],u=[{id:"dev-team",name:"Dev Team",color:"#10B981",memberCount:5},{id:"frontend-team",name:"Frontend",color:"#3B82F6",memberCount:3},{id:"backend-team",name:"Backend",color:"#8B5CF6",memberCount:4},{id:"support-team",name:"Support",color:"#F59E0B",memberCount:2}],v=[{id:"1",name:"Michael",role:"Lead Developer",color:"#3B82F6",teams:["dev-team","frontend-team"]},{id:"2",name:"Sarah",role:"Frontend Dev",color:"#EC4899",teams:["frontend-team"]},{id:"3",name:"John",role:"Backend Dev",color:"#10B981",teams:["backend-team","dev-team"]},{id:"4",name:"Emily",role:"Full Stack",color:"#8B5CF6",teams:["dev-team"]},{id:"5",name:"Alex",role:"Support Lead",color:"#F59E0B",teams:["support-team"]},{id:"6",name:"Chris",role:"DevOps",color:"#06B6D4",teams:["backend-team"]},{id:"7",name:"Taylor",role:"QA Engineer",color:"#EF4444",teams:["dev-team"]},{id:"8",name:"Jordan",role:"UI Designer",color:"#F472B6",teams:["frontend-team"]},{id:"9",name:"Casey",role:"Junior Dev",color:"#84CC16",teams:["dev-team","frontend-team"]}];function w(){let a=(0,h.usePathname)(),c=(0,h.useSearchParams)(),d=a?.startsWith("/calendar"),e=a?.startsWith("/dev-controls"),q=c?.get("mode")||"my",r=c?.get("member"),w=c?.get("team"),{showServers:y,setShowServers:z}=(0,f.useContext)(G),[A,B]=(0,f.useState)(!0),[C,D]=(0,f.useState)([]),[E,F]=(0,f.useState)(null),[H,I]=(0,f.useState)(null),[J,K]=(0,f.useState)(!1);(0,f.useEffect)(()=>{z(!d)},[d]),(0,f.useEffect)(()=>{y||N()},[y]);let L=true,M=L?u:u.filter(a=>t.includes(a.id)),N=()=>{K(!1),F(null),I(null)},O=async a=>{if(E)try{let b=await fetch("/api/servers/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:E.id,slotId:H?.slotId,tradeline:H?.tradeline,target:a})}),c=await b.json();c.success?console.log("Reboot initiated:",c.message):(console.error("Reboot failed:",c.error),alert(`Reboot failed: ${c.error}`))}catch(a){console.error("Reboot request failed:",a),alert("Reboot request failed - check console")}},P=async(a,b)=>{try{let c=`/api/patcher/server/${a}/${b}`,d=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"}}),e=await d.json();e.success?console.log(`${a} initiated for port ${b}:`,e.message):(console.error(`${a} failed:`,e.error),alert(`${a} failed: ${e.error}`))}catch(b){console.error(`${a} request failed:`,b),alert(`${a} request failed - check console`)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("aside",{className:"w-64 bg-gray-900/50 border-r border-gray-700 flex flex-col h-full overflow-hidden",children:[y&&(0,b.jsx)("div",{className:"flex-shrink-0 px-2 py-4 border-b border-gray-700",children:(0,b.jsx)(p.default,{onSelectProject:a=>{F(a),I(null),K(!0)},onSelectSlot:(a,b)=>{F(a),I(b),K(!0)},selectedProjectId:E?.id,selectedSlotId:H?.slotId})}),y&&(0,b.jsxs)("div",{className:"px-2 py-2 space-y-1",children:[(0,b.jsxs)(g.default,{href:"/credentials",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${"/credentials"===a?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,b.jsx)("span",{children:"ðŸ“Š"}),(0,b.jsx)("span",{children:"Overview & Alerts"})]}),(0,b.jsxs)(g.default,{href:"/credentials/federal",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a?.startsWith("/credentials/")?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,b.jsx)("span",{children:"ðŸ”‘"}),(0,b.jsx)("span",{children:"Credentials"})]}),(0,b.jsxs)(g.default,{href:"/session-logs",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${"/session-logs"===a?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,b.jsx)("span",{children:"ðŸŽ¯"}),(0,b.jsx)("span",{children:"Session Logs"})]}),(0,b.jsxs)(g.default,{href:"/project-management",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a?.startsWith("/project-management")?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,b.jsx)("span",{children:"ðŸ“"}),(0,b.jsx)("span",{children:"Projects"})]}),(0,b.jsxs)(g.default,{href:"/the-forge",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a?.startsWith("/the-forge")?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,b.jsx)("span",{children:"ðŸ”¥"}),(0,b.jsx)("span",{children:"The Forge"})]}),(0,b.jsxs)(g.default,{href:"/ai-team",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a?.startsWith("/ai-team")?"bg-green-500/20 text-green-400 border border-green-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,b.jsx)("span",{children:"ðŸ¤–"}),(0,b.jsx)("span",{children:"AI Team"})]})]}),d&&(0,b.jsxs)("div",{className:"border-t border-gray-700 flex-1 overflow-y-auto min-h-0",children:[(0,b.jsxs)("div",{className:"bg-gray-800/50 border-b border-gray-700",children:[(0,b.jsxs)("button",{onClick:()=>B(!A),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800/50 transition-colors",children:[(0,b.jsx)("h3",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Today's Overview"}),A?(0,b.jsx)(n.ChevronDown,{className:"w-4 h-4 text-gray-500"}):(0,b.jsx)(o.ChevronRight,{className:"w-4 h-4 text-gray-500"})]}),A&&(0,b.jsx)("div",{className:"px-4 pb-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsx)("div",{className:"bg-blue-500/10 rounded-lg p-3 border-l-4 border-blue-500",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:"0"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"Events"})]}),(0,b.jsx)(l.CalendarCheck,{className:"w-5 h-5 text-blue-500"})]})}),(0,b.jsx)("div",{className:"bg-purple-500/10 rounded-lg p-3 border-l-4 border-purple-500",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-400",children:"0"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"Meetings"})]}),(0,b.jsx)(j.Users,{className:"w-5 h-5 text-purple-500"})]})}),(0,b.jsx)("div",{className:"bg-orange-500/10 rounded-lg p-3 border-l-4 border-orange-500",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-400",children:"0"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"Tasks"})]}),(0,b.jsx)(m.AlertCircle,{className:"w-5 h-5 text-orange-500"})]})}),(0,b.jsx)("div",{className:"bg-green-500/10 rounded-lg p-3 border-l-4 border-green-500",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-400",children:"0"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"Time Off"})]}),(0,b.jsx)(k.Calendar,{className:"w-5 h-5 text-green-500"})]})})]})})]}),(0,b.jsx)("div",{className:"border-b border-gray-700",children:(0,b.jsxs)(g.default,{href:"/calendar?mode=my",className:`w-full flex items-center justify-between px-4 py-3 transition-all ${"my"===q?"bg-purple-500/10 border-l-4 border-purple-500":"hover:bg-gray-800"}`,children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${"my"===q?"bg-purple-500":"bg-gray-700"}`,children:(0,b.jsx)(i.User,{className:`w-5 h-5 ${"my"===q?"text-white":"text-gray-400"}`})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:`font-semibold ${"my"===q?"text-purple-400":"text-gray-300"}`,children:"My Calendar"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Personal tasks & meetings"})]})]}),"my"===q&&(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-500"})]})}),(0,b.jsx)("div",{className:"border-b border-gray-700",children:(0,b.jsxs)(g.default,{href:"/calendar?mode=team",className:`w-full flex items-center justify-between px-4 py-3 transition-all ${"team"===q&&!w&&!r?"bg-blue-500/10 border-l-4 border-blue-500":"hover:bg-gray-800"}`,children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${"team"===q?"bg-blue-500":"bg-gray-700"}`,children:(0,b.jsx)(j.Users,{className:`w-5 h-5 ${"team"===q?"text-white":"text-gray-400"}`})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:`font-semibold ${"team"===q?"text-blue-400":"text-gray-300"}`,children:"Team Calendars"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:L?"All team schedules":"Your team schedules"})]})]}),"team"===q&&!w&&!r&&(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"})]})}),"team"===q&&(0,b.jsxs)("div",{className:"bg-blue-500/5",children:[(0,b.jsxs)("div",{className:"px-4 py-3",children:[(0,b.jsxs)("h4",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:["Teams (",M.length,")"]}),(0,b.jsx)("div",{className:"space-y-1",children:M.map(a=>{var c;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>{var b;return b=a.id,void D(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},className:`w-full flex items-center justify-between p-2 rounded-lg transition-colors ${w===a.id?"bg-blue-600/20 border-l-2 border-blue-500":"bg-gray-800/50 hover:bg-gray-800"}`,children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:a.color},children:a.name.charAt(0)}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.memberCount," members"]})]})]}),C.includes(a.id)?(0,b.jsx)(n.ChevronDown,{className:"w-4 h-4 text-gray-500"}):(0,b.jsx)(o.ChevronRight,{className:"w-4 h-4 text-gray-500"})]}),C.includes(a.id)&&(0,b.jsx)("div",{className:"ml-4 mt-1 space-y-1",children:(c=a.id,L?c?v.filter(a=>a.teams.includes(c)):v:v.filter(a=>a.teams.some(a=>t.includes(a))&&(!c||a.teams.includes(c)))).map(c=>(0,b.jsxs)(g.default,{href:`/calendar?mode=team&team=${a.id}&member=${c.id}`,className:`flex items-center space-x-2 p-2 rounded-lg transition-colors ${r===c.id?"bg-blue-600/30":"hover:bg-gray-800/50"}`,children:[(0,b.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:c.color},children:c.name.charAt(0)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-white truncate",children:c.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 truncate",children:c.role})]})]},c.id))})]},a.id)})})]}),L&&(0,b.jsxs)("div",{className:"px-4 py-3 border-t border-gray-700/50",children:[(0,b.jsxs)("h4",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:["All Individuals (",v.length,")"]}),(0,b.jsx)("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:v.map(a=>(0,b.jsxs)(g.default,{href:`/calendar?mode=team&member=${a.id}`,className:`flex items-center space-x-3 p-2 rounded-lg transition-colors ${r===a.id&&!w?"bg-blue-600/30":"bg-gray-800/50 hover:bg-gray-800"}`,children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:a.color},children:a.name.charAt(0)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 truncate",children:a.role})]})]},a.id))})]})]})]}),e&&(0,b.jsxs)("div",{className:"border-t border-gray-700 p-4 flex-shrink-0 overflow-y-auto",children:[(0,b.jsx)("h3",{className:"text-xs uppercase tracking-wider text-gray-500 mb-3 px-3",children:"Studio Ops"}),(0,b.jsxs)("nav",{className:"space-y-1",children:[(0,b.jsx)(x,{href:"/dev-controls",icon:"ðŸ ",active:"/dev-controls"===a,children:"Console Home"}),(0,b.jsx)(x,{href:"/dev-controls/releases",icon:"ðŸš€",active:"/dev-controls/releases"===a,children:"Push / Pull"}),(0,b.jsx)(x,{href:"/dev-controls/analytics",icon:"ðŸ“Š",active:a?.startsWith("/dev-controls/analytics"),children:"Analytics"}),(0,b.jsx)(x,{href:"/dev-controls/security",icon:"ðŸ”’",active:a?.startsWith("/dev-controls/security"),children:"Security"})]}),(0,b.jsx)("h3",{className:"text-xs uppercase tracking-wider text-gray-500 mt-4 mb-3 px-3",children:"Tools"}),(0,b.jsxs)("nav",{className:"space-y-1",children:[(0,b.jsx)(x,{href:"/dev-controls/deploy",icon:"ðŸš€",active:"/dev-controls/deploy"===a,children:"Deploy"}),(0,b.jsx)(x,{href:"/dev-controls/git",icon:"ðŸ“¦",active:"/dev-controls/git"===a,children:"Git"}),(0,b.jsx)(x,{href:"/dev-controls/ssh",icon:"ðŸ’»",active:"/dev-controls/ssh"===a,children:"Terminal"}),(0,b.jsx)(x,{href:"/dev-controls/logs",icon:"ðŸ“‹",active:"/dev-controls/logs"===a,children:"Logs"})]})]})]}),J&&E&&(0,b.jsx)(s,{project:E,slot:H||void 0,onClose:N,onReboot:O,onServerAction:P})]})}function x({href:a,icon:c,count:d,description:e,active:f,children:h}){return(0,b.jsxs)(g.default,{href:a,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${f?"bg-blue-500/20 text-blue-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:e,children:[(0,b.jsx)("span",{dangerouslySetInnerHTML:{__html:c}}),(0,b.jsx)("span",{className:"flex-1 truncate",children:h}),void 0!==d&&(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${f?"bg-blue-500 text-white":"bg-gray-700 text-gray-400"}`,children:d})]})}let y=[{name:"Claude",role:"Lead Developer",portOffset:0},{name:"Chad",role:"Transcription & Capture",portOffset:1},{name:"Jen",role:"Scrubbing & Signal Extraction",portOffset:2},{name:"Susan",role:"Classification & Sorting",portOffset:3},{name:"Clair",role:"Conversion & Documentation",portOffset:4},{name:"Mike",role:"QA Tester",portOffset:5},{name:"Tiffany",role:"QA Tester",portOffset:6},{name:"Ryan",role:"Roadmap & Prioritization",portOffset:7}],z=[{id:"dev1",label:"Development Team 1",basePort:5410,portRange:"5410-5417"},{id:"dev2",label:"Development Team 2",basePort:5420,portRange:"5420-5427"},{id:"dev3",label:"Development Team 3",basePort:5430,portRange:"5430-5437"}],A=(0,f.createContext)({selectedTeam:z[0],setSelectedTeam:()=>{},selectTeamById:()=>{},connectionStatus:"disconnected",teamStatuses:[],lockedUserId:null,sessionId:null,connect:async()=>{},disconnect:async()=>{}});function B({children:a}){let[c,d]=(0,f.useState)(z[0]),[e,g]=(0,f.useState)("disconnected"),[h,i]=(0,f.useState)([]),[j,k]=(0,f.useState)(null),[l,m]=(0,f.useState)(null),n=(0,f.useCallback)(async a=>{if("disconnected"!==e)return;g("connecting"),k(a);let b=y.map(a=>({name:a.name,port:c.basePort+a.portOffset,status:"starting"}));i(b);try{let d=await fetch("/api/dev-session/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({devSlot:c.id,basePort:c.basePort,userId:a})}),e=await d.json();if(e.success)m(e.sessionId),i(e.teamStatuses||b.map(a=>({...a,status:"online"}))),g("connected");else throw Error(e.error||"Failed to connect")}catch(a){console.error("Failed to connect dev session:",a),g("disconnected"),k(null),i([])}},[e,c]),o=(0,f.useCallback)(async()=>{if("connected"===e){try{await fetch("/api/dev-session/disconnect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:l,devSlot:c.id})})}catch(a){console.error("Error disconnecting:",a)}g("disconnected"),k(null),m(null),i([])}},[e,l,c]);return(0,b.jsx)(A.Provider,{value:{selectedTeam:c,setSelectedTeam:d,selectTeamById:a=>{if("connected"===e)return;let b=z.find(b=>b.id===a);b&&d(b)},connectionStatus:e,teamStatuses:h,lockedUserId:j,sessionId:l,connect:n,disconnect:o},children:a})}function C(){let a=(0,f.useContext)(A);if(!a)throw Error("useDeveloper must be used within a DeveloperProvider");return a}a.s(["DEVELOPER_TEAMS",0,z,"DeveloperProvider",()=>B,"useDeveloper",()=>C],98451);var D=a.i(4748);let E=(0,f.createContext)(()=>{}),F=(0,f.createContext)(()=>{}),G=(0,f.createContext)({showServers:!0,setShowServers:()=>{},toggleServers:()=>{}});function H({children:a}){let g=(0,h.usePathname)(),i=g?.startsWith("/studio"),[j,k]=(0,f.useState)({title:"Dashboard",description:"Your daily overview"}),[l,m]=(0,f.useState)(null),[n,o]=(0,f.useState)(!0);return(0,b.jsxs)("html",{lang:"en",className:"dark",children:[(0,b.jsxs)("head",{children:[(0,b.jsx)("title",{children:"Kodiack Dashboard"}),(0,b.jsx)("meta",{name:"description",content:"Kodiack Studios Control Center"}),(0,b.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,b.jsx)("link",{rel:"apple-touch-icon",href:"/favicon.ico"})]}),(0,b.jsx)("body",{className:`${c.default.variable} ${d.default.variable} antialiased`,children:(0,b.jsx)(r.UserProvider,{children:(0,b.jsx)(B,{children:(0,b.jsx)(D.ClientProvider,{children:(0,b.jsx)(E.Provider,{value:k,children:(0,b.jsx)(F.Provider,{value:m,children:(0,b.jsx)(G.Provider,{value:{showServers:n,setShowServers:o,toggleServers:()=>o(a=>!a)},children:(0,b.jsxs)("div",{className:"h-screen flex flex-col overflow-hidden",children:[(0,b.jsx)(e.default,{pageTitle:j,pageActions:l}),(0,b.jsxs)("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[!i&&(0,b.jsx)(f.Suspense,{fallback:(0,b.jsx)("div",{className:"w-64 bg-gray-900"}),children:(0,b.jsx)(w,{})}),(0,b.jsx)("main",{className:`flex-1 bg-gray-900 ${i?"overflow-hidden":"overflow-auto px-8 py-4"}`,children:a})]})]})})})})})})})})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__65d3fdd6._.js.map