{"version":3,"sources":["../../../../../Studio/kodiack-dashboard-5500/src/lib/db.ts"],"sourcesContent":["/**\r\n * Local PostgreSQL Database Client\r\n * Provides Supabase-compatible interface for local PostgreSQL (kodiack_ai)\r\n *\r\n * This replaces @supabase/supabase-js for all dev_* and dev_ai_* tables\r\n */\r\n\r\nimport { Pool, PoolClient } from 'pg';\r\n\r\n// Create connection pool\r\nconst pool = new Pool({\r\n  host: process.env.PG_HOST || '161.35.229.220',\r\n  port: parseInt(process.env.PG_PORT || '9432'),\r\n  database: process.env.PG_DATABASE || 'kodiack_ai',\r\n  user: process.env.PG_USER || 'kodiack_admin',\r\n  password: process.env.PG_PASSWORD || 'K0d1ack_Stud10_2024',\r\n  max: 20,\r\n  idleTimeoutMillis: 30000,\r\n  connectionTimeoutMillis: 2000,\r\n});\r\n\r\n// Types\r\ninterface QueryResult<T = Record<string, unknown>> {\r\n  data: T | T[] | null;\r\n  error: Error | null;\r\n  count?: number;\r\n}\r\n\r\ninterface FilterCondition {\r\n  column: string;\r\n  operator: string;\r\n  value: unknown;\r\n}\r\n\r\n/**\r\n * QueryBuilder - Supabase-compatible query builder\r\n */\r\nclass QueryBuilder<T = Record<string, unknown>> {\r\n  private tableName: string;\r\n  private selectColumns: string = '*';\r\n  private filters: FilterCondition[] = [];\r\n  private orFilters: string[] = [];\r\n  private orderByClause: string = '';\r\n  private limitCount: number | null = null;\r\n  private offsetCount: number | null = null;\r\n  private insertData: Record<string, unknown> | Record<string, unknown>[] | null = null;\r\n  private updateData: Record<string, unknown> | null = null;\r\n  private isDelete: boolean = false;\r\n  private returnData: boolean = false;\r\n  private isSingle: boolean = false;\r\n  private isCount: boolean = false;\r\n\r\n  constructor(tableName: string) {\r\n    this.tableName = tableName;\r\n  }\r\n\r\n  select(columns: string = '*'): this {\r\n    if (columns.includes('(')) {\r\n      this.selectColumns = columns.split(',')\r\n        .map(c => c.trim())\r\n        .filter(c => !c.includes('('))\r\n        .join(', ') || '*';\r\n    } else {\r\n      this.selectColumns = columns;\r\n    }\r\n    this.returnData = true;\r\n    return this;\r\n  }\r\n\r\n  eq(column: string, value: unknown): this {\r\n    this.filters.push({ column, operator: '=', value });\r\n    return this;\r\n  }\r\n\r\n  neq(column: string, value: unknown): this {\r\n    this.filters.push({ column, operator: '!=', value });\r\n    return this;\r\n  }\r\n\r\n  gt(column: string, value: unknown): this {\r\n    this.filters.push({ column, operator: '>', value });\r\n    return this;\r\n  }\r\n\r\n  gte(column: string, value: unknown): this {\r\n    this.filters.push({ column, operator: '>=', value });\r\n    return this;\r\n  }\r\n\r\n  lt(column: string, value: unknown): this {\r\n    this.filters.push({ column, operator: '<', value });\r\n    return this;\r\n  }\r\n\r\n  lte(column: string, value: unknown): this {\r\n    this.filters.push({ column, operator: '<=', value });\r\n    return this;\r\n  }\r\n\r\n  like(column: string, pattern: string): this {\r\n    this.filters.push({ column, operator: 'LIKE', value: pattern });\r\n    return this;\r\n  }\r\n\r\n  ilike(column: string, pattern: string): this {\r\n    this.filters.push({ column, operator: 'ILIKE', value: pattern });\r\n    return this;\r\n  }\r\n\r\n  is(column: string, value: unknown): this {\r\n    if (value === null) {\r\n      this.filters.push({ column, operator: 'IS', value: 'NULL' });\r\n    } else {\r\n      this.filters.push({ column, operator: 'IS', value });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  not(column: string, operator: string, value: unknown): this {\r\n    if (operator === 'is' && value === null) {\r\n      this.filters.push({ column, operator: 'IS NOT', value: 'NULL' });\r\n    } else {\r\n      this.filters.push({ column, operator: `NOT ${operator.toUpperCase()}`, value });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  in(column: string, values: unknown[]): this {\r\n    this.filters.push({ column, operator: 'IN', value: values });\r\n    return this;\r\n  }\r\n\r\n  contains(column: string, value: unknown): this {\r\n    this.filters.push({ column, operator: '@>', value });\r\n    return this;\r\n  }\r\n\r\n  or(conditions: string): this {\r\n    this.orFilters.push(conditions);\r\n    return this;\r\n  }\r\n\r\n  order(column: string, options: { ascending?: boolean } = {}): this {\r\n    const direction = options.ascending === false ? 'DESC' : 'ASC';\r\n    this.orderByClause = `ORDER BY ${column} ${direction}`;\r\n    return this;\r\n  }\r\n\r\n  limit(count: number): this {\r\n    this.limitCount = count;\r\n    return this;\r\n  }\r\n\r\n  offset(count: number): this {\r\n    this.offsetCount = count;\r\n    return this;\r\n  }\r\n\r\n  single(): this {\r\n    this.isSingle = true;\r\n    this.limitCount = 1;\r\n    return this;\r\n  }\r\n\r\n  insert(data: Record<string, unknown> | Record<string, unknown>[]): this {\r\n    this.insertData = data;\r\n    return this;\r\n  }\r\n\r\n  update(data: Record<string, unknown>): this {\r\n    this.updateData = data;\r\n    return this;\r\n  }\r\n\r\n  delete(): this {\r\n    this.isDelete = true;\r\n    return this;\r\n  }\r\n\r\n  private buildWhereClause(): { clause: string; values: unknown[] } {\r\n    const conditions: string[] = [];\r\n    const values: unknown[] = [];\r\n    let paramIndex = 1;\r\n\r\n    for (const filter of this.filters) {\r\n      if (filter.operator === 'IS') {\r\n        conditions.push(`${filter.column} IS ${filter.value}`);\r\n      } else if (filter.operator === 'IN') {\r\n        const arr = filter.value as unknown[];\r\n        const placeholders = arr.map(() => `$${paramIndex++}`).join(', ');\r\n        conditions.push(`${filter.column} IN (${placeholders})`);\r\n        values.push(...arr);\r\n      } else if (filter.operator === '@>') {\r\n        conditions.push(`${filter.column} @> $${paramIndex++}`);\r\n        values.push(JSON.stringify(filter.value));\r\n      } else {\r\n        conditions.push(`${filter.column} ${filter.operator} $${paramIndex++}`);\r\n        values.push(filter.value);\r\n      }\r\n    }\r\n\r\n    for (const orCondition of this.orFilters) {\r\n      conditions.push(`(${orCondition})`);\r\n    }\r\n\r\n    const clause = conditions.length > 0 ? `WHERE ${conditions.join(' AND ')}` : '';\r\n    return { clause, values };\r\n  }\r\n\r\n  async execute(): Promise<QueryResult<T>> {\r\n    let client: PoolClient | null = null;\r\n\r\n    try {\r\n      client = await pool.connect();\r\n\r\n      // INSERT\r\n      if (this.insertData) {\r\n        const dataArray = Array.isArray(this.insertData) ? this.insertData : [this.insertData];\r\n        const columns = Object.keys(dataArray[0]);\r\n        const results: T[] = [];\r\n\r\n        for (const row of dataArray) {\r\n          const values = columns.map(col => row[col]);\r\n          const placeholders = columns.map((_, i) => `$${i + 1}`).join(', ');\r\n          const returning = this.returnData ? 'RETURNING *' : '';\r\n\r\n          const query = `INSERT INTO ${this.tableName} (${columns.join(', ')}) VALUES (${placeholders}) ${returning}`;\r\n          const result = await client.query(query, values);\r\n\r\n          if (this.returnData && result.rows.length > 0) {\r\n            results.push(result.rows[0] as T);\r\n          }\r\n        }\r\n\r\n        return {\r\n          data: this.isSingle ? (results[0] || null) : results,\r\n          error: null,\r\n        };\r\n      }\r\n\r\n      // UPDATE\r\n      if (this.updateData) {\r\n        const columns = Object.keys(this.updateData);\r\n        const { clause: whereClause, values: whereValues } = this.buildWhereClause();\r\n\r\n        const setClause = columns\r\n          .map((col, i) => `${col} = $${i + 1}`)\r\n          .join(', ');\r\n\r\n        const updateValues = columns.map(col => this.updateData![col]);\r\n\r\n        let adjustedWhere = whereClause;\r\n        whereValues.forEach((_, i) => {\r\n          const oldIndex = i + 1;\r\n          const newIndex = columns.length + i + 1;\r\n          adjustedWhere = adjustedWhere.replace(`$${oldIndex}`, `$${newIndex}`);\r\n        });\r\n\r\n        const returning = this.returnData ? 'RETURNING *' : '';\r\n        const query = `UPDATE ${this.tableName} SET ${setClause} ${adjustedWhere} ${returning}`;\r\n\r\n        const result = await client.query(query, [...updateValues, ...whereValues]);\r\n\r\n        return {\r\n          data: this.isSingle ? (result.rows[0] as T || null) : (result.rows as T[]),\r\n          error: null,\r\n        };\r\n      }\r\n\r\n      // DELETE\r\n      if (this.isDelete) {\r\n        const { clause: whereClause, values } = this.buildWhereClause();\r\n        const returning = this.returnData ? 'RETURNING *' : '';\r\n        const query = `DELETE FROM ${this.tableName} ${whereClause} ${returning}`;\r\n\r\n        const result = await client.query(query, values);\r\n        return {\r\n          data: result.rows as T[],\r\n          error: null,\r\n        };\r\n      }\r\n\r\n      // SELECT\r\n      const { clause: whereClause, values } = this.buildWhereClause();\r\n      let query = `SELECT ${this.selectColumns} FROM ${this.tableName} ${whereClause}`;\r\n\r\n      if (this.orderByClause) {\r\n        query += ` ${this.orderByClause}`;\r\n      }\r\n\r\n      if (this.limitCount !== null) {\r\n        query += ` LIMIT ${this.limitCount}`;\r\n      }\r\n\r\n      if (this.offsetCount !== null) {\r\n        query += ` OFFSET ${this.offsetCount}`;\r\n      }\r\n\r\n      const result = await client.query(query, values);\r\n\r\n      if (this.isSingle) {\r\n        return {\r\n          data: result.rows[0] as T || null,\r\n          error: null,\r\n        };\r\n      }\r\n\r\n      return {\r\n        data: result.rows as T[],\r\n        error: null,\r\n        count: result.rowCount || 0,\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('[DB Error]', error);\r\n      return {\r\n        data: null,\r\n        error: error as Error,\r\n      };\r\n    } finally {\r\n      if (client) {\r\n        client.release();\r\n      }\r\n    }\r\n  }\r\n\r\n  then<TResult1 = QueryResult<T>, TResult2 = never>(\r\n    onfulfilled?: ((value: QueryResult<T>) => TResult1 | PromiseLike<TResult1>) | null,\r\n    onrejected?: ((reason: unknown) => TResult2 | PromiseLike<TResult2>) | null\r\n  ): Promise<TResult1 | TResult2> {\r\n    return this.execute().then(onfulfilled, onrejected);\r\n  }\r\n}\r\n\r\n/**\r\n * Database client with Supabase-compatible interface\r\n */\r\nexport const db = {\r\n  from<T = Record<string, unknown>>(tableName: string): QueryBuilder<T> {\r\n    return new QueryBuilder<T>(tableName);\r\n  },\r\n\r\n  async query<T = Record<string, unknown>>(sql: string, params: unknown[] = []): Promise<QueryResult<T>> {\r\n    let client: PoolClient | null = null;\r\n    try {\r\n      client = await pool.connect();\r\n      const result = await client.query(sql, params);\r\n      return {\r\n        data: result.rows as T[],\r\n        error: null,\r\n        count: result.rowCount || 0,\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        data: null,\r\n        error: error as Error,\r\n      };\r\n    } finally {\r\n      if (client) {\r\n        client.release();\r\n      }\r\n    }\r\n  },\r\n\r\n  getPool(): Pool {\r\n    return pool;\r\n  },\r\n};\r\n\r\nexport function createLocalClient() {\r\n  return db;\r\n}\r\n\r\nexport default db;\r\n"],"names":[],"mappings":"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"}