(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81169,e=>{"use strict";var s=e.i(4828),t=e.i(65508);function r({tradeline:e,onSuccess:r}){let[l,a]=(0,t.useState)(null),[n,i]=(0,t.useState)(null),o=async s=>{a(s),i(null);let t=e?`/api/tradelines/${s}/${e}`:`/api/tradelines/${s}`;try{let e=await fetch(t,{method:"POST"}),s=await e.json();s.success?(r?.(),setTimeout(()=>window.location.reload(),2e3)):i(s.error||"Action failed")}catch(e){i(e.message)}finally{a(null)}};return e?(0,s.jsxs)("div",{className:"flex gap-2",children:[n&&(0,s.jsx)("span",{className:"text-red-400 text-xs mr-2",children:n}),(0,s.jsx)("button",{onClick:()=>o("start"),disabled:null!==l,className:"px-3 py-1 text-xs font-semibold rounded bg-green-500/15 text-green-400 border border-green-500/30 hover:bg-green-500 hover:text-white transition-colors disabled:opacity-50",children:"start"===l?"...":"Start"}),(0,s.jsx)("button",{onClick:()=>o("restart"),disabled:null!==l,className:"px-3 py-1 text-xs font-semibold rounded bg-yellow-500/15 text-yellow-400 border border-yellow-500/30 hover:bg-yellow-500 hover:text-white transition-colors disabled:opacity-50",children:"restart"===l?"...":"Restart"}),(0,s.jsx)("button",{onClick:()=>o("stop"),disabled:null!==l,className:"px-3 py-1 text-xs font-semibold rounded bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500 hover:text-white transition-colors disabled:opacity-50",children:"stop"===l?"...":"Stop"})]}):(0,s.jsxs)("div",{className:"flex gap-3",children:[n&&(0,s.jsx)("div",{className:"text-red-400 text-xs",children:n}),(0,s.jsx)("button",{onClick:()=>o("launch-all"),disabled:null!==l,className:"px-4 py-2 bg-green-500/15 text-green-400 border border-green-500/30 rounded-lg text-xs font-semibold uppercase hover:bg-green-500 hover:text-white transition-colors disabled:opacity-50",children:"launch-all"===l?"Launching...":"Launch All"}),(0,s.jsx)("button",{onClick:()=>o("restart-all"),disabled:null!==l,className:"px-4 py-2 bg-yellow-500/15 text-yellow-400 border border-yellow-500/30 rounded-lg text-xs font-semibold uppercase hover:bg-yellow-500 hover:text-white transition-colors disabled:opacity-50",children:"restart-all"===l?"Restarting...":"Restart All"}),(0,s.jsx)("button",{onClick:()=>o("stop-all"),disabled:null!==l,className:"px-4 py-2 bg-red-500/15 text-red-400 border border-red-500/30 rounded-lg text-xs font-semibold uppercase hover:bg-red-500 hover:text-white transition-colors disabled:opacity-50",children:"stop-all"===l?"Stopping...":"Stop All"})]})}function l({tradeline:e,onClose:r}){let[l,a]=(0,t.useState)(""),[n,i]=(0,t.useState)(!0),[o,d]=(0,t.useState)(null),[c,x]=(0,t.useState)(100),[g,h]=(0,t.useState)(!1),b=async()=>{try{let s=await fetch(`/api/tradelines/logs/${e}?lines=${c}`),t=await s.json();t.success?(a(t.logs||"No logs available"),d(null)):d(t.error||"Failed to fetch logs")}catch(e){d(e.message)}finally{i(!1)}};return(0,t.useEffect)(()=>{b()},[e,c]),(0,t.useEffect)(()=>{if(!g)return;let e=setInterval(b,5e3);return()=>clearInterval(e)},[g,e,c]),(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-8",children:(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl w-full max-w-5xl max-h-[80vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-700",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Logs: ",e]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Showing last ",c," lines"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("select",{value:c,onChange:e=>x(Number(e.target.value)),className:"bg-gray-800 border border-gray-700 rounded px-3 py-1 text-sm text-white",children:[(0,s.jsx)("option",{value:50,children:"50 lines"}),(0,s.jsx)("option",{value:100,children:"100 lines"}),(0,s.jsx)("option",{value:200,children:"200 lines"}),(0,s.jsx)("option",{value:500,children:"500 lines"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,s.jsx)("input",{type:"checkbox",checked:g,onChange:e=>h(e.target.checked),className:"rounded bg-gray-700 border-gray-600"}),"Auto-refresh"]}),(0,s.jsx)("button",{onClick:b,className:"px-3 py-1 text-xs font-semibold rounded bg-blue-500/15 text-blue-400 border border-blue-500/30 hover:bg-blue-500 hover:text-white transition-colors",children:"Refresh"}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors text-2xl leading-none",children:"Ã—"})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-4",children:n?(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Loading logs..."}):o?(0,s.jsxs)("div",{className:"flex items-center justify-center h-full text-red-400",children:["Error: ",o]}):(0,s.jsx)("pre",{className:"font-mono text-xs text-gray-300 whitespace-pre-wrap",children:l})}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-700 text-xs text-gray-500",children:[(0,s.jsx)("span",{children:g?"Auto-refreshing every 5 seconds":"Manual refresh"}),(0,s.jsx)("span",{children:"Press ESC to close"})]})]})})}function a({tradeline:e,tradelineInfo:a,status:n,config:i}){let[o,d]=(0,t.useState)(!1),[c,x]=(0,t.useState)("overview"),g=n?.status||"stopped",h={healthy:"bg-green-500",partial:"bg-yellow-500",stopped:"bg-red-500",degraded:"bg-orange-500"};return(0,s.jsxs)("div",{children:[o&&(0,s.jsx)(l,{tradeline:e,onClose:()=>d(!1)}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:`w-4 h-4 rounded-full ${h[g]}`}),(0,s.jsx)("span",{className:`text-lg font-semibold ${{healthy:"text-green-400",partial:"text-yellow-400",stopped:"text-red-400",degraded:"text-orange-400"}[g]}`,children:g.charAt(0).toUpperCase()+g.slice(1)})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[n?.online||0," / ",n?.total||5," processes online"]}),(0,s.jsx)("div",{className:"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:`h-full ${h[g]} transition-all`,style:{width:`${(n?.online||0)/(n?.total||5)*100}%`}})})]}),(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Main Port"}),(0,s.jsx)("div",{className:"font-mono text-2xl text-blue-400",children:a?.ports?.main||"N/A"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Workers: ",a?.ports?.worker1,", ",a?.ports?.worker2,",",a?.ports?.worker3,", ",a?.ports?.worker4]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-3",children:"Actions"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r,{tradeline:e}),(0,s.jsx)("button",{onClick:()=>d(!0),className:"w-full px-3 py-1.5 text-xs font-semibold rounded bg-gray-700 text-gray-400 hover:text-white transition-colors",children:"View Logs"})]})]})]}),(0,s.jsxs)("div",{className:"flex border-b border-gray-700 mb-6",children:[(0,s.jsx)("button",{onClick:()=>x("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"overview"===c?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:"Overview"}),(0,s.jsx)("button",{onClick:()=>x("config"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"config"===c?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:"Configuration"}),(0,s.jsx)("button",{onClick:()=>x("workers"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${"workers"===c?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:"Workers"})]}),"overview"===c&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-white mb-4",children:"Discovery Statistics"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Opportunities Found"}),(0,s.jsx)("span",{className:"text-white font-mono",children:n?.stats?.opportunities||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Last Discovery Run"}),(0,s.jsx)("span",{className:"text-white font-mono",children:n?.stats?.lastRun||"-"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Next Scheduled"}),(0,s.jsx)("span",{className:"text-white font-mono",children:n?.stats?.nextRun||"-"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-white mb-4",children:"API Status"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"SAM.gov"}),(0,s.jsx)("span",{className:`text-xs px-2 py-1 rounded ${n?.apis?.sam_gov?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-400"}`,children:n?.apis?.sam_gov?"Connected":"Not configured"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"GovWin"}),(0,s.jsx)("span",{className:`text-xs px-2 py-1 rounded ${n?.apis?.govwin?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-400"}`,children:n?.apis?.govwin?"Connected":"Not configured"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"PlanetBids"}),(0,s.jsx)("span",{className:`text-xs px-2 py-1 rounded ${n?.apis?.planetbids?"bg-green-500/20 text-green-400":"bg-gray-700 text-gray-400"}`,children:n?.apis?.planetbids?"Connected":"Not configured"})]})]})]})]}),"config"===c&&(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-5",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-white mb-4",children:"Configuration"}),(0,s.jsx)("pre",{className:"font-mono text-xs text-gray-300 bg-black/30 p-4 rounded-lg overflow-auto max-h-96",children:i?JSON.stringify(i,null,2):"No configuration loaded"})]}),"workers"===c&&(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3,4].map(e=>{let t=`worker${e}`,r=a?.ports?.[t],l=n?.workers?.[e-1]||{};return(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${l.online?"bg-green-500":"bg-red-500"}`}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium text-white",children:["Worker ",e]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Port ",r]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[l.tasks||0," tasks processed"]}),(0,s.jsx)("span",{className:`text-xs px-2 py-1 rounded ${l.online?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:l.online?"Online":"Offline"})]})]},e)})})]})}e.s(["default",()=>a],81169)}]);