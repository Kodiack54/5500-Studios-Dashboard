(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85429,e=>{"use strict";var t=e.i(4828),r=e.i(65508),l=e.i(79443);function s({tickets:e,categories:s}){let[a,o]=(0,r.useState)("all"),[n,i]=(0,r.useState)("all"),[d,x]=(0,r.useState)("all"),[c,u]=(0,r.useState)("all"),[g,p]=(0,r.useState)(""),h=e=>{if(e.source_system)return e.source_system;let t=e.user_id.match(/^(portal|nextbidder|nexttech|nexttask|sources)_user/);return t?t[1]:null},b=e.filter(e=>{if("all"!==a&&e.status!==a||"all"!==n&&e.priority!==n||"all"!==d&&e.category!==d||"all"!==c&&h(e)!==c)return!1;if(g){let t=g.toLowerCase();if(!e.title.toLowerCase().includes(t)&&!e.user_email.toLowerCase().includes(t)&&!(e.user_name||"").toLowerCase().includes(t))return!1}return!0}),m={low:"bg-gray-500/20 text-gray-400",normal:"bg-blue-500/20 text-blue-400",high:"bg-yellow-500/20 text-yellow-400",urgent:"bg-red-500/20 text-red-400"},y={open:"bg-blue-500/20 text-blue-400",awaiting_response:"bg-yellow-500/20 text-yellow-400",in_progress:"bg-purple-500/20 text-purple-400",resolved:"bg-green-500/20 text-green-400",closed:"bg-gray-500/20 text-gray-400"},v={portal:"bg-green-500/20 text-green-400",nextbidder:"bg-purple-500/20 text-purple-400",nexttech:"bg-pink-500/20 text-pink-400",nexttask:"bg-orange-500/20 text-orange-400",sources:"bg-yellow-500/20 text-yellow-400"},j=e.filter(e=>"awaiting_response"===e.status).length;return(0,t.jsxs)("div",{children:[j>0&&(0,t.jsxs)("div",{className:"bg-yellow-500/15 border border-yellow-500/30 text-yellow-400 px-4 py-3 rounded-lg mb-6 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-yellow-400 animate-pulse"}),(0,t.jsxs)("span",{children:[j," ticket",j>1?"s":""," awaiting your response"]}),(0,t.jsx)("button",{onClick:()=>o("awaiting_response"),className:"ml-auto text-xs px-3 py-1 rounded bg-yellow-500/20 hover:bg-yellow-500 hover:text-black transition-colors",children:"View"})]}),(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search tickets or users...",value:g,onChange:e=>p(e.target.value),className:"flex-1 min-w-[200px] bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-sm text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none"}),(0,t.jsxs)("select",{value:a,onChange:e=>o(e.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-purple-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"open",children:"Open"}),(0,t.jsx)("option",{value:"awaiting_response",children:"Awaiting Response"}),(0,t.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,t.jsx)("option",{value:"resolved",children:"Resolved"}),(0,t.jsx)("option",{value:"closed",children:"Closed"})]}),(0,t.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-purple-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"all",children:"All Priority"}),(0,t.jsx)("option",{value:"urgent",children:"Urgent"}),(0,t.jsx)("option",{value:"high",children:"High"}),(0,t.jsx)("option",{value:"normal",children:"Normal"}),(0,t.jsx)("option",{value:"low",children:"Low"})]}),(0,t.jsxs)("select",{value:d,onChange:e=>x(e.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-purple-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"all",children:"All Categories"}),s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-purple-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"all",children:"All Sources"}),(0,t.jsx)("option",{value:"portal",children:"Portal"}),(0,t.jsx)("option",{value:"nextbidder",children:"NextBidder"}),(0,t.jsx)("option",{value:"nexttech",children:"NextTech"}),(0,t.jsx)("option",{value:"nexttask",children:"NextTask"}),(0,t.jsx)("option",{value:"sources",children:"Sources"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,t.jsx)("button",{onClick:()=>o("awaiting_response"),className:"px-3 py-1 text-xs rounded-lg bg-yellow-500/15 text-yellow-400 border border-yellow-500/30 hover:bg-yellow-500 hover:text-black transition-colors",children:"Needs Response"}),(0,t.jsx)("button",{onClick:()=>{o("open"),i("urgent")},className:"px-3 py-1 text-xs rounded-lg bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500 hover:text-white transition-colors",children:"Urgent"}),(0,t.jsx)("button",{onClick:()=>{o("all"),i("all"),x("all"),u("all"),p("")},className:"px-3 py-1 text-xs rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors",children:"Clear Filters"})]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-400 mb-4",children:["Showing ",b.length," of ",e.length," tickets"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[b.map(e=>{let r,s,a,o;return(0,t.jsx)(l.default,{href:`/helpdesk/user-tickets/${e.id}`,className:"block bg-gray-800 border border-gray-700 rounded-xl p-4 hover:bg-purple-500/5 hover:border-purple-500/30 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 font-bold",children:e.user_name?.charAt(0)||e.user_email?.charAt(0)||"?"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"font-medium text-white",children:e.title}),"awaiting_response"===e.status&&(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-yellow-400 animate-pulse"})]}),(0,t.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:e.user_name||e.user_email}),(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${y[e.status]}`,children:e.status.replace(/_/g," ")}),(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${m[e.priority]}`,children:e.priority}),h(e)&&(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${v[h(e)]}`,children:h(e)}),(0,t.jsx)("span",{className:"text-xs bg-gray-700 text-gray-300 px-2 py-0.5 rounded",children:e.category}),e.assigned_to&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["Assigned: ",e.assigned_to]}),(0,t.jsx)("span",{className:"text-xs text-gray-600 ml-auto",children:(r=new Date(e.created_at),(o=Math.floor((a=Math.floor((s=Math.floor((new Date().getTime()-r.getTime())/6e4))/60))/24))>0?`${o}d ago`:a>0?`${a}h ago`:s>0?`${s}m ago`:"just now")})]})]})]})},e.id)}),0===b.length&&(0,t.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No tickets match your filters"})]})]})}e.s(["default",()=>s])}]);