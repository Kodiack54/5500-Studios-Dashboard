(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},16715,e=>{"use strict";let t=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},45423,e=>{"use strict";let t=(0,e.i(75254).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);e.s(["Bell",()=>t],45423)},12426,e=>{"use strict";let t=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},39312,e=>{"use strict";let t=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},31343,52044,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>s],31343);let a=(0,t.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);e.s(["Square",()=>a],52044)},39085,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(16715),l=e.i(78894),r=e.i(69638),i=e.i(73884),d=e.i(31343);let n=(0,e.i(75254).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var o=e.i(52044),c=e.i(12426),x=e.i(39312),m=e.i(3116),u=e.i(45423);let h=[{id:"chad",name:"Chad",port:5401,role:"Capture",title:"Information Capture",model:"openai",dailyLimit:.5,color:"cyan"},{id:"jen",name:"Jen",port:5402,role:"Extract",title:"Data Quality",model:"claude",dailyLimit:.5,color:"purple"},{id:"susan",name:"Susan",port:5403,role:"Sort",title:"Information Analyst",model:"openai",dailyLimit:.5,color:"pink"},{id:"clair",name:"Clair",port:5404,role:"Document",title:"Documentation",model:"claude",dailyLimit:.5,color:"blue"},{id:"mike",name:"Mike",port:5405,role:"QA",title:"Quality Assurance",model:"openai",dailyLimit:.5,color:"green"},{id:"tiffany",name:"Tiffany",port:5406,role:"QA",title:"Quality Assurance",model:"openai",dailyLimit:.5,color:"yellow"},{id:"ryan",name:"Ryan",port:5407,role:"Roadmap",title:"Product Operations",model:"openai",dailyLimit:.5,color:"orange"}],g=[{id:"terminal",name:"Terminal",port:5400,role:"Claude Terminal"},{id:"dashboard",name:"Dashboard",port:5500,role:"Web UI"}];function p(){let[e,d]=(0,s.useState)({}),[n,o]=(0,s.useState)({}),[p,v]=(0,s.useState)(null),[N,w]=(0,s.useState)(0),[k]=(0,s.useState)(3.5),[$,C]=(0,s.useState)(!1),[S,L]=(0,s.useState)(null),[M,T]=(0,s.useState)(null),[A,q]=(0,s.useState)(null),_=(0,s.useCallback)(async()=>{C(!0),T(null);try{let[e,t,s]=await Promise.all([fetch("/ai-team/api/status",{cache:"no-store"}).catch(()=>null),fetch("/ai-team/api/usage",{cache:"no-store"}).catch(()=>null),fetch("/api/ai-sessions/buckets",{cache:"no-store"}).catch(()=>null)]);if(e?.ok){let t=await e.json();if(t.success&&t.workers){let e={};for(let s of t.workers)e[s.id]=s;d(e)}}else{let e={};[...h,...g].forEach(t=>{e[t.id]={id:t.id,status:"offline"}}),d(e)}if(t?.ok){let e=await t.json();if(e.success&&e.by_assistant){let t={},s=0;for(let a of e.by_assistant){let e=a.assistant_name?.toLowerCase();e&&(t[e]={id:e,requests:a.requests||0,tokens:a.total_tokens||0,cost:a.cost_usd||0},s+=a.cost_usd||0)}o(t),w(s)}}if(s?.ok){let e=await s.json();e.success&&e.stats&&v({sessions_today:e.stats.last_24h||0,extractions_today:e.stats.flagged||0,docs_published:e.stats.cleaned||0,flagged:e.stats.flagged||0,pending:e.stats.pending||0})}L(new Date)}catch(e){T(e instanceof Error?e.message:"Failed to fetch data")}finally{C(!1)}},[]);(0,s.useEffect)(()=>{_()},[]),(0,s.useEffect)(()=>{let e=setInterval(_,1e4);return()=>clearInterval(e)},[_]);let P=async(e,t)=>{q(`${e}-${t}`);try{(await fetch("/ai-team/api/control",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workerId:e,action:t})})).ok&&setTimeout(_,2e3)}catch(s){console.error(`Failed to ${t} ${e}:`,s)}finally{q(null)}},F=h.filter(t=>e[t.id]?.status==="online").length,D=h.length,R=N/k*100,I=R>80;return(0,t.jsxs)("div",{className:"h-full flex flex-col bg-gray-900 text-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-4 py-2 bg-gray-800 border-b border-gray-700 flex items-center justify-between shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-lg font-bold",children:"AI Team"}),(0,t.jsx)(j,{health:F===D?"healthy":F>0?"degraded":"down"}),(0,t.jsxs)("span",{className:"text-sm text-gray-400",children:[F,"/",D]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:`flex items-center gap-2 px-2 py-1 rounded ${I?"bg-red-900/50 text-red-400":"bg-gray-700 text-gray-300"}`,children:[(0,t.jsx)(c.DollarSign,{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-sm font-mono",children:["$",N.toFixed(2)," / $",k.toFixed(2)]}),I&&(0,t.jsx)(u.Bell,{className:"w-4 h-4 animate-pulse"})]}),S&&(0,t.jsx)("span",{className:"text-xs text-gray-500",children:S.toLocaleTimeString()}),(0,t.jsx)("button",{onClick:_,disabled:$,className:"p-1.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 rounded transition-colors",children:(0,t.jsx)(a.RefreshCw,{className:`w-4 h-4 ${$?"animate-spin":""}`})})]})]}),M&&(0,t.jsx)("div",{className:"px-4 py-1 bg-red-900/50 border-b border-red-700 text-red-300 text-sm",children:M}),(0,t.jsx)("div",{className:"px-4 py-3 bg-gray-800/50 border-b border-gray-700 shrink-0",children:(0,t.jsxs)("div",{className:"grid grid-cols-6 gap-3",children:[(0,t.jsx)(y,{icon:x.Zap,label:"Sessions Today",value:p?.sessions_today||0,color:"cyan"}),(0,t.jsx)(y,{icon:x.Zap,label:"Extracted",value:p?.extractions_today||0,color:"purple"}),(0,t.jsx)(y,{icon:r.CheckCircle,label:"Published",value:p?.docs_published||0,color:"green"}),(0,t.jsx)(y,{icon:m.Clock,label:"Pending",value:p?.pending||0,color:"yellow"}),(0,t.jsx)(y,{icon:c.DollarSign,label:"AI Cost Today",value:`$${N.toFixed(2)}`,color:"orange",isString:!0}),(0,t.jsxs)("div",{className:"p-2 rounded-lg bg-gray-800/50 border border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(c.DollarSign,{className:`w-4 h-4 ${I?"text-red-400":"text-blue-400"}`}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Budget Used"})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-white",children:[R.toFixed(0),"%"]}),(0,t.jsx)("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden mt-1",children:(0,t.jsx)("div",{className:`h-full ${R>90?"bg-red-500":R>70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(R,100)}%`}})})]})]})}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-[2] overflow-auto p-2",children:[(0,t.jsx)("div",{className:"space-y-1",children:h.map(s=>(0,t.jsx)(b,{worker:s,status:e[s.id],usage:n[s.id],actionLoading:A,onControl:P},s.id))}),(0,t.jsxs)("div",{className:"mt-3 pt-2 border-t border-gray-700",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1 px-2",children:"Infrastructure"}),(0,t.jsx)("div",{className:"space-y-1",children:g.map(s=>(0,t.jsx)(f,{service:s,status:e[s.id]},s.id))})]})]}),(0,t.jsxs)("div",{className:"flex-1 border-l border-gray-700 bg-gray-800/30 p-3 overflow-auto",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"Budget Limits"}),(0,t.jsx)("div",{className:"space-y-2",children:h.map(e=>{let s=n[e.id],a=s?.cost||0,l=a/e.dailyLimit*100,r=l>100,i=l>80;return(0,t.jsxs)("div",{className:"text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-0.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-gray-300",children:e.name}),(0,t.jsx)("span",{className:`px-1 rounded text-[10px] ${"claude"===e.model?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"}`,children:"claude"===e.model?"Claude":"GPT"})]}),(0,t.jsxs)("span",{className:r?"text-red-400":i?"text-yellow-400":"text-gray-500",children:["$",a.toFixed(2)," / $",e.dailyLimit.toFixed(2)]})]}),(0,t.jsx)("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full ${r?"bg-red-500":i?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${Math.min(l,100)}%`}})})]},e.id)})}),(0,t.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-700",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"Model Costs"}),(0,t.jsxs)("div",{className:"space-y-1 text-xs text-gray-500",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-purple-400",children:"Claude Haiku"}),(0,t.jsx)("span",{children:"$0.25 / $1.25 /1M"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-green-400",children:"GPT-4o-mini"}),(0,t.jsx)("span",{children:"$0.15 / $0.60 /1M"})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-700",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"Alerts"}),(0,t.jsxs)("div",{className:"space-y-1",children:[h.filter(e=>{let t=n[e.id];return t&&t.cost/e.dailyLimit>.8}).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded",children:[(0,t.jsx)(l.AlertTriangle,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:[e.name," near limit"]})]},e.id)),h.filter(t=>{let s=e[t.id];return s?.status==="offline"||s?.status==="error"}).map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-red-400 bg-red-900/20 px-2 py-1 rounded",children:[(0,t.jsx)(i.XCircle,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:[e.name," offline"]})]},e.id)),h.every(t=>e[t.id]?.status!=="offline")&&h.every(e=>!n[e.id]||n[e.id].cost/e.dailyLimit<=.8)&&(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"No alerts"})]})]})]})]})]})}function y({icon:e,label:s,value:a,color:l,isString:r=!1}){let i={cyan:"text-cyan-400",purple:"text-purple-400",green:"text-green-400",yellow:"text-yellow-400",orange:"text-orange-400",blue:"text-blue-400"};return(0,t.jsxs)("div",{className:"p-2 rounded-lg bg-gray-800/50 border border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(e,{className:`w-4 h-4 ${i[l]}`}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:s})]}),(0,t.jsx)("div",{className:`text-lg font-bold ${i[l]}`,children:r?a:a.toLocaleString()})]})}function b({worker:e,status:s,usage:a,actionLoading:l,onControl:r}){let i=s?.status||"offline",c=a?.cost||0,x=a?.requests||0,m=c/e.dailyLimit*100,u=m>100,h={online:{color:"bg-green-500",label:"ON"},offline:{color:"bg-gray-500",label:"OFF"},stuck:{color:"bg-yellow-500 animate-pulse",label:"STUCK"},error:{color:"bg-red-500 animate-pulse",label:"ERR"}}[i];return(0,t.jsxs)("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded bg-gray-800/50 border-l-2 ${{cyan:"border-l-cyan-500",purple:"border-l-purple-500",pink:"border-l-pink-500",blue:"border-l-blue-500",green:"border-l-green-500",yellow:"border-l-yellow-500",orange:"border-l-orange-500"}[e.color]}`,children:[(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${h.color}`,title:h.label}),(0,t.jsx)("div",{className:"w-20",children:(0,t.jsx)("span",{className:"font-medium text-white",children:e.name})}),(0,t.jsx)("div",{className:"w-16 text-xs text-gray-500",children:e.role}),(0,t.jsx)("div",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${"claude"===e.model?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"}`,children:"claude"===e.model?"Claude":"GPT"}),(0,t.jsxs)("div",{className:"w-12 text-xs text-gray-600 font-mono",children:[":",e.port]}),(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-3 text-xs",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:[x," reqs"]}),(0,t.jsxs)("span",{className:u?"text-red-400 font-medium":"text-gray-400",children:["$",c.toFixed(3)]})]}),(0,t.jsx)("div",{className:"w-16 h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full ${u?"bg-red-500":m>80?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${Math.min(m,100)}%`}})}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>r(e.id,"start"),disabled:l===`${e.id}-start`||"online"===i,className:"p-1 rounded hover:bg-green-600/30 disabled:opacity-30 transition-colors",title:"Start",children:(0,t.jsx)(d.Play,{className:"w-3 h-3 text-green-400"})}),(0,t.jsx)("button",{onClick:()=>r(e.id,"restart"),disabled:l===`${e.id}-restart`,className:"p-1 rounded hover:bg-orange-600/30 disabled:opacity-30 transition-colors",title:"Restart",children:(0,t.jsx)(n,{className:`w-3 h-3 text-orange-400 ${l===`${e.id}-restart`?"animate-spin":""}`})}),(0,t.jsx)("button",{onClick:()=>r(e.id,"stop"),disabled:l===`${e.id}-stop`||"offline"===i,className:"p-1 rounded hover:bg-red-600/30 disabled:opacity-30 transition-colors",title:"Stop",children:(0,t.jsx)(o.Square,{className:"w-3 h-3 text-red-400"})})]})]})}function f({service:e,status:s}){let a=s?.status||"offline";return(0,t.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 rounded bg-gray-800/30 text-sm",children:[(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${{online:"bg-green-500",offline:"bg-gray-500",stuck:"bg-yellow-500",error:"bg-red-500"}[a]}`}),(0,t.jsx)("span",{className:"text-gray-300",children:e.name}),(0,t.jsxs)("span",{className:"text-xs text-gray-600 font-mono",children:[":",e.port]}),(0,t.jsx)("span",{className:"flex-1 text-xs text-gray-500 text-right",children:e.role})]})}function j({health:e}){let s={healthy:{bg:"bg-green-600/20",text:"text-green-400",icon:r.CheckCircle},degraded:{bg:"bg-yellow-600/20",text:"text-yellow-400",icon:l.AlertTriangle},down:{bg:"bg-red-600/20",text:"text-red-400",icon:i.XCircle}}[e],a=s.icon;return(0,t.jsx)("div",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded ${s.bg}`,children:(0,t.jsx)(a,{className:`w-3 h-3 ${s.text}`})})}e.s(["default",()=>p],39085)}]);