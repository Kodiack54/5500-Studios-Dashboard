(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13016,e=>{"use strict";var t=e.i(4828),a=e.i(65508),r=e.i(72043),l=e.i(79443),s=e.i(3437);function i(){let e=(0,r.useParams)(),i=(0,r.useRouter)(),d=e.id,o=(0,a.useContext)(s.PageTitleContext),n=(0,a.useContext)(s.PageActionsContext),[c,m]=(0,a.useState)(null),[u,x]=(0,a.useState)([]),[b,h]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[S,C]=(0,a.useState)(""),[k,E]=(0,a.useState)(null),[P,T]=(0,a.useState)(null),[A,D]=(0,a.useState)(!0),[R,U]=(0,a.useState)(!1),[B,F]=(0,a.useState)(null),[L,M]=(0,a.useState)(null),O=async()=>{U(!0),F(null),M(null);try{let e=S;if(k){let t=new FormData;t.append("file",k),t.append("memberId",d);let a=await fetch("/api/team/members/upload-avatar",{method:"POST",body:t});a.ok&&(e=(await a.json()).url)}let t=await fetch(`/api/team/members/${d}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:b,status:g,phone:f,title:v,department:N,avatar_url:e})}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to update member");M("Member updated successfully!"),m(a.member),E(null)}catch(e){F(e.message)}finally{U(!1)}},$=async()=>{if(confirm("Are you sure you want to remove this member's Dashboard access?"))try{let e=await fetch(`/api/team/members/${d}`,{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete member")}i.push("/team/members")}catch(e){F(e.message)}};if((0,a.useEffect)(()=>{!async function(){try{let[e,t]=await Promise.all([fetch(`/api/team/members/${d}`),fetch("/api/team/roles")]);if(!e.ok)throw Error("Member not found");let a=await e.json(),r=await t.json();m(a),x(r),h(a.role),p(a.status),y(a.phone||""),j(a.title||""),w(a.department||""),C(a.avatar_url||"")}catch(e){F(e.message)}finally{D(!1)}}()},[d]),(0,a.useEffect)(()=>(o({title:c?`Edit ${c.name}`:"Edit Member",description:c?c.email:"Update role and permissions"}),n((0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.default,{href:"/team/members",className:"px-4 py-1.5 bg-black/20 text-white rounded-lg text-sm font-semibold hover:bg-black/30 transition-colors border border-black/30",children:"Cancel"}),(0,t.jsx)("button",{onClick:O,disabled:R,className:"px-4 py-1.5 bg-white text-blue-600 rounded-lg text-sm font-semibold hover:bg-white/90 transition-colors disabled:opacity-50 border border-black/30",children:R?"Saving...":"Save Changes"})]})),()=>{o({title:"",description:""}),n(null)}),[c,R,o,n,b,g]),A)return(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"text-gray-400",children:"Loading..."})});if(!c)return(0,t.jsx)("div",{className:"bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg",children:"Member not found"});let I=u.find(e=>e.id===b);return(0,t.jsxs)("div",{children:[B&&(0,t.jsx)("div",{className:"bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-6",children:B}),L&&(0,t.jsx)("div",{className:"bg-green-500/15 border border-green-500/30 text-green-400 px-4 py-3 rounded-lg mb-6",children:L}),(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Profile"}),(0,t.jsxs)("div",{className:"flex items-start gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 font-bold text-3xl overflow-hidden border-2 border-gray-600",children:P||S?(0,t.jsx)("img",{src:P||S,alt:c.name,className:"w-full h-full object-cover"}):c.name.charAt(0).toUpperCase()}),(0,t.jsxs)("label",{className:"mt-3 px-3 py-1.5 bg-gray-700 text-gray-300 rounded-lg text-xs font-medium hover:bg-gray-600 transition-colors cursor-pointer",children:["Upload Photo",(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){E(t);let e=new FileReader;e.onloadend=()=>{T(e.result)},e.readAsDataURL(t)}},className:"hidden"})]})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name"}),(0,t.jsx)("div",{className:"text-white text-lg",children:c.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Name is managed via NextBid account"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),(0,t.jsx)("div",{className:"text-white",children:c.email}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Email is managed via NextBid account"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Job Title"}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:"e.g. Senior Developer",className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Department"}),(0,t.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),placeholder:"e.g. Engineering",className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",value:f,onChange:e=>y(e.target.value),placeholder:"e.g. (555) 123-4567",className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2.5 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Role & Access"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role"}),(0,t.jsx)("select",{value:b,onChange:e=>h(e.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none",children:u.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (Level ",e.level,")"]},e.id))}),I&&(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:I.description})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,t.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2.5 text-white focus:border-blue-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"}),(0,t.jsx)("option",{value:"pending",children:"Pending"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 border border-red-500/30 rounded-xl p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:"Danger Zone"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:"Removing Dashboard access will prevent this user from accessing the dev dashboard. Their NextBid account will remain active."}),(0,t.jsx)("button",{onClick:$,className:"px-4 py-2 bg-red-500/15 text-red-400 border border-red-500/30 rounded-lg font-semibold hover:bg-red-500 hover:text-white transition-colors",children:"Remove Dashboard Access"})]})]})}e.s(["default",()=>i])}]);