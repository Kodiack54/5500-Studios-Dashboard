(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32476,e=>{"use strict";var t=e.i(43476),l=e.i(71645),r=e.i(18566);function s({projects:e,labels:s,assignableUsers:a}){let i=(0,r.useRouter)(),[o,n]=(0,l.useState)(!1),[d,c]=(0,l.useState)({title:"",description:"",type:"bug",priority:"normal",project:"",assignee:"",labels:[]}),u=async e=>{if(e.preventDefault(),!d.title.trim())return void alert("Title is required");if(!d.project)return void alert("Project is required");n(!0);try{let e=await fetch("/api/helpdesk/system-tickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),t=await e.json();t.success?i.push(`/helpdesk/system-tickets/${t.ticket_id}`):alert(t.error||"Failed to create ticket")}catch(e){alert(e.message)}finally{n(!1)}};return(0,t.jsxs)("form",{onSubmit:u,className:"max-w-3xl",children:[(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Title ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:d.title,onChange:e=>c(t=>({...t,title:e.target.value})),placeholder:"Brief description of the issue",className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Type ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)("select",{value:d.type,onChange:e=>c(t=>({...t,type:e.target.value})),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-blue-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"bug",children:"ðŸ› Bug"}),(0,t.jsx)("option",{value:"feature",children:"âœ¨ Feature Request"}),(0,t.jsx)("option",{value:"improvement",children:"ðŸ“ˆ Improvement"}),(0,t.jsx)("option",{value:"task",children:"ðŸ“‹ Task"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Priority ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)("select",{value:d.priority,onChange:e=>c(t=>({...t,priority:e.target.value})),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-blue-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"low",children:"Low"}),(0,t.jsx)("option",{value:"normal",children:"Normal"}),(0,t.jsx)("option",{value:"high",children:"High"}),(0,t.jsx)("option",{value:"critical",children:"Critical"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["Project ",(0,t.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,t.jsxs)("select",{value:d.project,onChange:e=>c(t=>({...t,project:e.target.value})),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-blue-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select project..."}),e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Assign To"}),(0,t.jsxs)("select",{value:d.assignee,onChange:e=>c(t=>({...t,assignee:e.target.value})),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-blue-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"",children:"Unassigned"}),a.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:d.description,onChange:e=>c(t=>({...t,description:e.target.value})),placeholder:"Detailed description of the issue, steps to reproduce, expected behavior, etc.",rows:8,className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none resize-none"})]}),s.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Labels"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void c(e=>({...e,labels:e.labels.includes(t)?e.labels.filter(e=>e!==t):[...e.labels,t]}))},className:`px-3 py-1 text-sm rounded-lg border transition-colors ${d.labels.includes(e.id)?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-gray-700 text-gray-400 border-gray-600 hover:bg-gray-600"}`,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>i.back(),className:"px-6 py-2 bg-gray-700 text-white rounded-lg text-sm font-semibold hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-500 text-white rounded-lg text-sm font-semibold hover:bg-blue-600 transition-colors disabled:opacity-50",children:o?"Creating...":"Create Ticket"})]})]})}e.s(["default",()=>s])}]);