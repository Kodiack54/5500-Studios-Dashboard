(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90172,e=>{"use strict";let t=(0,e.i(42945).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],90172)},47904,e=>{"use strict";let t=(0,e.i(42945).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],47904)},33653,e=>{"use strict";let t=(0,e.i(42945).default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);e.s(["GitBranch",()=>t],33653)},58728,e=>{"use strict";let t=(0,e.i(42945).default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);e.s(["Brain",()=>t],58728)},46786,e=>{"use strict";let t=(0,e.i(42945).default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);e.s(["Lightbulb",()=>t],46786)},42158,e=>{"use strict";let t=(0,e.i(42945).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],42158)},38862,e=>{"use strict";let t=(0,e.i(42945).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],38862)},35822,e=>{"use strict";let t=(0,e.i(42945).default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);e.s(["Server",()=>t],35822)},17385,e=>{"use strict";let t=(0,e.i(42945).default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["Database",()=>t],17385)},93230,e=>{"use strict";let t=(0,e.i(42945).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],93230)},54675,97935,e=>{"use strict";var t=e.i(42945);let s=(0,t.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>s],54675);let r=(0,t.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>r],97935)},90561,e=>{"use strict";let t=(0,e.i(42945).default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);e.s(["Key",()=>t],90561)},13401,e=>{"use strict";let t=(0,e.i(42945).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],13401)},63767,99842,e=>{"use strict";var t=e.i(42945);let s=(0,t.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>s],63767);let r=(0,t.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>r],99842)},36223,e=>{"use strict";let t=(0,e.i(42945).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],36223)},23913,e=>{"use strict";let t=(0,e.i(42945).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],23913)},37184,e=>{"use strict";var t=e.i(4828),s=e.i(65508),r=e.i(72043),a=e.i(13401),l=e.i(68694),n=e.i(76352),i=e.i(44142),d=e.i(56424),o=e.i(64501),c=e.i(57987),x=e.i(11565),p=e.i(35822),h=e.i(33653),m=e.i(13890),g=e.i(23913);function u({project:e,onEdit:s}){return(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[e.logo_url?(0,t.jsx)("img",{src:e.logo_url,alt:e.name,className:"w-16 h-16 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"w-16 h-16 rounded-lg bg-blue-600/20 flex items-center justify-center text-blue-400 text-2xl font-bold",children:e.name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-gray-400 mt-1",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-3",children:[e.droplet_name&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[(0,t.jsx)(p.Server,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{children:e.droplet_name}),e.droplet_ip&&(0,t.jsxs)("span",{className:"text-gray-600",children:["(",e.droplet_ip,")"]})]}),e.server_path&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[(0,t.jsx)(m.FolderOpen,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-mono text-xs",children:e.server_path})]}),e.git_repo&&(0,t.jsxs)("a",{href:e.git_repo,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-400 hover:text-blue-400 text-sm transition-colors",children:[(0,t.jsx)(h.GitBranch,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Repository"}),(0,t.jsx)(g.ExternalLink,{className:"w-3 h-3"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-3",children:[e.port_dev&&(0,t.jsxs)("a",{href:`http://${e.droplet_ip||"localhost"}:${e.port_dev}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-blue-600/20 text-blue-400 rounded text-sm hover:bg-blue-600/30 transition-colors flex items-center gap-1",children:["Dev: ",e.port_dev,(0,t.jsx)(g.ExternalLink,{className:"w-3 h-3"})]}),e.port_test&&(0,t.jsxs)("a",{href:`http://${e.droplet_ip||"localhost"}:${e.port_test}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-yellow-600/20 text-yellow-400 rounded text-sm hover:bg-yellow-600/30 transition-colors flex items-center gap-1",children:["Test: ",e.port_test,(0,t.jsx)(g.ExternalLink,{className:"w-3 h-3"})]}),e.port_prod&&(0,t.jsxs)("a",{href:`http://${e.droplet_ip||"localhost"}:${e.port_prod}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-green-600/20 text-green-400 rounded text-sm hover:bg-green-600/30 transition-colors flex items-center gap-1",children:["Prod: ",e.port_prod,(0,t.jsx)(g.ExternalLink,{className:"w-3 h-3"})]}),e.build_number&&(0,t.jsxs)("span",{className:"px-3 py-1 bg-gray-700 text-gray-400 rounded text-sm",children:["Build #",e.build_number]})]})]})]}),(0,t.jsxs)("button",{onClick:s,className:"flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:[(0,t.jsx)(d.Settings,{className:"w-4 h-4"}),"Edit"]})]})}var j=e.i(10857),y=e.i(27845),b=e.i(82347),f=e.i(91022),v=e.i(65926),N=e.i(25978),w=e.i(27805),k=e.i(70287),_=e.i(17691),C=e.i(1739),S=e.i(97557),P=e.i(15403),M=e.i(63717);let $={dev:{bg:"bg-blue-600/20",text:"text-blue-400",border:"border-blue-500",label:"Dev"},test:{bg:"bg-yellow-600/20",text:"text-yellow-400",border:"border-yellow-500",label:"Test"},prod:{bg:"bg-green-600/20",text:"text-green-400",border:"border-green-500",label:"Prod"}};function T(e,t){if(t){let s=e.port_dev||e.port_test||e.port_prod;if(s){if(t.port_dev&&s===t.port_dev)return"dev";if(t.port_test&&s===t.port_test)return"test";if(t.port_prod&&s===t.port_prod)return"prod"}}let s=(e.name+" "+e.slug).toLowerCase();return s.includes("prod")||s.includes("production")||s.includes("live")?"prod":s.includes("test")||s.includes("staging")||s.includes("qa")?"test":s.includes("dev")||s.includes("development")||s.includes("local")?"dev":null}function I(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin text-4xl",children:"âš™ï¸"})}),children:(0,t.jsx)(A,{})})}function A(){let e,p,h=(0,r.useRouter)(),m=(0,r.useSearchParams)(),g=m.get("project"),I=m.get("allClients"),{selectedClient:A,setSelectedClient:D}=(0,x.useClient)();(0,s.useEffect)(()=>{"true"===I&&null!==A&&D(null)},[I,A,D]);let[E,L]=(0,s.useState)([]),[q,V]=(0,s.useState)(null),[z,O]=(0,s.useState)("todos"),[B,H]=(0,s.useState)(!0),[R,U]=(0,s.useState)(!1),[K,G]=(0,s.useState)(null),[J,F]=(0,s.useState)(new Set),[Y,Q]=(0,s.useState)(null),[W,X]=(0,s.useState)(null),[Z,ee]=(0,s.useState)({}),[et,es]=(0,s.useState)(null),[er,ea]=(0,s.useState)([]),[el,en]=(0,s.useState)([]),[ei,ed]=(0,s.useState)([]),[eo,ec]=(0,s.useState)([]),[ex,ep]=(0,s.useState)(new Set(["todos","docs"])),eh=A?E.filter(e=>e.client_id===A.id):E,em=(e,t)=>{if(t){let t=ey.filter(t=>t.parent_id===e).map(e=>e.id),s={todos:0,knowledge:0,docs:0,conventions:0,bugs:0},r=Z[e];for(let e of(r&&(s.todos+=r.todos||0,s.knowledge+=r.knowledge||0,s.docs+=r.docs||0,s.conventions+=r.conventions||0,s.bugs+=r.bugs||0),t)){let t=Z[e];t&&(s.todos+=t.todos||0,s.knowledge+=t.knowledge||0,s.docs+=t.docs||0,s.conventions+=t.conventions||0,s.bugs+=t.bugs||0)}return s}return Z[e]||{todos:0,knowledge:0,docs:0,conventions:0,bugs:0}},eg=({stats:e})=>e.todos||e.knowledge||e.docs||e.conventions||e.bugs?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-12 text-center px-1.5 py-0.5 bg-blue-600/20 rounded",children:(0,t.jsx)("span",{className:"text-xs font-medium text-blue-400",children:e.todos})}),(0,t.jsx)("div",{className:"w-12 text-center px-1.5 py-0.5 bg-purple-600/20 rounded",children:(0,t.jsx)("span",{className:"text-xs font-medium text-purple-400",children:e.knowledge})}),(0,t.jsx)("div",{className:"w-12 text-center px-1.5 py-0.5 bg-green-600/20 rounded",children:(0,t.jsx)("span",{className:"text-xs font-medium text-green-400",children:e.docs})}),(0,t.jsx)("div",{className:"w-12 text-center px-1.5 py-0.5 bg-yellow-600/20 rounded",children:(0,t.jsx)("span",{className:"text-xs font-medium text-yellow-400",children:e.conventions})}),(0,t.jsx)("div",{className:"w-12 text-center px-1.5 py-0.5 bg-red-600/20 rounded",children:(0,t.jsx)("span",{className:"text-xs font-medium text-red-400",children:e.bugs})})]}):null,eu=(0,b.useSensors)((0,b.useSensor)(b.PointerSensor,{activationConstraint:{distance:8}}),(0,b.useSensor)(b.KeyboardSensor,{coordinateGetter:f.sortableKeyboardCoordinates})),ej=eh.filter(e=>e.is_parent),ey=eh.filter(e=>!e.is_parent&&e.parent_id),eb=eh.filter(e=>!e.is_parent&&!e.parent_id);(0,s.useEffect)(()=>{ef()},[]),(0,s.useEffect)(()=>{if(g&&eh.length>0){let e=eh.find(e=>e.slug===g);e&&V(e)}else g||V(null)},[g,eh]);let ef=async()=>{try{let e=await fetch("/project-management/api/projects"),t=await e.json();t.success&&(L(t.projects),ev())}catch(e){console.error("Error fetching projects:",e)}finally{H(!1)}},ev=async()=>{try{let e=await fetch("/project-management/api/projects/summary"),t=await e.json();t.success&&t.summaries&&ee(t.summaries)}catch(e){console.error("Error fetching summaries:",e)}},eN=async e=>{es(e);let t=e.server_path||"";try{let[e,s,r,a]=await Promise.all([fetch(`/project-management/api/docs?project_path=${encodeURIComponent(t)}`),fetch(`/project-management/api/todos?project_path=${encodeURIComponent(t)}`),fetch(`/project-management/api/knowledge?project_path=${encodeURIComponent(t)}`),fetch(`/project-management/api/bugs?project_path=${encodeURIComponent(t)}`)]),[l,n,i,d]=await Promise.all([e.json(),s.json(),r.json(),a.json()]);if(l.success&&l.docs&&ea(l.docs.slice(0,10)),n.success&&n.todos){let e=n.todos.sort((e,t)=>{let s={in_progress:0,pending:1,completed:2};return(s[e.status]||3)-(s[t.status]||3)});en(e.slice(0,10))}if(i.success&&i.knowledge&&ed(i.knowledge.slice(0,8)),d.success&&d.bugs){let e=d.bugs.filter(e=>"resolved"!==e.status);ec(e.slice(0,5))}}catch(e){console.error("Error fetching preview data:",e)}},ew=e=>{ep(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},ek=e=>{h.push(`/project-management?project=${e.slug}`)},e_=e=>{G(e),U(!0)},eC=()=>{G(null),U(!0)},eS=()=>{U(!1),G(null)},eP=()=>{ef(),eS()},eM=async e=>{let{active:t,over:s}=e;if(Q(null),X(null),!s||t.id===s.id)return;let r=eh.find(e=>e.id===t.id),a=eh.find(e=>e.id===s.id);if(r&&a){if(r.is_parent&&a.is_parent){let e=ej.findIndex(e=>e.id===t.id),r=ej.findIndex(e=>e.id===s.id);if(e!==r){let t=(0,f.arrayMove)(ej,e,r).map((e,t)=>fetch("/project-management/api/projects",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,sort_order:t})}));await Promise.all(t),ef()}return}if(!r.is_parent&&!a.is_parent&&r.parent_id===a.parent_id){let e=ey.filter(e=>e.parent_id===r.parent_id),a=e.findIndex(e=>e.id===t.id),l=e.findIndex(e=>e.id===s.id);if(a!==l){let t=(0,f.arrayMove)(e,a,l).map((e,t)=>fetch("/project-management/api/projects",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,sort_order:t})}));await Promise.all(t),ef()}return}if(!r.is_parent&&a.is_parent){await fetch("/project-management/api/projects",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,parent_id:a.id})}),F(e=>new Set([...e,a.id])),ef();return}if(!r.is_parent&&!a.is_parent&&r.parent_id!==a.parent_id&&a.parent_id){await fetch("/project-management/api/projects",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,parent_id:a.parent_id})}),F(e=>new Set([...e,a.parent_id])),ef();return}if(!r.is_parent&&!r.parent_id&&!a.is_parent&&!a.parent_id){let e=eb.findIndex(e=>e.id===t.id),r=eb.findIndex(e=>e.id===s.id);if(e!==r){let t=(0,f.arrayMove)(eb,e,r).map((e,t)=>fetch("/project-management/api/projects",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,sort_order:t+1e3})}));await Promise.all(t),ef()}}}},e$=Y?eh.find(e=>e.id===Y):null;if(B)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin text-4xl mb-4",children:"âš™ï¸"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Loading projects..."})]})});if(q)return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900 flex flex-col",children:[(0,t.jsxs)("div",{className:"bg-gray-800 border-b border-gray-700 px-6 py-4",children:[(0,t.jsxs)("button",{onClick:()=>{h.push("/project-management")},className:"flex items-center gap-2 text-gray-400 hover:text-white mb-4 transition-colors",children:[(0,t.jsx)(l.ArrowLeft,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"All Projects"})]}),(0,t.jsx)(u,{project:q,onEdit:()=>e_(q)})]}),(0,t.jsx)(j.default,{activeTab:z,onTabChange:O}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-6",children:(()=>{if(!q)return null;let e=q.server_path||"",s=q.is_parent||!1,r=s?eh.filter(e=>e.parent_id===q.id).map(e=>e.id):[];switch(z){case"todos":return(0,t.jsx)(N.default,{projectPath:e,projectId:q.id,projectName:q.name,isParent:s,childProjectIds:r});case"knowledge":return(0,t.jsx)(M.default,{projectPath:e,projectId:q.id,projectName:q.name,isParent:s,childProjectIds:r});case"docs":return(0,t.jsx)(w.default,{projectPath:e,projectId:q.id,projectName:q.name,isParent:s,childProjectIds:r});case"database":return(0,t.jsx)(k.default,{projectPath:e,projectId:q.id,projectName:q.name,isParent:s,childProjectIds:r});case"structure":return(0,t.jsx)(_.default,{projectPath:e,projectId:q.id,projectName:q.name,isParent:s,childProjectIds:r});case"conventions":return(0,t.jsx)(C.default,{projectPath:e,projectId:q.id,projectName:q.name,isParent:s,childProjectIds:r});case"notepad":return(0,t.jsx)(S.default,{projectPath:e,projectId:q.id,projectName:q.name,isParent:s,childProjectIds:r});case"bugs":return(0,t.jsx)(P.default,{projectPath:e,projectId:q.id,projectName:q.name,isParent:s,childProjectIds:r});default:return null}})()}),R&&(0,t.jsx)(y.default,{project:K,onClose:eS,onSave:eP})]});let eT=({project:e})=>{let s,{attributes:r,listeners:a,setNodeRef:l,transform:c,transition:x,isDragging:p}=(0,f.useSortable)({id:e.id}),h={transform:v.CSS.Transform.toString(c),transition:x,opacity:p?.5:1},m=(s=e.id,ey.filter(e=>e.parent_id===s)),g=J.has(e.id),u=m.length>0,j=m.filter(t=>"dev"===T(t,e)),y=m.filter(t=>"test"===T(t,e)),b=m.filter(t=>"prod"===T(t,e)),N=m.filter(e=>e.port_dev).map(e=>e.port_dev),w=m.filter(e=>e.port_test).map(e=>e.port_test),k=m.filter(e=>e.port_prod).map(e=>e.port_prod);return(0,t.jsxs)("div",{ref:l,style:h,className:"mb-2",children:[(0,t.jsx)("div",{className:`bg-gray-800 border rounded-lg p-4 transition-colors group ${W===e.id&&Y&&!eh.find(e=>e.id===Y)?.is_parent?"border-blue-500 bg-blue-500/10":"border-gray-700 hover:border-blue-500"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{...r,...a,className:"p-1 text-gray-600 hover:text-white cursor-grab active:cursor-grabbing",children:(0,t.jsx)(o.GripVertical,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{var t;return u&&(t=e.id,void F(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s}))},className:`p-1 rounded transition-colors ${u?"hover:bg-gray-700 text-gray-400 hover:text-white":"text-gray-700 cursor-default"}`,children:g?(0,t.jsx)(i.ChevronDown,{className:"w-5 h-5"}):(0,t.jsx)(n.ChevronRight,{className:"w-5 h-5"})}),e.logo_url?(0,t.jsx)("img",{src:e.logo_url,alt:e.name,className:"w-10 h-10 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-purple-600/20 flex items-center justify-center text-purple-400 text-lg font-bold",children:e.name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>eN(e),onDoubleClick:()=>ek(e),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-white font-semibold",children:e.name}),(0,t.jsx)("span",{className:"px-2 py-0.5 bg-purple-600/20 text-purple-400 rounded text-xs",children:"Parent"})]}),u&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[j.length>0&&(0,t.jsxs)("span",{className:"px-1.5 py-0.5 bg-blue-600/20 text-blue-400 rounded text-[10px]",children:[j.length," Dev"]}),y.length>0&&(0,t.jsxs)("span",{className:"px-1.5 py-0.5 bg-yellow-600/20 text-yellow-400 rounded text-[10px]",children:[y.length," Test"]}),b.length>0&&(0,t.jsxs)("span",{className:"px-1.5 py-0.5 bg-green-600/20 text-green-400 rounded text-[10px]",children:[b.length," Prod"]}),m.length>0&&0===j.length&&0===y.length&&0===b.length&&(0,t.jsxs)("span",{className:"text-gray-500 text-[10px]",children:[m.length," projects"]})]})]}),(0,t.jsx)(eg,{stats:em(e.id,!0)}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(N[0]||e.port_dev)&&(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-blue-600/20 text-blue-400 rounded text-xs",children:[":",N[0]||e.port_dev]}),(w[0]||e.port_test)&&(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-yellow-600/20 text-yellow-400 rounded text-xs",children:[":",w[0]||e.port_test]}),(k[0]||e.port_prod)&&(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-green-600/20 text-green-400 rounded text-xs",children:[":",k[0]||e.port_prod]})]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),e_(e)},className:"p-2 text-gray-500 hover:text-white hover:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-all",children:(0,t.jsx)(d.Settings,{className:"w-4 h-4"})})]})}),g&&m.length>0&&(0,t.jsx)("div",{className:"ml-8 mt-1 space-y-1 border-l-2 border-gray-700 pl-4",children:(0,t.jsx)(f.SortableContext,{items:m.map(e=>e.id),strategy:f.verticalListSortingStrategy,children:m.map(s=>(0,t.jsx)(eI,{child:s,parent:e},s.id))})})]})},eI=({child:e,parent:s})=>{let{attributes:r,listeners:a,setNodeRef:l,transform:n,transition:i,isDragging:c}=(0,f.useSortable)({id:e.id}),x={transform:v.CSS.Transform.toString(n),transition:i,opacity:c?.5:1},p=T(e,s),h=p?$[p]:null;return(0,t.jsxs)("div",{ref:l,style:x,className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors group
          ${h?`${h.bg} border ${h.border}`:"bg-gray-800 border border-gray-700"}
          hover:brightness-110`,children:[(0,t.jsx)("button",{...r,...a,className:"p-1 text-gray-500 hover:text-white cursor-grab active:cursor-grabbing",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(o.GripVertical,{className:"w-3 h-3"})}),h&&(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.text} ${h.bg}`,children:h.label}),(0,t.jsx)("span",{className:`font-medium flex-1 cursor-pointer ${h?h.text:"text-white"}`,onClick:()=>eN(e),onDoubleClick:()=>ek(e),children:e.name}),(0,t.jsx)(eg,{stats:em(e.id)}),(e.port_dev||e.port_test||e.port_prod)&&(0,t.jsxs)("span",{className:"text-gray-500 text-xs",children:[":",e.port_dev||e.port_test||e.port_prod]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),e_(e)},className:"p-1 text-gray-500 hover:text-white hover:bg-gray-600 rounded opacity-0 group-hover:opacity-100 transition-all",children:(0,t.jsx)(d.Settings,{className:"w-3 h-3"})})]})},eA=({project:e})=>{let{attributes:s,listeners:r,setNodeRef:a,transform:l,transition:n,isDragging:i}=(0,f.useSortable)({id:e.id}),c={transform:v.CSS.Transform.toString(l),transition:n,opacity:i?.5:1},x=T(e),p=x?$[x]:null;return(0,t.jsx)("div",{ref:a,style:c,className:"bg-gray-800 border border-gray-700 rounded-lg p-4 hover:border-blue-500 transition-colors cursor-pointer group mb-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{...s,...r,className:"p-1 text-gray-600 hover:text-white cursor-grab active:cursor-grabbing",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(o.GripVertical,{className:"w-4 h-4"})}),e.logo_url?(0,t.jsx)("img",{src:e.logo_url,alt:e.name,className:"w-10 h-10 rounded-lg object-cover"}):(0,t.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg font-bold
              ${p?`${p.bg} ${p.text}`:"bg-blue-600/20 text-blue-400"}`,children:e.name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>eN(e),onDoubleClick:()=>ek(e),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-white font-semibold",children:e.name}),p&&(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${p.bg} ${p.text}`,children:p.label})]}),(0,t.jsx)("span",{className:"text-gray-500 text-xs",children:e.slug})]}),(0,t.jsx)(eg,{stats:em(e.id)}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.port_dev&&(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-blue-600/20 text-blue-400 rounded text-xs",children:["Dev:",e.port_dev]}),e.port_test&&(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-yellow-600/20 text-yellow-400 rounded text-xs",children:["Test:",e.port_test]}),e.port_prod&&(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-green-600/20 text-green-400 rounded text-xs",children:["Prod:",e.port_prod]})]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),e_(e)},className:"p-2 text-gray-500 hover:text-white hover:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-all",children:(0,t.jsx)(d.Settings,{className:"w-4 h-4"})})]})})};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,t.jsxs)("div",{className:"bg-gray-800 border-b border-gray-700 px-6 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Project Management"}),A&&(0,t.jsxs)("span",{className:"px-3 py-1 bg-blue-600/20 text-blue-400 rounded-lg text-sm flex items-center gap-2",children:[(0,t.jsx)(c.Building2,{className:"w-4 h-4"}),A.name]})]}),(0,t.jsxs)("p",{className:"text-gray-400 text-sm mt-1",children:[ej.length," parent",1!==ej.length?"s":""," Â· ",ey.length+eb.length," project",ey.length+eb.length!==1?"s":""]})]}),(0,t.jsxs)("button",{onClick:eC,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,t.jsx)(a.Plus,{className:"w-4 h-4"}),"Add Project"]})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:(0,t.jsx)("div",{className:"grid grid-cols-5 gap-3",children:(e={todos:0,knowledge:0,docs:0,conventions:0,bugs:0},eh.forEach(t=>{let s=Z[t.id];s&&(e.todos+=s.todos||0,e.knowledge+=s.knowledge||0,e.docs+=s.docs||0,e.conventions+=s.conventions||0,e.bugs+=s.bugs||0)}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Todos"}),(0,t.jsx)("span",{className:"text-xl font-bold text-blue-400",children:e.todos})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Knowledge"}),(0,t.jsx)("span",{className:"text-xl font-bold text-purple-400",children:e.knowledge})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Docs"}),(0,t.jsx)("span",{className:"text-xl font-bold text-green-400",children:e.docs})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Conventions"}),(0,t.jsx)("span",{className:"text-xl font-bold text-yellow-400",children:e.conventions})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-900 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Bugs"}),(0,t.jsx)("span",{className:"text-xl font-bold text-red-400",children:e.bugs})]})]}))})})]}),(0,t.jsxs)("div",{className:"flex gap-6 p-6",children:[(0,t.jsx)("div",{className:"flex-1 max-w-3xl",children:0===eh.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Projects Yet"}),(0,t.jsx)("p",{className:"text-gray-400 mb-4",children:"Create your first project to get started"}),(0,t.jsx)("button",{onClick:eC,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Add Project"})]}):(0,t.jsxs)(b.DndContext,{sensors:eu,collisionDetection:b.closestCenter,onDragStart:e=>{Q(e.active.id)},onDragOver:e=>{X(e.over?.id||null)},onDragEnd:eM,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(f.SortableContext,{items:ej.map(e=>e.id),strategy:f.verticalListSortingStrategy,children:ej.map(e=>(0,t.jsx)(eT,{project:e},e.id))}),eb.length>0&&ej.length>0&&(0,t.jsx)("div",{className:"mt-6 mb-3",children:(0,t.jsx)("h3",{className:"text-gray-500 text-sm font-medium px-2",children:"Standalone Projects"})}),(0,t.jsx)(f.SortableContext,{items:eb.map(e=>e.id),strategy:f.verticalListSortingStrategy,children:eb.map(e=>(0,t.jsx)(eA,{project:e},e.id))})]}),(0,t.jsx)(b.DragOverlay,{children:e$&&(0,t.jsx)("div",{className:"bg-gray-800 border border-blue-500 rounded-lg p-4 shadow-xl opacity-90",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.GripVertical,{className:"w-4 h-4 text-blue-400"}),(0,t.jsx)("span",{className:"text-white font-medium",children:e$.name})]})})})]})}),(0,t.jsx)("div",{className:"w-96 flex-shrink-0",children:et?(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg sticky top-6 max-h-[calc(100vh-120px)] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 border-b border-gray-700 bg-gray-800 sticky top-0",children:[et.logo_url?(0,t.jsx)("img",{src:et.logo_url,alt:et.name,className:"w-12 h-12 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-purple-600/20 flex items-center justify-center text-purple-400 text-xl font-bold",children:et.name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-white font-semibold",children:et.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[et.is_parent&&(0,t.jsx)("span",{className:"text-xs text-purple-400",children:"Parent"}),et.description&&(0,t.jsx)("span",{className:"text-xs text-gray-500 truncate max-w-[180px]",children:et.description})]})]})]}),(0,t.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,t.jsx)("div",{className:"grid grid-cols-5 gap-2",children:(p=em(et.id,et.is_parent),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-center p-2 bg-gray-900 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-blue-400",children:p.todos}),(0,t.jsx)("div",{className:"text-[10px] text-gray-500",children:"Todos"})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-gray-900 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-purple-400",children:p.knowledge}),(0,t.jsx)("div",{className:"text-[10px] text-gray-500",children:"Know"})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-gray-900 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-green-400",children:p.docs}),(0,t.jsx)("div",{className:"text-[10px] text-gray-500",children:"Docs"})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-gray-900 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-yellow-400",children:p.conventions}),(0,t.jsx)("div",{className:"text-[10px] text-gray-500",children:"Conv"})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-gray-900 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-red-400",children:p.bugs}),(0,t.jsx)("div",{className:"text-[10px] text-gray-500",children:"Bugs"})]})]}))})}),(0,t.jsxs)("div",{className:"divide-y divide-gray-700",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>ew("todos"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-700/50 transition-colors",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-400"}),"Active Todos",(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",el.length,")"]})]}),(0,t.jsx)(i.ChevronDown,{className:`w-4 h-4 text-gray-500 transition-transform ${ex.has("todos")?"":"-rotate-90"}`})]}),ex.has("todos")&&el.length>0&&(0,t.jsx)("div",{className:"px-3 pb-3 space-y-1",children:el.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm p-2 bg-gray-900 rounded",children:[(0,t.jsx)("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${"in_progress"===e.status?"bg-blue-400 animate-pulse":"completed"===e.status?"bg-green-400":"bg-gray-500"}`}),(0,t.jsx)("span",{className:"text-gray-300 truncate flex-1",children:e.title}),"high"===e.priority&&(0,t.jsx)("span",{className:"text-red-400 text-xs font-bold",children:"!"})]},e.id))})]}),eo.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>ew("bugs"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-700/50 transition-colors",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-400"}),"Open Bugs",(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",eo.length,")"]})]}),(0,t.jsx)(i.ChevronDown,{className:`w-4 h-4 text-gray-500 transition-transform ${ex.has("bugs")?"":"-rotate-90"}`})]}),ex.has("bugs")&&(0,t.jsx)("div",{className:"px-3 pb-3 space-y-1",children:eo.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm p-2 bg-gray-900 rounded",children:[(0,t.jsx)("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${"critical"===e.severity?"bg-red-600 text-white":"high"===e.severity?"bg-orange-600 text-white":"bg-yellow-600 text-black"}`,children:e.severity}),(0,t.jsx)("span",{className:"text-gray-300 truncate flex-1",children:e.title})]},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>ew("docs"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-700/50 transition-colors",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-400"}),"Documentation",(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",er.length,")"]})]}),(0,t.jsx)(i.ChevronDown,{className:`w-4 h-4 text-gray-500 transition-transform ${ex.has("docs")?"":"-rotate-90"}`})]}),ex.has("docs")&&er.length>0&&(0,t.jsx)("div",{className:"px-3 pb-3 space-y-1",children:er.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm p-2 bg-gray-900 rounded",children:[(0,t.jsx)("span",{className:"px-1.5 py-0.5 bg-green-600/20 text-green-400 rounded text-[10px]",children:e.doc_type||"doc"}),(0,t.jsx)("span",{className:"text-gray-300 truncate flex-1",children:e.name})]},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>ew("knowledge"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-700/50 transition-colors",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-purple-400"}),"Knowledge Base",(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",ei.length,")"]})]}),(0,t.jsx)(i.ChevronDown,{className:`w-4 h-4 text-gray-500 transition-transform ${ex.has("knowledge")?"":"-rotate-90"}`})]}),ex.has("knowledge")&&ei.length>0&&(0,t.jsx)("div",{className:"px-3 pb-3 space-y-1",children:ei.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm p-2 bg-gray-900 rounded",children:[(0,t.jsx)("span",{className:"px-1.5 py-0.5 bg-purple-600/20 text-purple-400 rounded text-[10px]",children:e.category||"note"}),(0,t.jsx)("span",{className:"text-gray-300 truncate flex-1",children:e.title})]},e.id))})]})]}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-700 bg-gray-800 sticky bottom-0",children:(0,t.jsx)("button",{onClick:()=>ek(et),className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Open Project â†’"})})]}):(0,t.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700/50 border-dashed rounded-lg p-8 text-center",children:[(0,t.jsx)("div",{className:"text-gray-600 text-sm mb-2",children:"Select a project"}),(0,t.jsx)("div",{className:"text-gray-500 text-xs",children:"Click any project to see KPIs and details"})]})})]}),R&&(0,t.jsx)(y.default,{project:K,onClose:eS,onSave:eP})]})}e.s(["default",()=>I],37184)}]);