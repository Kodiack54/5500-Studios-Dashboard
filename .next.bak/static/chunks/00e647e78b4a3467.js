(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13890,e=>{"use strict";let t=(0,e.i(42945).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);e.s(["FolderOpen",()=>t],13890)},64501,e=>{"use strict";let t=(0,e.i(42945).default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>t],64501)},71440,e=>{"use strict";let t=(0,e.i(42945).default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckSquare",()=>t],71440)},93869,e=>{"use strict";let t=(0,e.i(42945).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>t],93869)},57022,66834,66743,49960,77377,e=>{"use strict";var t=e.i(42945);let r=(0,t.default)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);e.s(["Table",()=>r],57022);let a=(0,t.default)("git-commit-horizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);e.s(["GitCommit",()=>a],66834);let s=(0,t.default)("sticky-note",[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]]);e.s(["StickyNote",()=>s],66743);let l=(0,t.default)("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);e.s(["Bug",()=>l],49960);let n=(0,t.default)("folder-tree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);e.s(["FolderTree",()=>n],77377)},10857,27845,65926,82347,91022,25978,83196,72329,27805,70287,13539,17691,29221,e=>{"use strict";let t;var r,a,s,l,n,i,o,c,d,u,h,p,x,g,m,f,b,y,v,j=e.i(4828),w=e.i(71440),N=e.i(54675),C=e.i(57022),k=e.i(17385),S=e.i(66834),_=e.i(66743),E=e.i(49960),D=e.i(58728),T=e.i(77377),M=e.i(93869);let P=[{id:"todos",label:"Todos",icon:"CheckSquare"},{id:"knowledge",label:"Knowledge",icon:"Brain"},{id:"docs",label:"Docs",icon:"FileText"},{id:"database",label:"Database",icon:"Database"},{id:"structure",label:"Structure",icon:"FolderTree"},{id:"conventions",label:"Conventions",icon:"BookOpen"},{id:"notepad",label:"Notepad",icon:"StickyNote"},{id:"bugs",label:"Bug Reports",icon:"Bug"}],$={CheckSquare:(0,j.jsx)(w.CheckSquare,{className:"w-4 h-4"}),Brain:(0,j.jsx)(D.Brain,{className:"w-4 h-4"}),FileText:(0,j.jsx)(N.FileText,{className:"w-4 h-4"}),Table:(0,j.jsx)(C.Table,{className:"w-4 h-4"}),Database:(0,j.jsx)(k.Database,{className:"w-4 h-4"}),FolderTree:(0,j.jsx)(T.FolderTree,{className:"w-4 h-4"}),GitCommit:(0,j.jsx)(S.GitCommit,{className:"w-4 h-4"}),StickyNote:(0,j.jsx)(_.StickyNote,{className:"w-4 h-4"}),Bug:(0,j.jsx)(E.Bug,{className:"w-4 h-4"}),BookOpen:(0,j.jsx)(M.BookOpen,{className:"w-4 h-4"})};function O({activeTab:e,onTabChange:t}){return(0,j.jsx)("div",{className:"bg-gray-800 border-b border-gray-700",children:(0,j.jsx)("div",{className:"flex items-center gap-1 px-6",children:P.map(r=>(0,j.jsxs)("button",{onClick:()=>t(r.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${e===r.id?"text-blue-400 border-blue-500":"text-gray-400 border-transparent hover:text-white hover:border-gray-600"}`,children:[$[r.icon],r.label]},r.id))})})}e.s(["default",()=>O],10857);var R=e.i(65508),L=e.i(742);function A({project:e,onClose:t,onSave:r}){let[a,s]=(0,R.useState)([]),[l,n]=(0,R.useState)([]),[i,o]=(0,R.useState)({name:e?.name||"",slug:e?.slug||"",description:e?.description||"",client_id:e?.client_id||"",parent_id:e?.parent_id||"",is_parent:e?.is_parent??!1,is_active:e?.is_active??!0,is_main:e?.is_main??!1,droplet_name:e?.droplet_name||"",droplet_ip:e?.droplet_ip||"",server_path:e?.server_path||"",port_dev:e?.port_dev?.toString()||"",port_test:e?.port_test?.toString()||"",port_prod:e?.port_prod?.toString()||"",git_repo:e?.git_repo||"",table_prefix:e?.table_prefix||"",logo_url:e?.logo_url||""}),[c,d]=(0,R.useState)(!1),[u,h]=(0,R.useState)("");(0,R.useEffect)(()=>{p()},[]),(0,R.useEffect)(()=>{i.client_id?x(i.client_id):n([])},[i.client_id]);let p=async()=>{try{let e=await fetch("/project-management/api/clients"),t=await e.json();t.success&&s(t.clients)}catch(e){console.error("Failed to fetch clients:",e)}},x=async t=>{try{let r=await fetch(`/project-management/api/projects?client_id=${t}&is_parent=true`),a=await r.json();if(a.success){let t=(a.projects||[]).filter(t=>t.id!==e?.id);n(t)}}catch(e){console.error("Failed to fetch parent projects:",e)}},g=e=>{let{name:t,value:r,type:a}=e.target;o(s=>({...s,[t]:"checkbox"===a?e.target.checked:r}))},m=async t=>{t.preventDefault(),d(!0),h("");try{let t={...i,client_id:i.client_id||null,parent_id:i.is_parent?null:i.parent_id||null,is_parent:i.is_parent,is_main:i.is_main,port_dev:i.port_dev?parseInt(i.port_dev):null,port_test:i.port_test?parseInt(i.port_test):null,port_prod:i.port_prod?parseInt(i.port_prod):null},a=e?`/project-management/api/projects/${e.id}`:"/project-management/api/projects",s=e?"PATCH":"POST",l=await fetch(a,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await l.json();n.success?r():h(n.error||"Failed to save project")}catch(e){h("Failed to save project"),console.error(e)}finally{d(!1)}};return(0,j.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,j.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-700",children:[(0,j.jsx)("h2",{className:"text-xl font-semibold text-white",children:e?"Edit Project":"Add Project"}),(0,j.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:(0,j.jsx)(L.X,{className:"w-5 h-5"})})]}),(0,j.jsxs)("form",{onSubmit:m,className:"p-6 overflow-y-auto max-h-[calc(90vh-130px)]",children:[u&&(0,j.jsx)("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-500/50 text-red-400 rounded-lg",children:u}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"col-span-2",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Client"}),(0,j.jsxs)("select",{name:"client_id",value:i.client_id,onChange:g,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none",children:[(0,j.jsx)("option",{value:"",children:"-- No Client --"}),a.map(e=>(0,j.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),!i.is_parent&&(0,j.jsxs)("div",{className:"col-span-2",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Parent Project"}),(0,j.jsxs)("select",{name:"parent_id",value:i.parent_id,onChange:g,disabled:!i.client_id,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none disabled:opacity-50",children:[(0,j.jsx)("option",{value:"",children:"-- No Parent (Top Level) --"}),l.map(e=>(0,j.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,j.jsxs)("div",{className:"col-span-2 flex items-center gap-6",children:[(0,j.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,j.jsx)("input",{type:"checkbox",name:"is_active",checked:i.is_active,onChange:g,className:"w-4 h-4 rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-blue-500"}),(0,j.jsx)("span",{className:"text-gray-400",children:"Active"})]}),(0,j.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,j.jsx)("input",{type:"checkbox",name:"is_parent",checked:i.is_parent,onChange:g,className:"w-4 h-4 rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-blue-500"}),(0,j.jsx)("span",{className:"text-gray-400",children:"Parent Project"})]}),(0,j.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,j.jsx)("input",{type:"checkbox",name:"is_main",checked:i.is_main,onChange:g,className:"w-4 h-4 rounded bg-gray-700 border-gray-600 text-yellow-600 focus:ring-yellow-500"}),(0,j.jsx)("span",{className:"text-gray-400",children:"Main (Top of List)"})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Name *"}),(0,j.jsx)("input",{type:"text",name:"name",value:i.name,onChange:g,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Slug *"}),(0,j.jsx)("input",{type:"text",name:"slug",value:i.slug,onChange:g,required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{className:"col-span-2",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),(0,j.jsx)("textarea",{name:"description",value:i.description,onChange:g,rows:2,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none resize-none"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Droplet Name"}),(0,j.jsx)("input",{type:"text",name:"droplet_name",value:i.droplet_name,onChange:g,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Droplet IP"}),(0,j.jsx)("input",{type:"text",name:"droplet_ip",value:i.droplet_ip,onChange:g,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{className:"col-span-2",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Server Path"}),(0,j.jsx)("input",{type:"text",name:"server_path",value:i.server_path,onChange:g,placeholder:"/var/www/project-name",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none font-mono text-sm"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Dev Port"}),(0,j.jsx)("input",{type:"number",name:"port_dev",value:i.port_dev,onChange:g,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Test Port"}),(0,j.jsx)("input",{type:"number",name:"port_test",value:i.port_test,onChange:g,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Prod Port"}),(0,j.jsx)("input",{type:"number",name:"port_prod",value:i.port_prod,onChange:g,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Table Prefix"}),(0,j.jsx)("input",{type:"text",name:"table_prefix",value:i.table_prefix,onChange:g,placeholder:"project_",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{className:"col-span-2",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Git Repository"}),(0,j.jsx)("input",{type:"text",name:"git_repo",value:i.git_repo,onChange:g,placeholder:"https://github.com/org/repo",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]}),(0,j.jsxs)("div",{className:"col-span-2",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Logo URL"}),(0,j.jsx)("input",{type:"text",name:"logo_url",value:i.logo_url,onChange:g,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"})]})]})]}),(0,j.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-700",children:[(0,j.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,j.jsx)("button",{onClick:m,disabled:c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50 transition-colors",children:c?"Saving...":e?"Update Project":"Create Project"})]})]})})}e.s(["default",()=>A],27845);var F=e.i(83548);function I(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,R.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}let B="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function z(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function U(e){return"nodeType"in e}function W(e){var t,r;return e?z(e)?e:U(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function H(e){let{Document:t}=W(e);return e instanceof t}function J(e){return!z(e)&&e instanceof W(e).HTMLElement}function X(e){return e instanceof W(e).SVGElement}function K(e){return e?z(e)?e.document:U(e)?H(e)?e:J(e)||X(e)?e.ownerDocument:document:document:document}let V=B?R.useLayoutEffect:R.useEffect;function q(e){let t=(0,R.useRef)(e);return V(()=>{t.current=e}),(0,R.useCallback)(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return null==t.current?void 0:t.current(...r)},[])}function Y(){let e=(0,R.useRef)(null);return[(0,R.useCallback)((t,r)=>{e.current=setInterval(t,r)},[]),(0,R.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}function G(e,t){void 0===t&&(t=[e]);let r=(0,R.useRef)(e);return V(()=>{r.current!==e&&(r.current=e)},t),r}function Q(e,t){let r=(0,R.useRef)();return(0,R.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function Z(e){let t=q(e),r=(0,R.useRef)(null),a=(0,R.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,a]}function ee(e){let t=(0,R.useRef)();return(0,R.useEffect)(()=>{t.current=e},[e]),t.current}let et={};function er(e,t){return(0,R.useMemo)(()=>{if(t)return t;let r=null==et[e]?0:et[e]+1;return et[e]=r,e+"-"+r},[e,t])}function ea(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return a.reduce((t,r)=>{for(let[a,s]of Object.entries(r)){let r=t[a];null!=r&&(t[a]=r+e*s)}return t},{...t})}}let es=ea(1),el=ea(-1);function en(e){if(!e)return!1;let{KeyboardEvent:t}=W(e.target);return t&&e instanceof t}function ei(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=W(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let eo=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[eo.Translate.toString(e),eo.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),ec="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ed(e){return e.matches(ec)?e:e.querySelector(ec)}e.s(["CSS",()=>eo,"add",()=>es,"canUseDOM",()=>B,"findFirstFocusableNode",()=>ed,"getEventCoordinates",()=>ei,"getOwnerDocument",()=>K,"getWindow",()=>W,"isDocument",()=>H,"isHTMLElement",()=>J,"isKeyboardEvent",()=>en,"isNode",()=>U,"isSVGElement",()=>X,"isWindow",()=>z,"subtract",()=>el,"useCombinedRefs",()=>I,"useEvent",()=>q,"useInterval",()=>Y,"useIsomorphicLayoutEffect",()=>V,"useLatestValue",()=>G,"useLazyMemo",()=>Q,"useNodeRef",()=>Z,"usePrevious",()=>ee,"useUniqueId",()=>er],65926);let eu={display:"none"};function eh(e){let{id:t,value:r}=e;return R.default.createElement("div",{id:t,style:eu},r)}function ep(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;return R.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},r)}let ex=(0,R.createContext)(null),eg={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},em={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ef(e){var t;let r,{announcements:a=em,container:s,hiddenTextDescribedById:l,screenReaderInstructions:n=eg}=e,{announce:i,announcement:o}=function(){let[e,t]=(0,R.useState)("");return{announce:(0,R.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),c=er("DndLiveRegion"),[d,u]=(0,R.useState)(!1);if((0,R.useEffect)(()=>{u(!0)},[]),t=(0,R.useMemo)(()=>({onDragStart(e){let{active:t}=e;i(a.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;a.onDragMove&&i(a.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;i(a.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;i(a.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;i(a.onDragCancel({active:t,over:r}))}}),[i,a]),r=(0,R.useContext)(ex),(0,R.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!d)return null;let h=R.default.createElement(R.default.Fragment,null,R.default.createElement(eh,{id:l,value:n.draggable}),R.default.createElement(ep,{id:c,announcement:o}));return s?(0,F.createPortal)(h,s):h}function eb(){}function ey(e,t){return(0,R.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function ev(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,R.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let ej=Object.freeze({x:0,y:0});function ew(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function eN(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function eC(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function ek(e){let{left:t,top:r,height:a,width:s}=e;return[{x:t,y:r},{x:t+s,y:r},{x:t,y:r+a},{x:t+s,y:r+a}]}function eS(e,t){if(!e||0===e.length)return null;let[r]=e;return t?r[t]:r}function e_(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}let eE=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,s=e_(t,t.left,t.top),l=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){let r=ew(e_(a),s);l.push({id:t,data:{droppableContainer:e,value:r}})}}return l.sort(eN)},eD=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,s=ek(t),l=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){let r=ek(a),n=Number((s.reduce((e,t,a)=>e+ew(r[a],t),0)/4).toFixed(4));l.push({id:t,data:{droppableContainer:e,value:n}})}}return l.sort(eN)},eT=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,s=[];for(let e of a){let{id:a}=e,l=r.get(a);if(l){let r=function(e,t){let r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height);if(a<s&&r<l){let n=t.width*t.height,i=e.width*e.height,o=(s-a)*(l-r);return Number((o/(n+i-o)).toFixed(4))}return 0}(l,t);r>0&&s.push({id:a,data:{droppableContainer:e,value:r}})}}return s.sort(eC)};function eM(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ej}let eP=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function e$(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let eO={ignoreTransform:!1};function eR(e,t){void 0===t&&(t=eO);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:a}=W(e).getComputedStyle(e);t&&(r=function(e,t,r){let a=e$(t);if(!a)return e;let{scaleX:s,scaleY:l,x:n,y:i}=a,o=e.left-n-(1-s)*parseFloat(r),c=e.top-i-(1-l)*parseFloat(r.slice(r.indexOf(" ")+1)),d=s?e.width/s:e.width,u=l?e.height/l:e.height;return{width:d,height:u,top:c,right:o+d,bottom:c+u,left:o}}(r,t,a))}let{top:a,left:s,width:l,height:n,bottom:i,right:o}=r;return{top:a,left:s,width:l,height:n,bottom:i,right:o}}function eL(e){return eR(e,{ignoreTransform:!0})}function eA(e,t){let r=[];return e?function a(s){var l,n;let i;if(null!=t&&r.length>=t||!s)return r;if(H(s)&&null!=s.scrollingElement&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!J(s)||X(s)||r.includes(s))return r;let o=W(e).getComputedStyle(s);return(s!==e&&(void 0===(l=o)&&(l=W(s).getComputedStyle(s)),i=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=l[e];return"string"==typeof t&&i.test(t)}))&&r.push(s),void 0===(n=o)&&(n=W(s).getComputedStyle(s)),"fixed"===n.position)?r:a(s.parentNode)}(e):r}function eF(e){let[t]=eA(e,1);return null!=t?t:null}function eI(e){return B&&e?z(e)?e:U(e)?H(e)||e===K(e).scrollingElement?window:J(e)?e:null:null:null}function eB(e){return z(e)?e.scrollX:e.scrollLeft}function ez(e){return z(e)?e.scrollY:e.scrollTop}function eU(e){return{x:eB(e),y:ez(e)}}function eW(e){return!!B&&!!e&&e===document.scrollingElement}function eH(e){let t={x:0,y:0},r=eW(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},s=e.scrollTop<=t.y,l=e.scrollLeft<=t.x;return{isTop:s,isLeft:l,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:t}}(a=h||(h={}))[a.Forward=1]="Forward",a[a.Backward=-1]="Backward";let eJ={x:.2,y:.2};function eX(e){return e.reduce((e,t)=>es(e,eU(t)),ej)}function eK(e,t){if(void 0===t&&(t=eR),!e)return;let{top:r,left:a,bottom:s,right:l}=t(e);eF(e)&&(s<=0||l<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let eV=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eB(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+ez(t),0)}]];class eq{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=eA(t),a=eX(r);for(const[t,s,l]of(this.rect={...e},this.width=e.width,this.height=e.height,eV))for(const e of s)Object.defineProperty(this,e,{get:()=>{let s=l(r),n=a[t]-s;return this.rect[e]+n},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eY{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var a;null==(a=this.target)||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function eG(e,t){let r=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t&&a>t.y}function eQ(e){e.preventDefault()}function eZ(e){e.stopPropagation()}(s=p||(p={})).Click="click",s.DragStart="dragstart",s.Keydown="keydown",s.ContextMenu="contextmenu",s.Resize="resize",s.SelectionChange="selectionchange",s.VisibilityChange="visibilitychange",(l=x||(x={})).Space="Space",l.Down="ArrowDown",l.Right="ArrowRight",l.Left="ArrowLeft",l.Up="ArrowUp",l.Esc="Escape",l.Enter="Enter",l.Tab="Tab";let e0={start:[x.Space,x.Enter],cancel:[x.Esc],end:[x.Space,x.Enter,x.Tab]},e1=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case x.Right:return{...r,x:r.x+25};case x.Left:return{...r,x:r.x-25};case x.Down:return{...r,y:r.y+25};case x.Up:return{...r,y:r.y-25}}};class e2{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new eY(K(t)),this.windowListeners=new eY(W(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(p.Resize,this.handleCancel),this.windowListeners.add(p.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(p.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eK(r),t(ej)}handleKeyDown(e){if(en(e)){let{active:t,context:r,options:a}=this.props,{keyboardCodes:s=e0,coordinateGetter:l=e1,scrollBehavior:n="smooth"}=a,{code:i}=e;if(s.end.includes(i))return void this.handleEnd(e);if(s.cancel.includes(i))return void this.handleCancel(e);let{collisionRect:o}=r.current,c=o?{x:o.left,y:o.top}:ej;this.referenceCoordinates||(this.referenceCoordinates=c);let d=l(e,{active:t,context:r.current,currentCoordinates:c});if(d){let t=el(d,c),a={x:0,y:0},{scrollableAncestors:s}=r.current;for(let r of s){let s=e.code,{isTop:l,isRight:i,isLeft:o,isBottom:c,maxScroll:u,minScroll:h}=eH(r),p=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:a,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:s,width:e.clientWidth,height:e.clientHeight}}(r),g={x:Math.min(s===x.Right?p.right-p.width/2:p.right,Math.max(s===x.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(s===x.Down?p.bottom-p.height/2:p.bottom,Math.max(s===x.Down?p.top:p.top+p.height/2,d.y))},m=s===x.Right&&!i||s===x.Left&&!o,f=s===x.Down&&!c||s===x.Up&&!l;if(m&&g.x!==d.x){let e=r.scrollLeft+t.x,l=s===x.Right&&e<=u.x||s===x.Left&&e>=h.x;if(l&&!t.y)return void r.scrollTo({left:e,behavior:n});l?a.x=r.scrollLeft-e:a.x=s===x.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,a.x&&r.scrollBy({left:-a.x,behavior:n});break}if(f&&g.y!==d.y){let e=r.scrollTop+t.y,l=s===x.Down&&e<=u.y||s===x.Up&&e>=h.y;if(l&&!t.x)return void r.scrollTo({top:e,behavior:n});l?a.y=r.scrollTop-e:a.y=s===x.Down?r.scrollTop-u.y:r.scrollTop-h.y,a.y&&r.scrollBy({top:-a.y,behavior:n});break}}this.handleMove(e,es(el(d,this.referenceCoordinates),a))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function e4(e){return!!(e&&"distance"in e)}function e3(e){return!!(e&&"delay"in e)}e2.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=e0,onActivation:s}=t,{active:l}=r,{code:n}=e.nativeEvent;if(a.start.includes(n)){let t=l.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==s||s({event:e.nativeEvent}),!0)}return!1}}];class e5{constructor(e,t,r){var a;void 0===r&&(r=function(e){let{EventTarget:t}=W(e);return e instanceof t?e:K(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:l}=s;this.props=e,this.events=t,this.document=K(l),this.documentListeners=new eY(this.document),this.listeners=new eY(r),this.windowListeners=new eY(W(l)),this.initialCoordinates=null!=(a=ei(s))?a:ej,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(p.Resize,this.handleCancel),this.windowListeners.add(p.DragStart,eQ),this.windowListeners.add(p.VisibilityChange,this.handleCancel),this.windowListeners.add(p.ContextMenu,eQ),this.documentListeners.add(p.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(e3(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(e4(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(p.Click,eZ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(p.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:a,props:s}=this,{onMove:l,options:{activationConstraint:n}}=s;if(!a)return;let i=null!=(t=ei(e))?t:ej,o=el(a,i);if(!r&&n){if(e4(n)){if(null!=n.tolerance&&eG(o,n.tolerance))return this.handleCancel();if(eG(o,n.distance))return this.handleStart()}return e3(n)&&eG(o,n.tolerance)?this.handleCancel():void this.handlePending(n,o)}e.cancelable&&e.preventDefault(),l(i)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===x.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let e6={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class e7 extends e5{constructor(e){const{event:t}=e;super(e,e6,K(t.target))}}e7.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!!r.isPrimary&&0===r.button&&(null==a||a({event:r}),!0)}}];(n=g||(g={}))[n.RightClick=2]="RightClick";(i=m||(m={}))[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect",(o=f||(f={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let e8={x:{[h.Backward]:!1,[h.Forward]:!1},y:{[h.Backward]:!1,[h.Forward]:!1}};(c=b||(b={}))[c.Always=0]="Always",c[c.BeforeDragging=1]="BeforeDragging",c[c.WhileDragging=2]="WhileDragging",(y||(y={})).Optimized="optimized";let e9=new Map;function te(e,t){return Q(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function tt(e){let{callback:t,disabled:r}=e,a=q(t),s=(0,R.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(a)},[r]);return(0,R.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}function tr(e){return new eq(eR(e),e)}function ta(e,t,r){void 0===t&&(t=tr);let[a,s]=(0,R.useState)(null);function l(){s(a=>{if(!e)return null;if(!1===e.isConnected){var s;return null!=(s=null!=a?a:r)?s:null}let l=t(e);return JSON.stringify(a)===JSON.stringify(l)?a:l})}let n=function(e){let{callback:t,disabled:r}=e,a=q(t),s=(0,R.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(a)},[a,r]);return(0,R.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}({callback(t){if(e)for(let r of t){let{type:t,target:a}=r;if("childList"===t&&a instanceof HTMLElement&&a.contains(e)){l();break}}}}),i=tt({callback:l});return V(()=>{l(),e?(null==i||i.observe(e),null==n||n.observe(document.body,{childList:!0,subtree:!0})):(null==i||i.disconnect(),null==n||n.disconnect())},[e]),a}let ts=[];function tl(e,t){void 0===t&&(t=[]);let r=(0,R.useRef)(null);return(0,R.useEffect)(()=>{r.current=null},t),(0,R.useEffect)(()=>{let t=e!==ej;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?el(e,r.current):ej}function tn(e){return(0,R.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let ti=[];function to(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return J(t)?t:e}let tc=[{sensor:e7,options:{}},{sensor:e2,options:{}}],td={current:{}},tu={draggable:{measure:eL},droppable:{measure:eL,strategy:b.WhileDragging,frequency:y.Optimized},dragOverlay:{measure:eR}};class th extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let tp={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new th,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:eb},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tu,measureDroppableContainers:eb,windowRect:null,measuringScheduled:!1},tx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:eb,draggableNodes:new Map,over:null,measureDroppableContainers:eb},tg=(0,R.createContext)(tx),tm=(0,R.createContext)(tp);function tf(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new th}}}function tb(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:a}=r,s=new th(e.droppable.containers);return s.set(a,r),{...e,droppable:{...e.droppable,containers:s}}}case u.SetDroppableDisabled:{let{id:r,key:a,disabled:s}=t,l=e.droppable.containers.get(r);if(!l||a!==l.key)return e;let n=new th(e.droppable.containers);return n.set(r,{...l,disabled:s}),{...e,droppable:{...e.droppable,containers:n}}}case u.UnregisterDroppable:{let{id:r,key:a}=t,s=e.droppable.containers.get(r);if(!s||a!==s.key)return e;let l=new th(e.droppable.containers);return l.delete(r),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function ty(e){let{disabled:t}=e,{active:r,activatorEvent:a,draggableNodes:s}=(0,R.useContext)(tg),l=ee(a),n=ee(null==r?void 0:r.id);return(0,R.useEffect)(()=>{if(!t&&!a&&l&&null!=n){if(!en(l)||document.activeElement===l.target)return;let e=s.get(n);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=ed(e);if(t){t.focus();break}}})}},[a,t,s,n,l]),null}function tv(e,t){let{transform:r,...a}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...a}),r):r}let tj=(0,R.createContext)({...ej,scaleX:1,scaleY:1});(d=v||(v={}))[d.Uninitialized=0]="Uninitialized",d[d.Initializing=1]="Initializing",d[d.Initialized=2]="Initialized";let tw=(0,R.memo)(function(e){var t,r,a,s,l,n,i,o;let c,d,p,x,g,y,j,w,{id:N,accessibility:C,autoScroll:k=!0,children:S,sensors:_=tc,collisionDetection:E=eT,measuring:D,modifiers:T,...M}=e,[P,$]=(0,R.useReducer)(tb,void 0,tf),[O,L]=function(){let[e]=(0,R.useState)(()=>new Set),t=(0,R.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,R.useCallback)(t=>{let{type:r,event:a}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,a)})},[e]),t]}(),[A,I]=(0,R.useState)(v.Uninitialized),z=A===v.Initialized,{draggable:{active:U,nodes:H,translate:X},droppable:{containers:K}}=P,q=null!=U?H.get(U):null,et=(0,R.useRef)({initial:null,translated:null}),ea=(0,R.useMemo)(()=>{var e;return null!=U?{id:U,data:null!=(e=null==q?void 0:q.data)?e:td,rect:et}:null},[U,q]),el=(0,R.useRef)(null),[en,eo]=(0,R.useState)(null),[ec,ed]=(0,R.useState)(null),eu=G(M,Object.values(M)),eh=er("DndDescribedBy",N),ep=(0,R.useMemo)(()=>K.getEnabled(),[K]),eg=(0,R.useMemo)(()=>({draggable:{...tu.draggable,...null==D?void 0:D.draggable},droppable:{...tu.droppable,...null==D?void 0:D.droppable},dragOverlay:{...tu.dragOverlay,...null==D?void 0:D.dragOverlay}}),[null==D?void 0:D.draggable,null==D?void 0:D.droppable,null==D?void 0:D.dragOverlay]),{droppableRects:em,measureDroppableContainers:eb,measuringScheduled:ey}=function(e,t){let{dragging:r,dependencies:a,config:s}=t,[l,n]=(0,R.useState)(null),{frequency:i,measure:o,strategy:c}=s,d=(0,R.useRef)(e),u=function(){switch(c){case b.Always:return!1;case b.BeforeDragging:return r;default:return!r}}(),h=G(u),p=(0,R.useCallback)(function(e){void 0===e&&(e=[]),h.current||n(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),x=(0,R.useRef)(null),g=Q(t=>{if(u&&!r)return e9;if(!t||t===e9||d.current!==e||null!=l){let t=new Map;for(let r of e){if(!r)continue;if(l&&l.length>0&&!l.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,a=e?new eq(o(e),e):null;r.rect.current=a,a&&t.set(r.id,a)}return t}return t},[e,l,r,u,o]);return(0,R.useEffect)(()=>{d.current=e},[e]),(0,R.useEffect)(()=>{u||p()},[r,u]),(0,R.useEffect)(()=>{l&&l.length>0&&n(null)},[JSON.stringify(l)]),(0,R.useEffect)(()=>{u||"number"!=typeof i||null!==x.current||(x.current=setTimeout(()=>{p(),x.current=null},i))},[i,u,p,...a]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:null!=l}}(ep,{dragging:z,dependencies:[X.x,X.y],config:eg.droppable}),ev=Q(e=>{var t;return null==U?null:null!=(t=null!=g?g:e)?t:null},[g=(x=null!=U?H.get(U):void 0)?x.node.current:null,U]),ew=(0,R.useMemo)(()=>ec?ei(ec):null,[ec]),eN=(c=(null==en?void 0:en.autoScrollEnabled)===!1,d="object"==typeof k?!1===k.enabled:!1===k,p=z&&!c&&!d,"object"==typeof k?{...k,enabled:p}:{enabled:p}),eC=te(ev,eg.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:a,config:s=!0}=e,l=(0,R.useRef)(!1),{x:n,y:i}="boolean"==typeof s?{x:s,y:s}:s;V(()=>{if(!n&&!i||!t){l.current=!1;return}if(l.current||!a)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let s=eM(r(e),a);if(n||(s.x=0),i||(s.y=0),l.current=!0,Math.abs(s.x)>0||Math.abs(s.y)>0){let t=eF(e);t&&t.scrollBy({top:s.y,left:s.x})}},[t,n,i,a,r])}({activeNode:null!=U?H.get(U):null,config:eN.layoutShiftCompensation,initialRect:eC,measure:eg.draggable.measure});let ek=ta(ev,eg.draggable.measure,eC),e_=ta(ev?ev.parentElement:null),eE=(0,R.useRef)({activatorEvent:null,active:null,activeNode:ev,collisionRect:null,collisions:null,droppableRects:em,draggableNodes:H,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eD=K.getNodeFor(null==(t=eE.current.over)?void 0:t.id),e$=function(e){let{measure:t}=e,[r,a]=(0,R.useState)(null),s=tt({callback:(0,R.useCallback)(e=>{for(let{target:r}of e)if(J(r)){a(e=>{let a=t(r);return e?{...e,width:a.width,height:a.height}:a});break}},[t])}),[l,n]=Z((0,R.useCallback)(e=>{let r=to(e);null==s||s.disconnect(),r&&(null==s||s.observe(r)),a(r?t(r):null)},[t,s]));return(0,R.useMemo)(()=>({nodeRef:l,rect:r,setRef:n}),[r,l,n])}({measure:eg.dragOverlay.measure}),eO=null!=(r=e$.nodeRef.current)?r:ev,eL=z?null!=(a=e$.rect)?a:ek:null,eB=!!(e$.nodeRef.current&&e$.rect),ez=(y=te(l=eB?null:ek),eM(l,y)),eK=tn(eO?W(eO):null),eV=(n=z?null!=eD?eD:ev:null,j=(0,R.useRef)(n),w=Q(e=>n?e&&e!==ts&&n&&j.current&&n.parentNode===j.current.parentNode?e:eA(n):ts,[n]),(0,R.useEffect)(()=>{j.current=n},[n]),w),eY=function(e,t){void 0===t&&(t=eR);let[r]=e,a=tn(r?W(r):null),[s,l]=(0,R.useState)(ti);function n(){l(()=>e.length?e.map(e=>eW(e)?a:new eq(t(e),e)):ti)}let i=tt({callback:n});return V(()=>{null==i||i.disconnect(),n(),e.forEach(e=>null==i?void 0:i.observe(e))},[e]),s}(eV),eG=tv(T,{transform:{x:X.x-ez.x,y:X.y-ez.y,scaleX:1,scaleY:1},activatorEvent:ec,active:ea,activeNodeRect:ek,containerNodeRect:e_,draggingNodeRect:eL,over:eE.current.over,overlayNodeRect:e$.rect,scrollableAncestors:eV,scrollableAncestorRects:eY,windowRect:eK}),eQ=ew?es(ew,X):null,eZ=function(e){let[t,r]=(0,R.useState)(null),a=(0,R.useRef)(e),s=(0,R.useCallback)(e=>{let t=eI(e.target);t&&r(e=>e?(e.set(t,eU(t)),new Map(e)):null)},[]);return(0,R.useEffect)(()=>{let t=a.current;if(e!==t){l(t);let n=e.map(e=>{let t=eI(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,eU(t)]):null}).filter(e=>null!=e);r(n.length?new Map(n):null),a.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{let t=eI(e);null==t||t.removeEventListener("scroll",s)})}},[s,e]),(0,R.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>es(e,t),ej):eX(e):ej,[e,t])}(eV),e0=tl(eZ),e1=tl(eZ,[ek]),e2=es(eG,e0),e4=eL?eP(eL,eG):null,e3=ea&&e4?E({active:ea,collisionRect:e4,droppableRects:em,droppableContainers:ep,pointerCoordinates:eQ}):null,e5=eS(e3,"id"),[e6,e7]=(0,R.useState)(null),tr=(i=eB?eG:es(eG,e1),o=null!=(s=null==e6?void 0:e6.rect)?s:null,{...i,scaleX:o&&ek?o.width/ek.width:1,scaleY:o&&ek?o.height/ek.height:1}),th=(0,R.useRef)(null),tp=(0,R.useCallback)((e,t)=>{let{sensor:r,options:a}=t;if(null==el.current)return;let s=H.get(el.current);if(!s)return;let l=e.nativeEvent,n=new r({active:el.current,activeNode:s,event:l,options:a,context:eE,onAbort(e){if(!H.get(e))return;let{onDragAbort:t}=eu.current,r={id:e};null==t||t(r),O({type:"onDragAbort",event:r})},onPending(e,t,r,a){if(!H.get(e))return;let{onDragPending:s}=eu.current,l={id:e,constraint:t,initialCoordinates:r,offset:a};null==s||s(l),O({type:"onDragPending",event:l})},onStart(e){let t=el.current;if(null==t)return;let r=H.get(t);if(!r)return;let{onDragStart:a}=eu.current,s={activatorEvent:l,active:{id:t,data:r.data,rect:et}};(0,F.unstable_batchedUpdates)(()=>{null==a||a(s),I(v.Initializing),$({type:u.DragStart,initialCoordinates:e,active:t}),O({type:"onDragStart",event:s}),eo(th.current),ed(l)})},onMove(e){$({type:u.DragMove,coordinates:e})},onEnd:i(u.DragEnd),onCancel:i(u.DragCancel)});function i(e){return async function(){let{active:t,collisions:r,over:a,scrollAdjustedTranslate:s}=eE.current,n=null;if(t&&s){let{cancelDrop:i}=eu.current;n={activatorEvent:l,active:t,collisions:r,delta:s,over:a},e===u.DragEnd&&"function"==typeof i&&await Promise.resolve(i(n))&&(e=u.DragCancel)}el.current=null,(0,F.unstable_batchedUpdates)(()=>{$({type:e}),I(v.Uninitialized),e7(null),eo(null),ed(null),th.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(n){let e=eu.current[t];null==e||e(n),O({type:t,event:n})}})}}th.current=n},[H]),tx=(0,R.useCallback)((e,t)=>(r,a)=>{let s=r.nativeEvent,l=H.get(a);null!==el.current||!l||s.dndKit||s.defaultPrevented||!0===e(r,t.options,{active:l})&&(s.dndKit={capturedBy:t.sensor},el.current=a,tp(r,t))},[H,tp]),tw=(0,R.useMemo)(()=>_.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:tx(e.handler,t)}))]},[]),[_,tx]);(0,R.useEffect)(()=>{if(!B)return;let e=_.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},_.map(e=>{let{sensor:t}=e;return t})),V(()=>{ek&&A===v.Initializing&&I(v.Initialized)},[ek,A]),(0,R.useEffect)(()=>{let{onDragMove:e}=eu.current,{active:t,activatorEvent:r,collisions:a,over:s}=eE.current;if(!t||!r)return;let l={active:t,activatorEvent:r,collisions:a,delta:{x:e2.x,y:e2.y},over:s};(0,F.unstable_batchedUpdates)(()=>{null==e||e(l),O({type:"onDragMove",event:l})})},[e2.x,e2.y]),(0,R.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:a,scrollAdjustedTranslate:s}=eE.current;if(!e||null==el.current||!t||!s)return;let{onDragOver:l}=eu.current,n=a.get(e5),i=n&&n.rect.current?{id:n.id,rect:n.rect.current,data:n.data,disabled:n.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:s.x,y:s.y},over:i};(0,F.unstable_batchedUpdates)(()=>{e7(i),null==l||l(o),O({type:"onDragOver",event:o})})},[e5]),V(()=>{eE.current={activatorEvent:ec,active:ea,activeNode:ev,collisionRect:e4,collisions:e3,droppableRects:em,draggableNodes:H,draggingNode:eO,draggingNodeRect:eL,droppableContainers:K,over:e6,scrollableAncestors:eV,scrollAdjustedTranslate:e2},et.current={initial:eL,translated:e4}},[ea,ev,e3,e4,H,eO,eL,em,K,e6,eV,e2]),function(e){let{acceleration:t,activator:r=m.Pointer,canScroll:a,draggingRect:s,enabled:l,interval:n=5,order:i=f.TreeOrder,pointerCoordinates:o,scrollableAncestors:c,scrollableAncestorRects:d,delta:u,threshold:p}=e,x=function(e){let{delta:t,disabled:r}=e,a=ee(t);return Q(e=>{if(r||!a||!e)return e8;let s={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[h.Backward]:e.x[h.Backward]||-1===s.x,[h.Forward]:e.x[h.Forward]||1===s.x},y:{[h.Backward]:e.y[h.Backward]||-1===s.y,[h.Forward]:e.y[h.Forward]||1===s.y}}},[r,t,a])}({delta:u,disabled:!l}),[g,b]=Y(),y=(0,R.useRef)({x:0,y:0}),v=(0,R.useRef)({x:0,y:0}),j=(0,R.useMemo)(()=>{switch(r){case m.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case m.DraggableRect:return s}},[r,s,o]),w=(0,R.useRef)(null),N=(0,R.useCallback)(()=>{let e=w.current;if(!e)return;let t=y.current.x*v.current.x,r=y.current.y*v.current.y;e.scrollBy(t,r)},[]),C=(0,R.useMemo)(()=>i===f.TreeOrder?[...c].reverse():c,[i,c]);(0,R.useEffect)(()=>{if(!l||!c.length||!j)return void b();for(let e of C){if((null==a?void 0:a(e))===!1)continue;let r=d[c.indexOf(e)];if(!r)continue;let{direction:s,speed:l}=function(e,t,r,a,s){let{top:l,left:n,right:i,bottom:o}=r;void 0===a&&(a=10),void 0===s&&(s=eJ);let{isTop:c,isBottom:d,isLeft:u,isRight:p}=eH(e),x={x:0,y:0},g={x:0,y:0},m={height:t.height*s.y,width:t.width*s.x};return!c&&l<=t.top+m.height?(x.y=h.Backward,g.y=a*Math.abs((t.top+m.height-l)/m.height)):!d&&o>=t.bottom-m.height&&(x.y=h.Forward,g.y=a*Math.abs((t.bottom-m.height-o)/m.height)),!p&&i>=t.right-m.width?(x.x=h.Forward,g.x=a*Math.abs((t.right-m.width-i)/m.width)):!u&&n<=t.left+m.width&&(x.x=h.Backward,g.x=a*Math.abs((t.left+m.width-n)/m.width)),{direction:x,speed:g}}(e,r,j,t,p);for(let e of["x","y"])x[e][s[e]]||(l[e]=0,s[e]=0);if(l.x>0||l.y>0){b(),w.current=e,g(N,n),y.current=l,v.current=s;return}}y.current={x:0,y:0},v.current={x:0,y:0},b()},[t,N,a,b,l,n,JSON.stringify(j),JSON.stringify(x),g,c,C,d,JSON.stringify(p)])}({...eN,delta:X,draggingRect:e4,pointerCoordinates:eQ,scrollableAncestors:eV,scrollableAncestorRects:eY});let tN=(0,R.useMemo)(()=>({active:ea,activeNode:ev,activeNodeRect:ek,activatorEvent:ec,collisions:e3,containerNodeRect:e_,dragOverlay:e$,draggableNodes:H,droppableContainers:K,droppableRects:em,over:e6,measureDroppableContainers:eb,scrollableAncestors:eV,scrollableAncestorRects:eY,measuringConfiguration:eg,measuringScheduled:ey,windowRect:eK}),[ea,ev,ek,ec,e3,e_,e$,H,K,em,e6,eb,eV,eY,eg,ey,eK]),tC=(0,R.useMemo)(()=>({activatorEvent:ec,activators:tw,active:ea,activeNodeRect:ek,ariaDescribedById:{draggable:eh},dispatch:$,draggableNodes:H,over:e6,measureDroppableContainers:eb}),[ec,tw,ea,ek,$,eh,H,e6,eb]);return R.default.createElement(ex.Provider,{value:L},R.default.createElement(tg.Provider,{value:tC},R.default.createElement(tm.Provider,{value:tN},R.default.createElement(tj.Provider,{value:tr},S)),R.default.createElement(ty,{disabled:(null==C?void 0:C.restoreFocus)===!1})),R.default.createElement(ef,{...C,hiddenTextDescribedById:eh}))}),tN=(0,R.createContext)(null),tC="button";function tk(e){let{id:t,data:r,disabled:a=!1,attributes:s}=e,l=er("Draggable"),{activators:n,activatorEvent:i,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=(0,R.useContext)(tg),{role:p=tC,roleDescription:x="draggable",tabIndex:g=0}=null!=s?s:{},m=(null==o?void 0:o.id)===t,f=(0,R.useContext)(m?tj:tN),[b,y]=Z(),[v,j]=Z(),w=(0,R.useMemo)(()=>n.reduce((e,r)=>{let{eventName:a,handler:s}=r;return e[a]=e=>{s(e,t)},e},{}),[n,t]),N=G(r);return V(()=>(u.set(t,{id:t,key:l,node:b,activatorNode:v,data:N}),()=>{let e=u.get(t);e&&e.key===l&&u.delete(t)}),[u,t]),{active:o,activatorEvent:i,activeNodeRect:c,attributes:(0,R.useMemo)(()=>({role:p,tabIndex:g,"aria-disabled":a,"aria-pressed":!!m&&p===tC||void 0,"aria-roledescription":x,"aria-describedby":d.draggable}),[a,p,g,m,x,d.draggable]),isDragging:m,listeners:a?void 0:w,node:b,over:h,setNodeRef:y,setActivatorNodeRef:j,transform:f}}function tS(){return(0,R.useContext)(tm)}let t_={timeout:25};function tE(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:s}=e,l=er("Droppable"),{active:n,dispatch:i,over:o,measureDroppableContainers:c}=(0,R.useContext)(tg),d=(0,R.useRef)({disabled:r}),h=(0,R.useRef)(!1),p=(0,R.useRef)(null),x=(0,R.useRef)(null),{disabled:g,updateMeasurementsFor:m,timeout:f}={...t_,...s},b=G(null!=m?m:a),y=tt({callback:(0,R.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{c(Array.isArray(b.current)?b.current:[b.current]),x.current=null},f)},[f]),disabled:g||!n}),[v,j]=Z((0,R.useCallback)((e,t)=>{y&&(t&&(y.unobserve(t),h.current=!1),e&&y.observe(e))},[y])),w=G(t);return(0,R.useEffect)(()=>{y&&v.current&&(y.disconnect(),h.current=!1,y.observe(v.current))},[v,y]),(0,R.useEffect)(()=>(i({type:u.RegisterDroppable,element:{id:a,key:l,disabled:r,node:v,rect:p,data:w}}),()=>i({type:u.UnregisterDroppable,key:l,id:a})),[a]),(0,R.useEffect)(()=>{r!==d.current.disabled&&(i({type:u.SetDroppableDisabled,id:a,key:l,disabled:r}),d.current.disabled=r)},[a,l,r,i]),{active:n,rect:p,isOver:(null==o?void 0:o.id)===a,node:v,over:o,setNodeRef:j}}function tD(e){let{animation:t,children:r}=e,[a,s]=(0,R.useState)(null),[l,n]=(0,R.useState)(null),i=ee(r);return r||a||!i||s(i),V(()=>{if(!l)return;let e=null==a?void 0:a.key,r=null==a?void 0:a.props.id;null==e||null==r?s(null):Promise.resolve(t(r,l)).then(()=>{s(null)})},[t,a,l]),R.default.createElement(R.default.Fragment,null,r,a?(0,R.cloneElement)(a,{ref:n}):null)}let tT={x:0,y:0,scaleX:1,scaleY:1};function tM(e){let{children:t}=e;return R.default.createElement(tg.Provider,{value:tx},R.default.createElement(tj.Provider,{value:tT},t))}let tP={position:"fixed",touchAction:"none"},t$=e=>en(e)?"transform 250ms ease":void 0,tO=(0,R.forwardRef)((e,t)=>{let{as:r,activatorEvent:a,adjustScale:s,children:l,className:n,rect:i,style:o,transform:c,transition:d=t$}=e;if(!i)return null;let u=s?c:{...c,scaleX:1,scaleY:1},h={...tP,width:i.width,height:i.height,top:i.top,left:i.left,transform:eo.Transform.toString(u),transformOrigin:s&&a?function(e,t){let r=ei(e);if(!r)return"0 0";let a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}(a,i):void 0,transition:"function"==typeof d?d(a):d,...o};return R.default.createElement(r,{className:n,style:h,ref:t},l)}),tR={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:eo.Transform.toString(t)},{transform:eo.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:a}=e,s={},{styles:l,className:n}=t;if(null!=l&&l.active)for(let[e,t]of Object.entries(l.active))void 0!==t&&(s[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=l&&l.dragOverlay)for(let[e,t]of Object.entries(l.dragOverlay))void 0!==t&&a.node.style.setProperty(e,t);return null!=n&&n.active&&r.node.classList.add(n.active),null!=n&&n.dragOverlay&&a.node.classList.add(n.dragOverlay),function(){for(let[e,t]of Object.entries(s))r.node.style.setProperty(e,t);null!=n&&n.active&&r.node.classList.remove(n.active)}})},tL=0,tA=R.default.memo(e=>{var t;let{adjustScale:r=!1,children:a,dropAnimation:s,style:l,transition:n,modifiers:i,wrapperElement:o="div",className:c,zIndex:d=999}=e,{activatorEvent:u,active:h,activeNodeRect:p,containerNodeRect:x,draggableNodes:g,droppableContainers:m,dragOverlay:f,over:b,measuringConfiguration:y,scrollableAncestors:v,scrollableAncestorRects:j,windowRect:w}=tS(),N=(0,R.useContext)(tj),C=(t=null==h?void 0:h.id,(0,R.useMemo)(()=>{if(null!=t)return++tL},[t])),k=tv(i,{activatorEvent:u,active:h,activeNodeRect:p,containerNodeRect:x,draggingNodeRect:f.rect,over:b,overlayNodeRect:f.rect,scrollableAncestors:v,scrollableAncestorRects:j,transform:N,windowRect:w}),S=te(p),_=function(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:s}=e;return q((e,l)=>{if(null===t)return;let n=r.get(e);if(!n)return;let i=n.node.current;if(!i)return;let o=to(l);if(!o)return;let{transform:c}=W(l).getComputedStyle(l),d=e$(c);if(!d)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:a,keyframes:s}={...tR,...e};return e=>{let{active:l,dragOverlay:n,transform:i,...o}=e;if(!t)return;let c={x:n.rect.left-l.rect.left,y:n.rect.top-l.rect.top},d={scaleX:1!==i.scaleX?l.rect.width*i.scaleX/n.rect.width:1,scaleY:1!==i.scaleY?l.rect.height*i.scaleY/n.rect.height:1},u={x:i.x-c.x,y:i.y-c.y,...d},h=s({...o,active:l,dragOverlay:n,transform:{initial:i,final:u}}),[p]=h,x=h[h.length-1];if(JSON.stringify(p)===JSON.stringify(x))return;let g=null==a?void 0:a({active:l,dragOverlay:n,...o}),m=n.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{m.onfinish=()=>{null==g||g(),e()}})}}(t);return eK(i,s.draggable.measure),u({active:{id:e,data:n.data,node:i,rect:s.draggable.measure(i)},draggableNodes:r,dragOverlay:{node:l,rect:s.dragOverlay.measure(o)},droppableContainers:a,measuringConfiguration:s,transform:d})})}({config:s,draggableNodes:g,droppableContainers:m,measuringConfiguration:y}),E=S?f.setRef:void 0;return R.default.createElement(tM,null,R.default.createElement(tD,{animation:_},h&&C?R.default.createElement(tO,{key:C,id:h.id,ref:E,as:o,activatorEvent:u,adjustScale:r,className:c,transition:n,rect:S,style:{zIndex:d,...l},transform:k},a):null))});function tF(e,t,r){let a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function tI(e){return null!==e&&e>=0}e.s(["DndContext",()=>tw,"DragOverlay",()=>tA,"KeyboardCode",()=>x,"KeyboardSensor",()=>e2,"PointerSensor",()=>e7,"closestCenter",()=>eE,"closestCorners",()=>eD,"getClientRect",()=>eR,"getFirstCollision",()=>eS,"getScrollableAncestors",()=>eA,"useDndContext",()=>tS,"useDraggable",()=>tk,"useDroppable",()=>tE,"useSensor",()=>ey,"useSensors",()=>ev],82347);let tB=e=>{let{rects:t,activeIndex:r,overIndex:a,index:s}=e,l=tF(t,a,r),n=t[s],i=l[s];return i&&n?{x:i.left-n.left,y:i.top-n.top,scaleX:i.width/n.width,scaleY:i.height/n.height}:null},tz={scaleX:1,scaleY:1},tU=e=>{var t,r,a,s;let l,n,i,{activeIndex:o,activeNodeRect:c,index:d,rects:u,overIndex:h}=e,p=null!=(t=u[o])?t:c;if(!p)return null;if(d===o){let e=u[h];return e?{x:0,y:o<h?e.top+e.height-(p.top+p.height):e.top-p.top,...tz}:null}let x=(r=u,a=d,s=o,l=r[a],n=r[a-1],i=r[a+1],l?s<a?n?l.top-(n.top+n.height):i?i.top-(l.top+l.height):0:i?i.top-(l.top+l.height):n?l.top-(n.top+n.height):0:0);return d>o&&d<=h?{x:0,y:-p.height-x,...tz}:d<o&&d>=h?{x:0,y:p.height+x,...tz}:{x:0,y:0,...tz}},tW="Sortable",tH=R.default.createContext({activeIndex:-1,containerId:tW,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tB,disabled:{draggable:!1,droppable:!1}});function tJ(e){let{children:t,id:r,items:a,strategy:s=tB,disabled:l=!1}=e,{active:n,dragOverlay:i,droppableRects:o,over:c,measureDroppableContainers:d}=tS(),u=er(tW,r),h=null!==i.rect,p=(0,R.useMemo)(()=>a.map(e=>"object"==typeof e&&"id"in e?e.id:e),[a]),x=null!=n,g=n?p.indexOf(n.id):-1,m=c?p.indexOf(c.id):-1,f=(0,R.useRef)(p),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(p,f.current),y=-1!==m&&-1===g||b,v="boolean"==typeof l?{draggable:l,droppable:l}:l;V(()=>{b&&x&&d(p)},[b,p,x,d]),(0,R.useEffect)(()=>{f.current=p},[p]);let j=(0,R.useMemo)(()=>({activeIndex:g,containerId:u,disabled:v,disableTransforms:y,items:p,overIndex:m,useDragOverlay:h,sortedRects:p.reduce((e,t,r)=>{let a=o.get(t);return a&&(e[r]=a),e},Array(p.length)),strategy:s}),[g,u,v.draggable,v.droppable,y,p,m,o,h,s]);return R.default.createElement(tH.Provider,{value:j},t)}let tX=e=>{let{id:t,items:r,activeIndex:a,overIndex:s}=e;return tF(r,a,s).indexOf(t)},tK=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:s,items:l,newIndex:n,previousItems:i,previousContainerId:o,transition:c}=e;return!!c&&!!a&&(i===l||s!==n)&&(!!r||n!==s&&t===o)},tV={duration:200,easing:"ease"},tq="transform",tY=eo.Transition.toString({property:tq,duration:0,easing:"linear"}),tG={roleDescription:"sortable"};function tQ(e){var t,r,a,s;let{animateLayoutChanges:l=tK,attributes:n,disabled:i,data:o,getNewIndex:c=tX,id:d,strategy:u,resizeObserverConfig:h,transition:p=tV}=e,{items:x,containerId:g,activeIndex:m,disabled:f,disableTransforms:b,sortedRects:y,overIndex:v,useDragOverlay:j,strategy:w}=(0,R.useContext)(tH),N=(t=i,r=f,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(a=null==t?void 0:t.draggable)?a:r.draggable,droppable:null!=(s=null==t?void 0:t.droppable)?s:r.droppable}),C=x.indexOf(d),k=(0,R.useMemo)(()=>({sortable:{containerId:g,index:C,items:x},...o}),[g,o,C,x]),S=(0,R.useMemo)(()=>x.slice(x.indexOf(d)),[x,d]),{rect:_,node:E,isOver:D,setNodeRef:T}=tE({id:d,data:k,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...h}}),{active:M,activatorEvent:P,activeNodeRect:$,attributes:O,setNodeRef:L,listeners:A,isDragging:F,over:B,setActivatorNodeRef:z,transform:U}=tk({id:d,data:k,attributes:{...tG,...n},disabled:N.draggable}),W=I(T,L),H=!!M,J=H&&!b&&tI(m)&&tI(v),X=!j&&F,K=X&&J?U:null,q=J?null!=K?K:(null!=u?u:w)({rects:y,activeNodeRect:$,activeIndex:m,overIndex:v,index:C}):null,Y=tI(m)&&tI(v)?c({id:d,items:x,activeIndex:m,overIndex:v}):C,G=null==M?void 0:M.id,Q=(0,R.useRef)({activeId:G,items:x,newIndex:Y,containerId:g}),Z=x!==Q.current.items,ee=l({active:M,containerId:g,isDragging:F,isSorting:H,id:d,index:C,items:x,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:p,wasDragging:null!=Q.current.activeId}),et=function(e){let{disabled:t,index:r,node:a,rect:s}=e,[l,n]=(0,R.useState)(null),i=(0,R.useRef)(r);return V(()=>{if(!t&&r!==i.current&&a.current){let e=s.current;if(e){let t=eR(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&n(r)}}r!==i.current&&(i.current=r)},[t,r,a,s]),(0,R.useEffect)(()=>{l&&n(null)},[l]),l}({disabled:!ee,index:C,node:E,rect:_});return(0,R.useEffect)(()=>{H&&Q.current.newIndex!==Y&&(Q.current.newIndex=Y),g!==Q.current.containerId&&(Q.current.containerId=g),x!==Q.current.items&&(Q.current.items=x)},[H,Y,g,x]),(0,R.useEffect)(()=>{if(G===Q.current.activeId)return;if(null!=G&&null==Q.current.activeId){Q.current.activeId=G;return}let e=setTimeout(()=>{Q.current.activeId=G},50);return()=>clearTimeout(e)},[G]),{active:M,activeIndex:m,attributes:O,data:k,rect:_,index:C,newIndex:Y,items:x,isOver:D,isSorting:H,isDragging:F,listeners:A,node:E,overIndex:v,over:B,setNodeRef:W,setActivatorNodeRef:z,setDroppableNodeRef:T,setDraggableNodeRef:L,transform:null!=et?et:q,transition:et||Z&&Q.current.newIndex===C?tY:(!X||en(P))&&p&&(H||ee)?eo.Transition.toString({...p,property:tq}):void 0}}function tZ(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let t0=[x.Down,x.Right,x.Up,x.Left],t1=(e,t)=>{let{context:{active:r,collisionRect:a,droppableRects:s,droppableContainers:l,over:n,scrollableAncestors:i}}=t;if(t0.includes(e.code)){if(e.preventDefault(),!r||!a)return;let t=[];l.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;let l=s.get(r.id);if(l)switch(e.code){case x.Down:a.top<l.top&&t.push(r);break;case x.Up:a.top>l.top&&t.push(r);break;case x.Left:a.left>l.left&&t.push(r);break;case x.Right:a.left<l.left&&t.push(r)}});let d=eD({active:r,collisionRect:a,droppableRects:s,droppableContainers:t,pointerCoordinates:null}),u=eS(d,"id");if(u===(null==n?void 0:n.id)&&d.length>1&&(u=d[1].id),null!=u){let e=l.get(r.id),t=l.get(u),n=t?s.get(t.id):null,d=null==t?void 0:t.node.current;if(d&&n&&e&&t){var o,c;let r=eA(d).some((e,t)=>i[t]!==e),s=t2(e,t),l=(o=e,c=t,!!tZ(o)&&!!tZ(c)&&!!t2(o,c)&&o.data.current.sortable.index<c.data.current.sortable.index),u=r||!s?{x:0,y:0}:{x:l?a.width-n.width:0,y:l?a.height-n.height:0},h={x:n.left,y:n.top};return u.x&&u.y?h:el(h,u)}}}};function t2(e,t){return!!tZ(e)&&!!tZ(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}e.s(["SortableContext",()=>tJ,"arrayMove",()=>tF,"sortableKeyboardCoordinates",()=>t1,"useSortable",()=>tQ,"verticalListSortingStrategy",()=>tU],91022);var t4=e.i(38862),t3=e.i(90172),t5=e.i(98411),t6=e.i(44142),t7=e.i(13401);let t8=`
  .scrollbar-blue::-webkit-scrollbar { height: 12px; }
  .scrollbar-blue::-webkit-scrollbar-track { background: #1f2937; border-radius: 6px; }
  .scrollbar-blue::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 6px; border: 2px solid #1f2937; }
  .scrollbar-blue::-webkit-scrollbar-thumb:hover { background: #2563eb; }
`;function t9({projectPath:e,projectId:t,projectName:r}){let[a,s]=(0,R.useState)([]),[l,n]=(0,R.useState)([]),[i,o]=(0,R.useState)(!0),[c,d]=(0,R.useState)("kanban"),[u,h]=(0,R.useState)(null);(0,R.useEffect)(()=>{p()},[e,t]);let p=async()=>{o(!0);try{e.startsWith("/")&&e.slice(1);let[r,a]=await Promise.all([fetch(`/project-management/api/phases/${t}`),fetch(`/project-management/api/clair/todos/${t}`)]),l=await r.json(),i=await a.json();l.success&&s(l.phases||[]),i.success&&n(i.todos||[])}catch(e){console.error(e)}finally{o(!1)}},x=async(r,a)=>{e.startsWith("/")&&e.slice(1),await fetch(`/project-management/api/clair/todos/${t}/${r.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})}),p()},g=async(r,a)=>{e.startsWith("/")&&e.slice(1),await fetch(`/project-management/api/clair/todos/${t}/${r}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({phase_id:a})}),h(null),p()},m=l.reduce((e,t)=>{let r=t.phase_id||"unassigned";return e[r]||(e[r]=[]),e[r].push(t),e},{}),f=m.unassigned||[],b=r||e.split("/").pop()||"Project";return i?(0,j.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,j.jsx)(t4.RefreshCw,{className:"w-6 h-6 text-blue-400 animate-spin"})}):(0,j.jsxs)("div",{className:"h-full flex flex-col",children:[(0,j.jsx)("style",{children:t8}),(0,j.jsxs)("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between bg-gray-800",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)(t3.CheckCircle,{className:"w-5 h-5 text-blue-400"}),(0,j.jsxs)("h3",{className:"text-white font-semibold",children:[b," Roadmap"]})]}),(0,j.jsxs)("div",{className:"flex bg-gray-700 rounded-lg p-0.5",children:[(0,j.jsxs)("button",{onClick:()=>d("kanban"),className:`px-3 py-1 rounded text-xs ${"kanban"===c?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:["Phases (",a.length,")"]}),(0,j.jsxs)("button",{onClick:()=>d("unassigned"),className:`px-3 py-1 rounded text-xs ${"unassigned"===c?"bg-yellow-600 text-white":"text-gray-400 hover:text-white"}`,children:["Unassigned (",f.length,")"]})]})]}),"kanban"===c&&(0,j.jsx)("div",{className:"flex-1 overflow-x-auto p-4 scrollbar-blue",children:(0,j.jsxs)("div",{className:"flex gap-4 min-w-max h-full",children:[a.map(e=>{let t=m[e.id]||[],r=t.filter(e=>"completed"===e.status).length,a=t.length>0&&r===t.length;return(0,j.jsxs)("div",{className:"w-80 flex-shrink-0 flex flex-col",children:[(0,j.jsxs)("div",{className:`p-3 rounded-t-lg border-b ${a?"bg-green-900/30 border-green-600":"bg-gray-750 border-gray-600"}`,children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,j.jsxs)("span",{className:`font-medium ${a?"text-green-400":"text-white"}`,children:["Phase ",e.phase_num,": ",e.name]}),(0,j.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded ${a?"bg-green-600/30 text-green-400":"bg-gray-600 text-gray-400"}`,children:[r,"/",t.length]})]}),(0,j.jsx)("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,j.jsx)("div",{className:`h-full ${a?"bg-green-500":"bg-blue-500"}`,style:{width:t.length>0?`${r/t.length*100}%`:"0%"}})})]}),(0,j.jsxs)("div",{className:"flex-1 bg-gray-800 border border-gray-700 border-t-0 rounded-b-lg p-2 space-y-1 overflow-y-auto max-h-[calc(100vh-280px)]",children:[t.map(e=>{let t="completed"===e.status;return(0,j.jsxs)("div",{className:`flex items-start gap-2 p-2 rounded hover:bg-gray-700/50 ${t?"opacity-60":""}`,children:[(0,j.jsx)("button",{onClick:()=>x(e,t?"pending":"completed"),className:"mt-0.5 flex-shrink-0",children:t?(0,j.jsx)(t3.CheckCircle,{className:"w-4 h-4 text-green-400"}):(0,j.jsx)(t5.Circle,{className:"w-4 h-4 text-gray-400 hover:text-blue-400"})}),(0,j.jsx)("span",{className:`text-sm ${t?"text-gray-500 line-through":"text-gray-200"}`,children:e.title})]},e.id)}),0===t.length&&(0,j.jsx)("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No items"})]})]},e.id)}),0===a.length&&(0,j.jsx)("div",{className:"w-full text-center py-12 text-gray-500",children:(0,j.jsx)("p",{children:"No phases defined for this project"})})]})}),"unassigned"===c&&(0,j.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,j.jsx)("div",{className:"bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-4 mb-4",children:(0,j.jsx)("p",{className:"text-yellow-400 text-sm",children:"These items need to be assigned to a phase. Click the dropdown to assign."})}),(0,j.jsxs)("div",{className:"space-y-2",children:[f.map(e=>{let t="completed"===e.status,r=u===e.id;return(0,j.jsx)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-3",children:(0,j.jsxs)("div",{className:"flex items-start gap-3",children:[(0,j.jsx)("button",{onClick:()=>x(e,t?"pending":"completed"),className:"mt-0.5",children:t?(0,j.jsx)(t3.CheckCircle,{className:"w-5 h-5 text-green-400"}):(0,j.jsx)(t5.Circle,{className:"w-5 h-5 text-gray-400"})}),(0,j.jsx)("div",{className:"flex-1",children:(0,j.jsx)("p",{className:`${t?"text-gray-500 line-through":"text-white"}`,children:e.title})}),(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsxs)("button",{onClick:()=>h(r?null:e.id),className:"flex items-center gap-1 px-2 py-1 text-xs bg-gray-700 hover:bg-gray-600 rounded text-gray-300",children:[(0,j.jsx)(t7.Plus,{className:"w-3 h-3"}),"Assign",(0,j.jsx)(t6.ChevronDown,{className:"w-3 h-3"})]}),r&&(0,j.jsx)("div",{className:"absolute right-0 top-8 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg py-1 min-w-[200px]",children:a.map(t=>(0,j.jsxs)("button",{onClick:()=>g(e.id,t.id),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-700 text-gray-300",children:["Phase ",t.phase_num,": ",t.name]},t.id))})]})]})},e.id)}),0===f.length&&(0,j.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,j.jsx)(t3.CheckCircle,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,j.jsx)("p",{children:"All todos are assigned to phases"})]})]})]})]})}e.s(["default",()=>t9],25978);var re=e.i(42945);let rt=(0,re.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>rt],83196);var rr=e.i(97935),ra=e.i(13890),rs=e.i(42158),rl=e.i(36223);let rn=(0,re.default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),ri=(0,re.default)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),ro=(0,re.default)("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]),rc=(0,re.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>rc],72329);var rd=e.i(3046);let ru={breakdown:{label:"System Breakdown",icon:rn,color:"bg-blue-600/20 text-blue-400",activeColor:"bg-blue-600 text-white",description:"Architecture and component documentation"},howto:{label:"How-To Guide",icon:M.BookOpen,color:"bg-green-600/20 text-green-400",activeColor:"bg-green-600 text-white",description:"Step-by-step instructions"},schematic:{label:"Schematic",icon:ri,color:"bg-purple-600/20 text-purple-400",activeColor:"bg-purple-600 text-white",description:"Diagrams, flows, and relationships"},reference:{label:"Reference",icon:ro,color:"bg-orange-600/20 text-orange-400",activeColor:"bg-orange-600 text-white",description:"API docs, configurations, constants"}};function rh({projectPath:e,projectId:t,projectName:r,isParent:a,childProjectIds:s}){let[l,n]=(0,R.useState)([]),[i,o]=(0,R.useState)(null),[c,d]=(0,R.useState)([]),[u,h]=(0,R.useState)({}),[p,x]=(0,R.useState)(!0),[g,m]=(0,R.useState)("breakdown"),[f,b]=(0,R.useState)(null),[y,v]=(0,R.useState)(""),[w,C]=(0,R.useState)(!1),[k,S]=(0,R.useState)(null),[_,E]=(0,R.useState)({type:"breakdown",title:"",content:"",category:""});(0,R.useEffect)(()=>{M(e)},[e]),(0,R.useEffect)(()=>{D()},[t]);let D=async()=>{try{let r=a&&s?.length?s:[t],l=[];for(let e of r){let t=await fetch(`/project-management/api/project-paths?project_id=${e}`),r=await t.json();r.success&&r.paths&&l.push(...r.paths)}if(0===l.length&&e){let r={id:"virtual-main",project_id:t,path:e,label:e.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};l.push(r)}n(l);let i=l.find(t=>t.path===e);i?o(i):l.length>0&&o(l[0])}catch(e){console.error("Error fetching project paths:",e)}},T=async(e,t)=>{let r=l.findIndex(t=>t.id===e);if(-1===r)return;let a="up"===t?r-1:r+1;if(a<0||a>=l.length)return;let s=l[r],i=l[a],o=[...l];o[r]={...i,sort_order:s.sort_order},o[a]={...s,sort_order:i.sort_order},o.sort((e,t)=>(e.sort_order||0)-(t.sort_order||0)),n(o);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,sort_order:i.sort_order||a})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i.id,sort_order:s.sort_order||r})})])}catch(e){console.error("Error moving folder:",e),D()}},M=async e=>{if(e){x(!0);try{let t=e.startsWith("/")?e.slice(1):e,r=await fetch(`/project-management/api/clair/docs/${t}`),a=await r.json();if(a.success){d(a.docs||[]);let e={};(a.docs||[]).forEach(t=>{e[t.doc_type]||(e[t.doc_type]=[]),e[t.doc_type].push(t)}),h(e)}}catch(e){console.error("Error fetching docs:",e)}finally{x(!1)}}},P=async()=>{if(_.title&&_.content&&i)try{let e=i.path.startsWith("/")?i.path.slice(1):i.path,t=k?`/project-management/api/clair/docs/${e}/${k.id}`:`/project-management/api/clair/docs/${e}`,r=k?"PATCH":"POST";await fetch(t,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}),O(),M(i.path)}catch(e){console.error("Error saving doc:",e)}},$=async e=>{if(confirm("Delete this document?")&&i)try{let t=i.path.startsWith("/")?i.path.slice(1):i.path;await fetch(`/project-management/api/clair/docs/${t}/${e.id}`,{method:"DELETE"}),f?.id===e.id&&b(null),M(i.path)}catch(e){console.error("Error deleting doc:",e)}},O=()=>{C(!1),S(null),E({type:g,title:"",content:"",category:""})},A=(u[g]||[]).filter(e=>{if(!y)return!0;let t=y.toLowerCase();return e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)}),F=ru[g],I=F.icon;if(f){let e=ru[f.doc_type],t=e.icon;return(0,j.jsxs)("div",{className:"flex h-full gap-4",children:[(0,j.jsx)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:(0,j.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,j.jsx)("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:" Back to docs"})})}),(0,j.jsxs)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,j.jsxs)("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,j.jsxs)("span",{className:`px-2 py-0.5 rounded text-xs flex items-center gap-1 ${e.color}`,children:[(0,j.jsx)(t,{className:"w-3 h-3"}),e.label]}),f.category&&(0,j.jsx)("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-400 rounded text-xs",children:f.category})]}),(0,j.jsx)("h2",{className:"text-xl font-semibold text-white",children:f.title})]}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)("button",{onClick:()=>{S(f),E({type:f.doc_type,title:f.title,content:f.content,category:f.category||""}),C(!0),b(null)},className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded",children:(0,j.jsx)(rt,{className:"w-4 h-4"})}),(0,j.jsx)("button",{onClick:()=>$(f),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-gray-700 rounded",children:(0,j.jsx)(rl.Trash2,{className:"w-4 h-4"})})]})]}),(0,j.jsx)("div",{className:"p-4 overflow-y-auto max-h-[calc(100vh-250px)]",children:(0,j.jsx)("div",{className:"prose prose-invert max-w-none",children:(0,j.jsx)("pre",{className:"whitespace-pre-wrap text-gray-300 font-sans text-sm leading-relaxed",children:f.content})})})]})]})}return(0,j.jsxs)("div",{className:"flex h-full gap-4",children:[(0,j.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,j.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,j.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,j.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===l.length?(0,j.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,j.jsx)(ra.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,j.jsx)("p",{children:"No folders linked"})]}):(0,j.jsx)("div",{className:"divide-y divide-gray-700",children:l.map((e,t)=>(0,j.jsxs)("div",{className:`p-3 cursor-pointer group ${i?.id===e.id?"bg-blue-600/20 border-l-2 border-blue-500":"hover:bg-gray-750"}`,onClick:()=>o(e),children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,j.jsx)("button",{onClick:t=>{t.stopPropagation(),T(e.id,"up")},disabled:0===t,className:`p-0.5 rounded ${0===t?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,j.jsx)(rc,{className:"w-3 h-3"})}),(0,j.jsx)("button",{onClick:t=>{t.stopPropagation(),T(e.id,"down")},disabled:t===l.length-1,className:`p-0.5 rounded ${t===l.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,j.jsx)(t6.ChevronDown,{className:"w-3 h-3"})})]}),(0,j.jsx)(ra.FolderOpen,{className:`w-4 h-4 ${i?.id===e.id?"text-blue-400":"text-yellow-400"}`}),(0,j.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:e.label})]}),(0,j.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:e.path.split("/").pop()})]},e.id))})})]}),(0,j.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden flex flex-col",children:i?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"border-b border-gray-700",children:[(0,j.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(N.FileText,{className:"w-5 h-5 text-blue-400"}),(0,j.jsxs)("h3",{className:"text-white font-semibold",children:[r||i?.label||"Project"," Documentation"]}),(0,j.jsxs)("span",{className:"text-gray-500 text-sm",children:["(",c.length," docs)"]})]}),(0,j.jsxs)("button",{onClick:()=>{E({..._,type:g}),C(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:[(0,j.jsx)(t7.Plus,{className:"w-4 h-4"}),"Add Doc"]})]}),(0,j.jsx)("div",{className:"flex px-3 -mb-px",children:Object.entries(ru).map(([e,t])=>{let r=t.icon,a=u[e]?.length||0,s=g===e;return(0,j.jsxs)("button",{onClick:()=>m(e),className:`flex items-center gap-1.5 px-4 py-2.5 text-sm font-medium border-b-2 transition-colors ${s?`${t.activeColor} border-current`:"text-gray-400 border-transparent hover:text-white hover:border-gray-600"}`,children:[(0,j.jsx)(r,{className:"w-4 h-4"}),t.label,(0,j.jsx)("span",{className:`ml-1 px-1.5 py-0.5 rounded text-xs ${s?"bg-white/20":"bg-gray-700"}`,children:a})]},e)})})]}),(0,j.jsxs)("div",{className:`px-4 py-2 text-sm ${F.color} border-b border-gray-700`,children:[(0,j.jsx)(I,{className:"w-4 h-4 inline mr-2"}),F.description]}),w&&(0,j.jsxs)("div",{className:"p-4 border-b border-gray-700 bg-gray-750 space-y-3",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("h4",{className:"text-white font-medium",children:k?"Edit Document":`New ${ru[_.type].label}`}),(0,j.jsx)("button",{onClick:O,className:"text-gray-500 hover:text-white",children:(0,j.jsx)(L.X,{className:"w-4 h-4"})})]}),(0,j.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,j.jsx)("select",{value:_.type,onChange:e=>E(t=>({...t,type:e.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:Object.entries(ru).map(([e,t])=>(0,j.jsx)("option",{value:e,children:t.label},e))}),(0,j.jsx)("input",{type:"text",placeholder:"Title",value:_.title,onChange:e=>E(t=>({...t,title:e.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,j.jsx)("input",{type:"text",placeholder:"Category (optional)",value:_.category,onChange:e=>E(t=>({...t,category:e.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"})]}),(0,j.jsx)("textarea",{placeholder:"Content (markdown supported)...",value:_.content,onChange:e=>E(t=>({...t,content:e.target.value})),rows:10,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm font-mono resize-none"}),(0,j.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,j.jsx)("button",{onClick:O,className:"px-3 py-1.5 text-gray-400 hover:text-white",children:"Cancel"}),(0,j.jsx)("button",{onClick:P,className:"px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:k?"Update":"Create"})]})]}),(0,j.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsx)(rs.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),(0,j.jsx)("input",{type:"text",placeholder:`Search ${F.label.toLowerCase()}...`,value:y,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 text-sm"})]})}),(0,j.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:p?(0,j.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,j.jsx)(t4.RefreshCw,{className:"w-6 h-6 text-blue-400 animate-spin"})}):0===A.length?(0,j.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,j.jsx)(I,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,j.jsxs)("p",{children:["No ",F.label.toLowerCase()," documents"]}),(0,j.jsx)("p",{className:"text-sm mt-1",children:F.description})]}):(0,j.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:A.map(e=>{let t,r,a,s,l;return(0,j.jsx)("div",{onClick:()=>b(e),className:"bg-gray-750 border border-gray-700 rounded-lg p-4 hover:border-blue-500 transition-colors cursor-pointer group",children:(0,j.jsxs)("div",{className:"flex items-start justify-between",children:[(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[e.category&&(0,j.jsx)("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-400 rounded text-xs",children:e.category}),(0,j.jsxs)("span",{className:"flex items-center gap-1 text-gray-500 text-xs",children:[(0,j.jsx)(rd.Clock,{className:"w-3 h-3"}),(t=new Date(e.created_at),a=Math.floor((r=new Date().getTime()-t.getTime())/6e4),s=Math.floor(r/36e5),l=Math.floor(r/864e5),a<60?`${a}m ago`:s<24?`${s}h ago`:l<7?`${l}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"}))]})]}),(0,j.jsx)("h3",{className:"text-white font-medium truncate",children:e.title}),(0,j.jsx)("p",{className:"text-gray-500 text-sm mt-2 line-clamp-2",children:e.content})]}),(0,j.jsx)(rr.Eye,{className:"w-4 h-4 text-gray-500 group-hover:text-blue-400 flex-shrink-0 ml-2"})]})},e.id)})})})]}):(0,j.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)(N.FileText,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,j.jsx)("p",{children:"Select a folder to view docs"})]})})})]})}e.s(["default",()=>rh],27805);var rp=e.i(76352),rx=e.i(63767),rg=e.i(99842),rm=e.i(93230),rf=e.i(90561);function rb({projectPath:e,projectId:t,isParent:r,childProjectIds:a}){let[s,l]=(0,R.useState)([]),[n,i]=(0,R.useState)(null),[o,c]=(0,R.useState)("tables"),[d,u]=(0,R.useState)([]),[h,p]=(0,R.useState)(null),[x,g]=(0,R.useState)(""),[m,f]=(0,R.useState)([]),[b,y]=(0,R.useState)([]),[v,w]=(0,R.useState)(""),[N,S]=(0,R.useState)(!0),[_,E]=(0,R.useState)(null);(0,R.useEffect)(()=>{D()},[t]),(0,R.useEffect)(()=>{n&&M()},[n,o]);let D=async()=>{S(!0);try{let s=r&&a?.length?a:[t],n=[];for(let e of s){let t=await fetch(`/project-management/api/project-paths?project_id=${e}`),r=await t.json();r.success&&r.paths&&n.push(...r.paths)}if(0===n.length&&e){let r={id:"virtual-main",project_id:t,path:e,label:e.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};n.push(r)}l(n);let o=n.find(t=>t.path===e);o?i(o):n.length>0&&i(n[0])}catch(e){console.error("Error fetching project paths:",e)}finally{S(!1)}},T=async(e,t)=>{let r=s.findIndex(t=>t.id===e);if(-1===r)return;let a="up"===t?r-1:r+1;if(a<0||a>=s.length)return;let n=s[r],i=s[a],o=[...s];o[r]={...i,sort_order:n.sort_order},o[a]={...n,sort_order:i.sort_order},o.sort((e,t)=>(e.sort_order||0)-(t.sort_order||0)),l(o);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n.id,sort_order:i.sort_order||a})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i.id,sort_order:n.sort_order||r})})])}catch(e){console.error("Error moving folder:",e),D()}},M=async()=>{if(n){S(!0);try{let e=n.path.startsWith("/")?n.path.slice(1):n.path;if("tables"===o){let t=await fetch(`/project-management/api/clair/database/${e}/tables`),r=await t.json();r.success&&u(r.tables||[])}else if("schemas"===o){let t=await fetch(`/project-management/api/clair/database/${e}/schemas`),r=await t.json();r.success&&f(r.schemas||[])}else if("rls"===o){let t=await fetch(`/project-management/api/clair/database/${e}/rls`),r=await t.json();r.success&&y(r.policies||[])}}catch(e){console.error("Error fetching database data:",e)}finally{S(!1)}}},P=async e=>{if(n)try{let t=n.path.startsWith("/")?n.path.slice(1):n.path,r=await fetch(`/project-management/api/clair/database/${t}/table/${e}/columns`),a=await r.json();a.success&&u(t=>t.map(t=>t.table_name===e?{...t,columns:a.columns,indexes:a.indexes}:t))}catch(e){console.error("Error fetching columns:",e)}},$=e=>{if(!e.columns||0===e.columns.length)return`-- No column info available for ${e.table_name}`;let t=e.columns.map(e=>{let t=`  ${e.column_name} ${e.data_type.toUpperCase()}`;return e.is_nullable||(t+=" NOT NULL"),e.column_default&&(t+=` DEFAULT ${e.column_default}`),e.is_primary&&(t+=" PRIMARY KEY"),e.references&&(t+=` REFERENCES ${e.references}`),t});return`CREATE TABLE ${e.schema?`${e.schema}.`:""}${e.table_name} (
${t.join(",\n")}
);`},O=async e=>{let t=$(e);await navigator.clipboard.writeText(t),E(e.table_name),setTimeout(()=>E(null),2e3)},L=d.filter(e=>e.table_name.toLowerCase().includes(x.toLowerCase())),A=b.filter(e=>e.policy_name.toLowerCase().includes(v.toLowerCase())||e.table_name.toLowerCase().includes(v.toLowerCase()));if(N&&!n)return(0,j.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,j.jsx)(t4.RefreshCw,{className:"w-6 h-6 text-blue-400 animate-spin"})});let F=[{id:"tables",label:"Tables",icon:C.Table,count:d.length},{id:"schemas",label:"Schemas",icon:rn,count:m.length},{id:"rls",label:"RLS Policies",icon:rm.Shield,count:b.length}];return(0,j.jsxs)("div",{className:"flex h-full gap-4",children:[(0,j.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,j.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,j.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,j.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===s.length?(0,j.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,j.jsx)(ra.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,j.jsx)("p",{children:"No folders linked"})]}):(0,j.jsx)("div",{className:"divide-y divide-gray-700",children:s.map((e,t)=>(0,j.jsxs)("div",{className:`p-3 cursor-pointer group ${n?.id===e.id?"bg-blue-600/20 border-l-2 border-blue-500":"hover:bg-gray-750"}`,onClick:()=>i(e),children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,j.jsx)("button",{onClick:t=>{t.stopPropagation(),T(e.id,"up")},disabled:0===t,className:`p-0.5 rounded ${0===t?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,j.jsx)(rc,{className:"w-3 h-3"})}),(0,j.jsx)("button",{onClick:t=>{t.stopPropagation(),T(e.id,"down")},disabled:t===s.length-1,className:`p-0.5 rounded ${t===s.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,j.jsx)(t6.ChevronDown,{className:"w-3 h-3"})})]}),(0,j.jsx)(ra.FolderOpen,{className:`w-4 h-4 ${n?.id===e.id?"text-blue-400":"text-yellow-400"}`}),(0,j.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:e.label})]}),(0,j.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:e.path.split("/").pop()})]},e.id))})})]}),(0,j.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden flex flex-col",children:n?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"border-b border-gray-700",children:[(0,j.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,j.jsx)("div",{children:(0,j.jsxs)("h3",{className:"text-white font-semibold text-sm flex items-center gap-2",children:[(0,j.jsx)(k.Database,{className:"w-4 h-4 text-blue-400"}),n.label," Database"]})}),(0,j.jsxs)("button",{onClick:M,disabled:N,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white rounded text-sm",children:[(0,j.jsx)(t4.RefreshCw,{className:`w-4 h-4 ${N?"animate-spin":""}`}),"Refresh"]})]}),(0,j.jsx)("div",{className:"flex border-t border-gray-700",children:F.map(e=>(0,j.jsxs)("button",{onClick:()=>c(e.id),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${o===e.id?"text-blue-400 border-blue-400 bg-gray-750":"text-gray-400 border-transparent hover:text-white hover:bg-gray-750"}`,children:[(0,j.jsx)(e.icon,{className:"w-4 h-4"}),e.label,(0,j.jsx)("span",{className:`px-1.5 py-0.5 rounded text-xs ${o===e.id?"bg-blue-600 text-white":"bg-gray-700 text-gray-400"}`,children:e.count})]},e.id))})]}),(0,j.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:N?(0,j.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,j.jsx)(t4.RefreshCw,{className:"w-6 h-6 text-blue-400 animate-spin"})}):(0,j.jsxs)(j.Fragment,{children:["tables"===o&&(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"mb-3",children:(0,j.jsx)("input",{type:"text",value:x,onChange:e=>g(e.target.value),placeholder:"Filter tables...",className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm placeholder-gray-500"})}),0===L.length?(0,j.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,j.jsx)(k.Database,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,j.jsx)("p",{children:"No tables found"})]}):(0,j.jsx)("div",{className:"space-y-2",children:L.map(e=>(0,j.jsxs)("div",{className:"bg-gray-750 border border-gray-700 rounded-lg overflow-hidden",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-700 transition-colors",children:[(0,j.jsxs)("button",{onClick:()=>(e=>{if(h===e)p(null);else{p(e);let t=d.find(t=>t.table_name===e);t?.columns||P(e)}})(e.table_name),className:"flex items-center gap-3 flex-1 text-left",children:[h===e.table_name?(0,j.jsx)(t6.ChevronDown,{className:"w-4 h-4 text-gray-500"}):(0,j.jsx)(rp.ChevronRight,{className:"w-4 h-4 text-gray-500"}),(0,j.jsx)(C.Table,{className:"w-4 h-4 text-blue-400"}),(0,j.jsx)("span",{className:"text-white font-mono text-sm",children:e.table_name}),e.schema&&"public"!==e.schema&&(0,j.jsxs)("span",{className:"text-gray-500 text-xs",children:["(",e.schema,")"]}),void 0!==e.row_count&&(0,j.jsxs)("span",{className:"text-gray-500 text-xs ml-auto",children:[e.row_count.toLocaleString()," rows"]})]}),e.columns&&(0,j.jsx)("button",{onClick:t=>{t.stopPropagation(),O(e)},className:"flex items-center gap-1 px-2 py-1 text-gray-400 hover:text-white hover:bg-gray-600 rounded text-xs ml-2",children:_===e.table_name?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(rg.Check,{className:"w-3 h-3 text-green-400"}),"Copied"]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(rx.Copy,{className:"w-3 h-3"}),"SQL"]})})]}),h===e.table_name&&(0,j.jsx)("div",{className:"border-t border-gray-700 p-3 bg-gray-800",children:e.columns?(0,j.jsxs)("div",{className:"space-y-1",children:[e.columns.map(e=>(0,j.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 hover:bg-gray-750 rounded",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_primary&&(0,j.jsx)(rf.Key,{className:"w-3 h-3 text-yellow-400"}),(0,j.jsx)("span",{className:"text-gray-300 font-mono text-sm",children:e.column_name})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"text-blue-400 text-xs font-mono",children:e.data_type}),!e.is_nullable&&(0,j.jsx)("span",{className:"text-red-400 text-xs",children:"NOT NULL"}),e.column_default&&(0,j.jsxs)("span",{className:"text-gray-500 text-xs truncate max-w-[150px]",title:e.column_default,children:["= ",e.column_default]}),e.references&&(0,j.jsxs)("span",{className:"text-purple-400 text-xs",children:[" ",e.references]})]})]},e.column_name)),e.indexes&&e.indexes.length>0&&(0,j.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[(0,j.jsx)("span",{className:"text-gray-500 text-xs font-medium",children:"Indexes"}),(0,j.jsx)("div",{className:"mt-2 space-y-1",children:e.indexes.map(e=>(0,j.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,j.jsx)("span",{className:"text-gray-400 font-mono",children:e.name}),(0,j.jsxs)("span",{className:"text-gray-600",children:["(",e.columns.join(", "),")"]}),e.unique&&(0,j.jsx)("span",{className:"text-yellow-400",children:"UNIQUE"})]},e.name))})]}),(0,j.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,j.jsx)("span",{className:"text-gray-500 text-xs",children:"CREATE TABLE Statement"}),(0,j.jsx)("button",{onClick:()=>O(e),className:"flex items-center gap-1 text-gray-400 hover:text-white text-xs",children:_===e.table_name?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(rg.Check,{className:"w-3 h-3 text-green-400"}),"Copied"]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(rx.Copy,{className:"w-3 h-3"}),"Copy"]})})]}),(0,j.jsx)("pre",{className:"text-gray-400 font-mono text-xs bg-gray-900 p-2 rounded overflow-x-auto",children:$(e)})]})]}):(0,j.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,j.jsx)(t4.RefreshCw,{className:"w-4 h-4 text-blue-400 animate-spin mr-2"}),(0,j.jsx)("span",{className:"text-gray-500 text-sm",children:"Loading columns..."})]})})]},e.table_name))})]}),"schemas"===o&&(0,j.jsx)("div",{children:0===m.length?(0,j.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,j.jsx)(rn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,j.jsx)("p",{children:"No schemas found"})]}):(0,j.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,j.jsx)("div",{className:"bg-gray-750 border border-gray-700 rounded-lg p-4",children:(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)(rn,{className:"w-5 h-5 text-purple-400"}),(0,j.jsx)("span",{className:"text-white font-mono text-sm",children:e.schema_name})]}),(0,j.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,j.jsxs)("span",{className:"text-gray-500",children:["Owner: ",(0,j.jsx)("span",{className:"text-gray-300",children:e.owner})]}),(0,j.jsxs)("span",{className:"text-gray-500",children:["Tables: ",(0,j.jsx)("span",{className:"text-blue-400",children:e.table_count})]})]})]})},e.schema_name))})}),"rls"===o&&(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"mb-3",children:(0,j.jsx)("input",{type:"text",value:v,onChange:e=>w(e.target.value),placeholder:"Filter policies...",className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm placeholder-gray-500"})}),0===A.length?(0,j.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,j.jsx)(rm.Shield,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,j.jsx)("p",{children:"No RLS policies found"}),(0,j.jsx)("p",{className:"text-xs mt-1",children:"Row-Level Security policies control access to table rows"})]}):(0,j.jsx)("div",{className:"space-y-2",children:A.map(e=>(0,j.jsxs)("div",{className:"bg-gray-750 border border-gray-700 rounded-lg p-4",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)(rm.Shield,{className:"w-4 h-4 text-green-400"}),(0,j.jsx)("span",{className:"text-white font-medium text-sm",children:e.policy_name})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"px-2 py-0.5 bg-blue-600/20 text-blue-400 rounded text-xs",children:e.table_name}),(0,j.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${"ALL"===e.command?"bg-purple-600/20 text-purple-400":"SELECT"===e.command?"bg-green-600/20 text-green-400":"INSERT"===e.command?"bg-yellow-600/20 text-yellow-400":"UPDATE"===e.command?"bg-orange-600/20 text-orange-400":"bg-red-600/20 text-red-400"}`,children:e.command})]})]}),(0,j.jsxs)("div",{className:"text-xs space-y-2 mt-3",children:[e.roles&&e.roles.length>0&&(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"text-gray-500",children:"Roles: "}),(0,j.jsx)("span",{className:"text-gray-300",children:e.roles.join(", ")})]}),e.using_expression&&(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"text-gray-500",children:"USING: "}),(0,j.jsx)("code",{className:"text-green-400 font-mono bg-gray-900 px-1 rounded",children:e.using_expression})]}),e.with_check_expression&&(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"text-gray-500",children:"WITH CHECK: "}),(0,j.jsx)("code",{className:"text-yellow-400 font-mono bg-gray-900 px-1 rounded",children:e.with_check_expression})]})]})]},`${e.table_name}-${e.policy_name}`))})]})]})})]}):(0,j.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)(ra.FolderOpen,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,j.jsx)("p",{children:"Select a folder to view database"})]})})})]})}e.s(["default",()=>rb],70287);let ry=(0,re.default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]),rv=(0,re.default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);function rj({projectPath:e,projectId:t,isParent:r,childProjectIds:a}){let[s,l]=(0,R.useState)([]),[n,i]=(0,R.useState)(null),[o,c]=(0,R.useState)(null),[d,u]=(0,R.useState)(!0),[h,p]=(0,R.useState)(new Set),[x,g]=(0,R.useState)(null),[m,f]=(0,R.useState)(""),[b,y]=(0,R.useState)(0);(0,R.useEffect)(()=>{v()},[t]),(0,R.useEffect)(()=>{n&&N(n.path)},[n]);let v=async()=>{u(!0);try{let s=r&&a?.length?a:[t],n=[];for(let e of s){let t=await fetch(`/project-management/api/project-paths?project_id=${e}`),r=await t.json();r.success&&r.paths&&n.push(...r.paths)}if(0===n.length&&e){let r={id:"virtual-main",project_id:t,path:e,label:e.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};n.push(r)}l(n);let o=n.find(t=>t.path===e);o?i(o):n.length>0&&i(n[0])}catch(e){console.error("Error fetching project paths:",e)}finally{u(!1)}},w=async(e,t)=>{let r=s.findIndex(t=>t.id===e);if(-1===r)return;let a="up"===t?r-1:r+1;if(a<0||a>=s.length)return;let n=s[r],i=s[a],o=[...s];o[r]={...i,sort_order:n.sort_order},o[a]={...n,sort_order:i.sort_order},o.sort((e,t)=>(e.sort_order||0)-(t.sort_order||0)),l(o);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n.id,sort_order:i.sort_order||a})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:i.id,sort_order:n.sort_order||r})})])}catch(e){console.error("Error moving folder:",e),v()}},N=async e=>{u(!0);try{let t=e.startsWith("/")?e.slice(1):e,r=await fetch(`/project-management/api/clair/structure/${t}?depth=4`),a=await r.json();if(a.success&&(c(a.tree),y(a.descriptionCount||0),a.tree?.children)){let e=a.tree.children.filter(e=>"directory"===e.type).map(e=>e.path);p(new Set([a.tree.path,...e]))}}catch(e){console.error("Error fetching structure:",e)}finally{u(!1)}},C=async e=>{if(n)try{let t=n.path.startsWith("/")?n.path.slice(1):n.path;await fetch(`/project-management/api/clair/structure/${t}/describe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:e,description:m})}),g(null),N(n.path)}catch(e){console.error("Error saving description:",e)}},k=(e,t=0)=>{var r;let a=h.has(e.path),s=x===e.path,l=e.children&&e.children.length>0;return(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"flex items-center gap-2 py-1 px-2 hover:bg-gray-700/50 rounded group",style:{paddingLeft:`${16*t+8}px`},children:["directory"===e.type?(0,j.jsx)("button",{onClick:()=>{var t;return t=e.path,void p(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},className:"text-gray-500 hover:text-white",children:a?(0,j.jsx)(t6.ChevronDown,{className:"w-4 h-4"}):(0,j.jsx)(rp.ChevronRight,{className:"w-4 h-4"})}):(0,j.jsx)("span",{className:"w-4"}),"directory"===e.type?(0,j.jsx)(rv,{className:`w-4 h-4 ${a?"text-yellow-400":"text-yellow-600"}`}):(r=e.extension,(0,j.jsx)(ry,{className:`w-4 h-4 ${{".tsx":"text-blue-400",".ts":"text-blue-300",".js":"text-yellow-400",".jsx":"text-yellow-300",".css":"text-pink-400",".json":"text-green-400",".md":"text-gray-400",".sql":"text-orange-400",".sh":"text-green-300"}[r||""]||"text-gray-500"}`})),(0,j.jsx)("span",{className:"font-mono text-sm text-white",children:e.name}),e.truncated&&(0,j.jsx)("span",{className:"text-xs text-gray-500",children:"(truncated)"}),"directory"===e.type&&(s?(0,j.jsxs)("div",{className:"flex items-center gap-1 ml-2 flex-1",children:[(0,j.jsx)("input",{type:"text",value:m,onChange:e=>f(e.target.value),className:"flex-1 px-2 py-0.5 bg-gray-700 border border-gray-600 rounded text-xs text-white",placeholder:"Description...",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key&&C(e.path),"Escape"===t.key&&g(null)}}),(0,j.jsx)("button",{onClick:()=>C(e.path),className:"text-green-400 hover:text-green-300",children:(0,j.jsx)(rg.Check,{className:"w-3 h-3"})}),(0,j.jsx)("button",{onClick:()=>g(null),className:"text-gray-500 hover:text-white",children:(0,j.jsx)(L.X,{className:"w-3 h-3"})})]}):(0,j.jsxs)(j.Fragment,{children:[e.description&&(0,j.jsxs)("span",{className:"text-gray-500 text-xs ml-2",children:["- ",e.description]}),(0,j.jsx)("button",{onClick:()=>{g(e.path),f(e.description||"")},className:"ml-auto p-1 text-gray-600 hover:text-white opacity-0 group-hover:opacity-100",title:"Add description",children:(0,j.jsx)(rt,{className:"w-3 h-3"})})]}))]}),"directory"===e.type&&a&&l&&(0,j.jsx)("div",{children:e.children.sort((e,t)=>e.type!==t.type?"directory"===e.type?-1:1:e.name.localeCompare(t.name)).map(e=>k(e,t+1))})]},e.path)};return d&&!o?(0,j.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,j.jsx)("div",{className:"animate-spin text-2xl",children:(0,j.jsx)(t4.RefreshCw,{className:"w-6 h-6 text-blue-400"})})}):(0,j.jsxs)("div",{className:"flex h-full gap-4",children:[(0,j.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,j.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,j.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,j.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===s.length?(0,j.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,j.jsx)(ra.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,j.jsx)("p",{children:"No folders linked"})]}):(0,j.jsx)("div",{className:"divide-y divide-gray-700",children:s.map((e,t)=>(0,j.jsxs)("div",{className:`p-3 cursor-pointer group ${n?.id===e.id?"bg-blue-600/20 border-l-2 border-blue-500":"hover:bg-gray-750"}`,onClick:()=>i(e),children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,j.jsx)("button",{onClick:t=>{t.stopPropagation(),w(e.id,"up")},disabled:0===t,className:`p-0.5 rounded ${0===t?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,j.jsx)(rc,{className:"w-3 h-3"})}),(0,j.jsx)("button",{onClick:t=>{t.stopPropagation(),w(e.id,"down")},disabled:t===s.length-1,className:`p-0.5 rounded ${t===s.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,j.jsx)(t6.ChevronDown,{className:"w-3 h-3"})})]}),(0,j.jsx)(ra.FolderOpen,{className:`w-4 h-4 ${n?.id===e.id?"text-blue-400":"text-yellow-400"}`}),(0,j.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:e.label})]}),(0,j.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:e.path.split("/").pop()})]},e.id))})})]}),(0,j.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:n&&o?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"p-3 border-b border-gray-700 flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("h3",{className:"text-white font-semibold text-sm",children:[n.label," Structure"]}),(0,j.jsx)("p",{className:"text-gray-500 text-xs font-mono",children:n.path})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsxs)("span",{className:"text-xs text-gray-500",children:[b," descriptions"]}),(0,j.jsx)("button",{onClick:()=>N(n.path),className:"p-1 text-gray-400 hover:text-white hover:bg-gray-700 rounded",title:"Refresh",children:(0,j.jsx)(t4.RefreshCw,{className:`w-4 h-4 ${d?"animate-spin":""}`})})]})]}),(0,j.jsx)("div",{className:"overflow-y-auto p-2 max-h-[calc(100vh-300px)]",children:o.error?(0,j.jsx)("div",{className:"text-center py-8 text-red-400",children:(0,j.jsxs)("p",{className:"text-sm",children:["Error: ",o.error]})}):k(o)})]}):(0,j.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)(T.FolderTree,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,j.jsx)("p",{children:"Select a folder to view its structure"})]})})})]})}e.s(["Folder",()=>rv],13539),e.s(["default",()=>rj],17691);let rw=(0,re.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>rw],29221)},97557,15403,e=>{"use strict";var t=e.i(4828),r=e.i(65508),a=e.i(13401),s=e.i(66743),l=e.i(742),n=e.i(83196),i=e.i(29221);function o({projectPath:e,projectId:o,isParent:c,childProjectIds:d}){let[u,h]=(0,r.useState)([]),[p,x]=(0,r.useState)([]),[g,m]=(0,r.useState)(!0),[f,b]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)({title:"",content:""}),[N,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{k()},[o,c,d]),(0,r.useEffect)(()=>{p.length>0&&S()},[p]);let k=async()=>{try{let t=c&&d?.length?d:[o],r=[];for(let e of t){let t=await fetch(`/project-management/api/project-paths?project_id=${e}`),a=await t.json();a.success&&a.paths&&a.paths.forEach(e=>r.push(e.path))}0===r.length&&r.push(e),x(r)}catch(t){console.error("Error fetching project paths:",t),x([e])}},S=async()=>{try{let e=[];for(let t of p){let r=await fetch(`/api/susan/notes?project=${encodeURIComponent(t)}`),a=await r.json();a.success&&a.notes&&e.push(...a.notes)}h(e)}catch(e){console.error("Error fetching notes:",e)}finally{m(!1)}},_=async t=>{t.preventDefault(),C(!0);try{let t=f?`/api/susan/note/${f.id}`:"/api/susan/note",r=f?"PATCH":"POST";(await fetch(t,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({...j,project_path:e})})).ok&&(S(),v(!1),b(null),w({title:"",content:""}))}catch(e){console.error("Error saving note:",e)}finally{C(!1)}},E=async e=>{if(confirm("Delete this note?"))try{await fetch(`/api/susan/note/${e.id}`,{method:"DELETE"}),S()}catch(e){console.error("Error deleting note:",e)}};return g?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin text-2xl",children:""})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Notepad"}),(0,t.jsxs)("button",{onClick:()=>{b(null),w({title:"",content:""}),v(!0)},className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm",children:[(0,t.jsx)(a.Plus,{className:"w-4 h-4"}),"New Note"]})]}),y&&(0,t.jsx)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 mb-4",children:(0,t.jsx)("form",{onSubmit:_,children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("input",{type:"text",placeholder:"Note title",value:j.title,onChange:e=>w(t=>({...t,title:e.target.value})),required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"}),(0,t.jsx)("textarea",{placeholder:"Write your notes here...",value:j.content,onChange:e=>w(t=>({...t,content:e.target.value})),required:!0,rows:8,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:outline-none resize-none"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{type:"submit",disabled:N,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50",children:[(0,t.jsx)(i.Save,{className:"w-4 h-4"}),N?"Saving...":f?"Update Note":"Save Note"]}),(0,t.jsx)("button",{type:"button",onClick:()=>{v(!1),b(null)},className:"px-4 py-2 text-gray-400 hover:text-white",children:"Cancel"})]})]})})}),0===u.length?(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(s.StickyNote,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"No notes yet"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Jot down thoughts, ideas, and reminders"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.map(e=>(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 group",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsx)("h3",{className:"text-white font-medium",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:()=>{b(e),w({title:e.title,content:e.content}),v(!0)},className:"p-1.5 text-gray-500 hover:text-white hover:bg-gray-700 rounded",children:(0,t.jsx)(n.Edit2,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:()=>E(e),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-700 rounded",children:(0,t.jsx)(l.X,{className:"w-3 h-3"})})]})]}),(0,t.jsx)("p",{className:"text-gray-400 text-sm whitespace-pre-wrap line-clamp-4",children:e.content}),(0,t.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-700",children:(0,t.jsxs)("span",{className:"text-gray-600 text-xs",children:["Updated ",new Date(e.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})})]},e.id))})]})}e.s(["default",()=>o],97557);var c=e.i(49960),d=e.i(47904),u=e.i(90172),h=e.i(3046),p=e.i(42158);let x=(0,e.i(42945).default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var g=e.i(13890),m=e.i(38862),f=e.i(36223),b=e.i(72329),y=e.i(44142);let v={low:{label:"Low",color:"bg-gray-600/20 text-gray-400 border-gray-600"},medium:{label:"Medium",color:"bg-yellow-600/20 text-yellow-400 border-yellow-600"},high:{label:"High",color:"bg-orange-600/20 text-orange-400 border-orange-600"},critical:{label:"Critical",color:"bg-red-600/20 text-red-400 border-red-600"}},j={open:{label:"Open",color:"bg-red-600/20 text-red-400",icon:d.AlertTriangle},investigating:{label:"Investigating",color:"bg-yellow-600/20 text-yellow-400",icon:p.Search},fixed:{label:"Fixed",color:"bg-green-600/20 text-green-400",icon:u.CheckCircle},wont_fix:{label:"Won't Fix",color:"bg-gray-600/20 text-gray-500",icon:l.X},duplicate:{label:"Duplicate",color:"bg-purple-600/20 text-purple-400",icon:c.Bug}};function w({projectPath:e,projectId:a,projectName:s,isParent:i,childProjectIds:o}){let[d,p]=(0,r.useState)([]),[w,N]=(0,r.useState)(null),[C,k]=(0,r.useState)([]),[S,_]=(0,r.useState)(!0),[E,D]=(0,r.useState)("all"),[T,M]=(0,r.useState)(!1),[P,$]=(0,r.useState)(null),[O,R]=(0,r.useState)({title:"",description:"",severity:"medium",status:"open",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",environment:"dev",related_file:"",resolution_notes:""});(0,r.useEffect)(()=>{L()},[a]),(0,r.useEffect)(()=>{w&&F(w.path)},[w]);let L=async()=>{try{let t=i&&o?.length?o:[a],r=[];for(let e of t){let t=await fetch(`/project-management/api/project-paths?project_id=${e}`),a=await t.json();a.success&&a.paths&&r.push(...a.paths)}if(0===r.length&&e){let t={id:"virtual-main",project_id:a,path:e,label:e.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};r.push(t)}p(r);let s=r.find(t=>t.path===e);s?N(s):r.length>0&&N(r[0])}catch(e){console.error("Error fetching project paths:",e)}},A=async(e,t)=>{let r=d.findIndex(t=>t.id===e);if(-1===r)return;let a="up"===t?r-1:r+1;if(a<0||a>=d.length)return;let s=d[r],l=d[a],n=[...d];n[r]={...l,sort_order:s.sort_order},n[a]={...s,sort_order:l.sort_order},n.sort((e,t)=>(e.sort_order||0)-(t.sort_order||0)),p(n);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,sort_order:l.sort_order||a})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:l.id,sort_order:s.sort_order||r})})])}catch(e){console.error("Error moving folder:",e),L()}},F=async e=>{_(!0);try{let t=e.startsWith("/")?e.slice(1):e,r=await fetch(`/project-management/api/clair/bugs/${t}`),a=await r.json();a.success&&k(a.bugs||[])}catch(e){console.error("Error fetching bugs:",e)}finally{_(!1)}},I=async()=>{if(O.title&&w)try{let e=w.path.startsWith("/")?w.path.slice(1):w.path,t=P?`/project-management/api/clair/bugs/${e}/${P.id}`:`/project-management/api/clair/bugs/${e}`,r=P?"PATCH":"POST";await fetch(t,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({...O,reported_by:O.title?"manual":void 0,resolved_at:"fixed"===O.status?new Date().toISOString():null})}),W(),F(w.path)}catch(e){console.error("Error saving bug:",e)}},B=async(e,t)=>{if(w)try{let r=w.path.startsWith("/")?w.path.slice(1):w.path;await fetch(`/project-management/api/clair/bugs/${r}/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t,resolved_at:"fixed"===t?new Date().toISOString():null})}),F(w.path)}catch(e){console.error("Error updating bug:",e)}},z=async e=>{if(confirm("Delete this bug report?")&&w)try{let t=w.path.startsWith("/")?w.path.slice(1):w.path;await fetch(`/project-management/api/clair/bugs/${t}/${e.id}`,{method:"DELETE"}),F(w.path)}catch(e){console.error("Error deleting bug:",e)}},U=async e=>{if(w)try{let t=w.path.startsWith("/")?w.path.slice(1):w.path;await fetch(`/project-management/api/clair/bugs/${t}/${e.id}/archive`,{method:"POST"}),F(w.path)}catch(e){console.error("Error archiving bug:",e)}},W=()=>{M(!1),$(null),R({title:"",description:"",severity:"medium",status:"open",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",environment:"dev",related_file:"",resolution_notes:""})},H=C.filter(e=>"all"===E||("open"===E?["open","investigating"].includes(e.status):"fixed"!==E||"fixed"===e.status)),J={all:C.length,open:C.filter(e=>["open","investigating"].includes(e.status)).length,fixed:C.filter(e=>"fixed"===e.status).length};return(0,t.jsxs)("div",{className:"flex h-full gap-4",children:[(0,t.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,t.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,t.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===d.length?(0,t.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,t.jsx)(g.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No folders linked"})]}):(0,t.jsx)("div",{className:"divide-y divide-gray-700",children:d.map((e,r)=>(0,t.jsxs)("div",{className:`p-3 cursor-pointer group ${w?.id===e.id?"bg-red-600/20 border-l-2 border-red-500":"hover:bg-gray-750"}`,onClick:()=>N(e),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.id,"up")},disabled:0===r,className:`p-0.5 rounded ${0===r?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,t.jsx)(b.ChevronUp,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.id,"down")},disabled:r===d.length-1,className:`p-0.5 rounded ${r===d.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,t.jsx)(y.ChevronDown,{className:"w-3 h-3"})})]}),(0,t.jsx)(g.FolderOpen,{className:`w-4 h-4 ${w?.id===e.id?"text-red-400":"text-yellow-400"}`}),(0,t.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:e.label})]}),(0,t.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:e.path.split("/").pop()})]},e.id))})})]}),(0,t.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden flex flex-col",children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-3 border-b border-gray-700 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c.Bug,{className:"w-5 h-5 text-red-400"}),(0,t.jsxs)("h3",{className:"text-white font-semibold",children:[s||w?.label||"Project"," Bugs"]}),(0,t.jsx)("div",{className:"flex items-center gap-1 bg-gray-700 rounded-lg p-0.5",children:["all","open","fixed"].map(e=>(0,t.jsxs)("button",{onClick:()=>D(e),className:`px-3 py-1 rounded text-xs transition-colors ${E===e?"bg-gray-600 text-white":"text-gray-400 hover:text-white"}`,children:[e.charAt(0).toUpperCase()+e.slice(1)," (",J[e],")"]},e))})]}),(0,t.jsxs)("button",{onClick:()=>{W(),M(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:[(0,t.jsx)(c.Bug,{className:"w-4 h-4"}),"Report Bug"]})]}),T&&(0,t.jsxs)("div",{className:"p-4 border-b border-gray-700 bg-gray-750 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-white font-medium",children:P?"Edit Bug":"New Bug Report"}),(0,t.jsx)("button",{onClick:W,className:"text-gray-500 hover:text-white",children:(0,t.jsx)(l.X,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("input",{type:"text",placeholder:"Bug title",value:O.title,onChange:e=>R(t=>({...t,title:e.target.value})),className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("select",{value:O.severity,onChange:e=>R(t=>({...t,severity:e.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:Object.entries(v).map(([e,r])=>(0,t.jsx)("option",{value:e,children:r.label},e))}),(0,t.jsxs)("select",{value:O.environment,onChange:e=>R(t=>({...t,environment:e.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[(0,t.jsx)("option",{value:"dev",children:"Dev"}),(0,t.jsx)("option",{value:"test",children:"Test"}),(0,t.jsx)("option",{value:"prod",children:"Prod"})]})]}),(0,t.jsx)("textarea",{placeholder:"Description",value:O.description,onChange:e=>R(t=>({...t,description:e.target.value})),rows:2,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("textarea",{placeholder:"Steps to reproduce",value:O.steps_to_reproduce,onChange:e=>R(t=>({...t,steps_to_reproduce:e.target.value})),rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("input",{type:"text",placeholder:"Expected behavior",value:O.expected_behavior,onChange:e=>R(t=>({...t,expected_behavior:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("input",{type:"text",placeholder:"Actual behavior",value:O.actual_behavior,onChange:e=>R(t=>({...t,actual_behavior:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("input",{type:"text",placeholder:"Related file (optional)",value:O.related_file,onChange:e=>R(t=>({...t,related_file:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm font-mono"})]})]}),P&&(0,t.jsx)("textarea",{placeholder:"Resolution notes",value:O.resolution_notes,onChange:e=>R(t=>({...t,resolution_notes:e.target.value})),rows:2,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none"}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:W,className:"px-3 py-1.5 text-gray-400 hover:text-white",children:"Cancel"}),(0,t.jsx)("button",{onClick:I,className:"px-4 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:P?"Update":"Submit"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:S?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(m.RefreshCw,{className:"w-6 h-6 text-red-400 animate-spin"})}):0===H.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(c.Bug,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"all"===E?"No bugs reported":`No ${E} bugs`})]}):(0,t.jsx)("div",{className:"space-y-2",children:H.map(e=>{let r=v[e.severity],a=j[e.status],s=a.icon;return(0,t.jsx)("div",{className:`bg-gray-750 border rounded-lg p-3 group ${r.color.split(" ")[2]}`,children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsxs)("span",{className:`px-2 py-0.5 rounded text-xs flex items-center gap-1 ${a.color}`,children:[(0,t.jsx)(s,{className:"w-3 h-3"}),a.label]}),(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${r.color.split(" ").slice(0,2).join(" ")}`,children:r.label}),e.environment&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-400 rounded text-xs",children:e.environment})]}),(0,t.jsx)("h3",{className:"text-white font-medium",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Clock,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),e.reported_by&&(0,t.jsxs)("span",{children:["by ",e.reported_by]}),e.related_file&&(0,t.jsx)("span",{className:"font-mono bg-gray-700 px-1 rounded",children:e.related_file.split("/").pop()})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["fixed"!==e.status&&(0,t.jsx)("button",{onClick:()=>B(e,"fixed"),className:"p-1.5 text-gray-500 hover:text-green-400 hover:bg-gray-700 rounded",title:"Mark fixed",children:(0,t.jsx)(u.CheckCircle,{className:"w-4 h-4"})}),"fixed"===e.status&&(0,t.jsx)("button",{onClick:()=>U(e),className:"p-1.5 text-gray-500 hover:text-purple-400 hover:bg-gray-700 rounded",title:"Archive",children:(0,t.jsx)(x,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{$(e),R({title:e.title,description:e.description||"",severity:e.severity,status:e.status,steps_to_reproduce:e.steps_to_reproduce||"",expected_behavior:e.expected_behavior||"",actual_behavior:e.actual_behavior||"",environment:e.environment||"dev",related_file:e.related_file||"",resolution_notes:e.resolution_notes||""}),M(!0)},className:"p-1.5 text-gray-500 hover:text-white hover:bg-gray-700 rounded",children:(0,t.jsx)(n.Edit2,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>z(e),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-700 rounded",children:(0,t.jsx)(f.Trash2,{className:"w-4 h-4"})})]})]})},e.id)})})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(c.Bug,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"Select a folder to view bugs"})]})})})]})}e.s(["default",()=>w],15403)},1739,e=>{"use strict";var t=e.i(4828),r=e.i(65508),a=e.i(13401),s=e.i(83196),l=e.i(36223),n=e.i(742),i=e.i(29221),o=e.i(93869),c=e.i(79735),d=e.i(17385);let u=(0,e.i(42945).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var h=e.i(47904),p=e.i(13539),x=e.i(3046);let g=[{id:"all",label:"All",icon:o.BookOpen},{id:"naming",label:"Naming Conventions",icon:c.Code},{id:"structure",label:"File Structure",icon:p.Folder},{id:"database",label:"Database Patterns",icon:d.Database},{id:"api",label:"API Patterns",icon:u},{id:"component",label:"Component Patterns",icon:c.Code},{id:"quirk",label:"Quirks & Gotchas",icon:h.AlertTriangle}];function m({projectPath:e,projectId:c,isParent:d,childProjectIds:u}){let h,[p,m]=(0,r.useState)([]),[f,b]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[j,w]=(0,r.useState)("all"),[N,C]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),[_,E]=(0,r.useState)({convention_type:"naming",name:"",description:"",example:""});(0,r.useEffect)(()=>{T(e)},[e]),(0,r.useEffect)(()=>{D()},[c,d,u]);let D=async()=>{try{let t=d&&u?.length?u:[c],r=[];for(let e of t){let t=await fetch(`/project-management/api/project-paths?project_id=${e}`),a=await t.json();a.success&&a.paths&&a.paths.forEach(e=>r.push(e.path))}0===r.length&&r.push(e),b(r)}catch(t){console.error("Error fetching project paths:",t),b([e])}},T=async e=>{if(e){v(!0);try{let t=await fetch(`/project-management/api/conventions?project_path=${encodeURIComponent(e)}`),r=await t.json();r.success&&r.conventions&&m(r.conventions)}catch(e){console.error("Error fetching conventions:",e)}finally{v(!1)}}},M=async()=>{try{let e=[];for(let t of f){let r=await fetch(`/project-management/api/conventions?project_path=${encodeURIComponent(t)}`),a=await r.json();a.success&&a.conventions&&e.push(...a.conventions)}m(e)}catch(e){console.error("Error fetching conventions:",e)}finally{v(!1)}},P=async()=>{if(_.name.trim())try{let t=k?`/project-management/api/conventions/${k}`:"/project-management/api/conventions",r=await fetch(t,{method:k?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_path:e,..._})});(await r.json()).success&&(M(),O())}catch(e){console.error("Error saving convention:",e)}},$=async e=>{if(confirm("Delete this convention?"))try{let t=await fetch(`/project-management/api/conventions/${e}`,{method:"DELETE"});(await t.json()).success&&M()}catch(e){console.error("Error deleting convention:",e)}},O=()=>{C(!1),S(null),E({convention_type:"naming",name:"",description:"",example:""})},R="all"===j?p:p.filter(e=>e.convention_type===j),L=(h={all:p.length},g.slice(1).forEach(e=>{h[e.id]=p.filter(t=>t.convention_type===e.id).length}),h);return y?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin text-2xl",children:""})}):(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Coding Conventions"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Help Claude understand project patterns and maintain consistency"})]}),(0,t.jsxs)("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg",children:[(0,t.jsx)(a.Plus,{className:"w-4 h-4"}),"Add Convention"]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:g.map(e=>{let r=e.icon;return(0,t.jsxs)("button",{onClick:()=>w(e.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors ${j===e.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[(0,t.jsx)(r,{className:"w-4 h-4"}),e.label,(0,t.jsx)("span",{className:"ml-1 px-1.5 py-0.5 bg-black/20 rounded text-xs",children:L[e.id]||0})]},e.id)})}),N&&(0,t.jsxs)("div",{className:"mb-4 p-4 bg-gray-800 rounded-lg border border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"text-white font-medium",children:k?"Edit Convention":"Add Convention"}),(0,t.jsx)("button",{onClick:O,className:"text-gray-400 hover:text-white",children:(0,t.jsx)(n.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Category"}),(0,t.jsx)("select",{value:_.convention_type,onChange:e=>E({..._,convention_type:e.target.value}),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm",children:g.slice(1).map(e=>(0,t.jsx)("option",{value:e.id,children:e.label},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Pattern/Rule Name"}),(0,t.jsx)("input",{type:"text",value:_.name,onChange:e=>E({..._,name:e.target.value}),placeholder:"e.g., Component files use PascalCase",className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:_.description,onChange:e=>E({..._,description:e.target.value}),placeholder:"Explain the convention...",rows:2,className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Example"}),(0,t.jsx)("textarea",{value:_.example,onChange:e=>E({..._,example:e.target.value}),placeholder:"Code example...",rows:2,className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded text-white text-sm font-mono"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:O,className:"px-4 py-2 text-gray-400 hover:text-white text-sm",children:"Cancel"}),(0,t.jsxs)("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded",children:[(0,t.jsx)(i.Save,{className:"w-4 h-4"}),k?"Update":"Save"]})]})]})]}),0===R.length?(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(o.BookOpen,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"No conventions documented yet."}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Add conventions to help Claude maintain consistency."})]}):(0,t.jsx)("div",{className:"space-y-3",children:R.map(e=>{let r,a,n,i,o;return(0,t.jsx)("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-300 text-xs rounded",children:g.find(t=>t.id===e.convention_type)?.label||e.convention_type}),(0,t.jsxs)("span",{className:"flex items-center gap-1 text-gray-500 text-xs",children:[(0,t.jsx)(x.Clock,{className:"w-3 h-3"}),(r=new Date(e.created_at),n=Math.floor((a=new Date().getTime()-r.getTime())/6e4),i=Math.floor(a/36e5),o=Math.floor(a/864e5),n<60?`${n}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:r.toLocaleDateString("en-US",{month:"short",day:"numeric"}))]})]}),(0,t.jsx)("h4",{className:"text-white font-medium",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:e.description}),e.example&&(0,t.jsx)("pre",{className:"mt-2 p-2 bg-gray-900 rounded text-sm text-gray-300 font-mono overflow-x-auto",children:e.example})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 ml-4",children:[(0,t.jsx)("button",{onClick:()=>{S(e.id),E({convention_type:e.convention_type||"naming",name:e.name,description:e.description||"",example:e.example||""}),C(!0)},className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded",children:(0,t.jsx)(s.Edit2,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>$(e.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-gray-700 rounded",children:(0,t.jsx)(l.Trash2,{className:"w-4 h-4"})})]})]})},e.id)})})]})}e.s(["default",()=>m],1739)},63717,e=>{"use strict";var t=e.i(4828),r=e.i(65508),a=e.i(58728),s=e.i(42158),l=e.i(3046),n=e.i(44142),i=e.i(76352),o=e.i(72329),c=e.i(13401),d=e.i(46786),u=e.i(54675),h=e.i(42945);let p=(0,h.default)("scale",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]]),x=(0,h.default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var g=e.i(742),m=e.i(83196),f=e.i(36223),b=e.i(13890);let y={"Work Log":{label:"Work Log",icon:u.FileText,color:"bg-blue-600/20 text-blue-400 border-blue-500",activeColor:"bg-blue-600 text-white",description:"What was done, when, by who"},Ideas:{label:"Ideas",icon:d.Lightbulb,color:"bg-yellow-600/20 text-yellow-400 border-yellow-500",activeColor:"bg-yellow-600 text-white",description:"Future features, improvements"},Decisions:{label:"Decisions",icon:p,color:"bg-purple-600/20 text-purple-400 border-purple-500",activeColor:"bg-purple-600 text-white",description:"Why things were built this way"},Journal:{label:"Journal",icon:x,color:"bg-green-600/20 text-green-400 border-green-500",activeColor:"bg-green-600 text-white",description:"Session notes and learnings"}},v=["Work Log","Ideas","Decisions","Journal"];function j({projectPath:e,projectId:d,projectName:u,isParent:h,childProjectIds:p}){let[x,j]=(0,r.useState)([]),[w,N]=(0,r.useState)(null),[C,k]=(0,r.useState)([]),[S,_]=(0,r.useState)({}),[E,D]=(0,r.useState)(!0),[T,M]=(0,r.useState)("Work Log"),[P,$]=(0,r.useState)(""),[O,R]=(0,r.useState)(new Set),[L,A]=(0,r.useState)(!1),[F,I]=(0,r.useState)(null),[B,z]=(0,r.useState)({category:"Work Log",title:"",content:"",author:""});(0,r.useEffect)(()=>{H(e)},[e]),(0,r.useEffect)(()=>{U()},[d]);let U=async()=>{try{let t=h&&p?.length?p:[d],r=[];for(let e of t){let t=await fetch(`/project-management/api/project-paths?project_id=${e}`),a=await t.json();a.success&&a.paths&&r.push(...a.paths)}if(0===r.length&&e){let t={id:"virtual-main",project_id:d,path:e,label:e.split("/").pop()||"Main",sort_order:0,created_at:new Date().toISOString()};r.push(t)}j(r);let a=r.find(t=>t.path===e);a?N(a):r.length>0&&N(r[0])}catch(e){console.error("Error fetching project paths:",e)}},W=async(e,t)=>{let r=x.findIndex(t=>t.id===e);if(-1===r)return;let a="up"===t?r-1:r+1;if(a<0||a>=x.length)return;let s=x[r],l=x[a],n=[...x];n[r]={...l,sort_order:s.sort_order},n[a]={...s,sort_order:l.sort_order},n.sort((e,t)=>(e.sort_order||0)-(t.sort_order||0)),j(n);try{await Promise.all([fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,sort_order:l.sort_order||a})}),fetch("/project-management/api/project-paths",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:l.id,sort_order:s.sort_order||r})})])}catch(e){console.error("Error moving folder:",e),U()}},H=async e=>{if(e){D(!0);try{let t=e.startsWith("/")?e.slice(1):e,r=await fetch(`/project-management/api/clair/knowledge/${t}`),a=await r.json();a.success&&(k(a.entries||[]),_(a.grouped||{}))}catch(e){console.error("Error fetching knowledge:",e)}finally{D(!1)}}},J=async()=>{if(B.title&&B.content&&w)try{let e=w.path.startsWith("/")?w.path.slice(1):w.path,t=F?`/project-management/api/clair/knowledge/${e}/${F.id}`:`/project-management/api/clair/knowledge/${e}`,r=F?"PATCH":"POST";await fetch(t,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),V(),H(w.path)}catch(e){console.error("Error saving entry:",e)}},X=async t=>{if(confirm("Delete this entry?"))try{let r=e.startsWith("/")?e.slice(1):e;await fetch(`/project-management/api/clair/knowledge/${r}/${t.id}`,{method:"DELETE"}),H(e)}catch(e){console.error("Error deleting entry:",e)}},K=e=>{I(e),z({category:e.category,title:e.title,content:e.content,author:e.author||""}),A(!0)},V=()=>{A(!1),I(null),z({category:T,title:"",content:"",author:""})},q=(S[T]||[]).filter(e=>{if(!P)return!0;let t=P.toLowerCase();return e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)}),Y=y[T]||y["Work Log"],G=Y.icon;return(0,t.jsxs)("div",{className:"flex h-full gap-4",children:[(0,t.jsxs)("div",{className:"w-64 flex-shrink-0 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,t.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Project Folders"})}),(0,t.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-300px)]",children:0===x.length?(0,t.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:[(0,t.jsx)(b.FolderOpen,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No folders linked"})]}):(0,t.jsx)("div",{className:"divide-y divide-gray-700",children:x.map((e,r)=>(0,t.jsxs)("div",{className:`p-3 cursor-pointer group ${w?.id===e.id?"bg-purple-600/20 border-l-2 border-purple-500":"hover:bg-gray-750"}`,onClick:()=>N(e),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),W(e.id,"up")},disabled:0===r,className:`p-0.5 rounded ${0===r?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,t.jsx)(o.ChevronUp,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),W(e.id,"down")},disabled:r===x.length-1,className:`p-0.5 rounded ${r===x.length-1?"text-gray-700":"text-gray-500 hover:text-white hover:bg-gray-600"}`,children:(0,t.jsx)(n.ChevronDown,{className:"w-3 h-3"})})]}),(0,t.jsx)(b.FolderOpen,{className:`w-4 h-4 ${w?.id===e.id?"text-purple-400":"text-yellow-400"}`}),(0,t.jsx)("span",{className:"text-white font-medium text-sm flex-1",children:e.label})]}),(0,t.jsx)("p",{className:"text-gray-600 text-[10px] font-mono mt-1 pl-12 truncate",children:e.path.split("/").pop()})]},e.id))})})]}),(0,t.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg overflow-hidden flex flex-col",children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"border-b border-gray-700",children:[(0,t.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Brain,{className:"w-5 h-5 text-purple-400"}),(0,t.jsxs)("h3",{className:"text-white font-semibold",children:[u||w?.label||"Project"," Knowledge"]}),(0,t.jsxs)("span",{className:"text-gray-500 text-sm",children:["(",C.length," entries)"]})]}),(0,t.jsxs)("button",{onClick:()=>{z({...B,category:T}),A(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:[(0,t.jsx)(c.Plus,{className:"w-4 h-4"}),"Add Entry"]})]}),(0,t.jsx)("div",{className:"flex px-3 -mb-px",children:v.map(e=>{let r=y[e]||y["Work Log"],a=r.icon,s=S[e]?.length||0,l=T===e;return(0,t.jsxs)("button",{onClick:()=>M(e),className:`flex items-center gap-1.5 px-4 py-2.5 text-sm font-medium border-b-2 transition-colors ${l?`${r.activeColor} border-current`:"text-gray-400 border-transparent hover:text-white hover:border-gray-600"}`,children:[(0,t.jsx)(a,{className:"w-4 h-4"}),r.label,(0,t.jsx)("span",{className:`ml-1 px-1.5 py-0.5 rounded text-xs ${l?"bg-white/20":"bg-gray-700"}`,children:s})]},e)})})]}),(0,t.jsxs)("div",{className:`px-4 py-2 text-sm ${Y.color} border-b border-gray-700`,children:[(0,t.jsx)(G,{className:"w-4 h-4 inline mr-2"}),Y.description]}),L&&(0,t.jsxs)("div",{className:"p-4 border-b border-gray-700 bg-gray-750 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-white font-medium",children:F?"Edit Entry":`New ${(y[B.category]||y["Work Log"]).label} Entry`}),(0,t.jsx)("button",{onClick:V,className:"text-gray-500 hover:text-white",children:(0,t.jsx)(g.X,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("select",{value:B.category,onChange:e=>z(t=>({...t,category:e.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:v.map(e=>(0,t.jsx)("option",{value:e,children:(y[e]||{}).label||e},e))}),(0,t.jsx)("input",{type:"text",placeholder:"Author (optional)",value:B.author,onChange:e=>z(t=>({...t,author:e.target.value})),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"})]}),(0,t.jsx)("input",{type:"text",placeholder:"Title",value:B.title,onChange:e=>z(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm"}),(0,t.jsx)("textarea",{placeholder:"Content...",value:B.content,onChange:e=>z(t=>({...t,content:e.target.value})),rows:4,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none"}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:V,className:"px-3 py-1.5 text-gray-400 hover:text-white",children:"Cancel"}),(0,t.jsx)("button",{onClick:J,className:"px-4 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:F?"Update":"Save"})]})]}),(0,t.jsx)("div",{className:"p-3 border-b border-gray-700",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(s.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),(0,t.jsx)("input",{type:"text",placeholder:`Search ${Y.label.toLowerCase()}...`,value:P,onChange:e=>$(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 text-sm"})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:E?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(a.Brain,{className:"w-6 h-6 text-purple-400 animate-pulse"})}):0===q.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(G,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),(0,t.jsxs)("p",{children:["No ",Y.label.toLowerCase()," entries"]}),(0,t.jsx)("p",{className:"text-sm mt-1",children:Y.description})]}):(0,t.jsx)("div",{className:"space-y-2",children:q.map(e=>{let r;return(0,t.jsxs)("div",{className:"bg-gray-750 border border-gray-700 rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-3 cursor-pointer hover:bg-gray-700 flex items-start gap-3",onClick:()=>{var t;return t=e.id,void R(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},children:[(0,t.jsx)("button",{className:"text-gray-500 mt-0.5",children:O.has(e.id)?(0,t.jsx)(n.ChevronDown,{className:"w-4 h-4"}):(0,t.jsx)(i.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("span",{className:"text-white font-medium",children:e.title}),!O.has(e.id)&&(0,t.jsx)("p",{className:"text-gray-400 text-sm truncate mt-1",children:e.content})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs whitespace-nowrap",children:[e.author&&(0,t.jsx)("span",{className:"text-gray-600",children:e.author}),(0,t.jsx)(l.Clock,{className:"w-3 h-3"}),(r=new Date(e.created_at)).toLocaleDateString()+" "+r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),K(e)},className:"p-1 text-gray-500 hover:text-white hover:bg-gray-600 rounded",children:(0,t.jsx)(m.Edit2,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),X(e)},className:"p-1 text-gray-500 hover:text-red-400 hover:bg-gray-600 rounded",children:(0,t.jsx)(f.Trash2,{className:"w-3 h-3"})})]})]}),O.has(e.id)&&(0,t.jsxs)("div",{className:"px-10 pb-3 border-t border-gray-700 pt-3",children:[(0,t.jsx)("p",{className:"text-gray-300 text-sm whitespace-pre-wrap",children:e.content}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,t.jsxs)("button",{onClick:()=>K(e),className:"text-xs text-gray-500 hover:text-white flex items-center gap-1",children:[(0,t.jsx)(m.Edit2,{className:"w-3 h-3"})," Edit"]}),(0,t.jsxs)("button",{onClick:()=>X(e),className:"text-xs text-gray-500 hover:text-red-400 flex items-center gap-1",children:[(0,t.jsx)(f.Trash2,{className:"w-3 h-3"})," Delete"]})]})]})]},e.id)})})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(a.Brain,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"Select a folder to view knowledge"})]})})})]})}e.s(["default",()=>j],63717)}]);