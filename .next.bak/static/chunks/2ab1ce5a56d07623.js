(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72990,e=>{"use strict";let t=(0,e.i(42945).default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);e.s(["Rocket",()=>t],72990)},47567,e=>{"use strict";var t=e.i(51455);let r=t.default.env.NEXT_PUBLIC_ORCHESTRATOR_URL||"http://localhost:7100",s=t.default.env.NEXT_PUBLIC_TRADELINE_PATCHER_URL||"http://localhost:7101";async function n(e,t,r={}){let s=`${e}${t}`,a=await fetch(s,{...r,headers:{"Content-Type":"application/json",...r.headers},cache:"no-store"});if(!a.ok){let e=await a.json().catch(()=>({error:a.statusText}));throw Error(e.error||e.message||`API Error: ${a.status}`)}return a.json()}async function a(e=20){return n(r,`/deploy/jobs?limit=${e}`)}async function o(){return n(s,"/server/health-all")}async function l(){return n(s,"/dev/status")}async function c(){return n(s,"/dev/pull",{method:"POST"})}async function i(){return n(s,"/dev/compare",{method:"POST"})}async function d(){return n(s,"/dev/diff")}async function u(){return n(s,"/dev/push",{method:"POST"})}async function h(e){return n(s,`/dev/push/${e}`,{method:"POST"})}async function x(){return n(s,"/dev/push-all",{method:"POST"})}async function m(){return n(s,"/dev/sync-deploy",{method:"POST"})}async function g(e){return a(e?.limit||20)}async function p(){try{return(await fetch("/api/dev-controls/analytics/engine",{cache:"no-store"})).json()}catch(e){return{success:!1,error:e.message}}}async function y(){try{return(await fetch("/api/deploy/dev-environment",{cache:"no-store"})).json()}catch(e){return{success:!1,error:e.message}}}e.s(["compareDevProd",()=>i,"fullSyncDeploy",()=>m,"getDeployments",()=>g,"getDevDiff",()=>d,"getDevEnvironmentStatus",()=>y,"getDevStatus",()=>l,"getEngineAnalytics",()=>p,"getHealthAll",()=>o,"gitPullDev",()=>c,"pushDevToAllTradelines",()=>x,"pushDevToProd",()=>u,"pushDevToTradeline",()=>h])},42689,e=>{"use strict";var t=e.i(4828),r=e.i(65508),s=e.i(79443),n=e.i(72990),a=e.i(47567),o=e.i(11174);function l({deployments:e}){let[s,n]=(0,r.useState)("all"),[a,l]=(0,r.useState)("all"),c=e.filter(e=>("all"===s||e.project===s)&&("all"===a||e.environment===a)),i={pending:"bg-yellow-500/20 text-yellow-400",running:"bg-blue-500/20 text-blue-400",success:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400",rolled_back:"bg-orange-500/20 text-orange-400"},d={development:"border-gray-500/30",staging:"border-blue-500/30",production:"border-green-500/30"},u=[...new Set(e.map(e=>e.project))],h=async e=>{if(confirm("Are you sure you want to rollback this deployment?"))try{let t=await fetch(`/api/dev-controls/deployments/${e}/rollback`,{method:"POST"}),r=await t.json();r.success?(alert("Rollback initiated"),window.location.reload()):alert(r.error||"Rollback failed")}catch(e){alert(e.message)}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("select",{value:s,onChange:e=>n(e.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-green-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"all",children:"All Projects"}),u.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsxs)("select",{value:a,onChange:e=>l(e.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-green-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"all",children:"All Environments"}),(0,t.jsx)("option",{value:"development",children:"Development"}),(0,t.jsx)("option",{value:"staging",children:"Staging"}),(0,t.jsx)("option",{value:"production",children:"Production"})]})]})}),(0,t.jsxs)("div",{className:"space-y-3",children:[c.map(e=>(0,t.jsx)("div",{className:`bg-gray-800 border-l-4 ${d[e.environment]} border border-gray-700 rounded-xl p-4`,children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-white",children:e.project}),(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${i[e.status]}`,children:e.status}),(0,t.jsx)("span",{className:"text-xs bg-gray-700 text-gray-300 px-2 py-0.5 rounded",children:e.environment})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-400 mb-1",children:["Branch: ",(0,t.jsx)("code",{className:"text-blue-400",children:e.branch}),e.commit&&(0,t.jsxs)("span",{children:[" @ ",(0,t.jsx)("code",{className:"text-purple-400",children:e.commit.slice(0,7)})]})]}),e.notes&&(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.notes})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:new Date(e.created_at).toLocaleString()}),(0,t.jsxs)("div",{className:"text-xs text-gray-600 mb-2",children:["by ",e.user]}),"success"===e.status&&"production"===e.environment&&(0,t.jsx)(o.RoleGate,{permission:"canPushToProd",children:(0,t.jsx)("button",{onClick:()=>h(e.id),className:"px-3 py-1 text-xs font-semibold rounded bg-orange-500/15 text-orange-400 border border-orange-500/30 hover:bg-orange-500 hover:text-white transition-colors",children:"Rollback"})})]})]})},e.id)),0===c.length&&(0,t.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No deployments found"})]})]})}var c=e.i(3437);function i(){let[e,o]=(0,r.useState)([]),[i,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0),x=(0,r.useContext)(c.PageTitleContext),m=(0,r.useContext)(c.PageActionsContext),g=async()=>{h(!0);try{let e=await (0,a.getDeployments)({limit:20});o(e?.jobs||[]),d(null)}catch(e){d(e.message)}finally{h(!1)}};return(0,r.useEffect)(()=>(x({title:"Deployments",description:"View and manage deployment history"}),m((0,t.jsx)("div",{className:"flex gap-1",children:(0,t.jsxs)(s.default,{href:"/dev-controls/releases",className:"flex items-center gap-1.5 px-3 py-1 bg-cyan-500/80 hover:bg-cyan-500 border border-black/30 rounded-lg text-white text-sm transition-colors",children:[(0,t.jsx)(n.Rocket,{className:"w-3.5 h-3.5"}),"New Deploy"]})})),()=>{m(null)}),[x,m]),(0,r.useEffect)(()=>{g()},[]),(0,t.jsxs)("div",{children:[i&&(0,t.jsxs)("div",{className:"bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-6",children:[(0,t.jsx)("strong",{children:"Error:"})," ",i]}),u?(0,t.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading deployments..."}):(0,t.jsx)(l,{deployments:e})]})}e.s(["default",()=>i],42689)}]);