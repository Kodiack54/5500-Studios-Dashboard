(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84859,e=>{e.v({className:"geist_a71539c9-module__T19VSG__className",variable:"geist_a71539c9-module__T19VSG__variable"})},21554,e=>{e.v({className:"geist_mono_8d43a2aa-module__8Li5zG__className",variable:"geist_mono_8d43a2aa-module__8Li5zG__variable"})},94739,46092,59770,85053,75327,86116,63532,e=>{"use strict";var t=e.i(84859);let s={className:t.default.className,style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"}};null!=t.default.variable&&(s.variable=t.default.variable),e.s(["default",0,s],94739);var r=e.i(21554);let a={className:r.default.className,style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"}};null!=r.default.variable&&(a.variable=r.default.variable),e.s(["default",0,a],46092),e.s(["default",()=>M],59770);var l=e.i(4828),n=e.i(65508),i=e.i(79443),o=e.i(72043),d=e.i(44142),c=e.i(42945);let h=(0,c.default)("door-open",[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]]);var x=e.i(68694),m=e.i(57987),u=e.i(3046),g=e.i(97878);function p(){let e,t,[s,r]=(0,n.useState)(!1),[a,i]=(0,n.useState)(null),[o,d]=(0,n.useState)("clocked_out"),[c,h]=(0,n.useState)(null),[x,m]=(0,n.useState)(null),[p,b]=(0,n.useState)(0),[y,f]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[w,N]=(0,n.useState)(!1),k=(0,n.useRef)(null);async function S(){let{data:{user:e}}=await g.supabase.auth.getUser();if(e){let{data:t}=await g.supabase.from("dev_users").select("*").eq("id",e.id).single();i(t||{id:e.id,email:e.email})}}async function C(){if(!a)return;let e=new Date().toISOString().split("T")[0],{data:t}=await g.supabase.from("dev_time_punches").select("*").eq("user_id",a.id).gte("clock_in",`${e}T00:00:00`).is("clock_out",null).order("clock_in",{ascending:!1}).limit(1);if(t&&t.length>0){let e=t[0];h(e);let{data:r}=await g.supabase.from("dev_break_periods").select("*").eq("time_punch_id",e.id).is("break_end",null).order("break_start",{ascending:!1}).limit(1);if(r&&r.length>0){let e=r[0];m(e),d("lunch"===e.break_type?"on_lunch":"on_break")}else{var s;let t;m(null),d("working"),s=e,t=(new Date().getTime()-new Date(s.clock_in).getTime())/36e5,g.supabase.from("dev_break_periods").select("*").eq("time_punch_id",s.id).then(({data:e})=>{let s=e&&e.some(e=>"break"===e.break_type),r=e&&e.some(e=>"lunch"===e.break_type);f(!s&&t>=3),j(!r&&t>=5.5),N(!s&&t>=5.5)})}_()}else h(null),m(null),d("clocked_out"),f(!1),j(!1),N(!1)}function _(){c&&(x?b((new Date().getTime()-new Date(x.break_start).getTime())/1e3):b((new Date().getTime()-new Date(c.clock_in).getTime())/1e3))}function $(e){let t=Math.floor(e/3600),s=Math.floor(e%3600/60);return`${t}h ${s}m`}async function P(){if(!a)return;let{data:e,error:t}=await g.supabase.from("dev_time_punches").insert([{user_id:a.id,clock_in:new Date().toISOString(),status:"active"}]).select().single();if(t){console.error("Error clocking in:",t),alert("Error starting work");return}await C(),r(!1)}async function T(e="break"){if(!c)return;let{data:t,error:s}=await g.supabase.from("dev_break_periods").insert([{time_punch_id:c.id,break_start:new Date().toISOString(),break_type:e}]).select().single();if(s){console.error("Error starting break:",s),alert("Error starting break: "+s.message);return}await C(),r(!1)}async function D(){if(!x)return;let{error:e}=await g.supabase.from("dev_break_periods").update({break_end:new Date().toISOString()}).eq("id",x.id);if(e){console.error("Error ending break:",e),alert("Error ending break");return}await C(),r(!1)}async function I(){if(!c)return;x&&await g.supabase.from("dev_break_periods").update({break_end:new Date().toISOString()}).eq("id",x.id);let e=new Date,t=new Date(c.clock_in),{data:s}=await g.supabase.from("dev_break_periods").select("*").eq("time_punch_id",c.id),a=0;s&&s.forEach(e=>{if("lunch"===e.break_type&&e.break_start&&e.break_end){let t=new Date(e.break_start),s=new Date(e.break_end);a+=(s.getTime()-t.getTime())/6e4}});let l=(((e.getTime()-t.getTime())/6e4-a)/60).toFixed(2),{error:n}=await g.supabase.from("dev_time_punches").update({clock_out:e.toISOString(),total_hours:parseFloat(l),status:"completed"}).eq("id",c.id);if(n){console.error("Error clocking out:",n),alert("Error ending work");return}await C(),r(!1)}return(0,n.useEffect)(()=>{S()},[]),(0,n.useEffect)(()=>{if(a){C();let e=setInterval(C,3e4);return()=>clearInterval(e)}},[a]),(0,n.useEffect)(()=>{if(c&&"clocked_out"!==o){let e=setInterval(()=>{_()},1e3);return()=>clearInterval(e)}},[c,o]),(0,n.useEffect)(()=>{function e(e){k.current&&!k.current.contains(e.target)&&r(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,l.jsxs)("div",{className:"relative",ref:k,children:[(0,l.jsxs)("button",{onClick:()=>r(!s),className:(e="w-10 h-10 rounded-xl flex items-center justify-center transition-all",w?`${e} bg-red-500/20 hover:bg-red-500/30 border border-red-500/50`:y||v?`${e} bg-orange-500/20 hover:bg-orange-500/30 border border-orange-500/50`:"on_break"===o||"on_lunch"===o?`${e} bg-sky-500/20 hover:bg-sky-500/30 border border-sky-500/50`:"working"===o?`${e} bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-500/50`:`${e} bg-gray-700 hover:bg-gray-600 border border-gray-600`),title:"clocked_out"===o?"Time Clock - Not clocked in":"working"===o?`Working - ${$(p)}${y?" - Break time!":""}${v?" - Lunch time!":""}${w?" - OVERDUE!":""}`:"on_break"===o?`On Break - ${$(p)}`:`On Lunch - ${$(p)}`,children:[(0,l.jsx)(u.Clock,{className:(t="w-5 h-5 transition-colors",w?`${t} text-red-400 animate-pulse`:y||v?`${t} text-orange-400 animate-pulse`:"on_break"===o||"on_lunch"===o?`${t} text-sky-400`:"working"===o?`${t} text-emerald-400`:`${t} text-gray-400`)}),(y||v||w)&&(0,l.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-orange-500 rounded-full animate-pulse"})]}),s&&(0,l.jsxs)("div",{className:"absolute right-0 mt-2 w-72 bg-gray-800 rounded-xl shadow-xl border border-gray-700 overflow-hidden z-50",children:["clocked_out"===o&&(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("div",{className:"text-sm text-gray-400 mb-3 text-center",children:"Not clocked in"}),(0,l.jsxs)("button",{onClick:P,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-2.5 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[(0,l.jsx)(u.Clock,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Start Work"})]})]}),"working"===o&&(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"mb-3 pb-3 border-b border-gray-700",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Working"}),(0,l.jsx)("span",{className:"text-xs px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded-full border border-emerald-500/50",children:"Active"})]}),(0,l.jsx)("div",{className:"text-2xl font-bold text-white",children:$(p)}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Started ",c&&new Date(c.clock_in).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]}),(y||v||w)&&(0,l.jsxs)("div",{className:`mb-3 p-2 rounded-lg text-xs ${w?"bg-red-500/20 border border-red-500/50 text-red-300":"bg-orange-500/20 border border-orange-500/50 text-orange-300"}`,children:[w&&"ðŸ”´ Break overdue! (5.5+ hours)",!w&&v&&"ðŸ½ï¸ Lunch break recommended",!w&&y&&!v&&"â˜• Break time approaching"]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("button",{onClick:()=>T("break"),className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"â˜• Start Break"}),(0,l.jsx)("button",{onClick:()=>T("lunch"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"ðŸ½ï¸ Start Lunch"}),(0,l.jsx)("button",{onClick:I,className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"ðŸ End Work"})]})]}),("on_break"===o||"on_lunch"===o)&&(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"mb-3 pb-3 border-b border-gray-700",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"on_lunch"===o?"ðŸ½ï¸ On Lunch":"â˜• On Break"}),(0,l.jsx)("span",{className:"text-xs px-2 py-1 bg-sky-500/20 text-sky-400 rounded-full border border-sky-500/50",children:"Break"})]}),(0,l.jsx)("div",{className:"text-2xl font-bold text-white",children:$(p)}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Started ",x&&new Date(x.break_start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]}),(0,l.jsx)("button",{onClick:D,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-2.5 px-4 rounded-lg font-medium transition-colors",children:"âœ… End Break"})]})]})]})}var b=e.i(56424);function y({user:e}){let t=(0,o.useRouter)(),[s,r]=(0,n.useState)(!1),a=(0,n.useRef)(null);(0,n.useEffect)(()=>{function e(e){a.current&&!a.current.contains(e.target)&&r(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let i={title:"ðŸ–¥ï¸ SERVERS",items:[{label:"Engine Slots",path:"/settings/engine-slots",description:"Assign tradelines to slots",permission:"canManageServers"},{label:"Patcher Config",path:"/settings/patcher",description:"API endpoints & deployment",permission:"canManageServers"},{label:"Environment Variables",path:"/settings/env-vars",description:"Server .env configuration",permission:"canManageServers"}]},d={title:"ðŸ”‘ CREDENTIALS",items:[{label:"API Keys",path:"/settings/api-keys",description:"Claude, OpenAI, Supabase",permission:"canManageCredentials"},{label:"Source Logins",path:"/settings/source-logins",description:"SAM.gov, PlanetBids, etc.",permission:"canManageCredentials"},{label:"SSH Keys",path:"/settings/ssh-keys",description:"Server access keys",permission:"canManageCredentials"}]},c={title:"ðŸ‘¥ TEAM",items:[{label:"Team Members",path:"/team/members",description:"Staff accounts & access",permission:"canManageTeam"},{label:"Roles & Permissions",path:"/team/roles",description:"Access control settings",permission:"canManageTeam"},{label:"Timesheets",path:"/settings/timesheets",description:"Time tracking settings",permission:"canManageTeam"}]},h={title:"ðŸ”” ALERTS",items:[{label:"Alert Rules",path:"/settings/alert-rules",description:"When to notify",permission:"canManageAlerts"},{label:"Notification Channels",path:"/settings/notifications",description:"Slack, email, SMS",permission:"canManageAlerts"},{label:"Health Thresholds",path:"/settings/health-thresholds",description:"Server health limits",permission:"canManageAlerts"}]},x={title:"âš™ï¸ SYSTEM",items:[{label:"Dashboard Settings",path:"/settings/dashboard",description:"UI preferences",permission:"canManageSystem"},{label:"Audit Logs",path:"/settings/audit-logs",description:"System activity history",permission:"canManageSystem"},{label:"Database",path:"/settings/database",description:"Supabase connection",permission:"canManageSystem"}]},m={title:"ðŸ¢ CLIENTS",items:[{label:"Add Client",path:"/settings/clients/new",description:"Create new dev_client",permission:"canManageClients"},{label:"Manage Clients",path:"/settings/clients",description:"View & edit clients",permission:"canManageClients"}]};return(0,l.jsxs)("div",{className:"relative",ref:a,children:[(0,l.jsx)("button",{onClick:()=>r(!s),className:"w-10 h-10 bg-gray-700 hover:bg-gray-600 rounded-xl flex items-center justify-center transition-colors border border-gray-600",title:"Settings",children:(0,l.jsx)(b.Settings,{className:"w-5 h-5 text-gray-300"})}),s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),(0,l.jsxs)("div",{className:"absolute right-0 mt-2 rounded-xl shadow-xl border border-gray-700 py-4 z-50 bg-gray-800",style:{minWidth:"650px"},children:[(0,l.jsx)("div",{className:"px-4 pb-3 border-b border-gray-700",children:(0,l.jsx)("p",{className:"text-xs text-gray-400 uppercase font-bold tracking-wider",children:"âš™ï¸ DEV COMMAND CENTER SETTINGS"})}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4 px-4 pt-4",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[i&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:i.title}),(0,l.jsx)("div",{className:"space-y-1",children:i.items.map(e=>(0,l.jsxs)("button",{onClick:()=>{t.push(e.path),r(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-sm",children:e.label}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.path))})]}),h&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:h.title}),(0,l.jsx)("div",{className:"space-y-1",children:h.items.map(e=>(0,l.jsxs)("button",{onClick:()=>{t.push(e.path),r(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-sm",children:e.label}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.path))})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[d&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:d.title}),(0,l.jsx)("div",{className:"space-y-1",children:d.items.map(e=>(0,l.jsxs)("button",{onClick:()=>{t.push(e.path),r(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-sm",children:e.label}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.path))})]}),x&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:x.title}),(0,l.jsx)("div",{className:"space-y-1",children:x.items.map(e=>(0,l.jsxs)("button",{onClick:()=>{t.push(e.path),r(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-sm",children:e.label}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.path))})]}),m&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:m.title}),(0,l.jsx)("div",{className:"space-y-1",children:m.items.map(e=>(0,l.jsxs)("button",{onClick:()=>{t.push(e.path),r(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-sm",children:e.label}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.path))})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[c&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:c.title}),(0,l.jsx)("div",{className:"space-y-1",children:c.items.map(e=>(0,l.jsxs)("button",{onClick:()=>{t.push(e.path),r(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-sm",children:e.label}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.path))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 uppercase font-bold mb-2",children:"ðŸ”— QUICK LINKS"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("button",{onClick:()=>{t.push("/dev-controls"),r(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-sm",children:"Dev Controls"}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"Deploy, SSH, Git, Logs"})]}),(0,l.jsxs)("button",{onClick:()=>{t.push("/helpdesk"),r(!1)},className:"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-sm",children:"Helpdesk"}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"System & user tickets"})]})]})]})]})]})]})]})]})}let f=(0,c.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),v=(0,c.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),j=(0,c.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var w=e.i(742),N=e.i(79735),k=e.i(98411);let S=(0,c.default)("grip-horizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),C=(0,c.default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),_=(0,c.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);function $(){let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(null),[a,i]=(0,n.useState)([]),[o,d]=(0,n.useState)(""),[c,h]=(0,n.useState)(!1),[x,m]=(0,n.useState)(0),[u,g]=(0,n.useState)({x:0,y:0}),[p,b]=(0,n.useState)(!1),[y,$]=(0,n.useState)({x:0,y:0}),[P,T]=(0,n.useState)({width:500,height:500}),[D,I]=(0,n.useState)(!1),[M,E]=(0,n.useState)({x:0,y:0,width:0,height:0}),[R,L]=(0,n.useState)(!1),[O,A]=(0,n.useState)({width:500,height:500,x:0,y:0}),B=(0,n.useRef)(null),F=(0,n.useRef)(null),z=(0,n.useRef)(null),[W,G]=(0,n.useState)([{id:"1",name:"general",type:"channel",description:"General team discussion",unread_count:2},{id:"2",name:"dev-updates",type:"channel",description:"Development updates & announcements",unread_count:0},{id:"3",name:"code-review",type:"channel",description:"Code snippets and reviews",unread_count:1},{id:"4",name:"deployments",type:"channel",description:"Deployment coordination",unread_count:0}]),[H,U]=(0,n.useState)([{id:"dm1",name:"Michael",type:"dm",unread_count:1,participants:["Michael"]},{id:"dm2",name:"Dev Team",type:"dm",unread_count:0,participants:["Dev Team"]}]);(0,n.useEffect)(()=>{m(W.reduce((e,t)=>e+t.unread_count,0)+H.reduce((e,t)=>e+t.unread_count,0))},[W,H]),(0,n.useEffect)(()=>{z.current?.scrollIntoView({behavior:"smooth"})},[a]);let q=(0,n.useCallback)(e=>{if(R)return;b(!0);let t=F.current?.getBoundingClientRect();t&&$({x:e.clientX-t.left,y:e.clientY-t.top}),e.preventDefault()},[R]),K=(0,n.useCallback)(e=>{if(p){let t=e.clientX-y.x,s=e.clientY-y.y;g({x:Math.max(0,Math.min(t,window.innerWidth-P.width)),y:Math.max(0,Math.min(s,window.innerHeight-P.height))})}if(D){let t=e.clientX-M.x,s=e.clientY-M.y;T({width:Math.max(400,M.width+t),height:Math.max(350,M.height+s)})}},[p,D,y,M,P.width,P.height]),V=(0,n.useCallback)(()=>{b(!1),I(!1)},[]);(0,n.useEffect)(()=>{if(p||D)return document.addEventListener("mousemove",K),document.addEventListener("mouseup",V),()=>{document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",V)}},[p,D,K,V]);let Y=(0,n.useCallback)(e=>{R||(I(!0),E({x:e.clientX,y:e.clientY,width:P.width,height:P.height}),e.preventDefault(),e.stopPropagation())},[P,R]);function J(e){r(e),"channel"===e.type?G(t=>t.map(t=>t.id===e.id?{...t,unread_count:0}:t)):U(t=>t.map(t=>t.id===e.id?{...t,unread_count:0}:t));let t=new Date;i([{id:"1",channel_id:e.id,user_id:"michael",user_name:"Michael",content:"Hey team, just pushed the new tradelines update",created_at:new Date(t.getTime()-36e5).toISOString()},{id:"2",channel_id:e.id,user_id:"dev",user_name:"Dev",content:"Nice! I'll run the tests on it",created_at:new Date(t.getTime()-35e5).toISOString()},{id:"3",channel_id:e.id,user_id:"michael",user_name:"Michael",content:"Here's the code snippet for the API endpoint:",created_at:new Date(t.getTime()-34e5).toISOString()},{id:"4",channel_id:e.id,user_id:"michael",user_name:"Michael",content:`async function fetchTradelines(userId: string) {
  const response = await fetch('/api/tradelines/' + userId);
  return response.json();
}`,created_at:new Date(t.getTime()-33e5).toISOString(),is_code:!0},{id:"5",channel_id:e.id,user_id:"dev",user_name:"Dev",content:"Looks good! I'll integrate it into the portal",created_at:new Date(t.getTime()-6e5).toISOString()}])}function X(){if(!o.trim()||!s)return;let e={id:Date.now().toString(),channel_id:s.id,user_id:"me",user_name:"You",content:o,created_at:new Date().toISOString(),is_code:c};i(t=>[...t,e]),d(""),h(!1)}return(0,n.useEffect)(()=>{e&&0===u.x&&0===u.y&&g({x:window.innerWidth-P.width-20,y:80})},[e,u.x,u.y,P.width]),(0,l.jsxs)("div",{className:"relative",ref:B,children:[(0,l.jsxs)("button",{onClick:()=>t(!e),className:"w-10 h-10 bg-gray-700 text-white rounded-xl flex items-center justify-center hover:bg-gray-600 transition-colors relative",title:"Team Chat",children:[(0,l.jsx)(f,{className:"w-5 h-5"}),x>0&&(0,l.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:x>9?"9+":x})]}),e&&(0,l.jsxs)("div",{ref:F,className:"fixed bg-gray-800 rounded-xl shadow-2xl border border-gray-700 overflow-hidden z-[100]",style:{width:P.width,height:P.height,left:u.x,top:u.y,cursor:p?"grabbing":"default"},children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-900 border-b border-gray-700 cursor-grab select-none",onMouseDown:q,children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(S,{className:"w-4 h-4 text-gray-500"}),(0,l.jsx)("h3",{className:"text-white font-semibold text-sm",children:"Dev Chat"}),(0,l.jsx)("span",{className:"text-gray-500 text-xs",children:"Team messaging"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("button",{onClick:()=>{R?(T({width:O.width,height:O.height}),g({x:O.x,y:O.y}),L(!1)):(A({...P,...u}),T({width:window.innerWidth-100,height:window.innerHeight-100}),g({x:50,y:50}),L(!0))},className:"p-1.5 rounded hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",title:R?"Restore":"Maximize",children:R?(0,l.jsx)(C,{className:"w-4 h-4"}):(0,l.jsx)(_,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>t(!1),className:"p-1.5 rounded hover:bg-red-600 text-gray-400 hover:text-white transition-colors",title:"Close",children:(0,l.jsx)(w.X,{className:"w-4 h-4"})})]})]}),(0,l.jsxs)("div",{className:"flex",style:{height:P.height-44},children:[(0,l.jsx)("div",{className:"w-48 bg-gray-900 border-r border-gray-700 flex flex-col overflow-hidden",children:(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"p-2",children:[(0,l.jsx)("p",{className:"text-gray-500 text-xs font-semibold uppercase px-2 mb-1",children:"Channels"}),W.map(e=>(0,l.jsxs)("button",{onClick:()=>J(e),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-left text-sm transition-colors ${s?.id===e.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800"}`,children:[(0,l.jsx)(j,{className:"w-4 h-4 flex-shrink-0"}),(0,l.jsx)("span",{className:"truncate flex-1",children:e.name}),e.unread_count>0&&(0,l.jsx)("span",{className:"w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:e.unread_count})]},e.id))]}),(0,l.jsxs)("div",{className:"p-2",children:[(0,l.jsx)("p",{className:"text-gray-500 text-xs font-semibold uppercase px-2 mb-1",children:"Direct Messages"}),H.map(e=>(0,l.jsxs)("button",{onClick:()=>J(e),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-left text-sm transition-colors ${s?.id===e.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800"}`,children:[(0,l.jsx)(k.Circle,{className:"w-3 h-3 fill-green-500 text-green-500 flex-shrink-0"}),(0,l.jsx)("span",{className:"truncate flex-1",children:e.name}),e.unread_count>0&&(0,l.jsx)("span",{className:"w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:e.unread_count})]},e.id))]})]})}),(0,l.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"px-4 py-2 border-b border-gray-700 flex items-center justify-between flex-shrink-0",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:["channel"===s.type?(0,l.jsx)(j,{className:"w-5 h-5 text-gray-400"}):(0,l.jsx)(k.Circle,{className:"w-4 h-4 fill-green-500 text-green-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-white font-medium",children:s.name}),s.description&&(0,l.jsx)("p",{className:"text-gray-500 text-xs",children:s.description})]})]})}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(e=>{let t,s;return(0,l.jsxs)("div",{className:`flex gap-3 ${"me"===e.user_id?"flex-row-reverse":""}`,children:[(0,l.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold flex-shrink-0 ${"me"===e.user_id?"bg-blue-600":"bg-purple-600"}`,children:e.user_name.charAt(0)}),(0,l.jsxs)("div",{className:`flex-1 min-w-0 ${"me"===e.user_id?"text-right":""}`,children:[(0,l.jsxs)("div",{className:`flex items-center gap-2 ${"me"===e.user_id?"justify-end":""}`,children:[(0,l.jsx)("span",{className:"text-white text-sm font-medium",children:e.user_name}),(0,l.jsx)("span",{className:"text-gray-500 text-xs",children:(t=new Date(e.created_at),(s=Math.floor((new Date().getTime()-t.getTime())/6e4))<1?"just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:t.toLocaleDateString())})]}),e.is_code?(0,l.jsxs)("div",{className:"relative mt-1",children:[(0,l.jsx)("pre",{className:"bg-gray-900 rounded-lg p-3 text-sm text-green-400 overflow-x-auto font-mono whitespace-pre-wrap break-all",children:e.content}),(0,l.jsx)("button",{onClick:()=>{var t;return t=e.content,void navigator.clipboard.writeText(t)},className:"absolute top-2 right-2 text-gray-500 hover:text-white text-xs px-2 py-1 bg-gray-800 rounded",children:"Copy"})]}):(0,l.jsx)("p",{className:`text-gray-300 text-sm mt-0.5 break-words ${"me"===e.user_id?"bg-blue-600/20 inline-block px-3 py-1.5 rounded-lg":""}`,children:e.content})]})]},e.id)}),(0,l.jsx)("div",{ref:z})]}),(0,l.jsxs)("div",{className:"p-3 border-t border-gray-700 flex-shrink-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>h(!c),className:`p-2 rounded-lg transition-colors ${c?"bg-green-600 text-white":"bg-gray-700 text-gray-400 hover:text-white"}`,title:"Code mode",children:(0,l.jsx)(N.Code,{className:"w-4 h-4"})}),(0,l.jsx)("div",{className:"flex-1 relative",children:c?(0,l.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),placeholder:"Paste code here...",className:"w-full bg-gray-900 text-green-400 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none font-mono resize-none",rows:3,onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey&&X()}}):(0,l.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),placeholder:`Message #${s.name}`,className:"w-full bg-gray-700 text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none",onKeyDown:e=>{"Enter"===e.key&&X()}})}),(0,l.jsx)("button",{onClick:X,disabled:!o.trim(),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,l.jsx)(v,{className:"w-4 h-4"})})]}),c&&(0,l.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Press Ctrl+Enter to send code"})]})]}):(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(f,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,l.jsx)("p",{className:"text-sm",children:"Select a channel to start chatting"})]})})})]}),!R&&(0,l.jsx)("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:Y,style:{background:"linear-gradient(135deg, transparent 50%, #4B5563 50%)",borderBottomRightRadius:"0.75rem"}})]})]})}let P=(0,c.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);function T(){let[e,t]=(0,n.useState)(!1);return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:()=>t(!e),className:"w-10 h-10 bg-gray-700 text-white rounded-xl flex items-center justify-center hover:bg-gray-600 transition-colors",title:"AI Team Chat",children:(0,l.jsx)(P,{className:"w-5 h-5"})}),e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)}),(0,l.jsxs)("div",{className:"absolute right-0 top-12 w-80 bg-gray-800 rounded-lg shadow-xl z-50 border border-gray-700",children:[(0,l.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,l.jsx)("h3",{className:"text-white font-medium",children:"AI Team Chat"}),(0,l.jsx)("p",{className:"text-gray-400 text-sm",children:"Chat with AI workers"})]}),(0,l.jsx)("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Coming soon..."})]})]})]})}var D=e.i(3437),I=e.i(11565);function M({pageTitle:e,pageActions:t}){let s=(0,o.usePathname)(),r=(0,o.useRouter)(),[a,c]=(0,n.useState)(!1),{showServers:u,toggleServers:b}=(0,n.useContext)(D.ProductionStatusContext),{clients:f,selectedClient:v,setSelectedClient:j,isLoading:w}=(0,I.useClient)(),N=s?.startsWith("/servers")||s?.startsWith("/credentials")?"servers":s?.startsWith("/dev-controls")?"dev-tools":s?.startsWith("/helpdesk")?"helpdesk":s?.startsWith("/calendar")?"calendar":s?.startsWith("/studio")||s?.startsWith("/team")?"studio":"",k=s?.startsWith("/credentials"),S=[{key:"overview",label:"Overview",path:"/credentials"},{key:"federal",label:"Federal",path:"/credentials/federal"},{key:"state",label:"State",path:"/credentials/state"},{key:"local",label:"Local",path:"/credentials/local"},{key:"municipal",label:"Municipal",path:"/credentials/municipal"},{key:"other",label:"Other",path:"/credentials/other"}];async function C(){await g.supabase.auth.signOut(),r.push("/")}return(0,l.jsxs)("div",{className:"sticky top-0 z-50",children:[(0,l.jsx)("nav",{className:"bg-gray-800 shadow-lg",children:(0,l.jsx)("div",{className:"px-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,l.jsx)(i.default,{href:"/dashboard",className:"flex items-center py-3 hover:opacity-80 transition-opacity",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-bold text-xl leading-tight",children:"Kodiack Studio"}),(0,l.jsx)("div",{className:"text-gray-400 text-xs leading-tight",children:"Games. Platforms. Systems."})]})}),(0,l.jsx)("div",{className:"hidden md:flex items-end space-x-1 pb-0",children:[{id:"servers",label:"Servers",path:"/servers/tradelines"},{id:"dev-tools",label:"Dev Tools",path:"/dev-controls"},{id:"helpdesk",label:"HelpDesk",path:"/helpdesk"},{id:"calendar",label:"Calendar",path:"/calendar"},{id:"studio",label:"Studio",path:"/studio"}].map(e=>{let t=N===e.id,s="external"in e&&e.external,r=`w-32 py-1.5 rounded-t-xl text-base font-medium transition-all border-t border-x flex items-center justify-center ${t?"bg-blue-600 text-white border-blue-500 shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white border-gray-600"}`;return s?(0,l.jsx)("a",{href:e.path,className:r,children:e.label},e.id):(0,l.jsx)(i.default,{href:e.path,className:r,children:e.label},e.id)})})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("select",{value:v?.id||"all",onChange:e=>{if("all"===e.target.value)j(null);else{var t;let s;t=e.target.value,(s=f.find(e=>e.id===t))&&j(s)}},disabled:w,className:"appearance-none bg-gray-700 text-white pl-10 pr-10 py-2 rounded-xl border border-gray-600 focus:ring-2 focus:ring-blue-500 cursor-pointer hover:bg-gray-600 disabled:opacity-50 min-w-[200px]",children:[(0,l.jsx)("option",{value:"all",children:"All Clients"}),f.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,l.jsx)(m.Building2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),(0,l.jsx)(d.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),(0,l.jsx)($,{}),(0,l.jsx)(T,{}),(0,l.jsx)(p,{}),(0,l.jsx)(y,{}),(0,l.jsx)("button",{onClick:()=>c(!0),className:"w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center hover:bg-blue-700 transition-colors",title:"Logout",children:(0,l.jsx)(h,{className:"w-5 h-5"})})]})]})})}),(0,l.jsx)("div",{className:"shadow-md",style:{background:"linear-gradient(to right, #3B82F6, #06B6D4)"},children:(0,l.jsx)("div",{className:"px-6 py-1",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("div",{className:"flex-1 flex items-center space-x-3",children:[(0,l.jsx)("button",{onClick:()=>window.history.back(),className:"w-10 h-10 rounded-xl flex items-center justify-center transition-all flex-shrink-0 text-white border border-black/30 hover:bg-white/10",title:"Go Back",children:(0,l.jsx)(x.ArrowLeft,{className:"w-5 h-5"})}),(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsx)("h1",{className:"text-xl font-bold text-white leading-tight",children:e?.title||(0,l.jsxs)(l.Fragment,{children:[""===N&&"Dashboard","servers"===N&&!k&&"Server Management",k&&"Credentials & Sources","dev-tools"===N&&"Development Tools","helpdesk"===N&&"Support Center","calendar"===N&&"Team Schedule","studio"===N&&"Development Environment"]})}),e?.description&&(0,l.jsx)("p",{className:"text-white/80 text-xs mt-0.5 leading-tight",children:e.description})]}),t&&(0,l.jsx)("div",{className:"flex items-center space-x-2",children:t}),(0,l.jsx)("div",{className:"flex-1"})]}),k&&(0,l.jsx)("div",{className:"flex items-center gap-1 ml-4",children:S.map(e=>{let t=(()=>{if("/credentials"===s)return"overview";let e=S.find(e=>"/credentials"!==e.path&&s?.startsWith(e.path));return e?.key||"overview"})()===e.key;return(0,l.jsx)(i.default,{href:e.path,className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${t?"bg-white/20 text-white":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:e.label},e.key)})})]})})}),a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>c(!1)}),(0,l.jsxs)("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-xl z-50 p-6 w-96",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Confirm Logout"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to log out?"}),(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,l.jsx)("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,l.jsx)("button",{onClick:C,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Yes, Logout"})]})]})]})]})}let E=(0,c.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>E],85053);let R=(0,c.default)("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);e.s(["CalendarCheck",()=>R],75327);let L=(0,c.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>L],86116);var O=e.i(76352);let A=[{id:"tradelines",name:"NextBid Engine",patcherPort:7101,prodPort:"31001-31020",health:"degraded",totalSlots:20,healthySlots:18,degradedSlots:2,offlineSlots:0,slots:[{slotId:"01",tradeline:"security",mainPort:31001,health:"healthy",workers:[],cpu:45,memory:62,requestsPerMin:120},{slotId:"02",tradeline:"administrative",mainPort:31002,health:"healthy",workers:[],cpu:38,memory:55},{slotId:"03",tradeline:"facilities",mainPort:31003,health:"degraded",workers:[],cpu:78,memory:85},{slotId:"04",tradeline:"logistics",mainPort:31004,health:"healthy",workers:[]},{slotId:"05",tradeline:"electrical",mainPort:31005,health:"healthy",workers:[]},{slotId:"06",tradeline:"lowvoltage",mainPort:31006,health:"healthy",workers:[]},{slotId:"07",tradeline:"landscaping",mainPort:31007,health:"healthy",workers:[]},{slotId:"08",tradeline:"hvac",mainPort:31008,health:"degraded",workers:[]},{slotId:"09",tradeline:"plumbing",mainPort:31009,health:"healthy",workers:[]},{slotId:"10",tradeline:"janitorial",mainPort:31010,health:"healthy",workers:[]},{slotId:"11",tradeline:"support",mainPort:31011,health:"healthy",workers:[]},{slotId:"12",tradeline:"waste",mainPort:31012,health:"healthy",workers:[]},{slotId:"13",tradeline:"construction",mainPort:31013,health:"healthy",workers:[]},{slotId:"14",tradeline:"roofing",mainPort:31014,health:"healthy",workers:[]},{slotId:"15",tradeline:"painting",mainPort:31015,health:"healthy",workers:[]},{slotId:"16",tradeline:"flooring",mainPort:31016,health:"healthy",workers:[]},{slotId:"17",tradeline:"demolition",mainPort:31017,health:"healthy",workers:[]},{slotId:"18",tradeline:"environmental",mainPort:31018,health:"healthy",workers:[]},{slotId:"19",tradeline:"concrete",mainPort:31019,health:"healthy",workers:[]},{slotId:"20",tradeline:"fencing",mainPort:31020,health:"healthy",workers:[]}]},{id:"sources",name:"NextSource",patcherPort:7102,prodPort:"8002",health:"healthy"},{id:"nextbidder",name:"NextBidder",patcherPort:7103,prodPort:"8003",health:"healthy"},{id:"portals",name:"NextBid Portal",patcherPort:7104,prodPort:"8004",health:"healthy"},{id:"nexttech",name:"NextTech",patcherPort:7105,prodPort:"8005",health:"healthy"},{id:"nexttask",name:"NextTask",patcherPort:7106,prodPort:"8006",health:"critical"}];function B({onSelectProject:e,onSelectSlot:t,selectedProjectId:s,selectedSlotId:r}){let[a,i]=(0,n.useState)(A),[o,c]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/servers/health");if(e.ok){let t=await e.json();t.projects&&i(t.projects)}}catch(e){console.error("Failed to fetch server health:",e)}};e();let t=setInterval(e,r?3e3:3e4);return()=>clearInterval(t)},[r]);let h=e=>{switch(e){case"healthy":return"bg-green-500";case"degraded":return"bg-yellow-500";case"critical":return"bg-red-500";case"offline":return"bg-gray-500";default:return"bg-gray-600"}};return(0,l.jsx)("div",{className:"space-y-0.5",children:a.map(a=>{let n=a.slots?[...a.slots].sort((e,t)=>e.slotId.localeCompare(t.slotId)):[],i=n.length>0,x=o===a.id;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("button",{onClick:()=>(t=>{t.slots&&t.slots.length>0?c(o===t.id?null:t.id):e?.(t)})(a),className:`w-full flex items-center gap-2 px-3 py-1.5 rounded text-sm transition-all ${s===a.id?"bg-cyan-500/15":"hover:bg-gray-800/30"}`,children:[(0,l.jsx)("div",{className:`w-2 h-2 rounded-full ${h(a.health)} ${"critical"===a.health?"animate-pulse":""}`}),(0,l.jsx)("span",{className:`flex-1 text-left ${"critical"===a.health?"text-red-400":"degraded"===a.health?"text-yellow-400":"text-gray-400"}`,children:a.name}),i&&(0,l.jsx)("div",{className:"text-gray-500",children:x?(0,l.jsx)(d.ChevronDown,{className:"w-3 h-3"}):(0,l.jsx)(O.ChevronRight,{className:"w-3 h-3"})})]}),x&&n.length>0&&(0,l.jsx)("div",{className:"ml-4 mt-0.5 space-y-0.5 border-l border-gray-800 pl-2",children:n.map(e=>(0,l.jsxs)("button",{onClick:s=>{s.stopPropagation(),t?.(a,e)},className:`w-full flex items-center gap-2 px-2 py-1 rounded text-xs transition-all ${r===e.slotId?"bg-cyan-500/20":"hover:bg-gray-800/30"}`,children:[(0,l.jsx)("div",{className:`w-1.5 h-1.5 rounded-full ${h(e.health)}`}),(0,l.jsx)("span",{className:`font-mono text-[10px] ${"healthy"===e.health?"text-green-400":"degraded"===e.health?"text-yellow-400":"text-red-400"}`,children:e.mainPort}),(0,l.jsx)("span",{className:`capitalize ${"healthy"===e.health?"text-green-400":"degraded"===e.health?"text-yellow-400":"text-red-400"}`,children:e.tradeline}),(0,l.jsx)("span",{className:"flex-1"}),r===e.slotId&&(0,l.jsx)("span",{className:"text-cyan-400 text-xs",children:">"})]},e.slotId))})]},a.id)})})}function F({health:e,size:t="sm",pulse:s=!1}){return(0,l.jsx)("span",{className:`inline-block rounded-full ${{sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3"}[t]} ${(e=>{switch(e){case"healthy":return"bg-green-500";case"degraded":return"bg-yellow-500";case"critical":return"bg-red-500";case"offline":return"bg-gray-500";default:return"bg-gray-600"}})(e)} ${s||"critical"===e?"animate-pulse":""}`})}e.s(["StatusDot",()=>F,"default",()=>B],63532)},11174,e=>{"use strict";var t=e.i(4828),s=e.i(48700);function r({children:e,minRole:r,permission:a,fallback:l=null}){let{hasMinRole:n,hasPermission:i,isLoading:o}=(0,s.useUser)();return o?null:a&&!i(a)||r&&!n(r)?(0,t.jsx)(t.Fragment,{children:l}):(0,t.jsx)(t.Fragment,{children:e})}e.s(["RoleGate",()=>r])},3437,15568,e=>{"use strict";e.s(["PageActionsContext",()=>D,"PageTitleContext",()=>T,"ProductionStatusContext",()=>I,"default",()=>M],3437);var t=e.i(4828),s=e.i(94739),r=e.i(46092),a=e.i(59770),l=e.i(65508),n=e.i(79443),i=e.i(72043),o=e.i(85053),d=e.i(31085),c=e.i(49726),h=e.i(75327),x=e.i(86116),m=e.i(44142),u=e.i(76352),g=e.i(63532),p=e.i(11174),b=e.i(48700);function y({project:e,slot:s,onClose:r,onReboot:a,onServerAction:n}){let{hasPermission:i}=(0,b.useUser)(),[o,d]=(0,l.useState)("health"),[c,h]=(0,l.useState)(""),[x,m]=(0,l.useState)(!1),[u,y]=(0,l.useState)(null),[f,v]=(0,l.useState)(null),[j,w]=(0,l.useState)(!0),N=(0,l.useRef)(null),k=async()=>{if(s){m(!0);try{let e=encodeURIComponent(s.tradeline);console.log("Fetching logs for tradeline:",s.tradeline,"encoded:",e);let t=await fetch(`/api/patcher/server/logs/${e}?lines=50`),r=await t.json();console.log("Logs response:",r),r.success&&r.logs?h(r.logs):h(`Error: ${r.error||"Failed to fetch logs"}

Tradeline: ${s.tradeline}
Port: ${s.mainPort}
Process: ${r.process||"unknown"}`)}catch(e){h("Error fetching logs: "+e.message)}finally{m(!1)}}};(0,l.useEffect)(()=>{j&&N.current&&(N.current.scrollTop=N.current.scrollHeight)},[c,j]);let S=s?s.workers&&s.workers.length>0?s.workers:((e,t="offline")=>[{port:parseInt(`310${e}`),name:"Engine",status:t},{port:parseInt(`311${e}`),name:"Discovery",status:t},{port:parseInt(`312${e}`),name:"Scope of Work",status:t},{port:parseInt(`313${e}`),name:"Full Report",status:t},{port:parseInt(`314${e}`),name:"Proposal",status:t}])(s.slotId,"offline"):[],C=async t=>{if(confirm("all"===t?`Reboot ALL workers for ${s?.tradeline||e.name}?`:"main"===t?`Reboot main server for ${s?.tradeline||e.name}?`:`Reboot worker on port ${t}?`)){y(t.toString());try{await a?.(t),setTimeout(()=>y(null),5e3)}catch(e){y(null)}}},_=async e=>{if(s&&confirm({start:`Start all workers for port ${s.mainPort}?`,restart:`Restart all workers for port ${s.mainPort}? This will briefly interrupt service.`,stop:`Stop all workers for port ${s.mainPort}? Service will go offline.`}[e])){v(e);try{await n?.(e,s.mainPort.toString()),setTimeout(()=>{v(null),window.location.reload()},2e3)}catch(e){v(null)}}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed top-14 bottom-0 left-64 right-0 z-30",onClick:r}),(0,t.jsxs)("div",{className:"fixed top-14 bottom-0 left-64 w-[480px] bg-gray-900 border-l border-gray-700 z-40 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.StatusDot,{health:s?.health||e.health,size:"md"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:s?`${s.tradeline} (Slot ${s.slotId})`:e.name})]}),(0,t.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:s?`Port ${s.mainPort} + workers`:`Patcher ${e.patcherPort}`})]}),(0,t.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white text-2xl leading-none",children:"Ã—"})]}),(0,t.jsxs)("div",{className:"flex border-b border-gray-700",children:[(0,t.jsx)("button",{onClick:()=>d("health"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${"health"===o?"text-white bg-gray-700":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:"Health"}),(0,t.jsx)("button",{onClick:()=>d("logs"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${"logs"===o?"text-white bg-gray-700":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:"Logs"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden",children:["health"===o&&(0,t.jsxs)("div",{className:"p-4 space-y-4 h-full overflow-y-auto",children:[(0,t.jsx)("div",{className:`rounded-xl p-4 border ${"healthy"===(s?.health||e.health)?"bg-green-500/10 border-green-500/30":"degraded"===(s?.health||e.health)?"bg-yellow-500/10 border-yellow-500/30":"bg-red-500/10 border-red-500/30"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-400 uppercase tracking-wider",children:"Overall Health"}),(0,t.jsx)("div",{className:`text-2xl font-bold capitalize ${"healthy"===(s?.health||e.health)?"text-green-400":"degraded"===(s?.health||e.health)?"text-yellow-400":"text-red-400"}`,children:s?.health||e.health})]}),(0,t.jsx)("div",{className:`text-5xl ${"healthy"===(s?.health||e.health)?"text-green-400":"degraded"===(s?.health||e.health)?"text-yellow-400":"text-red-400"}`,children:"healthy"===(s?.health||e.health)?"âœ“":"degraded"===(s?.health||e.health)?"âš ":"âœ—"})]})}),s&&(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[(0,t.jsxs)("h4",{className:"font-medium text-white",children:["Workers (",S.length,")"]}),(0,t.jsx)(p.RoleGate,{permission:"canPushToTest",children:(0,t.jsx)("button",{onClick:()=>C("all"),disabled:"all"===u,className:"px-3 py-1 text-xs font-semibold rounded bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500 hover:text-white transition-colors disabled:opacity-50",children:"all"===u?"Rebooting...":"Reboot All"})})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-700",children:S.map(e=>(0,t.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-2.5 h-2.5 rounded-full ${"online"===e.status?"bg-green-500":"error"===e.status?"bg-yellow-500":"bg-red-500"}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-white capitalize",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Port ",e.port]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:`text-xs ${"online"===e.status?"text-green-400":"error"===e.status?"text-yellow-400":"text-red-400"}`,children:"online"===e.status?"Online":"error"===e.status?"Error":"Offline"}),e.lastPing&&(0,t.jsx)("div",{className:"text-xs text-gray-600",children:e.lastPing}),e.errorCount&&e.errorCount>0&&(0,t.jsxs)("div",{className:"text-xs text-red-400",children:[e.errorCount," errors"]})]}),(0,t.jsx)(p.RoleGate,{permission:"canPushToTest",children:(0,t.jsx)("button",{onClick:()=>C(e.port),disabled:u===e.port.toString(),className:"px-2 py-1 text-xs rounded bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors disabled:opacity-50",children:u===e.port.toString()?"...":"Reboot"})})]})]},e.port))})]}),s&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"CPU"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-white mt-1",children:[s.cpu||0,"%"]}),(0,t.jsx)("div",{className:"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full rounded-full ${(s.cpu||0)>80?"bg-red-500":(s.cpu||0)>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${s.cpu||0}%`}})})]}),(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Memory"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-white mt-1",children:[s.memory||0,"%"]}),(0,t.jsx)("div",{className:"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full rounded-full ${(s.memory||0)>80?"bg-red-500":(s.memory||0)>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${s.memory||0}%`}})})]})]}),s&&(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[(0,t.jsx)("button",{onClick:()=>_("start"),disabled:null!==f,className:"py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-500 transition-colors disabled:opacity-50",children:"start"===f?"Starting...":"Start"}),(0,t.jsx)("button",{onClick:()=>_("restart"),disabled:null!==f,className:"py-3 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-500 transition-colors disabled:opacity-50",children:"restart"===f?"Restarting...":"Restart"}),(0,t.jsx)("button",{onClick:()=>_("stop"),disabled:null!==f,className:"py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-500 transition-colors disabled:opacity-50",children:"stop"===f?"Stopping...":"Stop"})]})]}),"logs"===o&&(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-700 bg-gray-800/50",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:["PM2 Logs - nextbid-",s?.mainPort]}),(0,t.jsx)("button",{onClick:k,disabled:x,className:"px-3 py-1.5 text-xs bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors disabled:opacity-50",children:x?"Loading...":"Get Last 50 Lines"})]}),(0,t.jsx)("div",{ref:N,className:"flex-1 overflow-y-auto p-3 font-mono text-xs bg-black/30",children:x?(0,t.jsx)("div",{className:"text-gray-500",children:"Loading logs..."}):c?(0,t.jsx)("pre",{className:"text-gray-300 whitespace-pre-wrap",children:c}):(0,t.jsxs)("div",{className:"text-gray-500 text-center py-8",children:[(0,t.jsx)("p",{children:'Click "Get Last 50 Lines" to fetch PM2 logs'}),(0,t.jsx)("p",{className:"text-gray-600 mt-2 text-xs",children:"Requires PM2 process to be running on server"})]})})]})]})]})]})}let f=["dev-team","frontend-team"],v=[{id:"dev-team",name:"Dev Team",color:"#10B981",memberCount:5},{id:"frontend-team",name:"Frontend",color:"#3B82F6",memberCount:3},{id:"backend-team",name:"Backend",color:"#8B5CF6",memberCount:4},{id:"support-team",name:"Support",color:"#F59E0B",memberCount:2}],j=[{id:"1",name:"Michael",role:"Lead Developer",color:"#3B82F6",teams:["dev-team","frontend-team"]},{id:"2",name:"Sarah",role:"Frontend Dev",color:"#EC4899",teams:["frontend-team"]},{id:"3",name:"John",role:"Backend Dev",color:"#10B981",teams:["backend-team","dev-team"]},{id:"4",name:"Emily",role:"Full Stack",color:"#8B5CF6",teams:["dev-team"]},{id:"5",name:"Alex",role:"Support Lead",color:"#F59E0B",teams:["support-team"]},{id:"6",name:"Chris",role:"DevOps",color:"#06B6D4",teams:["backend-team"]},{id:"7",name:"Taylor",role:"QA Engineer",color:"#EF4444",teams:["dev-team"]},{id:"8",name:"Jordan",role:"UI Designer",color:"#F472B6",teams:["frontend-team"]},{id:"9",name:"Casey",role:"Junior Dev",color:"#84CC16",teams:["dev-team","frontend-team"]}];function w(){let e=(0,i.usePathname)(),s=(0,i.useSearchParams)(),r=e?.startsWith("/calendar"),a=e?.startsWith("/dev-controls"),p=s?.get("mode")||"my",b=s?.get("member"),w=s?.get("team"),{showServers:k,setShowServers:S}=(0,l.useContext)(I),[C,_]=(0,l.useState)(!0),[$,P]=(0,l.useState)([]),[T,D]=(0,l.useState)(null),[M,E]=(0,l.useState)(null),[R,L]=(0,l.useState)(!1);(0,l.useEffect)(()=>{S(!r)},[r]),(0,l.useEffect)(()=>{k||B()},[k]);let O=true,A=O?v:v.filter(e=>f.includes(e.id)),B=()=>{L(!1),D(null),E(null)},F=async e=>{if(T)try{let t=await fetch("/api/servers/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:T.id,slotId:M?.slotId,tradeline:M?.tradeline,target:e})}),s=await t.json();s.success?console.log("Reboot initiated:",s.message):(console.error("Reboot failed:",s.error),alert(`Reboot failed: ${s.error}`))}catch(e){console.error("Reboot request failed:",e),alert("Reboot request failed - check console")}},z=async(e,t)=>{try{let s=`/api/patcher/server/${e}/${t}`,r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"}}),a=await r.json();a.success?console.log(`${e} initiated for port ${t}:`,a.message):(console.error(`${e} failed:`,a.error),alert(`${e} failed: ${a.error}`))}catch(t){console.error(`${e} request failed:`,t),alert(`${e} request failed - check console`)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("aside",{className:"w-64 bg-gray-900/50 border-r border-gray-700 flex flex-col h-full overflow-hidden",children:[k&&(0,t.jsx)("div",{className:"flex-shrink-0 px-2 py-4 border-b border-gray-700",children:(0,t.jsx)(g.default,{onSelectProject:e=>{D(e),E(null),L(!0)},onSelectSlot:(e,t)=>{D(e),E(t),L(!0)},selectedProjectId:T?.id,selectedSlotId:M?.slotId})}),k&&(0,t.jsxs)("div",{className:"px-2 py-2 space-y-1",children:[(0,t.jsxs)(n.default,{href:"/credentials",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${"/credentials"===e?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,t.jsx)("span",{children:"ðŸ“Š"}),(0,t.jsx)("span",{children:"Overview & Alerts"})]}),(0,t.jsxs)(n.default,{href:"/credentials/federal",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e?.startsWith("/credentials/")?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,t.jsx)("span",{children:"ðŸ”‘"}),(0,t.jsx)("span",{children:"Credentials"})]}),(0,t.jsxs)(n.default,{href:"/session-logs",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${"/session-logs"===e?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,t.jsx)("span",{children:"ðŸŽ¯"}),(0,t.jsx)("span",{children:"Session Logs"})]}),(0,t.jsxs)(n.default,{href:"/project-management",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e?.startsWith("/project-management")?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,t.jsx)("span",{children:"ðŸ“"}),(0,t.jsx)("span",{children:"Projects"})]}),(0,t.jsxs)(n.default,{href:"/the-forge",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e?.startsWith("/the-forge")?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,t.jsx)("span",{children:"ðŸ”¥"}),(0,t.jsx)("span",{children:"The Forge"})]}),(0,t.jsxs)(n.default,{href:"/ai-team",className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e?.startsWith("/ai-team")?"bg-green-500/20 text-green-400 border border-green-500/30":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[(0,t.jsx)("span",{children:"ðŸ¤–"}),(0,t.jsx)("span",{children:"AI Team"})]})]}),r&&(0,t.jsxs)("div",{className:"border-t border-gray-700 flex-1 overflow-y-auto min-h-0",children:[(0,t.jsxs)("div",{className:"bg-gray-800/50 border-b border-gray-700",children:[(0,t.jsxs)("button",{onClick:()=>_(!C),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800/50 transition-colors",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Today's Overview"}),C?(0,t.jsx)(m.ChevronDown,{className:"w-4 h-4 text-gray-500"}):(0,t.jsx)(u.ChevronRight,{className:"w-4 h-4 text-gray-500"})]}),C&&(0,t.jsx)("div",{className:"px-4 pb-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)("div",{className:"bg-blue-500/10 rounded-lg p-3 border-l-4 border-blue-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:"0"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Events"})]}),(0,t.jsx)(h.CalendarCheck,{className:"w-5 h-5 text-blue-500"})]})}),(0,t.jsx)("div",{className:"bg-purple-500/10 rounded-lg p-3 border-l-4 border-purple-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-400",children:"0"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Meetings"})]}),(0,t.jsx)(d.Users,{className:"w-5 h-5 text-purple-500"})]})}),(0,t.jsx)("div",{className:"bg-orange-500/10 rounded-lg p-3 border-l-4 border-orange-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-orange-400",children:"0"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Tasks"})]}),(0,t.jsx)(x.AlertCircle,{className:"w-5 h-5 text-orange-500"})]})}),(0,t.jsx)("div",{className:"bg-green-500/10 rounded-lg p-3 border-l-4 border-green-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-green-400",children:"0"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Time Off"})]}),(0,t.jsx)(c.Calendar,{className:"w-5 h-5 text-green-500"})]})})]})})]}),(0,t.jsx)("div",{className:"border-b border-gray-700",children:(0,t.jsxs)(n.default,{href:"/calendar?mode=my",className:`w-full flex items-center justify-between px-4 py-3 transition-all ${"my"===p?"bg-purple-500/10 border-l-4 border-purple-500":"hover:bg-gray-800"}`,children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${"my"===p?"bg-purple-500":"bg-gray-700"}`,children:(0,t.jsx)(o.User,{className:`w-5 h-5 ${"my"===p?"text-white":"text-gray-400"}`})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:`font-semibold ${"my"===p?"text-purple-400":"text-gray-300"}`,children:"My Calendar"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Personal tasks & meetings"})]})]}),"my"===p&&(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-500"})]})}),(0,t.jsx)("div",{className:"border-b border-gray-700",children:(0,t.jsxs)(n.default,{href:"/calendar?mode=team",className:`w-full flex items-center justify-between px-4 py-3 transition-all ${"team"===p&&!w&&!b?"bg-blue-500/10 border-l-4 border-blue-500":"hover:bg-gray-800"}`,children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${"team"===p?"bg-blue-500":"bg-gray-700"}`,children:(0,t.jsx)(d.Users,{className:`w-5 h-5 ${"team"===p?"text-white":"text-gray-400"}`})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:`font-semibold ${"team"===p?"text-blue-400":"text-gray-300"}`,children:"Team Calendars"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:O?"All team schedules":"Your team schedules"})]})]}),"team"===p&&!w&&!b&&(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"})]})}),"team"===p&&(0,t.jsxs)("div",{className:"bg-blue-500/5",children:[(0,t.jsxs)("div",{className:"px-4 py-3",children:[(0,t.jsxs)("h4",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:["Teams (",A.length,")"]}),(0,t.jsx)("div",{className:"space-y-1",children:A.map(e=>{var s;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.id,void P(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:`w-full flex items-center justify-between p-2 rounded-lg transition-colors ${w===e.id?"bg-blue-600/20 border-l-2 border-blue-500":"bg-gray-800/50 hover:bg-gray-800"}`,children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:e.color},children:e.name.charAt(0)}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-white",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.memberCount," members"]})]})]}),$.includes(e.id)?(0,t.jsx)(m.ChevronDown,{className:"w-4 h-4 text-gray-500"}):(0,t.jsx)(u.ChevronRight,{className:"w-4 h-4 text-gray-500"})]}),$.includes(e.id)&&(0,t.jsx)("div",{className:"ml-4 mt-1 space-y-1",children:(s=e.id,O?s?j.filter(e=>e.teams.includes(s)):j:j.filter(e=>e.teams.some(e=>f.includes(e))&&(!s||e.teams.includes(s)))).map(s=>(0,t.jsxs)(n.default,{href:`/calendar?mode=team&team=${e.id}&member=${s.id}`,className:`flex items-center space-x-2 p-2 rounded-lg transition-colors ${b===s.id?"bg-blue-600/30":"hover:bg-gray-800/50"}`,children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:s.color},children:s.name.charAt(0)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-white truncate",children:s.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:s.role})]})]},s.id))})]},e.id)})})]}),O&&(0,t.jsxs)("div",{className:"px-4 py-3 border-t border-gray-700/50",children:[(0,t.jsxs)("h4",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:["All Individuals (",j.length,")"]}),(0,t.jsx)("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:j.map(e=>(0,t.jsxs)(n.default,{href:`/calendar?mode=team&member=${e.id}`,className:`flex items-center space-x-3 p-2 rounded-lg transition-colors ${b===e.id&&!w?"bg-blue-600/30":"bg-gray-800/50 hover:bg-gray-800"}`,children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:e.color},children:e.name.charAt(0)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-white truncate",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.role})]})]},e.id))})]})]})]}),a&&(0,t.jsxs)("div",{className:"border-t border-gray-700 p-4 flex-shrink-0 overflow-y-auto",children:[(0,t.jsx)("h3",{className:"text-xs uppercase tracking-wider text-gray-500 mb-3 px-3",children:"Studio Ops"}),(0,t.jsxs)("nav",{className:"space-y-1",children:[(0,t.jsx)(N,{href:"/dev-controls",icon:"ðŸ ",active:"/dev-controls"===e,children:"Console Home"}),(0,t.jsx)(N,{href:"/dev-controls/releases",icon:"ðŸš€",active:"/dev-controls/releases"===e,children:"Push / Pull"}),(0,t.jsx)(N,{href:"/dev-controls/analytics",icon:"ðŸ“Š",active:e?.startsWith("/dev-controls/analytics"),children:"Analytics"}),(0,t.jsx)(N,{href:"/dev-controls/security",icon:"ðŸ”’",active:e?.startsWith("/dev-controls/security"),children:"Security"})]}),(0,t.jsx)("h3",{className:"text-xs uppercase tracking-wider text-gray-500 mt-4 mb-3 px-3",children:"Tools"}),(0,t.jsxs)("nav",{className:"space-y-1",children:[(0,t.jsx)(N,{href:"/dev-controls/deploy",icon:"ðŸš€",active:"/dev-controls/deploy"===e,children:"Deploy"}),(0,t.jsx)(N,{href:"/dev-controls/git",icon:"ðŸ“¦",active:"/dev-controls/git"===e,children:"Git"}),(0,t.jsx)(N,{href:"/dev-controls/ssh",icon:"ðŸ’»",active:"/dev-controls/ssh"===e,children:"Terminal"}),(0,t.jsx)(N,{href:"/dev-controls/logs",icon:"ðŸ“‹",active:"/dev-controls/logs"===e,children:"Logs"})]})]})]}),R&&T&&(0,t.jsx)(y,{project:T,slot:M||void 0,onClose:B,onReboot:F,onServerAction:z})]})}function N({href:e,icon:s,count:r,description:a,active:l,children:i}){return(0,t.jsxs)(n.default,{href:e,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${l?"bg-blue-500/20 text-blue-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:a,children:[(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:s}}),(0,t.jsx)("span",{className:"flex-1 truncate",children:i}),void 0!==r&&(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${l?"bg-blue-500 text-white":"bg-gray-700 text-gray-400"}`,children:r})]})}let k=[{name:"Claude",role:"Lead Developer",portOffset:0},{name:"Chad",role:"Transcription & Capture",portOffset:1},{name:"Jen",role:"Scrubbing & Signal Extraction",portOffset:2},{name:"Susan",role:"Classification & Sorting",portOffset:3},{name:"Clair",role:"Conversion & Documentation",portOffset:4},{name:"Mike",role:"QA Tester",portOffset:5},{name:"Tiffany",role:"QA Tester",portOffset:6},{name:"Ryan",role:"Roadmap & Prioritization",portOffset:7}],S=[{id:"dev1",label:"Development Team 1",basePort:5410,portRange:"5410-5417"},{id:"dev2",label:"Development Team 2",basePort:5420,portRange:"5420-5427"},{id:"dev3",label:"Development Team 3",basePort:5430,portRange:"5430-5437"}],C=(0,l.createContext)({selectedTeam:S[0],setSelectedTeam:()=>{},selectTeamById:()=>{},connectionStatus:"disconnected",teamStatuses:[],lockedUserId:null,sessionId:null,connect:async()=>{},disconnect:async()=>{}});function _({children:e}){let[s,r]=(0,l.useState)(S[0]),[a,n]=(0,l.useState)("disconnected"),[i,o]=(0,l.useState)([]),[d,c]=(0,l.useState)(null),[h,x]=(0,l.useState)(null),m=(0,l.useCallback)(async e=>{if("disconnected"!==a)return;n("connecting"),c(e);let t=k.map(e=>({name:e.name,port:s.basePort+e.portOffset,status:"starting"}));o(t);try{let r=await fetch("/api/dev-session/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({devSlot:s.id,basePort:s.basePort,userId:e})}),a=await r.json();if(a.success)x(a.sessionId),o(a.teamStatuses||t.map(e=>({...e,status:"online"}))),n("connected");else throw Error(a.error||"Failed to connect")}catch(e){console.error("Failed to connect dev session:",e),n("disconnected"),c(null),o([])}},[a,s]),u=(0,l.useCallback)(async()=>{if("connected"===a){try{await fetch("/api/dev-session/disconnect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:h,devSlot:s.id})})}catch(e){console.error("Error disconnecting:",e)}n("disconnected"),c(null),x(null),o([])}},[a,h,s]);return(0,t.jsx)(C.Provider,{value:{selectedTeam:s,setSelectedTeam:r,selectTeamById:e=>{if("connected"===a)return;let t=S.find(t=>t.id===e);t&&r(t)},connectionStatus:a,teamStatuses:i,lockedUserId:d,sessionId:h,connect:m,disconnect:u},children:e})}function $(){let e=(0,l.useContext)(C);if(!e)throw Error("useDeveloper must be used within a DeveloperProvider");return e}e.s(["DEVELOPER_TEAMS",0,S,"DeveloperProvider",()=>_,"useDeveloper",()=>$],15568);var P=e.i(11565);let T=(0,l.createContext)(()=>{}),D=(0,l.createContext)(()=>{}),I=(0,l.createContext)({showServers:!0,setShowServers:()=>{},toggleServers:()=>{}});function M({children:e}){let n=(0,i.usePathname)(),o=n?.startsWith("/studio"),[d,c]=(0,l.useState)({title:"Dashboard",description:"Your daily overview"}),[h,x]=(0,l.useState)(null),[m,u]=(0,l.useState)(!0);return(0,t.jsxs)("html",{lang:"en",className:"dark",children:[(0,t.jsxs)("head",{children:[(0,t.jsx)("title",{children:"Kodiack Dashboard"}),(0,t.jsx)("meta",{name:"description",content:"Kodiack Studios Control Center"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,t.jsx)("link",{rel:"apple-touch-icon",href:"/favicon.ico"})]}),(0,t.jsx)("body",{className:`${s.default.variable} ${r.default.variable} antialiased`,children:(0,t.jsx)(b.UserProvider,{children:(0,t.jsx)(_,{children:(0,t.jsx)(P.ClientProvider,{children:(0,t.jsx)(T.Provider,{value:c,children:(0,t.jsx)(D.Provider,{value:x,children:(0,t.jsx)(I.Provider,{value:{showServers:m,setShowServers:u,toggleServers:()=>u(e=>!e)},children:(0,t.jsxs)("div",{className:"h-screen flex flex-col overflow-hidden",children:[(0,t.jsx)(a.default,{pageTitle:d,pageActions:h}),(0,t.jsxs)("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[!o&&(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{className:"w-64 bg-gray-900"}),children:(0,t.jsx)(w,{})}),(0,t.jsx)("main",{className:`flex-1 bg-gray-900 ${o?"overflow-hidden":"overflow-auto px-8 py-4"}`,children:e})]})]})})})})})})})})]})}}]);