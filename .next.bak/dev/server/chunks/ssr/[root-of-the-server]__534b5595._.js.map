{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 9, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/geist_a71539c9.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"geist_a71539c9-module__T19VSG__className\",\n  \"variable\": \"geist_a71539c9-module__T19VSG__variable\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/geist_a71539c9.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22layout.tsx%22,%22import%22:%22Geist%22,%22arguments%22:[{%22variable%22:%22--font-geist-sans%22,%22subsets%22:[%22latin%22]}],%22variableName%22:%22geistSans%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Geist', 'Geist Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,gKAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,gKAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,gKAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0]}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/geist_mono_8d43a2aa.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"geist_mono_8d43a2aa-module__8Li5zG__className\",\n  \"variable\": \"geist_mono_8d43a2aa-module__8Li5zG__variable\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/geist_mono_8d43a2aa.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22layout.tsx%22,%22import%22:%22Geist_Mono%22,%22arguments%22:[{%22variable%22:%22--font-geist-mono%22,%22subsets%22:[%22latin%22]}],%22variableName%22:%22geistMono%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Geist Mono', 'Geist Mono Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,qKAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,qKAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,qKAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0]}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/lib/supabase.ts"],"sourcesContent":["/**\r\n * Supabase Client\r\n *\r\n * Used for:\r\n * - Staff authentication\r\n * - Time tracking\r\n * - Tickets\r\n * - Task management\r\n * - Audit logs\r\n */\r\n\r\nimport { createClient, SupabaseClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || '';\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';\r\n\r\n// Only create client if we have valid credentials\r\nlet supabaseClient: SupabaseClient | null = null;\r\n\r\nif (supabaseUrl && supabaseAnonKey) {\r\n  supabaseClient = createClient(supabaseUrl, supabaseAnonKey);\r\n}\r\n\r\n// Export a client that gracefully handles missing env vars\r\nexport const supabase = supabaseClient || {\r\n  auth: {\r\n    getUser: async () => ({ data: { user: null }, error: null }),\r\n    signOut: async () => ({ error: null }),\r\n    signInWithPassword: async () => ({ data: { user: null, session: null }, error: { message: 'Supabase not configured' } }),\r\n    onAuthStateChange: () => ({ data: { subscription: { unsubscribe: () => {} } } }),\r\n  },\r\n  from: () => ({\r\n    select: () => ({ data: null, error: { message: 'Supabase not configured' } }),\r\n    insert: () => ({ data: null, error: { message: 'Supabase not configured' } }),\r\n    update: () => ({ data: null, error: { message: 'Supabase not configured' } }),\r\n    delete: () => ({ data: null, error: { message: 'Supabase not configured' } }),\r\n    eq: () => ({ data: null, error: { message: 'Supabase not configured' } }),\r\n  }),\r\n} as unknown as SupabaseClient;\r\n\r\n// Server-side client with service key (for API routes)\r\nexport function createServerClient(): SupabaseClient | null {\r\n  const serviceKey = process.env.SUPABASE_SERVICE_KEY;\r\n  if (!supabaseUrl || !serviceKey) {\r\n    console.warn('Supabase service key not configured');\r\n    return null;\r\n  }\r\n  return createClient(supabaseUrl, serviceKey);\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;CASC;;;;;;AAED;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAErE,kDAAkD;AAClD,IAAI,iBAAwC;AAE5C,wCAAoC;IAClC,iBAAiB,IAAA,iOAAY,EAAC,aAAa;AAC7C;AAGO,MAAM,WAAW,kBAAkB;IACxC,MAAM;QACJ,SAAS,UAAY,CAAC;gBAAE,MAAM;oBAAE,MAAM;gBAAK;gBAAG,OAAO;YAAK,CAAC;QAC3D,SAAS,UAAY,CAAC;gBAAE,OAAO;YAAK,CAAC;QACrC,oBAAoB,UAAY,CAAC;gBAAE,MAAM;oBAAE,MAAM;oBAAM,SAAS;gBAAK;gBAAG,OAAO;oBAAE,SAAS;gBAA0B;YAAE,CAAC;QACvH,mBAAmB,IAAM,CAAC;gBAAE,MAAM;oBAAE,cAAc;wBAAE,aAAa,KAAO;oBAAE;gBAAE;YAAE,CAAC;IACjF;IACA,MAAM,IAAM,CAAC;YACX,QAAQ,IAAM,CAAC;oBAAE,MAAM;oBAAM,OAAO;wBAAE,SAAS;oBAA0B;gBAAE,CAAC;YAC5E,QAAQ,IAAM,CAAC;oBAAE,MAAM;oBAAM,OAAO;wBAAE,SAAS;oBAA0B;gBAAE,CAAC;YAC5E,QAAQ,IAAM,CAAC;oBAAE,MAAM;oBAAM,OAAO;wBAAE,SAAS;oBAA0B;gBAAE,CAAC;YAC5E,QAAQ,IAAM,CAAC;oBAAE,MAAM;oBAAM,OAAO;wBAAE,SAAS;oBAA0B;gBAAE,CAAC;YAC5E,IAAI,IAAM,CAAC;oBAAE,MAAM;oBAAM,OAAO;wBAAE,SAAS;oBAA0B;gBAAE,CAAC;QAC1E,CAAC;AACH;AAGO,SAAS;IACd,MAAM,aAAa,QAAQ,GAAG,CAAC,oBAAoB;IACnD,IAAI,CAAC,eAAe,CAAC,YAAY;QAC/B,QAAQ,IAAI,CAAC;QACb,OAAO;IACT;IACA,OAAO,IAAA,iOAAY,EAAC,aAAa;AACnC"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/components/TimeClockDropdown.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport { Clock } from 'lucide-react'\r\nimport { supabase } from '../lib/supabase'\r\n\r\ninterface TimePunch {\r\n  id: string\r\n  user_id: string\r\n  clock_in: string\r\n  clock_out: string | null\r\n  total_hours: number | null\r\n  status: string\r\n}\r\n\r\ninterface BreakPeriod {\r\n  id: string\r\n  time_punch_id: string\r\n  break_start: string\r\n  break_end: string | null\r\n  break_type: 'break' | 'lunch'\r\n}\r\n\r\nexport default function TimeClockDropdown() {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [currentUser, setCurrentUser] = useState<any>(null)\r\n  const [clockState, setClockState] = useState<'clocked_out' | 'working' | 'on_break' | 'on_lunch'>('clocked_out')\r\n  const [currentPunch, setCurrentPunch] = useState<TimePunch | null>(null)\r\n  const [currentBreak, setCurrentBreak] = useState<BreakPeriod | null>(null)\r\n  const [duration, setDuration] = useState(0)\r\n  const [needsBreak, setNeedsBreak] = useState(false)\r\n  const [needsLunch, setNeedsLunch] = useState(false)\r\n  const [breakOverdue, setBreakOverdue] = useState(false)\r\n  const dropdownRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    loadUser()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      loadClockStatus()\r\n      const interval = setInterval(loadClockStatus, 30000) // Check every 30 seconds\r\n      return () => clearInterval(interval)\r\n    }\r\n  }, [currentUser])\r\n\r\n  useEffect(() => {\r\n    // Update duration every second when clocked in\r\n    if (currentPunch && clockState !== 'clocked_out') {\r\n      const interval = setInterval(() => {\r\n        updateDuration()\r\n      }, 1000)\r\n      return () => clearInterval(interval)\r\n    }\r\n  }, [currentPunch, clockState])\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleClickOutside)\r\n    return () => document.removeEventListener('mousedown', handleClickOutside)\r\n  }, [])\r\n\r\n  async function loadUser() {\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (user) {\r\n      // Get user details from dev_users table\r\n      const { data: devUser } = await supabase\r\n        .from('dev_users')\r\n        .select('*')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n      setCurrentUser(devUser || { id: user.id, email: user.email })\r\n    }\r\n  }\r\n\r\n  async function loadClockStatus() {\r\n    if (!currentUser) return\r\n\r\n    const today = new Date().toISOString().split('T')[0]\r\n\r\n    // Get today's active punch from dev_time_punches\r\n    const { data: punches } = await supabase\r\n      .from('dev_time_punches')\r\n      .select('*')\r\n      .eq('user_id', currentUser.id)\r\n      .gte('clock_in', `${today}T00:00:00`)\r\n      .is('clock_out', null)\r\n      .order('clock_in', { ascending: false })\r\n      .limit(1)\r\n\r\n    if (punches && punches.length > 0) {\r\n      const punch = punches[0] as TimePunch\r\n      setCurrentPunch(punch)\r\n\r\n      // Check for active break from dev_break_periods\r\n      const { data: breaks } = await supabase\r\n        .from('dev_break_periods')\r\n        .select('*')\r\n        .eq('time_punch_id', punch.id)\r\n        .is('break_end', null)\r\n        .order('break_start', { ascending: false })\r\n        .limit(1)\r\n\r\n      if (breaks && breaks.length > 0) {\r\n        const breakPeriod = breaks[0] as BreakPeriod\r\n        setCurrentBreak(breakPeriod)\r\n        setClockState(breakPeriod.break_type === 'lunch' ? 'on_lunch' : 'on_break')\r\n      } else {\r\n        setCurrentBreak(null)\r\n        setClockState('working')\r\n        checkBreakAlerts(punch)\r\n      }\r\n\r\n      updateDuration()\r\n    } else {\r\n      setCurrentPunch(null)\r\n      setCurrentBreak(null)\r\n      setClockState('clocked_out')\r\n      setNeedsBreak(false)\r\n      setNeedsLunch(false)\r\n      setBreakOverdue(false)\r\n    }\r\n  }\r\n\r\n  function checkBreakAlerts(punch: TimePunch) {\r\n    const hoursWorked = (new Date().getTime() - new Date(punch.clock_in).getTime()) / (1000 * 60 * 60)\r\n\r\n    // Check if breaks were taken\r\n    supabase\r\n      .from('dev_break_periods')\r\n      .select('*')\r\n      .eq('time_punch_id', punch.id)\r\n      .then(({ data: breaks }) => {\r\n        const hadBreak = breaks && breaks.some((b: BreakPeriod) => b.break_type === 'break')\r\n        const hadLunch = breaks && breaks.some((b: BreakPeriod) => b.break_type === 'lunch')\r\n\r\n        // Set alerts - 3 hours for break, 5.5 hours for lunch\r\n        setNeedsBreak(!hadBreak && hoursWorked >= 3)\r\n        setNeedsLunch(!hadLunch && hoursWorked >= 5.5)\r\n        setBreakOverdue(!hadBreak && hoursWorked >= 5.5) // Red at 5.5 hours if no break\r\n      })\r\n  }\r\n\r\n  function updateDuration() {\r\n    if (!currentPunch) return\r\n\r\n    if (currentBreak) {\r\n      const breakDuration = (new Date().getTime() - new Date(currentBreak.break_start).getTime()) / 1000\r\n      setDuration(breakDuration)\r\n    } else {\r\n      const workDuration = (new Date().getTime() - new Date(currentPunch.clock_in).getTime()) / 1000\r\n      setDuration(workDuration)\r\n    }\r\n  }\r\n\r\n  function formatDuration(seconds: number) {\r\n    const hours = Math.floor(seconds / 3600)\r\n    const minutes = Math.floor((seconds % 3600) / 60)\r\n    return `${hours}h ${minutes}m`\r\n  }\r\n\r\n  async function handleStartWork() {\r\n    if (!currentUser) return\r\n\r\n    const { data, error } = await supabase\r\n      .from('dev_time_punches')\r\n      .insert([{\r\n        user_id: currentUser.id,\r\n        clock_in: new Date().toISOString(),\r\n        status: 'active'\r\n      }])\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error clocking in:', error)\r\n      alert('Error starting work')\r\n      return\r\n    }\r\n\r\n    await loadClockStatus()\r\n    setIsOpen(false)\r\n  }\r\n\r\n  async function handleStartBreak(breakType: 'break' | 'lunch' = 'break') {\r\n    if (!currentPunch) return\r\n\r\n    const { data, error } = await supabase\r\n      .from('dev_break_periods')\r\n      .insert([{\r\n        time_punch_id: currentPunch.id,\r\n        break_start: new Date().toISOString(),\r\n        break_type: breakType\r\n      }])\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error starting break:', error)\r\n      alert('Error starting break: ' + error.message)\r\n      return\r\n    }\r\n\r\n    await loadClockStatus()\r\n    setIsOpen(false)\r\n  }\r\n\r\n  async function handleEndBreak() {\r\n    if (!currentBreak) return\r\n\r\n    const { error } = await supabase\r\n      .from('dev_break_periods')\r\n      .update({ break_end: new Date().toISOString() })\r\n      .eq('id', currentBreak.id)\r\n\r\n    if (error) {\r\n      console.error('Error ending break:', error)\r\n      alert('Error ending break')\r\n      return\r\n    }\r\n\r\n    await loadClockStatus()\r\n    setIsOpen(false)\r\n  }\r\n\r\n  async function handleEndWork() {\r\n    if (!currentPunch) return\r\n\r\n    // End any active break first\r\n    if (currentBreak) {\r\n      await supabase\r\n        .from('dev_break_periods')\r\n        .update({ break_end: new Date().toISOString() })\r\n        .eq('id', currentBreak.id)\r\n    }\r\n\r\n    const clockOut = new Date()\r\n    const clockIn = new Date(currentPunch.clock_in)\r\n\r\n    // Get all break periods for this punch\r\n    const { data: breaks } = await supabase\r\n      .from('dev_break_periods')\r\n      .select('*')\r\n      .eq('time_punch_id', currentPunch.id)\r\n\r\n    // Calculate total lunch time (unpaid - subtract from hours)\r\n    let totalLunchMinutes = 0\r\n    if (breaks) {\r\n      breaks.forEach((b: BreakPeriod) => {\r\n        if (b.break_type === 'lunch' && b.break_start && b.break_end) {\r\n          const lunchStart = new Date(b.break_start)\r\n          const lunchEnd = new Date(b.break_end)\r\n          totalLunchMinutes += (lunchEnd.getTime() - lunchStart.getTime()) / (1000 * 60)\r\n        }\r\n      })\r\n    }\r\n\r\n    // Calculate total hours = (clock_out - clock_in) - lunch_time\r\n    const totalMinutes = (clockOut.getTime() - clockIn.getTime()) / (1000 * 60)\r\n    const workedMinutes = totalMinutes - totalLunchMinutes\r\n    const totalHours = (workedMinutes / 60).toFixed(2)\r\n\r\n    const { error } = await supabase\r\n      .from('dev_time_punches')\r\n      .update({\r\n        clock_out: clockOut.toISOString(),\r\n        total_hours: parseFloat(totalHours),\r\n        status: 'completed'\r\n      })\r\n      .eq('id', currentPunch.id)\r\n\r\n    if (error) {\r\n      console.error('Error clocking out:', error)\r\n      alert('Error ending work')\r\n      return\r\n    }\r\n\r\n    await loadClockStatus()\r\n    setIsOpen(false)\r\n  }\r\n\r\n  // Determine icon color and animation\r\n  function getIconClasses() {\r\n    const baseClasses = \"w-5 h-5 transition-colors\"\r\n\r\n    if (breakOverdue) {\r\n      return `${baseClasses} text-red-400 animate-pulse`\r\n    }\r\n    if (needsBreak || needsLunch) {\r\n      return `${baseClasses} text-orange-400 animate-pulse`\r\n    }\r\n    if (clockState === 'on_break' || clockState === 'on_lunch') {\r\n      return `${baseClasses} text-sky-400`\r\n    }\r\n    if (clockState === 'working') {\r\n      return `${baseClasses} text-emerald-400`\r\n    }\r\n    return `${baseClasses} text-gray-400`\r\n  }\r\n\r\n  function getButtonClasses() {\r\n    const baseClasses = \"w-10 h-10 rounded-xl flex items-center justify-center transition-all\"\r\n\r\n    if (breakOverdue) {\r\n      return `${baseClasses} bg-red-500/20 hover:bg-red-500/30 border border-red-500/50`\r\n    }\r\n    if (needsBreak || needsLunch) {\r\n      return `${baseClasses} bg-orange-500/20 hover:bg-orange-500/30 border border-orange-500/50`\r\n    }\r\n    if (clockState === 'on_break' || clockState === 'on_lunch') {\r\n      return `${baseClasses} bg-sky-500/20 hover:bg-sky-500/30 border border-sky-500/50`\r\n    }\r\n    if (clockState === 'working') {\r\n      return `${baseClasses} bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-500/50`\r\n    }\r\n    return `${baseClasses} bg-gray-700 hover:bg-gray-600 border border-gray-600`\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className={getButtonClasses()}\r\n        title={\r\n          clockState === 'clocked_out'\r\n            ? 'Time Clock - Not clocked in'\r\n            : clockState === 'working'\r\n            ? `Working - ${formatDuration(duration)}${needsBreak ? ' - Break time!' : ''}${needsLunch ? ' - Lunch time!' : ''}${breakOverdue ? ' - OVERDUE!' : ''}`\r\n            : clockState === 'on_break'\r\n            ? `On Break - ${formatDuration(duration)}`\r\n            : `On Lunch - ${formatDuration(duration)}`\r\n        }\r\n      >\r\n        <Clock className={getIconClasses()} />\r\n\r\n        {/* Notification dot for alerts */}\r\n        {(needsBreak || needsLunch || breakOverdue) && (\r\n          <span className=\"absolute top-1 right-1 w-2 h-2 bg-orange-500 rounded-full animate-pulse\"></span>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-2 w-72 bg-gray-800 rounded-xl shadow-xl border border-gray-700 overflow-hidden z-50\">\r\n          {clockState === 'clocked_out' && (\r\n            <div className=\"p-4\">\r\n              <div className=\"text-sm text-gray-400 mb-3 text-center\">\r\n                Not clocked in\r\n              </div>\r\n              <button\r\n                onClick={handleStartWork}\r\n                className=\"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-2.5 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2\"\r\n              >\r\n                <Clock className=\"w-4 h-4\" />\r\n                <span>Start Work</span>\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {clockState === 'working' && (\r\n            <div className=\"p-4\">\r\n              <div className=\"mb-3 pb-3 border-b border-gray-700\">\r\n                <div className=\"flex items-center justify-between mb-1\">\r\n                  <span className=\"text-sm font-medium text-gray-300\">Working</span>\r\n                  <span className=\"text-xs px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded-full border border-emerald-500/50\">Active</span>\r\n                </div>\r\n                <div className=\"text-2xl font-bold text-white\">\r\n                  {formatDuration(duration)}\r\n                </div>\r\n                <div className=\"text-xs text-gray-500 mt-1\">\r\n                  Started {currentPunch && new Date(currentPunch.clock_in).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Break alerts */}\r\n              {(needsBreak || needsLunch || breakOverdue) && (\r\n                <div className={`mb-3 p-2 rounded-lg text-xs ${breakOverdue ? 'bg-red-500/20 border border-red-500/50 text-red-300' : 'bg-orange-500/20 border border-orange-500/50 text-orange-300'}`}>\r\n                  {breakOverdue && 'üî¥ Break overdue! (5.5+ hours)'}\r\n                  {!breakOverdue && needsLunch && 'üçΩÔ∏è Lunch break recommended'}\r\n                  {!breakOverdue && needsBreak && !needsLunch && '‚òï Break time approaching'}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-2\">\r\n                <button\r\n                  onClick={() => handleStartBreak('break')}\r\n                  className=\"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg font-medium transition-colors\"\r\n                >\r\n                  ‚òï Start Break\r\n                </button>\r\n                <button\r\n                  onClick={() => handleStartBreak('lunch')}\r\n                  className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium transition-colors\"\r\n                >\r\n                  üçΩÔ∏è Start Lunch\r\n                </button>\r\n                <button\r\n                  onClick={handleEndWork}\r\n                  className=\"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors\"\r\n                >\r\n                  üèÅ End Work\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {(clockState === 'on_break' || clockState === 'on_lunch') && (\r\n            <div className=\"p-4\">\r\n              <div className=\"mb-3 pb-3 border-b border-gray-700\">\r\n                <div className=\"flex items-center justify-between mb-1\">\r\n                  <span className=\"text-sm font-medium text-gray-300\">\r\n                    {clockState === 'on_lunch' ? 'üçΩÔ∏è On Lunch' : '‚òï On Break'}\r\n                  </span>\r\n                  <span className=\"text-xs px-2 py-1 bg-sky-500/20 text-sky-400 rounded-full border border-sky-500/50\">Break</span>\r\n                </div>\r\n                <div className=\"text-2xl font-bold text-white\">\r\n                  {formatDuration(duration)}\r\n                </div>\r\n                <div className=\"text-xs text-gray-500 mt-1\">\r\n                  Started {currentBreak && new Date(currentBreak.break_start).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleEndBreak}\r\n                className=\"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-2.5 px-4 rounded-lg font-medium transition-colors\"\r\n              >\r\n                ‚úÖ End Break\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/components/SettingsDropdown.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { Settings } from 'lucide-react'\r\n\r\ninterface SettingsDropdownProps {\r\n  user?: any\r\n}\r\n\r\nexport default function SettingsDropdown({ user }: SettingsDropdownProps) {\r\n  const router = useRouter()\r\n  const [showMenu, setShowMenu] = useState(false)\r\n  const dropdownRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Dev Command Center settings structure\r\n  const settingsStructure = {\r\n    servers: {\r\n      title: 'üñ•Ô∏è SERVERS',\r\n      items: [\r\n        { label: 'Engine Slots', path: '/settings/engine-slots', description: 'Assign tradelines to slots', permission: 'canManageServers' },\r\n        { label: 'Patcher Config', path: '/settings/patcher', description: 'API endpoints & deployment', permission: 'canManageServers' },\r\n        { label: 'Environment Variables', path: '/settings/env-vars', description: 'Server .env configuration', permission: 'canManageServers' },\r\n      ]\r\n    },\r\n    credentials: {\r\n      title: 'üîë CREDENTIALS',\r\n      items: [\r\n        { label: 'API Keys', path: '/settings/api-keys', description: 'Claude, OpenAI, Supabase', permission: 'canManageCredentials' },\r\n        { label: 'Source Logins', path: '/settings/source-logins', description: 'SAM.gov, PlanetBids, etc.', permission: 'canManageCredentials' },\r\n        { label: 'SSH Keys', path: '/settings/ssh-keys', description: 'Server access keys', permission: 'canManageCredentials' },\r\n      ]\r\n    },\r\n    team: {\r\n      title: 'üë• TEAM',\r\n      items: [\r\n        { label: 'Team Members', path: '/team/members', description: 'Staff accounts & access', permission: 'canManageTeam' },\r\n        { label: 'Roles & Permissions', path: '/team/roles', description: 'Access control settings', permission: 'canManageTeam' },\r\n        { label: 'Timesheets', path: '/settings/timesheets', description: 'Time tracking settings', permission: 'canManageTeam' },\r\n      ]\r\n    },\r\n    alerts: {\r\n      title: 'üîî ALERTS',\r\n      items: [\r\n        { label: 'Alert Rules', path: '/settings/alert-rules', description: 'When to notify', permission: 'canManageAlerts' },\r\n        { label: 'Notification Channels', path: '/settings/notifications', description: 'Slack, email, SMS', permission: 'canManageAlerts' },\r\n        { label: 'Health Thresholds', path: '/settings/health-thresholds', description: 'Server health limits', permission: 'canManageAlerts' },\r\n      ]\r\n    },\r\n    system: {\r\n      title: '‚öôÔ∏è SYSTEM',\r\n      items: [\r\n        { label: 'Dashboard Settings', path: '/settings/dashboard', description: 'UI preferences', permission: 'canManageSystem' },\r\n        { label: 'Audit Logs', path: '/settings/audit-logs', description: 'System activity history', permission: 'canManageSystem' },\r\n        { label: 'Database', path: '/settings/database', description: 'Supabase connection', permission: 'canManageSystem' },\r\n      ]\r\n    },\r\n    clients: {\r\n      title: 'üè¢ CLIENTS',\r\n      items: [\r\n        { label: 'Add Client', path: '/settings/clients/new', description: 'Create new dev_client', permission: 'canManageClients' },\r\n        { label: 'Manage Clients', path: '/settings/clients', description: 'View & edit clients', permission: 'canManageClients' },\r\n      ]\r\n    },\r\n  }\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setShowMenu(false)\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleClickOutside)\r\n    return () => document.removeEventListener('mousedown', handleClickOutside)\r\n  }, [])\r\n\r\n  const getVisibleSections = () => {\r\n    // For now, show all sections (later filter by user permissions)\r\n    return settingsStructure\r\n  }\r\n\r\n  const visibleSections = getVisibleSections()\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      <button\r\n        onClick={() => setShowMenu(!showMenu)}\r\n        className=\"w-10 h-10 bg-gray-700 hover:bg-gray-600 rounded-xl flex items-center justify-center transition-colors border border-gray-600\"\r\n        title=\"Settings\"\r\n      >\r\n        <Settings className=\"w-5 h-5 text-gray-300\" />\r\n      </button>\r\n\r\n      {showMenu && (\r\n        <>\r\n          <div className=\"fixed inset-0 z-40\" onClick={() => setShowMenu(false)} />\r\n          <div className=\"absolute right-0 mt-2 rounded-xl shadow-xl border border-gray-700 py-4 z-50 bg-gray-800\" style={{ minWidth: '650px' }}>\r\n            <div className=\"px-4 pb-3 border-b border-gray-700\">\r\n              <p className=\"text-xs text-gray-400 uppercase font-bold tracking-wider\">‚öôÔ∏è DEV COMMAND CENTER SETTINGS</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-3 gap-4 px-4 pt-4\">\r\n              {/* Column 1 */}\r\n              <div className=\"space-y-4\">\r\n                {visibleSections.servers && (\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-500 uppercase font-bold mb-2\">{visibleSections.servers.title}</p>\r\n                    <div className=\"space-y-1\">\r\n                      {visibleSections.servers.items.map((item) => (\r\n                        <button\r\n                          key={item.path}\r\n                          onClick={() => { router.push(item.path); setShowMenu(false); }}\r\n                          className=\"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg\"\r\n                        >\r\n                          <p className=\"font-medium text-sm\">{item.label}</p>\r\n                          <p className=\"text-xs text-gray-500\">{item.description}</p>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                {visibleSections.alerts && (\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-500 uppercase font-bold mb-2\">{visibleSections.alerts.title}</p>\r\n                    <div className=\"space-y-1\">\r\n                      {visibleSections.alerts.items.map((item) => (\r\n                        <button\r\n                          key={item.path}\r\n                          onClick={() => { router.push(item.path); setShowMenu(false); }}\r\n                          className=\"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg\"\r\n                        >\r\n                          <p className=\"font-medium text-sm\">{item.label}</p>\r\n                          <p className=\"text-xs text-gray-500\">{item.description}</p>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Column 2 */}\r\n              <div className=\"space-y-4\">\r\n                {visibleSections.credentials && (\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-500 uppercase font-bold mb-2\">{visibleSections.credentials.title}</p>\r\n                    <div className=\"space-y-1\">\r\n                      {visibleSections.credentials.items.map((item) => (\r\n                        <button\r\n                          key={item.path}\r\n                          onClick={() => { router.push(item.path); setShowMenu(false); }}\r\n                          className=\"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg\"\r\n                        >\r\n                          <p className=\"font-medium text-sm\">{item.label}</p>\r\n                          <p className=\"text-xs text-gray-500\">{item.description}</p>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                {visibleSections.system && (\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-500 uppercase font-bold mb-2\">{visibleSections.system.title}</p>\r\n                    <div className=\"space-y-1\">\r\n                      {visibleSections.system.items.map((item) => (\r\n                        <button\r\n                          key={item.path}\r\n                          onClick={() => { router.push(item.path); setShowMenu(false); }}\r\n                          className=\"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg\"\r\n                        >\r\n                          <p className=\"font-medium text-sm\">{item.label}</p>\r\n                          <p className=\"text-xs text-gray-500\">{item.description}</p>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                {visibleSections.clients && (\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-500 uppercase font-bold mb-2\">{visibleSections.clients.title}</p>\r\n                    <div className=\"space-y-1\">\r\n                      {visibleSections.clients.items.map((item) => (\r\n                        <button\r\n                          key={item.path}\r\n                          onClick={() => { router.push(item.path); setShowMenu(false); }}\r\n                          className=\"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg\"\r\n                        >\r\n                          <p className=\"font-medium text-sm\">{item.label}</p>\r\n                          <p className=\"text-xs text-gray-500\">{item.description}</p>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Column 3 */}\r\n              <div className=\"space-y-4\">\r\n                {visibleSections.team && (\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-500 uppercase font-bold mb-2\">{visibleSections.team.title}</p>\r\n                    <div className=\"space-y-1\">\r\n                      {visibleSections.team.items.map((item) => (\r\n                        <button\r\n                          key={item.path}\r\n                          onClick={() => { router.push(item.path); setShowMenu(false); }}\r\n                          className=\"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg\"\r\n                        >\r\n                          <p className=\"font-medium text-sm\">{item.label}</p>\r\n                          <p className=\"text-xs text-gray-500\">{item.description}</p>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Quick Links */}\r\n                <div>\r\n                  <p className=\"text-xs text-gray-500 uppercase font-bold mb-2\">üîó QUICK LINKS</p>\r\n                  <div className=\"space-y-1\">\r\n                    <button\r\n                      onClick={() => { router.push('/dev-controls'); setShowMenu(false); }}\r\n                      className=\"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg\"\r\n                    >\r\n                      <p className=\"font-medium text-sm\">Dev Controls</p>\r\n                      <p className=\"text-xs text-gray-500\">Deploy, SSH, Git, Logs</p>\r\n                    </button>\r\n                    <button\r\n                      onClick={() => { router.push('/helpdesk'); setShowMenu(false); }}\r\n                      className=\"w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-700 hover:text-white transition-all rounded-lg\"\r\n                    >\r\n                      <p className=\"font-medium text-sm\">Helpdesk</p>\r\n                      <p className=\"text-xs text-gray-500\">System & user tickets</p>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1376, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/components/ChatDropdown.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { MessageCircle, Send, Hash, X, Code, Circle, GripHorizontal, Minimize2, Maximize2 } from 'lucide-react';\r\n\r\ninterface ChatMessage {\r\n  id: string;\r\n  channel_id: string;\r\n  user_id: string;\r\n  user_name: string;\r\n  user_avatar?: string;\r\n  content: string;\r\n  created_at: string;\r\n  is_code?: boolean;\r\n}\r\n\r\ninterface ChatChannel {\r\n  id: string;\r\n  name: string;\r\n  type: 'channel' | 'dm';\r\n  description?: string;\r\n  unread_count: number;\r\n  last_message?: string;\r\n  participants?: string[];\r\n}\r\n\r\nconst MIN_WIDTH = 400;\r\nconst MIN_HEIGHT = 350;\r\nconst DEFAULT_WIDTH = 500;\r\nconst DEFAULT_HEIGHT = 500;\r\n\r\nexport default function ChatDropdown() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [activeChannel, setActiveChannel] = useState<ChatChannel | null>(null);\r\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [isCodeMode, setIsCodeMode] = useState(false);\r\n  const [unreadTotal, setUnreadTotal] = useState(0);\r\n\r\n  // Dragging state\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\r\n\r\n  // Resizing state\r\n  const [size, setSize] = useState({ width: DEFAULT_WIDTH, height: DEFAULT_HEIGHT });\r\n  const [isResizing, setIsResizing] = useState(false);\r\n  const [resizeStart, setResizeStart] = useState({ x: 0, y: 0, width: 0, height: 0 });\r\n  const [isMaximized, setIsMaximized] = useState(false);\r\n  const [preMaxSize, setPreMaxSize] = useState({ width: DEFAULT_WIDTH, height: DEFAULT_HEIGHT, x: 0, y: 0 });\r\n\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const panelRef = useRef<HTMLDivElement>(null);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Mock channels - TODO: Load from dev_chat_channels\r\n  const [channels, setChannels] = useState<ChatChannel[]>([\r\n    { id: '1', name: 'general', type: 'channel', description: 'General team discussion', unread_count: 2 },\r\n    { id: '2', name: 'dev-updates', type: 'channel', description: 'Development updates & announcements', unread_count: 0 },\r\n    { id: '3', name: 'code-review', type: 'channel', description: 'Code snippets and reviews', unread_count: 1 },\r\n    { id: '4', name: 'deployments', type: 'channel', description: 'Deployment coordination', unread_count: 0 },\r\n  ]);\r\n\r\n  const [directMessages, setDirectMessages] = useState<ChatChannel[]>([\r\n    { id: 'dm1', name: 'Michael', type: 'dm', unread_count: 1, participants: ['Michael'] },\r\n    { id: 'dm2', name: 'Dev Team', type: 'dm', unread_count: 0, participants: ['Dev Team'] },\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const channelUnread = channels.reduce((sum, ch) => sum + ch.unread_count, 0);\r\n    const dmUnread = directMessages.reduce((sum, dm) => sum + dm.unread_count, 0);\r\n    setUnreadTotal(channelUnread + dmUnread);\r\n  }, [channels, directMessages]);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  // Drag handlers\r\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\r\n    if (isMaximized) return;\r\n    setIsDragging(true);\r\n    const rect = panelRef.current?.getBoundingClientRect();\r\n    if (rect) {\r\n      setDragOffset({\r\n        x: e.clientX - rect.left,\r\n        y: e.clientY - rect.top\r\n      });\r\n    }\r\n    e.preventDefault();\r\n  }, [isMaximized]);\r\n\r\n  const handleMouseMove = useCallback((e: MouseEvent) => {\r\n    if (isDragging) {\r\n      const newX = e.clientX - dragOffset.x;\r\n      const newY = e.clientY - dragOffset.y;\r\n\r\n      // Keep within viewport bounds\r\n      const maxX = window.innerWidth - size.width;\r\n      const maxY = window.innerHeight - size.height;\r\n\r\n      setPosition({\r\n        x: Math.max(0, Math.min(newX, maxX)),\r\n        y: Math.max(0, Math.min(newY, maxY))\r\n      });\r\n    }\r\n\r\n    if (isResizing) {\r\n      const deltaX = e.clientX - resizeStart.x;\r\n      const deltaY = e.clientY - resizeStart.y;\r\n\r\n      setSize({\r\n        width: Math.max(MIN_WIDTH, resizeStart.width + deltaX),\r\n        height: Math.max(MIN_HEIGHT, resizeStart.height + deltaY)\r\n      });\r\n    }\r\n  }, [isDragging, isResizing, dragOffset, resizeStart, size.width, size.height]);\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    setIsDragging(false);\r\n    setIsResizing(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isDragging || isResizing) {\r\n      document.addEventListener('mousemove', handleMouseMove);\r\n      document.addEventListener('mouseup', handleMouseUp);\r\n      return () => {\r\n        document.removeEventListener('mousemove', handleMouseMove);\r\n        document.removeEventListener('mouseup', handleMouseUp);\r\n      };\r\n    }\r\n  }, [isDragging, isResizing, handleMouseMove, handleMouseUp]);\r\n\r\n  // Resize handlers\r\n  const handleResizeStart = useCallback((e: React.MouseEvent) => {\r\n    if (isMaximized) return;\r\n    setIsResizing(true);\r\n    setResizeStart({\r\n      x: e.clientX,\r\n      y: e.clientY,\r\n      width: size.width,\r\n      height: size.height\r\n    });\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }, [size, isMaximized]);\r\n\r\n  // Toggle maximize\r\n  const toggleMaximize = () => {\r\n    if (isMaximized) {\r\n      setSize({ width: preMaxSize.width, height: preMaxSize.height });\r\n      setPosition({ x: preMaxSize.x, y: preMaxSize.y });\r\n      setIsMaximized(false);\r\n    } else {\r\n      setPreMaxSize({ ...size, ...position });\r\n      setSize({ width: window.innerWidth - 100, height: window.innerHeight - 100 });\r\n      setPosition({ x: 50, y: 50 });\r\n      setIsMaximized(true);\r\n    }\r\n  };\r\n\r\n  // Initialize position when opening\r\n  useEffect(() => {\r\n    if (isOpen && position.x === 0 && position.y === 0) {\r\n      // Position near the button (top right area)\r\n      setPosition({\r\n        x: window.innerWidth - size.width - 20,\r\n        y: 80\r\n      });\r\n    }\r\n  }, [isOpen, position.x, position.y, size.width]);\r\n\r\n  function loadChannelMessages(channel: ChatChannel) {\r\n    setActiveChannel(channel);\r\n    if (channel.type === 'channel') {\r\n      setChannels(prev => prev.map(ch =>\r\n        ch.id === channel.id ? { ...ch, unread_count: 0 } : ch\r\n      ));\r\n    } else {\r\n      setDirectMessages(prev => prev.map(dm =>\r\n        dm.id === channel.id ? { ...dm, unread_count: 0 } : dm\r\n      ));\r\n    }\r\n\r\n    const now = new Date();\r\n    setMessages([\r\n      {\r\n        id: '1',\r\n        channel_id: channel.id,\r\n        user_id: 'michael',\r\n        user_name: 'Michael',\r\n        content: 'Hey team, just pushed the new tradelines update',\r\n        created_at: new Date(now.getTime() - 3600000).toISOString()\r\n      },\r\n      {\r\n        id: '2',\r\n        channel_id: channel.id,\r\n        user_id: 'dev',\r\n        user_name: 'Dev',\r\n        content: 'Nice! I\\'ll run the tests on it',\r\n        created_at: new Date(now.getTime() - 3500000).toISOString()\r\n      },\r\n      {\r\n        id: '3',\r\n        channel_id: channel.id,\r\n        user_id: 'michael',\r\n        user_name: 'Michael',\r\n        content: 'Here\\'s the code snippet for the API endpoint:',\r\n        created_at: new Date(now.getTime() - 3400000).toISOString()\r\n      },\r\n      {\r\n        id: '4',\r\n        channel_id: channel.id,\r\n        user_id: 'michael',\r\n        user_name: 'Michael',\r\n        content: `async function fetchTradelines(userId: string) {\\n  const response = await fetch('/api/tradelines/' + userId);\\n  return response.json();\\n}`,\r\n        created_at: new Date(now.getTime() - 3300000).toISOString(),\r\n        is_code: true\r\n      },\r\n      {\r\n        id: '5',\r\n        channel_id: channel.id,\r\n        user_id: 'dev',\r\n        user_name: 'Dev',\r\n        content: 'Looks good! I\\'ll integrate it into the portal',\r\n        created_at: new Date(now.getTime() - 600000).toISOString()\r\n      },\r\n    ]);\r\n  }\r\n\r\n  function sendMessage() {\r\n    if (!newMessage.trim() || !activeChannel) return;\r\n\r\n    const message: ChatMessage = {\r\n      id: Date.now().toString(),\r\n      channel_id: activeChannel.id,\r\n      user_id: 'me',\r\n      user_name: 'You',\r\n      content: newMessage,\r\n      created_at: new Date().toISOString(),\r\n      is_code: isCodeMode\r\n    };\r\n\r\n    setMessages(prev => [...prev, message]);\r\n    setNewMessage('');\r\n    setIsCodeMode(false);\r\n  }\r\n\r\n  function formatTime(dateStr: string) {\r\n    const date = new Date(dateStr);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n\r\n    if (diffMins < 1) return 'just now';\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    if (diffMins < 1440) return `${Math.floor(diffMins / 60)}h ago`;\r\n    return date.toLocaleDateString();\r\n  }\r\n\r\n  function copyToClipboard(text: string) {\r\n    navigator.clipboard.writeText(text);\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      {/* Chat Button */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"w-10 h-10 bg-gray-700 text-white rounded-xl flex items-center justify-center hover:bg-gray-600 transition-colors relative\"\r\n        title=\"Team Chat\"\r\n      >\r\n        <MessageCircle className=\"w-5 h-5\" />\r\n        {unreadTotal > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold\">\r\n            {unreadTotal > 9 ? '9+' : unreadTotal}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Chat Panel - Fixed position, draggable and resizable */}\r\n      {isOpen && (\r\n        <div\r\n          ref={panelRef}\r\n          className=\"fixed bg-gray-800 rounded-xl shadow-2xl border border-gray-700 overflow-hidden z-[100]\"\r\n          style={{\r\n            width: size.width,\r\n            height: size.height,\r\n            left: position.x,\r\n            top: position.y,\r\n            cursor: isDragging ? 'grabbing' : 'default'\r\n          }}\r\n        >\r\n          {/* Title Bar - Draggable */}\r\n          <div\r\n            className=\"flex items-center justify-between px-3 py-2 bg-gray-900 border-b border-gray-700 cursor-grab select-none\"\r\n            onMouseDown={handleMouseDown}\r\n          >\r\n            <div className=\"flex items-center gap-2\">\r\n              <GripHorizontal className=\"w-4 h-4 text-gray-500\" />\r\n              <h3 className=\"text-white font-semibold text-sm\">Dev Chat</h3>\r\n              <span className=\"text-gray-500 text-xs\">Team messaging</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <button\r\n                onClick={toggleMaximize}\r\n                className=\"p-1.5 rounded hover:bg-gray-700 text-gray-400 hover:text-white transition-colors\"\r\n                title={isMaximized ? 'Restore' : 'Maximize'}\r\n              >\r\n                {isMaximized ? <Minimize2 className=\"w-4 h-4\" /> : <Maximize2 className=\"w-4 h-4\" />}\r\n              </button>\r\n              <button\r\n                onClick={() => setIsOpen(false)}\r\n                className=\"p-1.5 rounded hover:bg-red-600 text-gray-400 hover:text-white transition-colors\"\r\n                title=\"Close\"\r\n              >\r\n                <X className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex\" style={{ height: size.height - 44 }}>\r\n            {/* Left Sidebar - Channels */}\r\n            <div className=\"w-48 bg-gray-900 border-r border-gray-700 flex flex-col overflow-hidden\">\r\n              <div className=\"flex-1 overflow-y-auto\">\r\n                <div className=\"p-2\">\r\n                  <p className=\"text-gray-500 text-xs font-semibold uppercase px-2 mb-1\">Channels</p>\r\n                  {channels.map(channel => (\r\n                    <button\r\n                      key={channel.id}\r\n                      onClick={() => loadChannelMessages(channel)}\r\n                      className={`w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-left text-sm transition-colors ${\r\n                        activeChannel?.id === channel.id\r\n                          ? 'bg-blue-600 text-white'\r\n                          : 'text-gray-300 hover:bg-gray-800'\r\n                      }`}\r\n                    >\r\n                      <Hash className=\"w-4 h-4 flex-shrink-0\" />\r\n                      <span className=\"truncate flex-1\">{channel.name}</span>\r\n                      {channel.unread_count > 0 && (\r\n                        <span className=\"w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\">\r\n                          {channel.unread_count}\r\n                        </span>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"p-2\">\r\n                  <p className=\"text-gray-500 text-xs font-semibold uppercase px-2 mb-1\">Direct Messages</p>\r\n                  {directMessages.map(dm => (\r\n                    <button\r\n                      key={dm.id}\r\n                      onClick={() => loadChannelMessages(dm)}\r\n                      className={`w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-left text-sm transition-colors ${\r\n                        activeChannel?.id === dm.id\r\n                          ? 'bg-blue-600 text-white'\r\n                          : 'text-gray-300 hover:bg-gray-800'\r\n                      }`}\r\n                    >\r\n                      <Circle className=\"w-3 h-3 fill-green-500 text-green-500 flex-shrink-0\" />\r\n                      <span className=\"truncate flex-1\">{dm.name}</span>\r\n                      {dm.unread_count > 0 && (\r\n                        <span className=\"w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\">\r\n                          {dm.unread_count}\r\n                        </span>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Right - Messages Area */}\r\n            <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n              {activeChannel ? (\r\n                <>\r\n                  {/* Channel Header */}\r\n                  <div className=\"px-4 py-2 border-b border-gray-700 flex items-center justify-between flex-shrink-0\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {activeChannel.type === 'channel' ? (\r\n                        <Hash className=\"w-5 h-5 text-gray-400\" />\r\n                      ) : (\r\n                        <Circle className=\"w-4 h-4 fill-green-500 text-green-500\" />\r\n                      )}\r\n                      <div>\r\n                        <p className=\"text-white font-medium\">{activeChannel.name}</p>\r\n                        {activeChannel.description && (\r\n                          <p className=\"text-gray-500 text-xs\">{activeChannel.description}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Messages */}\r\n                  <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n                    {messages.map(msg => (\r\n                      <div key={msg.id} className={`flex gap-3 ${msg.user_id === 'me' ? 'flex-row-reverse' : ''}`}>\r\n                        <div className={`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold flex-shrink-0 ${\r\n                          msg.user_id === 'me' ? 'bg-blue-600' : 'bg-purple-600'\r\n                        }`}>\r\n                          {msg.user_name.charAt(0)}\r\n                        </div>\r\n                        <div className={`flex-1 min-w-0 ${msg.user_id === 'me' ? 'text-right' : ''}`}>\r\n                          <div className={`flex items-center gap-2 ${msg.user_id === 'me' ? 'justify-end' : ''}`}>\r\n                            <span className=\"text-white text-sm font-medium\">{msg.user_name}</span>\r\n                            <span className=\"text-gray-500 text-xs\">{formatTime(msg.created_at)}</span>\r\n                          </div>\r\n                          {msg.is_code ? (\r\n                            <div className=\"relative mt-1\">\r\n                              <pre className=\"bg-gray-900 rounded-lg p-3 text-sm text-green-400 overflow-x-auto font-mono whitespace-pre-wrap break-all\">\r\n                                {msg.content}\r\n                              </pre>\r\n                              <button\r\n                                onClick={() => copyToClipboard(msg.content)}\r\n                                className=\"absolute top-2 right-2 text-gray-500 hover:text-white text-xs px-2 py-1 bg-gray-800 rounded\"\r\n                              >\r\n                                Copy\r\n                              </button>\r\n                            </div>\r\n                          ) : (\r\n                            <p className={`text-gray-300 text-sm mt-0.5 break-words ${\r\n                              msg.user_id === 'me' ? 'bg-blue-600/20 inline-block px-3 py-1.5 rounded-lg' : ''\r\n                            }`}>\r\n                              {msg.content}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    <div ref={messagesEndRef} />\r\n                  </div>\r\n\r\n                  {/* Message Input */}\r\n                  <div className=\"p-3 border-t border-gray-700 flex-shrink-0\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button\r\n                        onClick={() => setIsCodeMode(!isCodeMode)}\r\n                        className={`p-2 rounded-lg transition-colors ${\r\n                          isCodeMode ? 'bg-green-600 text-white' : 'bg-gray-700 text-gray-400 hover:text-white'\r\n                        }`}\r\n                        title=\"Code mode\"\r\n                      >\r\n                        <Code className=\"w-4 h-4\" />\r\n                      </button>\r\n                      <div className=\"flex-1 relative\">\r\n                        {isCodeMode ? (\r\n                          <textarea\r\n                            value={newMessage}\r\n                            onChange={(e) => setNewMessage(e.target.value)}\r\n                            placeholder=\"Paste code here...\"\r\n                            className=\"w-full bg-gray-900 text-green-400 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none font-mono resize-none\"\r\n                            rows={3}\r\n                            onKeyDown={(e) => {\r\n                              if (e.key === 'Enter' && e.ctrlKey) {\r\n                                sendMessage();\r\n                              }\r\n                            }}\r\n                          />\r\n                        ) : (\r\n                          <input\r\n                            type=\"text\"\r\n                            value={newMessage}\r\n                            onChange={(e) => setNewMessage(e.target.value)}\r\n                            placeholder={`Message #${activeChannel.name}`}\r\n                            className=\"w-full bg-gray-700 text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none\"\r\n                            onKeyDown={(e) => {\r\n                              if (e.key === 'Enter') {\r\n                                sendMessage();\r\n                              }\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                      <button\r\n                        onClick={sendMessage}\r\n                        disabled={!newMessage.trim()}\r\n                        className=\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                      >\r\n                        <Send className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </div>\r\n                    {isCodeMode && (\r\n                      <p className=\"text-gray-500 text-xs mt-1\">Press Ctrl+Enter to send code</p>\r\n                    )}\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <div className=\"flex-1 flex items-center justify-center text-gray-500\">\r\n                  <div className=\"text-center\">\r\n                    <MessageCircle className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n                    <p className=\"text-sm\">Select a channel to start chatting</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Resize Handle */}\r\n          {!isMaximized && (\r\n            <div\r\n              className=\"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize\"\r\n              onMouseDown={handleResizeStart}\r\n              style={{\r\n                background: 'linear-gradient(135deg, transparent 50%, #4B5563 50%)',\r\n                borderBottomRightRadius: '0.75rem'\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2291, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/components/AITeamChat.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Bot } from 'lucide-react';\r\n\r\n/**\r\n * AITeamChat - Chat with AI workers\r\n * Placeholder for now - will be implemented later\r\n */\r\nexport default function AITeamChat() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"w-10 h-10 bg-gray-700 text-white rounded-xl flex items-center justify-center hover:bg-gray-600 transition-colors\"\r\n        title=\"AI Team Chat\"\r\n      >\r\n        <Bot className=\"w-5 h-5\" />\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <>\r\n          <div className=\"fixed inset-0 z-40\" onClick={() => setIsOpen(false)} />\r\n          <div className=\"absolute right-0 top-12 w-80 bg-gray-800 rounded-lg shadow-xl z-50 border border-gray-700\">\r\n            <div className=\"p-4 border-b border-gray-700\">\r\n              <h3 className=\"text-white font-medium\">AI Team Chat</h3>\r\n              <p className=\"text-gray-400 text-sm\">Chat with AI workers</p>\r\n            </div>\r\n            <div className=\"p-4 text-gray-500 text-sm text-center\">\r\n              Coming soon...\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AASe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,2PAAQ,EAAC;IAErC,qBACE,wRAAC;QAAI,WAAU;;0BACb,wRAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;gBACV,OAAM;0BAEN,cAAA,wRAAC,iPAAG;oBAAC,WAAU;;;;;;;;;;;YAGhB,wBACC;;kCACE,wRAAC;wBAAI,WAAU;wBAAqB,SAAS,IAAM,UAAU;;;;;;kCAC7D,wRAAC;wBAAI,WAAU;;0CACb,wRAAC;gCAAI,WAAU;;kDACb,wRAAC;wCAAG,WAAU;kDAAyB;;;;;;kDACvC,wRAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;0CAEvC,wRAAC;gCAAI,WAAU;0CAAwC;;;;;;;;;;;;;;;;;;;;AAQnE"}},
    {"offset": {"line": 2388, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/app/contexts/ClientContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\n\r\nexport interface Client {\r\n  id: string;\r\n  name: string;\r\n  slug: string;\r\n}\r\n\r\ninterface ClientContextType {\r\n  clients: Client[];\r\n  selectedClient: Client | null;\r\n  setSelectedClient: (client: Client | null) => void;\r\n  isLoading: boolean;\r\n}\r\n\r\nconst ClientContext = createContext<ClientContextType>({\r\n  clients: [],\r\n  selectedClient: null,\r\n  setSelectedClient: () => {},\r\n  isLoading: true,\r\n});\r\n\r\nexport function ClientProvider({ children }: { children: ReactNode }) {\r\n  const [clients, setClients] = useState<Client[]>([]);\r\n  const [selectedClient, setSelectedClient] = useState<Client | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchClients();\r\n  }, []);\r\n\r\n  const fetchClients = async () => {\r\n    try {\r\n      const response = await fetch('/project-management/api/clients');\r\n      const data = await response.json();\r\n      if (data.success && data.clients) {\r\n        setClients(data.clients);\r\n        // Auto-select first client if none selected\r\n        if (data.clients.length > 0 && !selectedClient) {\r\n          // Check localStorage for saved selection\r\n          const savedClientId = localStorage.getItem('selectedClientId');\r\n          const savedClient = data.clients.find((c: Client) => c.id === savedClientId);\r\n          setSelectedClient(savedClient || data.clients[0]);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching clients:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSetSelectedClient = (client: Client | null) => {\r\n    setSelectedClient(client);\r\n    if (client) {\r\n      localStorage.setItem('selectedClientId', client.id);\r\n    } else {\r\n      localStorage.removeItem('selectedClientId');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ClientContext.Provider value={{\r\n      clients,\r\n      selectedClient,\r\n      setSelectedClient: handleSetSelectedClient,\r\n      isLoading,\r\n    }}>\r\n      {children}\r\n    </ClientContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useClient() {\r\n  return useContext(ClientContext);\r\n}\r\n\r\nexport default ClientContext;\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AAFA;;;AAiBA,MAAM,8BAAgB,IAAA,gQAAa,EAAoB;IACrD,SAAS,EAAE;IACX,gBAAgB;IAChB,mBAAmB,KAAO;IAC1B,WAAW;AACb;AAEO,SAAS,eAAe,EAAE,QAAQ,EAA2B;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2PAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,2PAAQ,EAAgB;IACpE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2PAAQ,EAAC;IAE3C,IAAA,4PAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,IAAI,KAAK,OAAO,IAAI,KAAK,OAAO,EAAE;gBAChC,WAAW,KAAK,OAAO;gBACvB,4CAA4C;gBAC5C,IAAI,KAAK,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC,gBAAgB;oBAC9C,yCAAyC;oBACzC,MAAM,gBAAgB,aAAa,OAAO,CAAC;oBAC3C,MAAM,cAAc,KAAK,OAAO,CAAC,IAAI,CAAC,CAAC,IAAc,EAAE,EAAE,KAAK;oBAC9D,kBAAkB,eAAe,KAAK,OAAO,CAAC,EAAE;gBAClD;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,0BAA0B,CAAC;QAC/B,kBAAkB;QAClB,IAAI,QAAQ;YACV,aAAa,OAAO,CAAC,oBAAoB,OAAO,EAAE;QACpD,OAAO;YACL,aAAa,UAAU,CAAC;QAC1B;IACF;IAEA,qBACE,wRAAC,cAAc,QAAQ;QAAC,OAAO;YAC7B;YACA;YACA,mBAAmB;YACnB;QACF;kBACG;;;;;;AAGP;AAEO,SAAS;IACd,OAAO,IAAA,6PAAU,EAAC;AACpB;uCAEe"}},
    {"offset": {"line": 2464, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/components/Navigation.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useContext, ReactNode } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport { ChevronDown, ChevronRight, DoorOpen, Users, ArrowLeft, Building2 } from 'lucide-react';\r\nimport TimeClockDropdown from './TimeClockDropdown';\r\nimport SettingsDropdown from './SettingsDropdown';\r\nimport ChatDropdown from './ChatDropdown';\r\nimport AITeamChat from './AITeamChat';\r\nimport { ProductionStatusContext } from '@/app/layout';\r\nimport { useClient } from '@/app/contexts/ClientContext';\r\nimport { supabase } from '../lib/supabase';\r\n\r\ninterface NavigationProps {\r\n  pageTitle?: { title: string; description: string };\r\n  pageActions?: ReactNode;\r\n}\r\n\r\nexport default function Navigation({ pageTitle, pageActions }: NavigationProps) {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const [showLogoutConfirm, setShowLogoutConfirm] = useState(false);\r\n  const { showServers, toggleServers } = useContext(ProductionStatusContext);\r\n  const { clients, selectedClient, setSelectedClient, isLoading: clientsLoading } = useClient();\r\n\r\n  // Tab navigation - exactly like MyKeystone style\r\n  // Tabs: Servers / Dev Tools / HelpDesk / Calendar / Development\r\n  const tabs = [\r\n    { id: 'servers', label: 'Servers', path: '/servers/tradelines' },\r\n    { id: 'dev-tools', label: 'Dev Tools', path: '/dev-controls' },\r\n    { id: 'helpdesk', label: 'HelpDesk', path: '/helpdesk' },\r\n    { id: 'calendar', label: 'Calendar', path: '/calendar' },\r\n    { id: 'studio', label: 'Studio', path: '/studio' },\r\n  ];\r\n\r\n  const getActiveTab = () => {\r\n    if (pathname?.startsWith('/servers')) return 'servers';\r\n    if (pathname?.startsWith('/credentials')) return 'servers'; // Credentials is under servers tab\r\n    if (pathname?.startsWith('/dev-controls')) return 'dev-tools';\r\n    if (pathname?.startsWith('/helpdesk')) return 'helpdesk';\r\n    if (pathname?.startsWith('/calendar')) return 'calendar';\r\n    if (pathname?.startsWith('/studio')) return 'studio';\r\n    if (pathname?.startsWith('/team')) return 'studio';\r\n    return '';\r\n  };\r\n\r\n  const activeTab = getActiveTab();\r\n  const isCredentialsPage = pathname?.startsWith('/credentials');\r\n\r\n  // Credentials sub-tabs\r\n  const credentialTabs = [\r\n    { key: 'overview', label: 'Overview', path: '/credentials' },\r\n    { key: 'federal', label: 'Federal', path: '/credentials/federal' },\r\n    { key: 'state', label: 'State', path: '/credentials/state' },\r\n    { key: 'local', label: 'Local', path: '/credentials/local' },\r\n    { key: 'municipal', label: 'Municipal', path: '/credentials/municipal' },\r\n    { key: 'other', label: 'Other', path: '/credentials/other' },\r\n  ];\r\n\r\n  const getActiveCredentialTab = () => {\r\n    if (pathname === '/credentials') return 'overview';\r\n    const match = credentialTabs.find(t => t.path !== '/credentials' && pathname?.startsWith(t.path));\r\n    return match?.key || 'overview';\r\n  };\r\n\r\n  async function handleLogout() {\r\n    await supabase.auth.signOut();\r\n    router.push('/');\r\n  }\r\n\r\n  function handleClientChange(clientId: string) {\r\n    const client = clients.find(c => c.id === clientId);\r\n    if (client) {\r\n      setSelectedClient(client);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"sticky top-0 z-50\">\r\n      {/* Main Navigation Bar - bg-gray-800 like MyKeystone */}\r\n      <nav className=\"bg-gray-800 shadow-lg\">\r\n        <div className=\"px-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            {/* Left: Title + Tabs */}\r\n            <div className=\"flex items-end space-x-4\">\r\n              {/* Title - links to Dashboard */}\r\n              <Link href=\"/dashboard\" className=\"flex items-center py-3 hover:opacity-80 transition-opacity\">\r\n                <div>\r\n                  <div className=\"text-white font-bold text-xl leading-tight\">Kodiack Studio</div>\r\n                  <div className=\"text-gray-400 text-xs leading-tight\">Games. Platforms. Systems.</div>\r\n                </div>\r\n              </Link>\r\n\r\n              {/* Tab Navigation - aligned to bottom */}\r\n              <div className=\"hidden md:flex items-end space-x-1 pb-0\">\r\n                {tabs.map(tab => {\r\n                  const isActive = activeTab === tab.id;\r\n                  const isExternal = 'external' in tab && tab.external;\r\n                  const tabClass = `w-32 py-1.5 rounded-t-xl text-base font-medium transition-all border-t border-x flex items-center justify-center ${\r\n                    isActive\r\n                      ? 'bg-blue-600 text-white border-blue-500 shadow-lg'\r\n                      : 'text-gray-300 hover:bg-gray-700 hover:text-white border-gray-600'\r\n                  }`;\r\n\r\n                  if (isExternal) {\r\n                    return (\r\n                      <a\r\n                        key={tab.id}\r\n                        href={tab.path}\r\n                        className={tabClass}\r\n                      >\r\n                        {tab.label}\r\n                      </a>\r\n                    );\r\n                  }\r\n\r\n                  return (\r\n                    <Link\r\n                      key={tab.id}\r\n                      href={tab.path}\r\n                      className={tabClass}\r\n                    >\r\n                      {tab.label}\r\n                    </Link>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Right: Client Selector, Time Clock, Settings, Logout */}\r\n            <div className=\"flex items-center space-x-2\">\r\n              {/* Client Selector */}\r\n              <div className=\"relative\">\r\n                <select\r\n                  value={selectedClient?.id || 'all'}\r\n                  onChange={(e) => {\r\n                    if (e.target.value === 'all') {\r\n                      setSelectedClient(null);\r\n                    } else {\r\n                      handleClientChange(e.target.value);\r\n                    }\r\n                  }}\r\n                  disabled={clientsLoading}\r\n                  className=\"appearance-none bg-gray-700 text-white pl-10 pr-10 py-2 rounded-xl border border-gray-600 focus:ring-2 focus:ring-blue-500 cursor-pointer hover:bg-gray-600 disabled:opacity-50 min-w-[200px]\"\r\n                >\r\n                  <option value=\"all\">All Clients</option>\r\n                  {clients.map(client => (\r\n                    <option key={client.id} value={client.id}>{client.name}</option>\r\n                  ))}\r\n                </select>\r\n                <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none\" />\r\n                <ChevronDown className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none\" />\r\n              </div>\r\n\r\n              {/* Team Chat - Slack-like messaging for devs */}\r\n              <ChatDropdown />\r\n\r\n              {/* AI Team Chat - Chat with AI workers */}\r\n              <AITeamChat />\r\n\r\n              {/* Time Clock - EXACT MyKeystone style: w-10 h-10 rounded-xl */}\r\n              <TimeClockDropdown />\r\n\r\n              {/* Settings - EXACT MyKeystone style: w-10 h-10 bg-gray-700 rounded-xl */}\r\n              <SettingsDropdown />\r\n\r\n              {/* Logout - EXACT MyKeystone style: w-10 h-10 bg-blue-600 rounded-xl */}\r\n              <button\r\n                onClick={() => setShowLogoutConfirm(true)}\r\n                className=\"w-10 h-10 bg-blue-600 text-white rounded-xl flex items-center justify-center hover:bg-blue-700 transition-colors\"\r\n                title=\"Logout\"\r\n              >\r\n                <DoorOpen className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Gradient Banner Bar - like MyKeystone */}\r\n      <div className=\"shadow-md\" style={{ background: 'linear-gradient(to right, #3B82F6, #06B6D4)' }}>\r\n        <div className=\"px-6 py-1\">\r\n          <div className=\"flex items-center\">\r\n            {/* Back button + Page title + Page actions */}\r\n            <div className=\"flex-1 flex items-center space-x-3\">\r\n              {/* Back Button */}\r\n              <button\r\n                onClick={() => window.history.back()}\r\n                className=\"w-10 h-10 rounded-xl flex items-center justify-center transition-all flex-shrink-0 text-white border border-black/30 hover:bg-white/10\"\r\n                title=\"Go Back\"\r\n              >\r\n                <ArrowLeft className=\"w-5 h-5\" />\r\n              </button>\r\n\r\n              {/* Page Title & Description */}\r\n              <div className=\"min-w-0\">\r\n                <h1 className=\"text-xl font-bold text-white leading-tight\">\r\n                  {pageTitle?.title || (\r\n                    <>\r\n                      {activeTab === '' && 'Dashboard'}\r\n                      {activeTab === 'servers' && !isCredentialsPage && 'Server Management'}\r\n                      {isCredentialsPage && 'Credentials & Sources'}\r\n                      {activeTab === 'dev-tools' && 'Development Tools'}\r\n                      {activeTab === 'helpdesk' && 'Support Center'}\r\n                      {activeTab === 'calendar' && 'Team Schedule'}\r\n                      {activeTab === 'studio' && 'Development Environment'}\r\n                    </>\r\n                  )}\r\n                </h1>\r\n                {pageTitle?.description && (\r\n                  <p className=\"text-white/80 text-xs mt-0.5 leading-tight\">{pageTitle.description}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Page Actions (next to title) */}\r\n              {pageActions && (\r\n                <div className=\"flex items-center space-x-2\">\r\n                  {pageActions}\r\n                </div>\r\n              )}\r\n\r\n              {/* Spacer to push credentials tabs right */}\r\n              <div className=\"flex-1\" />\r\n            </div>\r\n\r\n            {/* Right: Credentials Tabs (only on /credentials pages) */}\r\n            {isCredentialsPage && (\r\n              <div className=\"flex items-center gap-1 ml-4\">\r\n                {credentialTabs.map((tab) => {\r\n                  const isActive = getActiveCredentialTab() === tab.key;\r\n                  return (\r\n                    <Link\r\n                      key={tab.key}\r\n                      href={tab.path}\r\n                      className={`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${\r\n                        isActive\r\n                          ? 'bg-white/20 text-white'\r\n                          : 'text-white/70 hover:bg-white/10 hover:text-white'\r\n                      }`}\r\n                    >\r\n                      {tab.label}\r\n                    </Link>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n\r\n            </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Logout Confirmation Modal - EXACT MyKeystone style */}\r\n      {showLogoutConfirm && (\r\n        <>\r\n          <div className=\"fixed inset-0 bg-black/50 z-50\" onClick={() => setShowLogoutConfirm(false)} />\r\n          <div className=\"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-xl z-50 p-6 w-96\">\r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-3\">Confirm Logout</h3>\r\n            <p className=\"text-gray-600 mb-6\">Are you sure you want to log out?</p>\r\n            <div className=\"flex items-center justify-end space-x-3\">\r\n              <button\r\n                onClick={() => setShowLogoutConfirm(false)}\r\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700\"\r\n              >\r\n                Yes, Logout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2987, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/components/ServerStatusIndicator.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { ChevronDown, ChevronRight } from 'lucide-react';\r\n\r\n// Server status types\r\nexport type ServerHealth = 'healthy' | 'degraded' | 'critical' | 'offline' | 'unknown';\r\n\r\nexport interface WorkerStatus {\r\n  port: number;\r\n  name: string; // 'Engine', 'Discovery', 'Scope of Work', 'Full Report', 'Proposal'\r\n  status: 'online' | 'offline' | 'error';\r\n  lastPing?: string;\r\n  errorCount?: number;\r\n}\r\n\r\nexport interface SlotStatus {\r\n  slotId: string;\r\n  tradeline: string;\r\n  mainPort: number;\r\n  workers: WorkerStatus[];\r\n  health: ServerHealth;\r\n  cpu?: number;\r\n  memory?: number;\r\n  requestsPerMin?: number;\r\n  errorsToday?: number;\r\n}\r\n\r\nexport interface ProjectStatus {\r\n  id: string;\r\n  name: string;\r\n  patcherPort: number;\r\n  prodPort: string;\r\n  slots?: SlotStatus[]; // For Engine with 20 slots\r\n  health: ServerHealth;\r\n  totalSlots?: number;\r\n  healthySlots?: number;\r\n  degradedSlots?: number;\r\n  offlineSlots?: number;\r\n}\r\n\r\n// Mock data - will be replaced with real API calls\r\nconst MOCK_PROJECTS: ProjectStatus[] = [\r\n  {\r\n    id: 'tradelines',\r\n    name: 'NextBid Engine',\r\n    patcherPort: 7101,\r\n    prodPort: '31001-31020',\r\n    health: 'degraded',\r\n    totalSlots: 20,\r\n    healthySlots: 18,\r\n    degradedSlots: 2,\r\n    offlineSlots: 0,\r\n    slots: [\r\n      { slotId: '01', tradeline: 'security', mainPort: 31001, health: 'healthy', workers: [], cpu: 45, memory: 62, requestsPerMin: 120 },\r\n      { slotId: '02', tradeline: 'administrative', mainPort: 31002, health: 'healthy', workers: [], cpu: 38, memory: 55 },\r\n      { slotId: '03', tradeline: 'facilities', mainPort: 31003, health: 'degraded', workers: [], cpu: 78, memory: 85 },\r\n      { slotId: '04', tradeline: 'logistics', mainPort: 31004, health: 'healthy', workers: [] },\r\n      { slotId: '05', tradeline: 'electrical', mainPort: 31005, health: 'healthy', workers: [] },\r\n      { slotId: '06', tradeline: 'lowvoltage', mainPort: 31006, health: 'healthy', workers: [] },\r\n      { slotId: '07', tradeline: 'landscaping', mainPort: 31007, health: 'healthy', workers: [] },\r\n      { slotId: '08', tradeline: 'hvac', mainPort: 31008, health: 'degraded', workers: [] },\r\n      { slotId: '09', tradeline: 'plumbing', mainPort: 31009, health: 'healthy', workers: [] },\r\n      { slotId: '10', tradeline: 'janitorial', mainPort: 31010, health: 'healthy', workers: [] },\r\n      { slotId: '11', tradeline: 'support', mainPort: 31011, health: 'healthy', workers: [] },\r\n      { slotId: '12', tradeline: 'waste', mainPort: 31012, health: 'healthy', workers: [] },\r\n      { slotId: '13', tradeline: 'construction', mainPort: 31013, health: 'healthy', workers: [] },\r\n      { slotId: '14', tradeline: 'roofing', mainPort: 31014, health: 'healthy', workers: [] },\r\n      { slotId: '15', tradeline: 'painting', mainPort: 31015, health: 'healthy', workers: [] },\r\n      { slotId: '16', tradeline: 'flooring', mainPort: 31016, health: 'healthy', workers: [] },\r\n      { slotId: '17', tradeline: 'demolition', mainPort: 31017, health: 'healthy', workers: [] },\r\n      { slotId: '18', tradeline: 'environmental', mainPort: 31018, health: 'healthy', workers: [] },\r\n      { slotId: '19', tradeline: 'concrete', mainPort: 31019, health: 'healthy', workers: [] },\r\n      { slotId: '20', tradeline: 'fencing', mainPort: 31020, health: 'healthy', workers: [] },\r\n    ],\r\n  },\r\n  {\r\n    id: 'sources',\r\n    name: 'NextSource',\r\n    patcherPort: 7102,\r\n    prodPort: '8002',\r\n    health: 'healthy',\r\n  },\r\n  {\r\n    id: 'nextbidder',\r\n    name: 'NextBidder',\r\n    patcherPort: 7103,\r\n    prodPort: '8003',\r\n    health: 'healthy',\r\n  },\r\n  {\r\n    id: 'portals',\r\n    name: 'NextBid Portal',\r\n    patcherPort: 7104,\r\n    prodPort: '8004',\r\n    health: 'healthy',\r\n  },\r\n  {\r\n    id: 'nexttech',\r\n    name: 'NextTech',\r\n    patcherPort: 7105,\r\n    prodPort: '8005',\r\n    health: 'healthy',\r\n  },\r\n  {\r\n    id: 'nexttask',\r\n    name: 'NextTask',\r\n    patcherPort: 7106,\r\n    prodPort: '8006',\r\n    health: 'critical',\r\n  },\r\n];\r\n\r\ninterface ServerStatusIndicatorProps {\r\n  onSelectProject?: (project: ProjectStatus) => void;\r\n  onSelectSlot?: (project: ProjectStatus, slot: SlotStatus) => void;\r\n  selectedProjectId?: string;\r\n  selectedSlotId?: string;\r\n}\r\n\r\nexport default function ServerStatusIndicator({\r\n  onSelectProject,\r\n  onSelectSlot,\r\n  selectedProjectId,\r\n  selectedSlotId,\r\n}: ServerStatusIndicatorProps) {\r\n  const [projects, setProjects] = useState<ProjectStatus[]>(MOCK_PROJECTS);\r\n  const [expandedProject, setExpandedProject] = useState<string | null>(null);\r\n\r\n  // Fetch real data from API\r\n  // Poll faster (every 3s) when a slot is selected, otherwise every 30s\r\n  useEffect(() => {\r\n    const fetchHealth = async () => {\r\n      try {\r\n        const response = await fetch('/api/servers/health');\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          if (data.projects) {\r\n            setProjects(data.projects);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch server health:', error);\r\n      }\r\n    };\r\n\r\n    fetchHealth();\r\n    const pollInterval = selectedSlotId ? 3000 : 30000; // Fast poll when slot selected\r\n    const interval = setInterval(fetchHealth, pollInterval);\r\n    return () => clearInterval(interval);\r\n  }, [selectedSlotId]);\r\n\r\n  const getHealthColor = (health: ServerHealth) => {\r\n    switch (health) {\r\n      case 'healthy': return 'bg-green-500';\r\n      case 'degraded': return 'bg-yellow-500';\r\n      case 'critical': return 'bg-red-500';\r\n      case 'offline': return 'bg-gray-500';\r\n      default: return 'bg-gray-600';\r\n    }\r\n  };\r\n\r\n  // Check if project has expandable slots\r\n  const hasExpandableSlots = (project: ProjectStatus) => {\r\n    return project.slots && project.slots.length > 0;\r\n  };\r\n\r\n  const handleProjectClick = (project: ProjectStatus) => {\r\n    // If project has slots, only toggle expand (don't open detail panel)\r\n    if (hasExpandableSlots(project)) {\r\n      setExpandedProject(expandedProject === project.id ? null : project.id);\r\n    } else {\r\n      // Only open detail panel for projects without slots (simple projects)\r\n      onSelectProject?.(project);\r\n    }\r\n  };\r\n\r\n  const handleSlotClick = (project: ProjectStatus, slot: SlotStatus, e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    onSelectSlot?.(project, slot);\r\n  };\r\n\r\n  // Get all slots sorted by slotId\r\n  const getAllSlots = (project: ProjectStatus) => {\r\n    if (!project.slots) return [];\r\n    return [...project.slots].sort((a, b) => a.slotId.localeCompare(b.slotId));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-0.5\">\r\n      {/* Compact Project List - just dot + name */}\r\n      {projects.map((project) => {\r\n        const allSlots = getAllSlots(project);\r\n        const canExpand = allSlots.length > 0;\r\n        const isExpanded = expandedProject === project.id;\r\n\r\n        return (\r\n          <div key={project.id}>\r\n            <button\r\n              onClick={() => handleProjectClick(project)}\r\n              className={`w-full flex items-center gap-2 px-3 py-1.5 rounded text-sm transition-all ${\r\n                selectedProjectId === project.id\r\n                  ? 'bg-cyan-500/15'\r\n                  : 'hover:bg-gray-800/30'\r\n              }`}\r\n            >\r\n              {/* Status Dot */}\r\n              <div className={`w-2 h-2 rounded-full ${getHealthColor(project.health)} ${\r\n                project.health === 'critical' ? 'animate-pulse' : ''\r\n              }`} />\r\n\r\n              {/* Project Name */}\r\n              <span className={`flex-1 text-left ${\r\n                project.health === 'critical' ? 'text-red-400' :\r\n                project.health === 'degraded' ? 'text-yellow-400' :\r\n                'text-gray-400'\r\n              }`}>\r\n                {project.name}\r\n              </span>\r\n\r\n              {/* Expand chevron if there are slots to show */}\r\n              {canExpand && (\r\n                <div className=\"text-gray-500\">\r\n                  {isExpanded ? (\r\n                    <ChevronDown className=\"w-3 h-3\" />\r\n                  ) : (\r\n                    <ChevronRight className=\"w-3 h-3\" />\r\n                  )}\r\n                </div>\r\n              )}\r\n            </button>\r\n\r\n            {/* All Slots - show when expanded */}\r\n            {isExpanded && allSlots.length > 0 && (\r\n              <div className=\"ml-4 mt-0.5 space-y-0.5 border-l border-gray-800 pl-2\">\r\n                {allSlots.map((slot) => (\r\n                  <button\r\n                    key={slot.slotId}\r\n                    onClick={(e) => handleSlotClick(project, slot, e)}\r\n                    className={`w-full flex items-center gap-2 px-2 py-1 rounded text-xs transition-all ${\r\n                      selectedSlotId === slot.slotId\r\n                        ? 'bg-cyan-500/20'\r\n                        : 'hover:bg-gray-800/30'\r\n                    }`}\r\n                  >\r\n                    <div className={`w-1.5 h-1.5 rounded-full ${getHealthColor(slot.health)}`} />\r\n                    <span className={`font-mono text-[10px] ${\r\n                      slot.health === 'healthy' ? 'text-green-400' :\r\n                      slot.health === 'degraded' ? 'text-yellow-400' : 'text-red-400'\r\n                    }`}>{slot.mainPort}</span>\r\n                    <span className={`capitalize ${\r\n                      slot.health === 'healthy' ? 'text-green-400' :\r\n                      slot.health === 'degraded' ? 'text-yellow-400' : 'text-red-400'\r\n                    }`}>\r\n                      {slot.tradeline}\r\n                    </span>\r\n                    <span className=\"flex-1\" />\r\n                    {selectedSlotId === slot.slotId && (\r\n                      <span className=\"text-cyan-400 text-xs\">&gt;</span>\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Export individual status dot component for use elsewhere\r\nexport function StatusDot({ health, size = 'sm', pulse = false }: { health: ServerHealth; size?: 'sm' | 'md' | 'lg'; pulse?: boolean }) {\r\n  const sizeClasses = {\r\n    sm: 'w-2 h-2',\r\n    md: 'w-2.5 h-2.5',\r\n    lg: 'w-3 h-3',\r\n  };\r\n\r\n  const getColor = (health: ServerHealth) => {\r\n    switch (health) {\r\n      case 'healthy': return 'bg-green-500';\r\n      case 'degraded': return 'bg-yellow-500';\r\n      case 'critical': return 'bg-red-500';\r\n      case 'offline': return 'bg-gray-500';\r\n      default: return 'bg-gray-600';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <span className={`inline-block rounded-full ${sizeClasses[size]} ${getColor(health)} ${\r\n      pulse || health === 'critical' ? 'animate-pulse' : ''\r\n    }`} />\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3416, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/lib/auth-client.ts"],"sourcesContent":["/**\r\n * Client-side auth utilities\r\n * Reads user info from dev_user cookie set by auth-7000\r\n */\r\n\r\n'use client';\r\n\r\nimport Cookies from 'js-cookie';\r\n\r\nexport interface DevUser {\r\n  id: string;\r\n  email: string;\r\n  name: string;\r\n  role: string;\r\n}\r\n\r\n// Auth service configuration\r\nexport const AUTH_URL = process.env.NEXT_PUBLIC_AUTH_URL || 'http://161.35.229.220:7000';\r\nexport const DASHBOARD_PORT = '5500';\r\n\r\n/**\r\n * Get the current user from cookies (client-side)\r\n */\r\nexport function getUser(): DevUser | null {\r\n  try {\r\n    const userCookie = Cookies.get('dev_user');\r\n    if (!userCookie) {\r\n      return null;\r\n    }\r\n    return JSON.parse(decodeURIComponent(userCookie));\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Check if user is logged in\r\n */\r\nexport function isLoggedIn(): boolean {\r\n  return !!Cookies.get('accessToken');\r\n}\r\n\r\n/**\r\n * Redirect to login page\r\n */\r\nexport function redirectToLogin(): void {\r\n  window.location.href = `${AUTH_URL}/login?redirect=${DASHBOARD_PORT}`;\r\n}\r\n\r\n/**\r\n * Logout - clear cookies and redirect\r\n */\r\nexport function logout(): void {\r\n  Cookies.remove('accessToken');\r\n  Cookies.remove('dev_user');\r\n  window.location.href = `${AUTH_URL}/logout`;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;AAID;AAFA;;AAYO,MAAM,WAAW,kEAAoC;AACrD,MAAM,iBAAiB;AAKvB,SAAS;IACd,IAAI;QACF,MAAM,aAAa,0MAAO,CAAC,GAAG,CAAC;QAC/B,IAAI,CAAC,YAAY;YACf,OAAO;QACT;QACA,OAAO,KAAK,KAAK,CAAC,mBAAmB;IACvC,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,SAAS;IACd,OAAO,CAAC,CAAC,0MAAO,CAAC,GAAG,CAAC;AACvB;AAKO,SAAS;IACd,OAAO,QAAQ,CAAC,IAAI,GAAG,GAAG,SAAS,gBAAgB,EAAE,gBAAgB;AACvE;AAKO,SAAS;IACd,0MAAO,CAAC,MAAM,CAAC;IACf,0MAAO,CAAC,MAAM,CAAC;IACf,OAAO,QAAQ,CAAC,IAAI,GAAG,GAAG,SAAS,OAAO,CAAC;AAC7C"}},
    {"offset": {"line": 3464, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/app/settings/UserContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { supabase } from '@/lib/supabase';\r\nimport Cookies from 'js-cookie';\r\nimport { getUser as getDevUser, isLoggedIn, redirectToLogin } from '@/lib/auth-client';\r\n\r\n// Product IDs that can be assigned to users\r\nexport type ProductId = 'tradelines' | 'sources' | 'nextbidder' | 'portals' | 'nexttech' | 'nexttask' | 'dev-environment';\r\n\r\n// All available product IDs\r\nexport const ALL_PRODUCTS: ProductId[] = ['tradelines', 'dev-environment', 'sources', 'nextbidder', 'portals', 'nexttech', 'nexttask'];\r\n\r\n// Role hierarchy (highest to lowest)\r\nexport type UserRole = 'superadmin' | 'admin' | 'lead' | 'engineer' | 'developer' | 'support';\r\n\r\n// Permission definitions based on role\r\nexport const ROLE_PERMISSIONS = {\r\n  superadmin: {\r\n    level: 6,\r\n    canViewDashboards: true,\r\n    canRebootServers: true,\r\n    canManageCredentials: true,\r\n    canUseKillSwitches: true,\r\n    canPushToTest: true,\r\n    canPushToProd: true,\r\n    canEditSourceCode: true,\r\n    canApproveProdDeploys: true,\r\n    canManageUsersRoles: true,\r\n    canRotateSecrets: true,\r\n    canAccessHelpdesk: true,\r\n    hasAllProjects: true, // Superadmin sees all projects regardless of assignment\r\n  },\r\n  admin: {\r\n    level: 5,\r\n    canViewDashboards: true,\r\n    canRebootServers: true,\r\n    canManageCredentials: true,\r\n    canUseKillSwitches: true,\r\n    canPushToTest: true,\r\n    canPushToProd: true,\r\n    canEditSourceCode: true,\r\n    canApproveProdDeploys: true,\r\n    canManageUsersRoles: true,\r\n    canRotateSecrets: true,\r\n    canAccessHelpdesk: true,\r\n    hasAllProjects: false,\r\n  },\r\n  lead: {\r\n    level: 4,\r\n    canViewDashboards: true,\r\n    canRebootServers: true,\r\n    canManageCredentials: true,\r\n    canUseKillSwitches: true,\r\n    canPushToTest: true,\r\n    canPushToProd: true,\r\n    canEditSourceCode: true,\r\n    canApproveProdDeploys: true,\r\n    canManageUsersRoles: true,\r\n    canRotateSecrets: false,\r\n    canAccessHelpdesk: true,\r\n    hasAllProjects: false,\r\n  },\r\n  engineer: {\r\n    level: 3,\r\n    canViewDashboards: true,\r\n    canRebootServers: true,\r\n    canManageCredentials: true,\r\n    canUseKillSwitches: true,\r\n    canPushToTest: true,\r\n    canPushToProd: true,\r\n    canEditSourceCode: true,\r\n    canApproveProdDeploys: false,\r\n    canManageUsersRoles: false,\r\n    canRotateSecrets: false,\r\n    canAccessHelpdesk: true,\r\n    hasAllProjects: false,\r\n  },\r\n  developer: {\r\n    level: 2,\r\n    canViewDashboards: true,\r\n    canRebootServers: true,\r\n    canManageCredentials: true,\r\n    canUseKillSwitches: false,\r\n    canPushToTest: false,\r\n    canPushToProd: false,\r\n    canEditSourceCode: false,\r\n    canApproveProdDeploys: false,\r\n    canManageUsersRoles: false,\r\n    canRotateSecrets: false,\r\n    canAccessHelpdesk: true,\r\n    hasAllProjects: false,\r\n  },\r\n  support: {\r\n    level: 1,\r\n    canViewDashboards: true,\r\n    canRebootServers: false,\r\n    canManageCredentials: false,\r\n    canUseKillSwitches: false,\r\n    canPushToTest: false,\r\n    canPushToProd: false,\r\n    canEditSourceCode: false,\r\n    canApproveProdDeploys: false,\r\n    canManageUsersRoles: false,\r\n    canRotateSecrets: false,\r\n    canAccessHelpdesk: true, // Primary focus\r\n    hasAllProjects: false,\r\n  },\r\n} as const;\r\n\r\nexport type Permissions = typeof ROLE_PERMISSIONS[UserRole];\r\n\r\ninterface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  role: UserRole;\r\n  avatar?: string;\r\n  assignedProjects: ProductId[];  // Products this user has access to\r\n  teamIds?: string[];             // Teams this user belongs to\r\n}\r\n\r\ninterface UserContextValue {\r\n  user: User | null;\r\n  isLoading: boolean;\r\n  permissions: Permissions;\r\n  hasPermission: (permission: keyof Permissions) => boolean;\r\n  hasMinRole: (minRole: UserRole) => boolean;\r\n  hasProjectAccess: (projectId: ProductId) => boolean;\r\n  setUser: (user: User | null) => void;\r\n}\r\n\r\nconst defaultPermissions = ROLE_PERMISSIONS.developer;\r\n\r\nconst UserContext = createContext<UserContextValue>({\r\n  user: null,\r\n  isLoading: true,\r\n  permissions: defaultPermissions,\r\n  hasPermission: () => false,\r\n  hasMinRole: () => false,\r\n  hasProjectAccess: () => false,\r\n  setUser: () => {},\r\n});\r\n\r\nexport function UserProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function loadUser() {\r\n      try {\r\n        // Check if logged in via auth-7000\r\n        if (!isLoggedIn()) {\r\n          console.log('Not logged in, redirecting to auth-7000');\r\n          redirectToLogin();\r\n          return;\r\n        }\r\n\r\n        // First try to get user from dev_user cookie (set by auth-7000)\r\n        const devUserCookie = getDevUser();\r\n        if (devUserCookie) {\r\n          // Map auth-7000 role to our UserRole type\r\n          const roleName = (devUserCookie.role || 'developer').toLowerCase();\r\n          const validRoles: UserRole[] = ['superadmin', 'admin', 'lead', 'engineer', 'developer', 'support'];\r\n          const role: UserRole = validRoles.includes(roleName as UserRole)\r\n            ? (roleName as UserRole)\r\n            : 'developer';\r\n\r\n          setUser({\r\n            id: devUserCookie.id,\r\n            name: devUserCookie.name,\r\n            email: devUserCookie.email,\r\n            role,\r\n            assignedProjects: ALL_PRODUCTS, // Default to all for now\r\n            teamIds: [],\r\n          });\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Fall back to reading Gateway JWT from cookie\r\n        const accessToken = Cookies.get('accessToken');\r\n\r\n        if (!accessToken) {\r\n          // Not logged in - redirect to auth\r\n          console.log('No access token found, redirecting to login');\r\n          redirectToLogin();\r\n          return;\r\n        }\r\n\r\n        // Decode JWT (base64) to get payload\r\n        // JWT format: header.payload.signature\r\n        const parts = accessToken.split('.');\r\n        if (parts.length !== 3) {\r\n          console.error('Invalid JWT format');\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n\r\n        const payload = JSON.parse(atob(parts[1]));\r\n        const { id: nextbidUserId, email, name, products, onboarding_completed } = payload;\r\n\r\n        // Check if user has dashboard access\r\n        if (!products || !products.includes('dashboard')) {\r\n          console.warn('User does not have dashboard access');\r\n          setUser(null);\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Fetch dev_users record for role/permissions\r\n        const { data: devUser, error } = await supabase\r\n          .from('dev_users')\r\n          .select('*')\r\n          .eq('nextbid_user_id', nextbidUserId)\r\n          .eq('status', 'active')\r\n          .single();\r\n\r\n        if (error || !devUser) {\r\n          console.warn('No dev_users record found for:', nextbidUserId);\r\n          // User has dashboard access in Gateway but no dev_users record yet\r\n          // Create a minimal user with default permissions\r\n          setUser({\r\n            id: nextbidUserId,\r\n            name: name || email.split('@')[0],\r\n            email,\r\n            role: 'developer',\r\n            assignedProjects: [],\r\n            teamIds: [],\r\n          });\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Map database role to UserRole type\r\n        const roleName = (devUser.role || 'developer').toLowerCase();\r\n        const validRoles: UserRole[] = ['superadmin', 'admin', 'lead', 'engineer', 'developer', 'support'];\r\n        const role: UserRole = validRoles.includes(roleName as UserRole)\r\n          ? (roleName as UserRole)\r\n          : 'developer';\r\n\r\n        // Parse permissions array as projects (for backward compatibility)\r\n        const permissions = (devUser.permissions || []) as string[];\r\n        const validProjects = permissions.filter(p =>\r\n          ALL_PRODUCTS.includes(p as ProductId)\r\n        ) as ProductId[];\r\n\r\n        setUser({\r\n          id: devUser.id,\r\n          name: name || email.split('@')[0],\r\n          email,\r\n          role,\r\n          assignedProjects: validProjects.length > 0 ? validProjects : ALL_PRODUCTS, // Default to all for now\r\n          teamIds: [],\r\n        });\r\n      } catch (err) {\r\n        console.error('Error loading user:', err);\r\n        // Redirect to login on error\r\n        redirectToLogin();\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n\r\n    loadUser();\r\n\r\n    // Re-check user when window regains focus (in case token changed)\r\n    const handleFocus = () => loadUser();\r\n    window.addEventListener('focus', handleFocus);\r\n\r\n    return () => window.removeEventListener('focus', handleFocus);\r\n  }, []);\r\n\r\n  const permissions = user ? ROLE_PERMISSIONS[user.role] : defaultPermissions;\r\n\r\n  const hasPermission = (permission: keyof Permissions): boolean => {\r\n    if (!user) return false;\r\n    const value = permissions[permission];\r\n    return typeof value === 'boolean' ? value : false;\r\n  };\r\n\r\n  const hasMinRole = (minRole: UserRole): boolean => {\r\n    if (!user) return false;\r\n    const userLevel = ROLE_PERMISSIONS[user.role].level;\r\n    const requiredLevel = ROLE_PERMISSIONS[minRole].level;\r\n    return userLevel >= requiredLevel;\r\n  };\r\n\r\n  const hasProjectAccess = (projectId: ProductId): boolean => {\r\n    if (!user) return false;\r\n    // Superadmin has access to all projects\r\n    if (ROLE_PERMISSIONS[user.role].hasAllProjects) return true;\r\n    return user.assignedProjects.includes(projectId);\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user, isLoading, permissions, hasPermission, hasMinRole, hasProjectAccess, setUser }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useUser() {\r\n  const context = useContext(UserContext);\r\n  if (!context) {\r\n    throw new Error('useUser must be used within a UserProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\n// Helper hook for permission-based UI rendering\r\nexport function usePermission(permission: keyof Permissions): boolean {\r\n  const { hasPermission } = useUser();\r\n  return hasPermission(permission);\r\n}\r\n\r\n// Helper hook for role-based UI rendering\r\nexport function useMinRole(minRole: UserRole): boolean {\r\n  const { hasMinRole } = useUser();\r\n  return hasMinRole(minRole);\r\n}\r\n\r\n// Helper hook for project access UI rendering\r\nexport function useProjectAccess(projectId: ProductId): boolean {\r\n  const { hasProjectAccess } = useUser();\r\n  return hasProjectAccess(projectId);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3775, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/app/settings/RoleGate.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { ReactNode } from 'react';\r\nimport { useUser, UserRole, Permissions } from './UserContext';\r\n\r\ninterface RoleGateProps {\r\n  children: ReactNode;\r\n  minRole?: UserRole;\r\n  permission?: keyof Permissions;\r\n  fallback?: ReactNode;\r\n}\r\n\r\n// Show content only if user has minimum role or permission\r\nexport function RoleGate({ children, minRole, permission, fallback = null }: RoleGateProps) {\r\n  const { hasMinRole, hasPermission, isLoading } = useUser();\r\n\r\n  if (isLoading) {\r\n    return null;\r\n  }\r\n\r\n  // Check permission if specified\r\n  if (permission && !hasPermission(permission)) {\r\n    return <>{fallback}</>;\r\n  }\r\n\r\n  // Check minimum role if specified\r\n  if (minRole && !hasMinRole(minRole)) {\r\n    return <>{fallback}</>;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n\r\n// Disable buttons/interactions if user doesn't have permission\r\ninterface PermissionButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  permission?: keyof Permissions;\r\n  minRole?: UserRole;\r\n  children: ReactNode;\r\n}\r\n\r\nexport function PermissionButton({ permission, minRole, children, className, ...props }: PermissionButtonProps) {\r\n  const { hasMinRole, hasPermission, isLoading } = useUser();\r\n\r\n  const hasAccess = !isLoading && (\r\n    (!permission || hasPermission(permission)) &&\r\n    (!minRole || hasMinRole(minRole))\r\n  );\r\n\r\n  if (!hasAccess) {\r\n    return (\r\n      <button\r\n        {...props}\r\n        disabled\r\n        className={`${className} opacity-50 cursor-not-allowed`}\r\n        title=\"You don't have permission to perform this action\"\r\n      >\r\n        {children}\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button {...props} className={className}>\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\n// Show access denied message\r\ninterface AccessDeniedProps {\r\n  message?: string;\r\n  requiredRole?: UserRole;\r\n}\r\n\r\nexport function AccessDenied({ message, requiredRole }: AccessDeniedProps) {\r\n  return (\r\n    <div className=\"bg-red-500/10 border border-red-500/30 rounded-xl p-8 text-center\">\r\n      <div className=\"text-4xl mb-4\">üîí</div>\r\n      <h3 className=\"text-xl font-semibold text-white mb-2\">Access Denied</h3>\r\n      <p className=\"text-gray-400\">\r\n        {message || `You need ${requiredRole || 'higher'} access to view this content.`}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Show role badge\r\ninterface RoleBadgeProps {\r\n  role: UserRole;\r\n}\r\n\r\nexport function RoleBadge({ role }: RoleBadgeProps) {\r\n  const colors: Record<UserRole, string> = {\r\n    superadmin: 'bg-amber-500/20 text-amber-400 border-amber-500/30',\r\n    admin: 'bg-red-500/20 text-red-400 border-red-500/30',\r\n    lead: 'bg-purple-500/20 text-purple-400 border-purple-500/30',\r\n    engineer: 'bg-blue-500/20 text-blue-400 border-blue-500/30',\r\n    developer: 'bg-green-500/20 text-green-400 border-green-500/30',\r\n    support: 'bg-cyan-500/20 text-cyan-400 border-cyan-500/30',\r\n  };\r\n\r\n  return (\r\n    <span className={`px-2 py-1 text-xs font-medium rounded border ${colors[role]}`}>\r\n      {role.charAt(0).toUpperCase() + role.slice(1)}\r\n    </span>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAHA;;;AAaO,SAAS,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW,IAAI,EAAiB;IACxF,MAAM,EAAE,UAAU,EAAE,aAAa,EAAE,SAAS,EAAE,GAAG,IAAA,2LAAO;IAExD,IAAI,WAAW;QACb,OAAO;IACT;IAEA,gCAAgC;IAChC,IAAI,cAAc,CAAC,cAAc,aAAa;QAC5C,qBAAO;sBAAG;;IACZ;IAEA,kCAAkC;IAClC,IAAI,WAAW,CAAC,WAAW,UAAU;QACnC,qBAAO;sBAAG;;IACZ;IAEA,qBAAO;kBAAG;;AACZ;AASO,SAAS,iBAAiB,EAAE,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAA8B;IAC5G,MAAM,EAAE,UAAU,EAAE,aAAa,EAAE,SAAS,EAAE,GAAG,IAAA,2LAAO;IAExD,MAAM,YAAY,CAAC,aACjB,CAAC,CAAC,cAAc,cAAc,WAAW,KACzC,CAAC,CAAC,WAAW,WAAW,QAAQ;IAGlC,IAAI,CAAC,WAAW;QACd,qBACE,wRAAC;YACE,GAAG,KAAK;YACT,QAAQ;YACR,WAAW,GAAG,UAAU,8BAA8B,CAAC;YACvD,OAAM;sBAEL;;;;;;IAGP;IAEA,qBACE,wRAAC;QAAQ,GAAG,KAAK;QAAE,WAAW;kBAC3B;;;;;;AAGP;AAQO,SAAS,aAAa,EAAE,OAAO,EAAE,YAAY,EAAqB;IACvE,qBACE,wRAAC;QAAI,WAAU;;0BACb,wRAAC;gBAAI,WAAU;0BAAgB;;;;;;0BAC/B,wRAAC;gBAAG,WAAU;0BAAwC;;;;;;0BACtD,wRAAC;gBAAE,WAAU;0BACV,WAAW,CAAC,SAAS,EAAE,gBAAgB,SAAS,6BAA6B,CAAC;;;;;;;;;;;;AAIvF;AAOO,SAAS,UAAU,EAAE,IAAI,EAAkB;IAChD,MAAM,SAAmC;QACvC,YAAY;QACZ,OAAO;QACP,MAAM;QACN,UAAU;QACV,WAAW;QACX,SAAS;IACX;IAEA,qBACE,wRAAC;QAAK,WAAW,CAAC,6CAA6C,EAAE,MAAM,CAAC,KAAK,EAAE;kBAC5E,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC;;;;;;AAGjD"}},
    {"offset": {"line": 3894, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/components/ServerDetailPanel.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { RoleGate } from '@/app/settings/RoleGate';\r\nimport { useUser } from '@/app/settings/UserContext';\r\nimport { StatusDot, ServerHealth, SlotStatus, ProjectStatus, WorkerStatus } from './ServerStatusIndicator';\r\n\r\ninterface ServerDetailPanelProps {\r\n  project: ProjectStatus;\r\n  slot?: SlotStatus;\r\n  onClose: () => void;\r\n  onReboot?: (target: 'all' | 'main' | number) => Promise<void>;\r\n  onServerAction?: (action: 'start' | 'restart' | 'stop', port: string) => Promise<void>;\r\n}\r\n\r\n// Generate default workers for a slot (used when slot is offline/no data)\r\n// Port format: 3[Droplet][Worker][SlotId] - e.g., 31006 = Droplet 1, Main (0), Slot 06\r\n// (Main)Engine / (W1)Discovery / (W2)Scope of Work / (W3)Full Report / (W4)Proposal\r\nconst getDefaultWorkers = (slotId: string, status: 'online' | 'offline' | 'error' = 'offline'): WorkerStatus[] => [\r\n  { port: parseInt(`310${slotId}`), name: 'Engine', status },\r\n  { port: parseInt(`311${slotId}`), name: 'Discovery', status },\r\n  { port: parseInt(`312${slotId}`), name: 'Scope of Work', status },\r\n  { port: parseInt(`313${slotId}`), name: 'Full Report', status },\r\n  { port: parseInt(`314${slotId}`), name: 'Proposal', status },\r\n];\r\n\r\n// Get workers for a slot - use real data if available, otherwise generate defaults\r\nconst getSlotWorkers = (slot: SlotStatus): WorkerStatus[] => {\r\n  // If slot has real worker data from API, use it\r\n  if (slot.workers && slot.workers.length > 0) {\r\n    return slot.workers;\r\n  }\r\n  // Otherwise generate default workers with offline status\r\n  return getDefaultWorkers(slot.slotId, 'offline');\r\n};\r\n\r\nexport default function ServerDetailPanel({ project, slot, onClose, onReboot, onServerAction }: ServerDetailPanelProps) {\r\n  const { hasPermission } = useUser();\r\n  const [activeTab, setActiveTab] = useState<'health' | 'logs'>('health');\r\n  const [logText, setLogText] = useState<string>('');\r\n  const [logLoading, setLogLoading] = useState(false);\r\n  const [rebooting, setRebooting] = useState<string | null>(null);\r\n  const [serverActionLoading, setServerActionLoading] = useState<string | null>(null);\r\n  const [autoScroll, setAutoScroll] = useState(true);\r\n  const logContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Fetch real logs from patcher API\r\n  const fetchLogs = async () => {\r\n    if (!slot) return;\r\n    setLogLoading(true);\r\n    try {\r\n      const encodedTradeline = encodeURIComponent(slot.tradeline);\r\n      console.log('Fetching logs for tradeline:', slot.tradeline, 'encoded:', encodedTradeline);\r\n      const res = await fetch(`/api/patcher/server/logs/${encodedTradeline}?lines=50`);\r\n      const data = await res.json();\r\n      console.log('Logs response:', data);\r\n      if (data.success && data.logs) {\r\n        setLogText(data.logs);\r\n      } else {\r\n        setLogText(`Error: ${data.error || 'Failed to fetch logs'}\\n\\nTradeline: ${slot.tradeline}\\nPort: ${slot.mainPort}\\nProcess: ${data.process || 'unknown'}`);\r\n      }\r\n    } catch (error) {\r\n      setLogText('Error fetching logs: ' + (error as Error).message);\r\n    } finally {\r\n      setLogLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  // Auto-scroll logs\r\n  useEffect(() => {\r\n    if (autoScroll && logContainerRef.current) {\r\n      logContainerRef.current.scrollTop = logContainerRef.current.scrollHeight;\r\n    }\r\n  }, [logText, autoScroll]);\r\n\r\n\r\n  const workers = slot ? getSlotWorkers(slot) : [];\r\n\r\n  const handleReboot = async (target: 'all' | 'main' | number) => {\r\n    const confirmMsg = target === 'all'\r\n      ? `Reboot ALL workers for ${slot?.tradeline || project.name}?`\r\n      : target === 'main'\r\n      ? `Reboot main server for ${slot?.tradeline || project.name}?`\r\n      : `Reboot worker on port ${target}?`;\r\n\r\n    if (!confirm(confirmMsg)) return;\r\n\r\n    setRebooting(target.toString());\r\n    try {\r\n      await onReboot?.(target);\r\n      // Button stays in \"Rebooting...\" state for a few seconds\r\n      // Health will update via the parent's polling\r\n      setTimeout(() => setRebooting(null), 5000);\r\n    } catch (error) {\r\n      setRebooting(null);\r\n    }\r\n  };\r\n\r\n  const handleServerAction = async (action: 'start' | 'restart' | 'stop') => {\r\n    if (!slot) return;\r\n\r\n    const confirmMessages: Record<string, string> = {\r\n      'start': `Start all workers for port ${slot.mainPort}?`,\r\n      'restart': `Restart all workers for port ${slot.mainPort}? This will briefly interrupt service.`,\r\n      'stop': `Stop all workers for port ${slot.mainPort}? Service will go offline.`,\r\n    };\r\n\r\n    if (!confirm(confirmMessages[action])) return;\r\n\r\n    setServerActionLoading(action);\r\n    try {\r\n      await onServerAction?.(action, slot.mainPort.toString());\r\n      setTimeout(() => {\r\n        setServerActionLoading(null);\r\n        window.location.reload();\r\n      }, 2000);\r\n    } catch (error) {\r\n      setServerActionLoading(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop - click to close (starts after sidebar width) */}\r\n      <div\r\n        className=\"fixed top-14 bottom-0 left-64 right-0 z-30\"\r\n        onClick={onClose}\r\n      />\r\n      <div className=\"fixed top-14 bottom-0 left-64 w-[480px] bg-gray-900 border-l border-gray-700 z-40 flex flex-col\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-700\">\r\n        <div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <StatusDot health={slot?.health || project.health} size=\"md\" />\r\n            <h3 className=\"text-lg font-semibold text-white\">\r\n              {slot ? `${slot.tradeline} (Slot ${slot.slotId})` : project.name}\r\n            </h3>\r\n          </div>\r\n          <div className=\"text-sm text-gray-400 mt-1\">\r\n            {slot ? `Port ${slot.mainPort} + workers` : `Patcher ${project.patcherPort}`}\r\n          </div>\r\n        </div>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"text-gray-400 hover:text-white text-2xl leading-none\"\r\n        >\r\n          &times;\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex border-b border-gray-700\">\r\n        <button\r\n          onClick={() => setActiveTab('health')}\r\n          className={`flex-1 px-4 py-2 text-sm font-medium transition-colors ${\r\n            activeTab === 'health'\r\n              ? 'text-white bg-gray-700'\r\n              : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n          }`}\r\n        >\r\n          Health\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('logs')}\r\n          className={`flex-1 px-4 py-2 text-sm font-medium transition-colors ${\r\n            activeTab === 'logs'\r\n              ? 'text-white bg-gray-700'\r\n              : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n          }`}\r\n        >\r\n          Logs\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <div className=\"flex-1 overflow-hidden\">\r\n        {/* Health Tab */}\r\n        {activeTab === 'health' && (\r\n          <div className=\"p-4 space-y-4 h-full overflow-y-auto\">\r\n            {/* Overall Health */}\r\n            <div className={`rounded-xl p-4 border ${\r\n              (slot?.health || project.health) === 'healthy' ? 'bg-green-500/10 border-green-500/30' :\r\n              (slot?.health || project.health) === 'degraded' ? 'bg-yellow-500/10 border-yellow-500/30' :\r\n              'bg-red-500/10 border-red-500/30'\r\n            }`}>\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <div className=\"text-sm text-gray-400 uppercase tracking-wider\">Overall Health</div>\r\n                  <div className={`text-2xl font-bold capitalize ${\r\n                    (slot?.health || project.health) === 'healthy' ? 'text-green-400' :\r\n                    (slot?.health || project.health) === 'degraded' ? 'text-yellow-400' :\r\n                    'text-red-400'\r\n                  }`}>\r\n                    {slot?.health || project.health}\r\n                  </div>\r\n                </div>\r\n                <div className={`text-5xl ${\r\n                  (slot?.health || project.health) === 'healthy' ? 'text-green-400' :\r\n                  (slot?.health || project.health) === 'degraded' ? 'text-yellow-400' :\r\n                  'text-red-400'\r\n                }`}>\r\n                  {(slot?.health || project.health) === 'healthy' ? '‚úì' :\r\n                   (slot?.health || project.health) === 'degraded' ? '‚ö†' : '‚úó'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Workers Status */}\r\n            {slot && (\r\n              <div className=\"bg-gray-800 border border-gray-700 rounded-xl\">\r\n                <div className=\"px-4 py-3 border-b border-gray-700 flex items-center justify-between\">\r\n                  <h4 className=\"font-medium text-white\">Workers ({workers.length})</h4>\r\n                  <RoleGate permission=\"canPushToTest\">\r\n                    <button\r\n                      onClick={() => handleReboot('all')}\r\n                      disabled={rebooting === 'all'}\r\n                      className=\"px-3 py-1 text-xs font-semibold rounded bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500 hover:text-white transition-colors disabled:opacity-50\"\r\n                    >\r\n                      {rebooting === 'all' ? 'Rebooting...' : 'Reboot All'}\r\n                    </button>\r\n                  </RoleGate>\r\n                </div>\r\n                <div className=\"divide-y divide-gray-700\">\r\n                  {workers.map((worker) => (\r\n                    <div key={worker.port} className=\"px-4 py-3 flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className={`w-2.5 h-2.5 rounded-full ${\r\n                          worker.status === 'online' ? 'bg-green-500' :\r\n                          worker.status === 'error' ? 'bg-yellow-500' :\r\n                          'bg-red-500'\r\n                        }`} />\r\n                        <div>\r\n                          <div className=\"text-sm font-medium text-white capitalize\">{worker.name}</div>\r\n                          <div className=\"text-xs text-gray-500\">Port {worker.port}</div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"text-right\">\r\n                          <div className={`text-xs ${\r\n                            worker.status === 'online' ? 'text-green-400' :\r\n                            worker.status === 'error' ? 'text-yellow-400' :\r\n                            'text-red-400'\r\n                          }`}>\r\n                            {worker.status === 'online' ? 'Online' : worker.status === 'error' ? 'Error' : 'Offline'}\r\n                          </div>\r\n                          {worker.lastPing && (\r\n                            <div className=\"text-xs text-gray-600\">{worker.lastPing}</div>\r\n                          )}\r\n                          {worker.errorCount && worker.errorCount > 0 && (\r\n                            <div className=\"text-xs text-red-400\">{worker.errorCount} errors</div>\r\n                          )}\r\n                        </div>\r\n                        <RoleGate permission=\"canPushToTest\">\r\n                          <button\r\n                            onClick={() => handleReboot(worker.port)}\r\n                            disabled={rebooting === worker.port.toString()}\r\n                            className=\"px-2 py-1 text-xs rounded bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors disabled:opacity-50\"\r\n                          >\r\n                            {rebooting === worker.port.toString() ? '...' : 'Reboot'}\r\n                          </button>\r\n                        </RoleGate>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Quick Metrics */}\r\n            {slot && (\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <div className=\"bg-gray-800 border border-gray-700 rounded-xl p-4\">\r\n                  <div className=\"text-xs text-gray-500 uppercase tracking-wider\">CPU</div>\r\n                  <div className=\"text-2xl font-bold text-white mt-1\">{slot.cpu || 0}%</div>\r\n                  <div className=\"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden\">\r\n                    <div\r\n                      className={`h-full rounded-full ${\r\n                        (slot.cpu || 0) > 80 ? 'bg-red-500' :\r\n                        (slot.cpu || 0) > 60 ? 'bg-yellow-500' :\r\n                        'bg-green-500'\r\n                      }`}\r\n                      style={{ width: `${slot.cpu || 0}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-gray-800 border border-gray-700 rounded-xl p-4\">\r\n                  <div className=\"text-xs text-gray-500 uppercase tracking-wider\">Memory</div>\r\n                  <div className=\"text-2xl font-bold text-white mt-1\">{slot.memory || 0}%</div>\r\n                  <div className=\"mt-2 h-2 bg-gray-700 rounded-full overflow-hidden\">\r\n                    <div\r\n                      className={`h-full rounded-full ${\r\n                        (slot.memory || 0) > 80 ? 'bg-red-500' :\r\n                        (slot.memory || 0) > 60 ? 'bg-yellow-500' :\r\n                        'bg-green-500'\r\n                      }`}\r\n                      style={{ width: `${slot.memory || 0}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Server Actions */}\r\n            {slot && (\r\n              <div className=\"grid grid-cols-3 gap-3 mt-4\">\r\n                <button\r\n                  onClick={() => handleServerAction('start')}\r\n                  disabled={serverActionLoading !== null}\r\n                  className=\"py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-500 transition-colors disabled:opacity-50\"\r\n                >\r\n                  {serverActionLoading === 'start' ? 'Starting...' : 'Start'}\r\n                </button>\r\n                <button\r\n                  onClick={() => handleServerAction('restart')}\r\n                  disabled={serverActionLoading !== null}\r\n                  className=\"py-3 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-500 transition-colors disabled:opacity-50\"\r\n                >\r\n                  {serverActionLoading === 'restart' ? 'Restarting...' : 'Restart'}\r\n                </button>\r\n                <button\r\n                  onClick={() => handleServerAction('stop')}\r\n                  disabled={serverActionLoading !== null}\r\n                  className=\"py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-500 transition-colors disabled:opacity-50\"\r\n                >\r\n                  {serverActionLoading === 'stop' ? 'Stopping...' : 'Stop'}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Logs Tab */}\r\n        {activeTab === 'logs' && (\r\n          <div className=\"h-full flex flex-col\">\r\n            {/* Logs Controls */}\r\n            <div className=\"flex items-center justify-between px-4 py-2 border-b border-gray-700 bg-gray-800/50\">\r\n              <div className=\"text-sm text-gray-400\">\r\n                PM2 Logs - nextbid-{slot?.mainPort}\r\n              </div>\r\n              <button\r\n                onClick={fetchLogs}\r\n                disabled={logLoading}\r\n                className=\"px-3 py-1.5 text-xs bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors disabled:opacity-50\"\r\n              >\r\n                {logLoading ? 'Loading...' : 'Get Last 50 Lines'}\r\n              </button>\r\n            </div>\r\n\r\n            {/* Logs */}\r\n            <div ref={logContainerRef} className=\"flex-1 overflow-y-auto p-3 font-mono text-xs bg-black/30\">\r\n              {logLoading ? (\r\n                <div className=\"text-gray-500\">Loading logs...</div>\r\n              ) : logText ? (\r\n                <pre className=\"text-gray-300 whitespace-pre-wrap\">{logText}</pre>\r\n              ) : (\r\n                <div className=\"text-gray-500 text-center py-8\">\r\n                  <p>Click \"Get Last 50 Lines\" to fetch PM2 logs</p>\r\n                  <p className=\"text-gray-600 mt-2 text-xs\">Requires PM2 process to be running on server</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4589, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/components/Sidebar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname, useSearchParams } from 'next/navigation';\r\nimport { User, Users, Calendar, CalendarCheck, AlertCircle, ChevronDown, ChevronRight } from 'lucide-react';\r\nimport ServerStatusIndicator, { ProjectStatus, SlotStatus } from './ServerStatusIndicator';\r\nimport ServerDetailPanel from './ServerDetailPanel';\r\nimport { ProductionStatusContext } from '@/app/layout';\r\n\r\n// Mock current user - TODO: Get from auth context\r\nconst currentUser = {\r\n  id: 'user-1',\r\n  name: 'Michael',\r\n  role: 'admin', // 'admin' | 'lead' | 'developer' | 'engineer'\r\n  teams: ['dev-team', 'frontend-team'] // Teams this user belongs to\r\n};\r\n\r\n// Mock teams data - TODO: Load from dev_teams table\r\nconst allTeams = [\r\n  { id: 'dev-team', name: 'Dev Team', color: '#10B981', memberCount: 5 },\r\n  { id: 'frontend-team', name: 'Frontend', color: '#3B82F6', memberCount: 3 },\r\n  { id: 'backend-team', name: 'Backend', color: '#8B5CF6', memberCount: 4 },\r\n  { id: 'support-team', name: 'Support', color: '#F59E0B', memberCount: 2 },\r\n];\r\n\r\n// Mock team members - TODO: Load from dev_team_members table\r\nconst allMembers = [\r\n  { id: '1', name: 'Michael', role: 'Lead Developer', color: '#3B82F6', teams: ['dev-team', 'frontend-team'] },\r\n  { id: '2', name: 'Sarah', role: 'Frontend Dev', color: '#EC4899', teams: ['frontend-team'] },\r\n  { id: '3', name: 'John', role: 'Backend Dev', color: '#10B981', teams: ['backend-team', 'dev-team'] },\r\n  { id: '4', name: 'Emily', role: 'Full Stack', color: '#8B5CF6', teams: ['dev-team'] },\r\n  { id: '5', name: 'Alex', role: 'Support Lead', color: '#F59E0B', teams: ['support-team'] },\r\n  { id: '6', name: 'Chris', role: 'DevOps', color: '#06B6D4', teams: ['backend-team'] },\r\n  { id: '7', name: 'Taylor', role: 'QA Engineer', color: '#EF4444', teams: ['dev-team'] },\r\n  { id: '8', name: 'Jordan', role: 'UI Designer', color: '#F472B6', teams: ['frontend-team'] },\r\n  { id: '9', name: 'Casey', role: 'Junior Dev', color: '#84CC16', teams: ['dev-team', 'frontend-team'] },\r\n];\r\n\r\nexport default function Sidebar() {\r\n  const pathname = usePathname();\r\n  const searchParams = useSearchParams();\r\n  const isCalendarPage = pathname?.startsWith('/calendar');\r\n  const isDevToolsPage = pathname?.startsWith('/dev-controls');\r\n  const calendarMode = searchParams?.get('mode') || 'my';\r\n  const selectedMemberId = searchParams?.get('member');\r\n  const selectedTeamId = searchParams?.get('team');\r\n\r\n  // Collapsible states - showServers comes from shared context (toggled via navbar)\r\n  const { showServers, setShowServers } = useContext(ProductionStatusContext);\r\n  const [showOverview, setShowOverview] = useState(true);\r\n  const [expandedTeams, setExpandedTeams] = useState<string[]>([]);\r\n\r\n  // Server detail panel state\r\n  const [selectedProject, setSelectedProject] = useState<ProjectStatus | null>(null);\r\n  const [selectedSlot, setSelectedSlot] = useState<SlotStatus | null>(null);\r\n  const [showDetailPanel, setShowDetailPanel] = useState(false);\r\n\r\n  // Auto-collapse servers on calendar page, auto-expand on other pages\r\n  useEffect(() => {\r\n    setShowServers(!isCalendarPage);\r\n  }, [isCalendarPage]);\r\n\r\n  // Close detail panel when servers section is collapsed\r\n  useEffect(() => {\r\n    if (!showServers) {\r\n      handleCloseDetailPanel();\r\n    }\r\n  }, [showServers]);\r\n\r\n  // Check if user is admin/lead (can see all calendars)\r\n  const isAdminOrLead = currentUser.role === 'admin' || currentUser.role === 'lead';\r\n\r\n  // Filter teams based on role\r\n  const visibleTeams = isAdminOrLead\r\n    ? allTeams\r\n    : allTeams.filter(team => currentUser.teams.includes(team.id));\r\n\r\n  // Filter members based on role and selected team\r\n  const getVisibleMembers = (teamId?: string) => {\r\n    if (isAdminOrLead) {\r\n      return teamId\r\n        ? allMembers.filter(m => m.teams.includes(teamId))\r\n        : allMembers;\r\n    }\r\n    // Regular users only see members from their teams\r\n    return allMembers.filter(m =>\r\n      m.teams.some(t => currentUser.teams.includes(t)) &&\r\n      (!teamId || m.teams.includes(teamId))\r\n    );\r\n  };\r\n\r\n  const toggleTeam = (teamId: string) => {\r\n    setExpandedTeams(prev =>\r\n      prev.includes(teamId)\r\n        ? prev.filter(id => id !== teamId)\r\n        : [...prev, teamId]\r\n    );\r\n  };\r\n\r\n  const handleSelectProject = (project: ProjectStatus) => {\r\n    setSelectedProject(project);\r\n    setSelectedSlot(null);\r\n    setShowDetailPanel(true);\r\n  };\r\n\r\n  const handleSelectSlot = (project: ProjectStatus, slot: SlotStatus) => {\r\n    setSelectedProject(project);\r\n    setSelectedSlot(slot);\r\n    setShowDetailPanel(true);\r\n  };\r\n\r\n  const handleCloseDetailPanel = () => {\r\n    setShowDetailPanel(false);\r\n    setSelectedProject(null);\r\n    setSelectedSlot(null);\r\n  };\r\n\r\n  const handleReboot = async (target: 'all' | 'main' | number) => {\r\n    if (!selectedProject) return;\r\n\r\n    try {\r\n      const response = await fetch('/api/servers/reboot', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          projectId: selectedProject.id,\r\n          slotId: selectedSlot?.slotId,\r\n          tradeline: selectedSlot?.tradeline,\r\n          target,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        console.log('Reboot initiated:', data.message);\r\n      } else {\r\n        console.error('Reboot failed:', data.error);\r\n        alert(`Reboot failed: ${data.error}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Reboot request failed:', error);\r\n      alert('Reboot request failed - check console');\r\n    }\r\n  };\r\n\r\n  const handleServerAction = async (action: 'start' | 'restart' | 'stop', port: string) => {\r\n    try {\r\n      const endpoint = `/api/patcher/server/${action}/${port}`;\r\n      const response = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        console.log(`${action} initiated for port ${port}:`, data.message);\r\n      } else {\r\n        console.error(`${action} failed:`, data.error);\r\n        alert(`${action} failed: ${data.error}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(`${action} request failed:`, error);\r\n      alert(`${action} request failed - check console`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <aside className=\"w-64 bg-gray-900/50 border-r border-gray-700 flex flex-col h-full overflow-hidden\">\r\n        {/* Production Servers Section - Toggled via navbar button */}\r\n        {showServers && (\r\n          <div className=\"flex-shrink-0 px-2 py-4 border-b border-gray-700\">\r\n            <ServerStatusIndicator\r\n              onSelectProject={handleSelectProject}\r\n              onSelectSlot={handleSelectSlot}\r\n              selectedProjectId={selectedProject?.id}\r\n              selectedSlotId={selectedSlot?.slotId}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Credentials Buttons - Below servers */}\r\n        {showServers && (\r\n          <div className=\"px-2 py-2 space-y-1\">\r\n            <Link\r\n              href=\"/credentials\"\r\n              className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                pathname === '/credentials'\r\n                  ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30'\r\n                  : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n              }`}\r\n            >\r\n              <span>üìä</span>\r\n              <span>Overview & Alerts</span>\r\n            </Link>\r\n            <Link\r\n              href=\"/credentials/federal\"\r\n              className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                pathname?.startsWith('/credentials/')\r\n                  ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30'\r\n                  : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n              }`}\r\n            >\r\n              <span>üîë</span>\r\n              <span>Credentials</span>\r\n            </Link>\r\n            <Link\r\n              href=\"/session-logs\"\r\n              className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                pathname === '/session-logs'\r\n                  ? 'bg-cyan-500/20 text-cyan-400 border border-cyan-500/30'\r\n                  : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n              }`}\r\n            >\r\n              <span>üéØ</span>\r\n              <span>Session Logs</span>\r\n            </Link>\r\n            <Link\r\n              href=\"/project-management\"\r\n              className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                pathname?.startsWith('/project-management')\r\n                  ? 'bg-purple-500/20 text-purple-400 border border-purple-500/30'\r\n                  : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n              }`}\r\n            >\r\n              <span>üìÅ</span>\r\n              <span>Projects</span>\r\n            </Link>\r\n            <Link\r\n              href=\"/the-forge\"\r\n              className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                pathname?.startsWith('/the-forge')\r\n                  ? 'bg-orange-500/20 text-orange-400 border border-orange-500/30'\r\n                  : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n              }`}\r\n            >\r\n              <span>üî•</span>\r\n              <span>The Forge</span>\r\n            </Link>\r\n            <Link\r\n              href=\"/ai-team\"\r\n              className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                pathname?.startsWith('/ai-team')\r\n                  ? 'bg-green-500/20 text-green-400 border border-green-500/30'\r\n                  : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n              }`}\r\n            >\r\n              <span>ü§ñ</span>\r\n              <span>AI Team</span>\r\n            </Link>\r\n          </div>\r\n        )}\r\n\r\n        {/* Calendar Section - Scrollable independently */}\r\n        {isCalendarPage && (\r\n          <div className=\"border-t border-gray-700 flex-1 overflow-y-auto min-h-0\">\r\n            {/* Collapsible Today's Overview */}\r\n            <div className=\"bg-gray-800/50 border-b border-gray-700\">\r\n              <button\r\n                onClick={() => setShowOverview(!showOverview)}\r\n                className=\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800/50 transition-colors\"\r\n              >\r\n                <h3 className=\"text-xs font-semibold text-gray-400 uppercase\">Today's Overview</h3>\r\n                {showOverview ? (\r\n                  <ChevronDown className=\"w-4 h-4 text-gray-500\" />\r\n                ) : (\r\n                  <ChevronRight className=\"w-4 h-4 text-gray-500\" />\r\n                )}\r\n              </button>\r\n\r\n              {showOverview && (\r\n                <div className=\"px-4 pb-4\">\r\n                  <div className=\"grid grid-cols-2 gap-2\">\r\n                    <div className=\"bg-blue-500/10 rounded-lg p-3 border-l-4 border-blue-500\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <p className=\"text-2xl font-bold text-blue-400\">0</p>\r\n                          <p className=\"text-xs text-gray-400\">Events</p>\r\n                        </div>\r\n                        <CalendarCheck className=\"w-5 h-5 text-blue-500\" />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-purple-500/10 rounded-lg p-3 border-l-4 border-purple-500\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <p className=\"text-2xl font-bold text-purple-400\">0</p>\r\n                          <p className=\"text-xs text-gray-400\">Meetings</p>\r\n                        </div>\r\n                        <Users className=\"w-5 h-5 text-purple-500\" />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-orange-500/10 rounded-lg p-3 border-l-4 border-orange-500\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <p className=\"text-2xl font-bold text-orange-400\">0</p>\r\n                          <p className=\"text-xs text-gray-400\">Tasks</p>\r\n                        </div>\r\n                        <AlertCircle className=\"w-5 h-5 text-orange-500\" />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-green-500/10 rounded-lg p-3 border-l-4 border-green-500\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <p className=\"text-2xl font-bold text-green-400\">0</p>\r\n                          <p className=\"text-xs text-gray-400\">Time Off</p>\r\n                        </div>\r\n                        <Calendar className=\"w-5 h-5 text-green-500\" />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* My Calendar */}\r\n            <div className=\"border-b border-gray-700\">\r\n              <Link\r\n                href=\"/calendar?mode=my\"\r\n                className={`w-full flex items-center justify-between px-4 py-3 transition-all ${\r\n                  calendarMode === 'my'\r\n                    ? 'bg-purple-500/10 border-l-4 border-purple-500'\r\n                    : 'hover:bg-gray-800'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n                    calendarMode === 'my' ? 'bg-purple-500' : 'bg-gray-700'\r\n                  }`}>\r\n                    <User className={`w-5 h-5 ${calendarMode === 'my' ? 'text-white' : 'text-gray-400'}`} />\r\n                  </div>\r\n                  <div className=\"text-left\">\r\n                    <p className={`font-semibold ${calendarMode === 'my' ? 'text-purple-400' : 'text-gray-300'}`}>My Calendar</p>\r\n                    <p className=\"text-xs text-gray-500\">Personal tasks & meetings</p>\r\n                  </div>\r\n                </div>\r\n                {calendarMode === 'my' && (\r\n                  <div className=\"w-2 h-2 rounded-full bg-purple-500\"></div>\r\n                )}\r\n              </Link>\r\n            </div>\r\n\r\n            {/* Team Calendars */}\r\n            <div className=\"border-b border-gray-700\">\r\n              <Link\r\n                href=\"/calendar?mode=team\"\r\n                className={`w-full flex items-center justify-between px-4 py-3 transition-all ${\r\n                  calendarMode === 'team' && !selectedTeamId && !selectedMemberId\r\n                    ? 'bg-blue-500/10 border-l-4 border-blue-500'\r\n                    : 'hover:bg-gray-800'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n                    calendarMode === 'team' ? 'bg-blue-500' : 'bg-gray-700'\r\n                  }`}>\r\n                    <Users className={`w-5 h-5 ${calendarMode === 'team' ? 'text-white' : 'text-gray-400'}`} />\r\n                  </div>\r\n                  <div className=\"text-left\">\r\n                    <p className={`font-semibold ${calendarMode === 'team' ? 'text-blue-400' : 'text-gray-300'}`}>Team Calendars</p>\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      {isAdminOrLead ? 'All team schedules' : 'Your team schedules'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                {calendarMode === 'team' && !selectedTeamId && !selectedMemberId && (\r\n                  <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\r\n                )}\r\n              </Link>\r\n            </div>\r\n\r\n            {/* Teams & Members List - Only shown when team mode is selected */}\r\n            {calendarMode === 'team' && (\r\n              <div className=\"bg-blue-500/5\">\r\n                {/* Teams Section */}\r\n                <div className=\"px-4 py-3\">\r\n                  <h4 className=\"text-xs font-semibold text-gray-500 uppercase mb-2\">\r\n                    Teams ({visibleTeams.length})\r\n                  </h4>\r\n                  <div className=\"space-y-1\">\r\n                    {visibleTeams.map((team) => (\r\n                      <div key={team.id}>\r\n                        <button\r\n                          onClick={() => toggleTeam(team.id)}\r\n                          className={`w-full flex items-center justify-between p-2 rounded-lg transition-colors ${\r\n                            selectedTeamId === team.id\r\n                              ? 'bg-blue-600/20 border-l-2 border-blue-500'\r\n                              : 'bg-gray-800/50 hover:bg-gray-800'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex items-center space-x-3\">\r\n                            <div\r\n                              className=\"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold\"\r\n                              style={{ backgroundColor: team.color }}\r\n                            >\r\n                              {team.name.charAt(0)}\r\n                            </div>\r\n                            <div className=\"text-left\">\r\n                              <p className=\"text-sm font-medium text-white\">{team.name}</p>\r\n                              <p className=\"text-xs text-gray-500\">{team.memberCount} members</p>\r\n                            </div>\r\n                          </div>\r\n                          {expandedTeams.includes(team.id) ? (\r\n                            <ChevronDown className=\"w-4 h-4 text-gray-500\" />\r\n                          ) : (\r\n                            <ChevronRight className=\"w-4 h-4 text-gray-500\" />\r\n                          )}\r\n                        </button>\r\n\r\n                        {/* Team Members (expanded) */}\r\n                        {expandedTeams.includes(team.id) && (\r\n                          <div className=\"ml-4 mt-1 space-y-1\">\r\n                            {getVisibleMembers(team.id).map((member) => (\r\n                              <Link\r\n                                key={member.id}\r\n                                href={`/calendar?mode=team&team=${team.id}&member=${member.id}`}\r\n                                className={`flex items-center space-x-2 p-2 rounded-lg transition-colors ${\r\n                                  selectedMemberId === member.id\r\n                                    ? 'bg-blue-600/30'\r\n                                    : 'hover:bg-gray-800/50'\r\n                                }`}\r\n                              >\r\n                                <div\r\n                                  className=\"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold\"\r\n                                  style={{ backgroundColor: member.color }}\r\n                                >\r\n                                  {member.name.charAt(0)}\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                  <p className=\"text-xs font-medium text-white truncate\">{member.name}</p>\r\n                                  <p className=\"text-xs text-gray-500 truncate\">{member.role}</p>\r\n                                </div>\r\n                              </Link>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* All Individuals Section (Admin/Lead only) */}\r\n                {isAdminOrLead && (\r\n                  <div className=\"px-4 py-3 border-t border-gray-700/50\">\r\n                    <h4 className=\"text-xs font-semibold text-gray-500 uppercase mb-2\">\r\n                      All Individuals ({allMembers.length})\r\n                    </h4>\r\n                    <div className=\"space-y-1 max-h-48 overflow-y-auto\">\r\n                      {allMembers.map((member) => (\r\n                        <Link\r\n                          key={member.id}\r\n                          href={`/calendar?mode=team&member=${member.id}`}\r\n                          className={`flex items-center space-x-3 p-2 rounded-lg transition-colors ${\r\n                            selectedMemberId === member.id && !selectedTeamId\r\n                              ? 'bg-blue-600/30'\r\n                              : 'bg-gray-800/50 hover:bg-gray-800'\r\n                          }`}\r\n                        >\r\n                          <div\r\n                            className=\"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold\"\r\n                            style={{ backgroundColor: member.color }}\r\n                          >\r\n                            {member.name.charAt(0)}\r\n                          </div>\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <p className=\"text-sm font-medium text-white truncate\">{member.name}</p>\r\n                            <p className=\"text-xs text-gray-500 truncate\">{member.role}</p>\r\n                          </div>\r\n                        </Link>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Dev Tools Section - Only shown on dev-controls pages */}\r\n        {isDevToolsPage && (\r\n          <div className=\"border-t border-gray-700 p-4 flex-shrink-0 overflow-y-auto\">\r\n            <h3 className=\"text-xs uppercase tracking-wider text-gray-500 mb-3 px-3\">Studio Ops</h3>\r\n            <nav className=\"space-y-1\">\r\n              <SidebarLink\r\n                href=\"/dev-controls\"\r\n                icon=\"&#127968;\"\r\n                active={pathname === '/dev-controls'}\r\n              >\r\n                Console Home\r\n              </SidebarLink>\r\n              <SidebarLink\r\n                href=\"/dev-controls/releases\"\r\n                icon=\"&#128640;\"\r\n                active={pathname === '/dev-controls/releases'}\r\n              >\r\n                Push / Pull\r\n              </SidebarLink>\r\n              <SidebarLink\r\n                href=\"/dev-controls/analytics\"\r\n                icon=\"&#128202;\"\r\n                active={pathname?.startsWith('/dev-controls/analytics')}\r\n              >\r\n                Analytics\r\n              </SidebarLink>\r\n              <SidebarLink\r\n                href=\"/dev-controls/security\"\r\n                icon=\"&#128274;\"\r\n                active={pathname?.startsWith('/dev-controls/security')}\r\n              >\r\n                Security\r\n              </SidebarLink>\r\n            </nav>\r\n            <h3 className=\"text-xs uppercase tracking-wider text-gray-500 mt-4 mb-3 px-3\">Tools</h3>\r\n            <nav className=\"space-y-1\">\r\n              <SidebarLink\r\n                href=\"/dev-controls/deploy\"\r\n                icon=\"&#128640;\"\r\n                active={pathname === '/dev-controls/deploy'}\r\n              >\r\n                Deploy\r\n              </SidebarLink>\r\n              <SidebarLink\r\n                href=\"/dev-controls/git\"\r\n                icon=\"&#128230;\"\r\n                active={pathname === '/dev-controls/git'}\r\n              >\r\n                Git\r\n              </SidebarLink>\r\n              <SidebarLink\r\n                href=\"/dev-controls/ssh\"\r\n                icon=\"&#128187;\"\r\n                active={pathname === '/dev-controls/ssh'}\r\n              >\r\n                Terminal\r\n              </SidebarLink>\r\n              <SidebarLink\r\n                href=\"/dev-controls/logs\"\r\n                icon=\"&#128203;\"\r\n                active={pathname === '/dev-controls/logs'}\r\n              >\r\n                Logs\r\n              </SidebarLink>\r\n            </nav>\r\n          </div>\r\n        )}\r\n      </aside>\r\n\r\n      {/* Server Detail Panel - Slides in from right */}\r\n      {showDetailPanel && selectedProject && (\r\n        <ServerDetailPanel\r\n          project={selectedProject}\r\n          slot={selectedSlot || undefined}\r\n          onClose={handleCloseDetailPanel}\r\n          onReboot={handleReboot}\r\n          onServerAction={handleServerAction}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\n// Tradeline list for credentials dropdown\r\nconst TRADELINES = [\r\n  { name: 'security', displayName: 'Security', port: 31001 },\r\n  { name: 'administrative', displayName: 'Administrative', port: 31002 },\r\n  { name: 'facilities', displayName: 'Facilities', port: 31003 },\r\n  { name: 'logistics', displayName: 'Logistics', port: 31004 },\r\n  { name: 'electrical', displayName: 'Electrical', port: 31005 },\r\n  { name: 'lowvoltage', displayName: 'Low Voltage', port: 31006 },\r\n  { name: 'landscaping', displayName: 'Landscaping', port: 31007 },\r\n  { name: 'hvac', displayName: 'HVAC', port: 31008 },\r\n  { name: 'plumbing', displayName: 'Plumbing', port: 31009 },\r\n  { name: 'janitorial', displayName: 'Janitorial', port: 31010 },\r\n  { name: 'support', displayName: 'Support', port: 31011 },\r\n  { name: 'waste', displayName: 'Waste', port: 31012 },\r\n  { name: 'construction', displayName: 'Construction', port: 31013 },\r\n  { name: 'roofing', displayName: 'Roofing', port: 31014 },\r\n  { name: 'painting', displayName: 'Painting', port: 31015 },\r\n  { name: 'flooring', displayName: 'Flooring', port: 31016 },\r\n  { name: 'demolition', displayName: 'Demolition', port: 31017 },\r\n  { name: 'environmental', displayName: 'Environmental', port: 31018 },\r\n  { name: 'concrete', displayName: 'Concrete', port: 31019 },\r\n  { name: 'fencing', displayName: 'Fencing', port: 31020 },\r\n];\r\n\r\n// Categories for credential sources\r\nconst CREDENTIAL_CATEGORIES = [\r\n  { key: 'federal', label: 'Federal', icon: 'üèõÔ∏è', path: '/credentials/federal' },\r\n  { key: 'state', label: 'State', icon: 'üó∫Ô∏è', path: '/credentials/state' },\r\n  { key: 'local', label: 'Local', icon: 'üè¢', path: '/credentials/local' },\r\n  { key: 'municipal', label: 'Municipal', icon: '‚ö°', path: '/credentials/municipal' },\r\n  { key: 'other', label: 'Other', icon: 'üì¶', path: '/credentials/other' },\r\n];\r\n\r\nfunction CredentialsDropdown({ pathname }: { pathname: string | null }) {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [showTradelines, setShowTradelines] = useState(false);\r\n  const [editingTradeline, setEditingTradeline] = useState<string | null>(null);\r\n  const isActive = pathname?.startsWith('/credentials');\r\n  const isOverviewActive = pathname === '/credentials';\r\n\r\n  return (\r\n    <div className=\"px-2 py-2 space-y-1\">\r\n      {/* Credential Editor Modal */}\r\n      {editingTradeline && (\r\n        <CredentialEditorModal\r\n          tradeline={editingTradeline}\r\n          onClose={() => setEditingTradeline(null)}\r\n        />\r\n      )}\r\n\r\n      {/* Overview & Alerts - Standalone button */}\r\n      <Link\r\n        href=\"/credentials\"\r\n        className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n          isOverviewActive\r\n            ? 'bg-blue-500/20 text-blue-400 border border-blue-500/30'\r\n            : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n        }`}\r\n      >\r\n        <span>üìä</span>\r\n        <span>Overview & Alerts</span>\r\n      </Link>\r\n\r\n      {/* Credentials Dropdown - Header */}\r\n      <button\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n        className={`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n          isActive && !isOverviewActive\r\n            ? 'bg-gray-700 text-white'\r\n            : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n        }`}\r\n      >\r\n        <div className=\"flex items-center gap-2\">\r\n          <span>üîë</span>\r\n          <span>Credentials</span>\r\n        </div>\r\n        {isExpanded ? (\r\n          <ChevronDown className=\"w-4 h-4\" />\r\n        ) : (\r\n          <ChevronRight className=\"w-4 h-4\" />\r\n        )}\r\n      </button>\r\n\r\n      {/* Dropdown list */}\r\n      {isExpanded && (\r\n        <div className=\"ml-2 space-y-0.5\">\r\n          {/* Category Links */}\r\n          {CREDENTIAL_CATEGORIES.map((cat) => (\r\n            <Link\r\n              key={cat.key}\r\n              href={cat.path}\r\n              className={`flex items-center gap-2 px-3 py-1.5 rounded text-xs transition-colors ${\r\n                pathname === cat.path\r\n                  ? 'bg-blue-500/20 text-blue-400'\r\n                  : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n              }`}\r\n            >\r\n              <span>{cat.icon}</span>\r\n              <span>{cat.label}</span>\r\n            </Link>\r\n          ))}\r\n\r\n          {/* Tradelines Submenu */}\r\n          <div className=\"pt-1 mt-1 border-t border-gray-700/50\">\r\n            <button\r\n              onClick={() => setShowTradelines(!showTradelines)}\r\n              className=\"w-full flex items-center justify-between px-3 py-1.5 rounded text-xs text-gray-500 hover:text-white hover:bg-gray-800 transition-colors\"\r\n            >\r\n              <div className=\"flex items-center gap-2\">\r\n                <span>‚öôÔ∏è</span>\r\n                <span>Tradeline Settings</span>\r\n              </div>\r\n              {showTradelines ? (\r\n                <ChevronDown className=\"w-3 h-3\" />\r\n              ) : (\r\n                <ChevronRight className=\"w-3 h-3\" />\r\n              )}\r\n            </button>\r\n\r\n            {showTradelines && (\r\n              <div className=\"ml-4 mt-1 space-y-0.5 max-h-48 overflow-y-auto\">\r\n                {TRADELINES.map((t) => (\r\n                  <button\r\n                    key={t.name}\r\n                    onClick={() => setEditingTradeline(t.name)}\r\n                    className=\"block w-full text-left px-3 py-1 rounded text-xs transition-colors text-gray-500 hover:text-white hover:bg-gray-800\"\r\n                  >\r\n                    {t.displayName}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Inline Credential Editor Modal for sidebar\r\nfunction CredentialEditorModal({ tradeline, onClose }: { tradeline: string; onClose: () => void }) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [activeSection, setActiveSection] = useState('apis');\r\n  const [activeApiTab, setActiveApiTab] = useState('sam_gov');\r\n  const [showPasswords, setShowPasswords] = useState(false);\r\n  const [credentials, setCredentials] = useState<Record<string, Record<string, string>>>({});\r\n  const [naicsCodes, setNaicsCodes] = useState<string>('');\r\n  const [keywords, setKeywords] = useState<string>('');\r\n\r\n  const sections = [\r\n    { key: 'apis', label: 'API Keys' },\r\n    { key: 'naics', label: 'NAICS Codes' },\r\n    { key: 'keywords', label: 'Keywords' },\r\n  ];\r\n\r\n  const apiTypes = [\r\n    { key: 'sam_gov', label: 'SAM.gov', fields: [\r\n      { key: 'api_key', label: 'API Key', type: 'password', placeholder: 'Enter API key' },\r\n    ]},\r\n    { key: 'govwin', label: 'GovWin', fields: [\r\n      { key: 'username', label: 'Username', type: 'text', placeholder: 'Enter username' },\r\n      { key: 'password', label: 'Password', type: 'password', placeholder: 'Enter password' },\r\n    ]},\r\n    { key: 'planetbids', label: 'PlanetBids', fields: [\r\n      { key: 'username', label: 'Username', type: 'text', placeholder: 'Enter username' },\r\n      { key: 'password', label: 'Password', type: 'password', placeholder: 'Enter password' },\r\n    ]},\r\n    { key: 'bidnet', label: 'BidNet', fields: [\r\n      { key: 'username', label: 'Username', type: 'text', placeholder: 'Enter username' },\r\n      { key: 'password', label: 'Password', type: 'password', placeholder: 'Enter password' },\r\n    ]},\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [credRes, configRes] = await Promise.all([\r\n          fetch(`/api/patcher/credentials/${tradeline}`).catch(() => null),\r\n          fetch(`/api/patcher/config/${tradeline}`).catch(() => null),\r\n        ]);\r\n        if (credRes?.ok) {\r\n          const data = await credRes.json();\r\n          if (data.credentials) setCredentials(data.credentials);\r\n        }\r\n        if (configRes?.ok) {\r\n          const data = await configRes.json();\r\n          if (data.naics) setNaicsCodes(data.naics.join('\\n'));\r\n          if (data.keywords) setKeywords(data.keywords.join('\\n'));\r\n        }\r\n      } catch (e) {\r\n        setError((e as Error).message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [tradeline]);\r\n\r\n  const handleFieldChange = (typeKey: string, fieldKey: string, value: string) => {\r\n    setCredentials(prev => ({\r\n      ...prev,\r\n      [typeKey]: { ...(prev[typeKey] || {}), [fieldKey]: value },\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await fetch(`/api/patcher/credentials/${tradeline}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ credentials }),\r\n      });\r\n      await fetch(`/api/patcher/config/${tradeline}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          naics: naicsCodes.split('\\n').filter(Boolean),\r\n          keywords: keywords.split('\\n').filter(Boolean),\r\n        }),\r\n      });\r\n      onClose();\r\n    } catch (e) {\r\n      setError((e as Error).message);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const activeApiType = apiTypes.find(t => t.key === activeApiTab);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-8\">\r\n      <div className=\"bg-gray-900 border border-gray-700 rounded-xl w-full max-w-3xl max-h-[85vh] flex flex-col\">\r\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-700\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-white capitalize\">{tradeline} Settings</h3>\r\n            <p className=\"text-xs text-gray-500\">API keys, NAICS codes, and keywords</p>\r\n          </div>\r\n          <button onClick={onClose} className=\"text-gray-400 hover:text-white text-2xl\">&times;</button>\r\n        </div>\r\n\r\n        <div className=\"flex border-b border-gray-700 bg-gray-800/50\">\r\n          {sections.map(s => (\r\n            <button\r\n              key={s.key}\r\n              onClick={() => setActiveSection(s.key)}\r\n              className={`px-6 py-3 text-sm font-medium ${activeSection === s.key ? 'text-white bg-gray-700 border-b-2 border-blue-500' : 'text-gray-400 hover:text-white'}`}\r\n            >\r\n              {s.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"flex-1 overflow-auto p-6\">\r\n          {loading && <div className=\"text-gray-400 text-center py-8\">Loading...</div>}\r\n          {error && <div className=\"bg-red-500/15 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-4\">{error}</div>}\r\n\r\n          {!loading && activeSection === 'apis' && (\r\n            <div>\r\n              <div className=\"flex gap-2 mb-4\">\r\n                {apiTypes.map(t => (\r\n                  <button\r\n                    key={t.key}\r\n                    onClick={() => setActiveApiTab(t.key)}\r\n                    className={`px-3 py-1.5 text-xs font-medium rounded-lg ${activeApiTab === t.key ? 'bg-blue-500 text-white' : 'bg-gray-800 text-gray-400 border border-gray-700'}`}\r\n                  >\r\n                    {t.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              <label className=\"flex items-center gap-2 text-sm text-gray-400 mb-4\">\r\n                <input type=\"checkbox\" checked={showPasswords} onChange={e => setShowPasswords(e.target.checked)} className=\"rounded bg-gray-700\" />\r\n                Show passwords\r\n              </label>\r\n              {activeApiType?.fields.map(f => (\r\n                <div key={f.key} className=\"mb-4\">\r\n                  <label className=\"block text-sm text-gray-400 mb-2\">{f.label}</label>\r\n                  <input\r\n                    type={f.type === 'password' && !showPasswords ? 'password' : 'text'}\r\n                    value={credentials[activeApiTab]?.[f.key] || ''}\r\n                    onChange={e => handleFieldChange(activeApiTab, f.key, e.target.value)}\r\n                    placeholder={f.placeholder}\r\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white\"\r\n                  />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {!loading && activeSection === 'naics' && (\r\n            <div>\r\n              <p className=\"text-sm text-gray-400 mb-4\">Enter NAICS codes, one per line.</p>\r\n              <textarea\r\n                value={naicsCodes}\r\n                onChange={e => setNaicsCodes(e.target.value)}\r\n                rows={10}\r\n                className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white font-mono text-sm\"\r\n                placeholder=\"541330&#10;238210\"\r\n              />\r\n              <p className=\"text-xs text-gray-500 mt-2\">{naicsCodes.split('\\n').filter(Boolean).length} codes</p>\r\n            </div>\r\n          )}\r\n\r\n          {!loading && activeSection === 'keywords' && (\r\n            <div>\r\n              <p className=\"text-sm text-gray-400 mb-4\">Enter keywords, one per line.</p>\r\n              <textarea\r\n                value={keywords}\r\n                onChange={e => setKeywords(e.target.value)}\r\n                rows={10}\r\n                className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white font-mono text-sm\"\r\n                placeholder=\"fire alarm&#10;security system\"\r\n              />\r\n              <p className=\"text-xs text-gray-500 mt-2\">{keywords.split('\\n').filter(Boolean).length} keywords</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-3 px-6 py-4 border-t border-gray-700\">\r\n          <button onClick={onClose} className=\"px-4 py-2 text-sm text-gray-400 hover:text-white\">Cancel</button>\r\n          <button onClick={handleSave} disabled={saving} className=\"px-4 py-2 text-sm font-semibold bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50\">\r\n            {saving ? 'Saving...' : 'Save Changes'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SidebarLink({\r\n  href,\r\n  icon,\r\n  count,\r\n  description,\r\n  active,\r\n  children,\r\n}: {\r\n  href: string;\r\n  icon: string;\r\n  count?: number;\r\n  description?: string;\r\n  active: boolean;\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <Link\r\n      href={href}\r\n      className={`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${\r\n        active\r\n          ? 'bg-blue-500/20 text-blue-400'\r\n          : 'text-gray-400 hover:text-white hover:bg-gray-800'\r\n      }`}\r\n      title={description}\r\n    >\r\n      <span dangerouslySetInnerHTML={{ __html: icon }} />\r\n      <span className=\"flex-1 truncate\">{children}</span>\r\n      {count !== undefined && (\r\n        <span className={`text-xs px-2 py-0.5 rounded-full ${\r\n          active ? 'bg-blue-500 text-white' : 'bg-gray-700 text-gray-400'\r\n        }`}>\r\n          {count}\r\n        </span>\r\n      )}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6622, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/app/contexts/DeveloperContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { createContext, useContext, useState, useCallback, ReactNode } from 'react';\r\n\r\n// Developer team definitions with port ranges\r\nexport interface DeveloperTeam {\r\n  id: 'dev1' | 'dev2' | 'dev3';\r\n  label: string;\r\n  basePort: number;  // Base port for Claude terminal (5410, 5420, 5430)\r\n  portRange: string; // Display range (5410-5417, 5420-5427, 5430-5437)\r\n}\r\n\r\n// Kodiack AI Team member definitions for each dev slot\r\nexport interface AITeamMember {\r\n  name: string;\r\n  role: string;\r\n  portOffset: number; // Added to basePort (0=Claude, 1=Chad, 2=Jen, 3=Susan, 4=Clair, 5=Mike, 6=Tiffany, 7=Ryan)\r\n}\r\n\r\nexport const KODIACK_AI_TEAM: AITeamMember[] = [\r\n  { name: 'Claude', role: 'Lead Developer', portOffset: 0 },\r\n  { name: 'Chad', role: 'Transcription & Capture', portOffset: 1 },\r\n  { name: 'Jen', role: 'Scrubbing & Signal Extraction', portOffset: 2 },\r\n  { name: 'Susan', role: 'Classification & Sorting', portOffset: 3 },\r\n  { name: 'Clair', role: 'Conversion & Documentation', portOffset: 4 },\r\n  { name: 'Mike', role: 'QA Tester', portOffset: 5 },\r\n  { name: 'Tiffany', role: 'QA Tester', portOffset: 6 },\r\n  { name: 'Ryan', role: 'Roadmap & Prioritization', portOffset: 7 },\r\n];\r\n\r\nexport const DEVELOPER_TEAMS: DeveloperTeam[] = [\r\n  { id: 'dev1', label: 'Development Team 1', basePort: 5410, portRange: '5410-5417' },\r\n  { id: 'dev2', label: 'Development Team 2', basePort: 5420, portRange: '5420-5427' },\r\n  { id: 'dev3', label: 'Development Team 3', basePort: 5430, portRange: '5430-5437' },\r\n];\r\n\r\nexport type ConnectionStatus = 'disconnected' | 'connecting' | 'connected';\r\n\r\nexport interface TeamMemberStatus {\r\n  name: string;\r\n  port: number;\r\n  status: 'offline' | 'starting' | 'online' | 'error';\r\n}\r\n\r\ninterface DeveloperContextValue {\r\n  // Team selection\r\n  selectedTeam: DeveloperTeam;\r\n  setSelectedTeam: (team: DeveloperTeam) => void;\r\n  selectTeamById: (id: string) => void;\r\n\r\n  // Connection state\r\n  connectionStatus: ConnectionStatus;\r\n  teamStatuses: TeamMemberStatus[];\r\n  lockedUserId: string | null;\r\n  sessionId: string | null;\r\n\r\n  // Actions\r\n  connect: (userId: string) => Promise<void>;\r\n  disconnect: () => Promise<void>;\r\n}\r\n\r\nconst DeveloperContext = createContext<DeveloperContextValue>({\r\n  selectedTeam: DEVELOPER_TEAMS[0],\r\n  setSelectedTeam: () => {},\r\n  selectTeamById: () => {},\r\n  connectionStatus: 'disconnected',\r\n  teamStatuses: [],\r\n  lockedUserId: null,\r\n  sessionId: null,\r\n  connect: async () => {},\r\n  disconnect: async () => {},\r\n});\r\n\r\nexport function DeveloperProvider({ children }: { children: ReactNode }) {\r\n  const [selectedTeam, setSelectedTeam] = useState<DeveloperTeam>(DEVELOPER_TEAMS[0]);\r\n  const [connectionStatus, setConnectionStatus] = useState<ConnectionStatus>('disconnected');\r\n  const [teamStatuses, setTeamStatuses] = useState<TeamMemberStatus[]>([]);\r\n  const [lockedUserId, setLockedUserId] = useState<string | null>(null);\r\n  const [sessionId, setSessionId] = useState<string | null>(null);\r\n\r\n  const selectTeamById = (id: string) => {\r\n    // Can't change team while connected\r\n    if (connectionStatus === 'connected') return;\r\n\r\n    const team = DEVELOPER_TEAMS.find(t => t.id === id);\r\n    if (team) {\r\n      setSelectedTeam(team);\r\n    }\r\n  };\r\n\r\n  const connect = useCallback(async (userId: string) => {\r\n    if (connectionStatus !== 'disconnected') return;\r\n\r\n    setConnectionStatus('connecting');\r\n    setLockedUserId(userId);\r\n\r\n    // Initialize team member statuses\r\n    const initialStatuses: TeamMemberStatus[] = KODIACK_AI_TEAM.map(member => ({\r\n      name: member.name,\r\n      port: selectedTeam.basePort + member.portOffset,\r\n      status: 'starting',\r\n    }));\r\n    setTeamStatuses(initialStatuses);\r\n\r\n    try {\r\n      // Call API to start/connect AI team for this dev slot\r\n      const response = await fetch('/api/dev-session/connect', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          devSlot: selectedTeam.id,\r\n          basePort: selectedTeam.basePort,\r\n          userId,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setSessionId(data.sessionId);\r\n        setTeamStatuses(data.teamStatuses || initialStatuses.map(m => ({ ...m, status: 'online' })));\r\n        setConnectionStatus('connected');\r\n      } else {\r\n        throw new Error(data.error || 'Failed to connect');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to connect dev session:', error);\r\n      setConnectionStatus('disconnected');\r\n      setLockedUserId(null);\r\n      setTeamStatuses([]);\r\n    }\r\n  }, [connectionStatus, selectedTeam]);\r\n\r\n  const disconnect = useCallback(async () => {\r\n    if (connectionStatus !== 'connected') return;\r\n\r\n    try {\r\n      await fetch('/api/dev-session/disconnect', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          sessionId,\r\n          devSlot: selectedTeam.id,\r\n        }),\r\n      });\r\n    } catch (error) {\r\n      console.error('Error disconnecting:', error);\r\n    }\r\n\r\n    setConnectionStatus('disconnected');\r\n    setLockedUserId(null);\r\n    setSessionId(null);\r\n    setTeamStatuses([]);\r\n  }, [connectionStatus, sessionId, selectedTeam]);\r\n\r\n  return (\r\n    <DeveloperContext.Provider value={{\r\n      selectedTeam,\r\n      setSelectedTeam,\r\n      selectTeamById,\r\n      connectionStatus,\r\n      teamStatuses,\r\n      lockedUserId,\r\n      sessionId,\r\n      connect,\r\n      disconnect,\r\n    }}>\r\n      {children}\r\n    </DeveloperContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useDeveloper() {\r\n  const context = useContext(DeveloperContext);\r\n  if (!context) {\r\n    throw new Error('useDeveloper must be used within a DeveloperProvider');\r\n  }\r\n  return context;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6824, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Studio/kodiack-dashboard-5500/src/app/layout.tsx"],"sourcesContent":["'use client';\n\nimport { Geist, Geist_Mono } from \"next/font/google\";\nimport \"./globals.css\";\nimport Navigation from \"@/components/Navigation\";\nimport Sidebar from \"@/components/Sidebar\";\nimport { UserProvider } from \"@/app/settings/UserContext\";\nimport { DeveloperProvider } from \"@/app/contexts/DeveloperContext\";\nimport { ClientProvider } from \"@/app/contexts/ClientContext\";\nimport { createContext, useState, ReactNode, Suspense } from \"react\";\nimport { usePathname } from \"next/navigation\";\n\nconst geistSans = Geist({\n  variable: \"--font-geist-sans\",\n  subsets: [\"latin\"],\n});\n\nconst geistMono = Geist_Mono({\n  variable: \"--font-geist-mono\",\n  subsets: [\"latin\"],\n});\n\n// Context for page title and description\nexport const PageTitleContext = createContext<(title: { title: string; description: string }) => void>(() => {});\n\n// Context for page actions (buttons in the header bar)\nexport const PageActionsContext = createContext<(actions: ReactNode) => void>(() => {});\n\n// Context for Production Status sidebar toggle (shared between Navigation and Sidebar)\nexport const ProductionStatusContext = createContext<{\n  showServers: boolean;\n  setShowServers: (show: boolean) => void;\n  toggleServers: () => void;\n}>({\n  showServers: true,\n  setShowServers: () => {},\n  toggleServers: () => {},\n});\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  const pathname = usePathname();\n  const isStudioPage = pathname?.startsWith('/studio');\n\n  const [pageTitle, setPageTitle] = useState<{ title: string; description: string }>({\n    title: 'Dashboard',\n    description: 'Your daily overview'\n  });\n  const [pageActions, setPageActions] = useState<ReactNode>(null);\n  const [showServers, setShowServers] = useState(true);\n\n  return (\n    <html lang=\"en\" className=\"dark\">\n      <head>\n        <title>Kodiack Dashboard</title>\n        <meta name=\"description\" content=\"Kodiack Studios Control Center\" />\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n        <link rel=\"apple-touch-icon\" href=\"/favicon.ico\" />\n      </head>\n      <body className={`${geistSans.variable} ${geistMono.variable} antialiased`}>\n        <UserProvider>\n          <DeveloperProvider>\n            <ClientProvider>\n              <PageTitleContext.Provider value={setPageTitle}>\n                <PageActionsContext.Provider value={setPageActions}>\n                  <ProductionStatusContext.Provider value={{\n                  showServers,\n                  setShowServers,\n                  toggleServers: () => setShowServers(prev => !prev),\n                }}>\n                  <div className=\"h-screen flex flex-col overflow-hidden\">\n                    <Navigation pageTitle={pageTitle} pageActions={pageActions} />\n                    <div className=\"flex flex-1 min-h-0 overflow-hidden\">\n                      {/* Hide regular sidebar on Studio page - Studio has its own icon sidebar */}\n                      {!isStudioPage && (\n                        <Suspense fallback={<div className=\"w-64 bg-gray-900\" />}>\n                          <Sidebar />\n                        </Suspense>\n                      )}\n                      <main className={`flex-1 bg-gray-900 ${isStudioPage ? 'overflow-hidden' : 'overflow-auto px-8 py-4'}`}>\n                        {children}\n                      </main>\n                    </div>\n                  </div>\n                </ProductionStatusContext.Provider>\n                </PageActionsContext.Provider>\n              </PageTitleContext.Provider>\n            </ClientProvider>\n          </DeveloperProvider>\n        </UserProvider>\n      </body>\n    </html>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;;;;;;;;;;;AAuBO,MAAM,iCAAmB,IAAA,gQAAa,EAA0D,KAAO;AAGvG,MAAM,mCAAqB,IAAA,gQAAa,EAA+B,KAAO;AAG9E,MAAM,wCAA0B,IAAA,gQAAa,EAIjD;IACD,aAAa;IACb,gBAAgB,KAAO;IACvB,eAAe,KAAO;AACxB;AAEe,SAAS,WAAW,EACjC,QAAQ,EAGR;IACA,MAAM,WAAW,IAAA,2LAAW;IAC5B,MAAM,eAAe,UAAU,WAAW;IAE1C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2PAAQ,EAAyC;QACjF,OAAO;QACP,aAAa;IACf;IACA,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2PAAQ,EAAY;IAC1D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2PAAQ,EAAC;IAE/C,qBACE,wRAAC;QAAK,MAAK;QAAK,WAAU;;0BACxB,wRAAC;;kCACC,wRAAC;kCAAM;;;;;;kCACP,wRAAC;wBAAK,MAAK;wBAAc,SAAQ;;;;;;kCACjC,wRAAC;wBAAK,KAAI;wBAAO,MAAK;;;;;;kCACtB,wRAAC;wBAAK,KAAI;wBAAmB,MAAK;;;;;;;;;;;;0BAEpC,wRAAC;gBAAK,WAAW,GAAG,oJAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,yJAAS,CAAC,QAAQ,CAAC,YAAY,CAAC;0BACxE,cAAA,wRAAC,gMAAY;8BACX,cAAA,wRAAC,0MAAiB;kCAChB,cAAA,wRAAC,oMAAc;sCACb,cAAA,wRAAC,iBAAiB,QAAQ;gCAAC,OAAO;0CAChC,cAAA,wRAAC,mBAAmB,QAAQ;oCAAC,OAAO;8CAClC,cAAA,wRAAC,wBAAwB,QAAQ;wCAAC,OAAO;4CACzC;4CACA;4CACA,eAAe,IAAM,eAAe,CAAA,OAAQ,CAAC;wCAC/C;kDACE,cAAA,wRAAC;4CAAI,WAAU;;8DACb,wRAAC,qLAAU;oDAAC,WAAW;oDAAW,aAAa;;;;;;8DAC/C,wRAAC;oDAAI,WAAU;;wDAEZ,CAAC,8BACA,wRAAC,2PAAQ;4DAAC,wBAAU,wRAAC;gEAAI,WAAU;;;;;;sEACjC,cAAA,wRAAC,kLAAO;;;;;;;;;;sEAGZ,wRAAC;4DAAK,WAAW,CAAC,mBAAmB,EAAE,eAAe,oBAAoB,2BAA2B;sEAClG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAazB"}}]
}